{"version":3,"sources":["./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component.html","./app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.ts","./app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.html","./app/modules/purchase/components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component.ts","./app/modules/purchase/components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component.html","./app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.ts","./app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.html","./app/modules/purchase/components/pages/event/purchase-event-ticket/purchase-event-ticket.component.ts","./app/modules/purchase/components/pages/event/purchase-event-ticket/purchase-event-ticket.component.html","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.ts","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.html","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.ts","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.html","./app/modules/purchase/components/pages/purchase-confirm/purchase-confirm.component.ts","./app/modules/purchase/components/pages/purchase-confirm/purchase-confirm.component.html","./app/modules/purchase/components/pages/purchase-payment-reception/purchase-payment-reception.component.ts","./app/modules/purchase/components/pages/purchase-payment-reception/purchase-payment-reception.component.html","./app/modules/purchase/components/pages/purchase-payment/purchase-payment.component.ts","./app/modules/purchase/components/pages/purchase-payment/purchase-payment.component.html","./app/modules/purchase/components/pages/purchase-root/purchase-root.component.ts","./app/modules/purchase/components/pages/purchase-seat/purchase-seat.component.ts","./app/modules/purchase/components/pages/purchase-ticket/purchase-ticket.component.ts","./app/modules/purchase/components/parts/event/performances-confirm/performances-confirm.component.ts","./app/modules/purchase/components/parts/event/performances-confirm/performances-confirm.component.html","./app/modules/purchase/components/parts/performance/performance.component.ts","./app/modules/purchase/components/parts/performance/performance.component.html","./app/modules/purchase/components/parts/performances/performances.component.ts","./app/modules/purchase/components/parts/performances/performances.component.html","./app/modules/purchase/components/parts/purchase-info/purchase-info.component.ts","./app/modules/purchase/components/parts/purchase-info/purchase-info.component.html","./app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.ts","./app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.html","./app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.ts","./app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.html","./app/modules/purchase/components/parts/seat-info/seat-info.component.ts","./app/modules/purchase/components/parts/seat-info/seat-info.component.html","./app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.ts","./app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.html","./app/modules/purchase/purchase-routing.module.ts","./app/modules/purchase/purchase.module.ts"],"names":[],"mappings":"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","file":"modules-purchase-purchase-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule-event',\n    templateUrl: './purchase-cinema-schedule-event.component.html',\n    styleUrls: ['./purchase-cinema-schedule-event.component.scss']\n})\nexport class PurchaseCinemaScheduleEventComponent implements OnInit {\n\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n\n    constructor(\n        private router: Router,\n        private activatedRoute: ActivatedRoute,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private translate: TranslateService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate } = await this.actionService.purchase.getData();\n            if (scheduleDate === undefined\n                || theater === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            const workPerformedIdentifier = this.activatedRoute.snapshot.params.identifier;\n            const screeningEvents = await this.masterService.getSchedule({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                    workPerformedIdentifiers: [workPerformedIdentifier]\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').toDate()\n            });\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents });\n        } catch (error) {\n            this.router.navigate(['/error']);\n        }\n\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.chevre.event.screeningEvent.IEvent) {\n        if (screeningEvent.remainingAttendeeCapacity === undefined\n            || screeningEvent.remainingAttendeeCapacity === 0) {\n            return;\n        }\n        if (screeningEvent.offers === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket.ticketedSeat === undefined) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.cinema.schedule.alert.ticketedSeat')\n            });\n            return;\n        }\n        try {\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            if (screeningEvent.offers.seller === undefined\n                || screeningEvent.offers.seller.id === undefined) {\n                throw new Error('screeningEvent.offers.seller or screeningEvent.offers.seller.id undefined');\n            }\n            await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n    }\n\n}\n","<app-header>\n</app-header>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\">\n        <app-purchase-performances *ngFor=\"let group of screeningEventsGroup\" [screeningEventsGroup]=\"group\"\n            (select)=\"selectSchedule($event)\" class=\"mb-3\">\n        </app-purchase-performances>\n    </div>\n</div>\n<app-footer>\n    <div class=\"mr-auto\">\n        <button class=\"btn btn-danger\"\n            routerLink=\"/purchase/cinema\">{{ 'purchase.cinema.scheduleMovie.prev' | translate }}</button>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule-movie',\n    templateUrl: './purchase-cinema-schedule-movie.component.html',\n    styleUrls: ['./purchase-cinema-schedule-movie.component.scss']\n})\nexport class PurchaseCinemaScheduleMovieComponent implements OnInit {\n\n    public moment = moment;\n    public environment = getEnvironment();\n    public creativeWorks: factory.chevre.creativeWork.movie.ICreativeWork[];\n    public screeningEvents: factory.chevre.event.screeningEvent.IEvent[];\n\n    constructor(\n        private router: Router,\n        private masterService: MasterService,\n        private actionService: ActionService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.creativeWorks = [];\n        this.screeningEvents = [];\n        try {\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate } = await this.actionService.purchase.getData();\n            if (scheduleDate === undefined\n                || theater === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.screeningEvents = await this.masterService.getSchedule({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').toDate()\n            });\n            const creativeWorks = await this.masterService.searchMovies({\n                offers: {\n                    availableFrom: moment(scheduleDate).toDate(),\n                    // availableThrough: moment(scheduleDate).add(1, 'day').toDate()\n                },\n                // datePublishedFrom: moment(scheduleDate).toDate(),\n                datePublishedThrough: moment(scheduleDate).add(1, 'day').toDate()\n            });\n            this.creativeWorks = creativeWorks.filter(c =>\n                this.screeningEvents.find(s =>\n                    s.workPerformed?.identifier === c.identifier) !== undefined);\n        } catch (error) {\n            this.router.navigate(['/error']);\n        }\n\n    }\n\n}\n","<app-header>\n</app-header>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"container p-3\">\n        <div class=\"row\">\n            <div *ngFor=\"let movie of creativeWorks\" class=\"item mb-3\" [routerLink]=\"'/purchase/cinema/schedule/event/' + movie.identifier\">\n                <div class=\"image\"></div>\n                <p class=\"p-2 bg-dark text-white text-overflow-ellipsis text-small\">{{ movie.name }}</p>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"mr-auto\">\n        <button class=\"btn btn-danger\"\n            routerLink=\"/purchase/cinema\">{{ 'purchase.cinema.scheduleMovie.prev' | translate }}</button>\n    </div>\n</app-footer>","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { BsDatepickerContainerComponent, BsDatepickerDirective, BsLocaleService } from 'ngx-bootstrap/datepicker';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule',\n    templateUrl: './purchase-cinema-schedule.component.html',\n    styleUrls: ['./purchase-cinema-schedule.component.scss']\n})\nexport class PurchaseCinemaScheduleComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public error: Observable<string | null>;\n    public master: Observable<reducers.IMasterState>;\n    public user: Observable<reducers.IUserState>;\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public moment = moment;\n    public scheduleDate: Date;\n    public environment = getEnvironment();\n    private updateTimer: any;\n    @ViewChild('datepicker', { static: true }) private datepicker: BsDatepickerDirective;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private localeService: BsLocaleService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.master = this.store.pipe(select(reducers.getMaster));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.screeningEventsGroup = [];\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        clearTimeout(this.updateTimer);\n    }\n\n    /**\n     * \n     */\n    private update() {\n        if (this.updateTimer !== undefined) {\n            clearTimeout(this.updateTimer);\n        }\n        const time = 600000; // 10 * 60 * 1000\n        this.updateTimer = setTimeout(() => {\n            this.selectDate();\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public async selectDate(date?: Date | null) {\n        if (date !== undefined && date !== null) {\n            this.scheduleDate = date;\n        }\n        const user = await this.actionService.user.getData();\n        const theater = user.theater;\n        if (this.scheduleDate === undefined) {\n            this.scheduleDate = moment()\n                .add(this.environment.PURCHASE_SCHEDULE_DEFAULT_SELECTED_DATE, 'day')\n                .toDate();\n        }\n        const scheduleDate = moment(this.scheduleDate).format('YYYY-MM-DD');\n        if (theater === undefined) {\n            return;\n        }\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        try {\n            const screeningEvents = await this.masterService.getSchedule({\n                superEvent: { locationBranchCodes: [theater.branchCode] },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').toDate()\n            });\n            this.screeningEventsGroup =\n                Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents });\n            this.update();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.chevre.event.screeningEvent.IEvent) {\n        if (screeningEvent.remainingAttendeeCapacity === undefined\n            || screeningEvent.remainingAttendeeCapacity === 0) {\n            return;\n        }\n        if (screeningEvent.offers === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket.ticketedSeat === undefined) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.cinema.schedule.alert.ticketedSeat')\n            });\n            return;\n        }\n        this.actionService.purchase.unsettledDelete();\n        try {\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            if (screeningEvent.offers.seller === undefined\n                || screeningEvent.offers.seller.id === undefined) {\n                throw new Error('screeningEvent.offers.seller or screeningEvent.offers.seller.id undefined');\n            }\n            await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        const purchase = await this.actionService.purchase.getData();\n        const user = await this.actionService.user.getData();\n        if (purchase.seller === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n\n        if (purchase.authorizeSeatReservations.length > 0) {\n            try {\n                await this.actionService.purchase.cancelTemporaryReservations(purchase.authorizeSeatReservations);\n            } catch (error) {\n                console.error(error);\n                this.router.navigate(['/error']);\n                return;\n            }\n        }\n        try {\n            await this.actionService.purchase.startTransaction({\n                seller: purchase.seller,\n                pos: user.pos\n            });\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            const errorObject = JSON.parse(error);\n            if (errorObject.status === TOO_MANY_REQUESTS) {\n                this.router.navigate(['/congestion']);\n                return;\n            }\n            if (errorObject.status === BAD_REQUEST) {\n                this.router.navigate(['/maintenance']);\n                return;\n            }\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * Datepicker\n     */\n    public setDatePicker() {\n        this.user.subscribe((user) => {\n            this.localeService.use(user.language);\n        }).unsubscribe();\n    }\n\n    /**\n     * Datepicker\n     */\n    public toggleDatepicker() {\n        this.setDatePicker();\n        this.datepicker.toggle();\n    }\n\n    /**\n     * iOS bugfix2\n     */\n    public onShowPicker(container: BsDatepickerContainerComponent) {\n        Functions.Util.iOSDatepickerTapBugFix(container, [\n            this.datepicker\n        ]);\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.schedule.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.schedule.read' | translate\"></p>\n    <div class=\"mb-3\">\n        <div class=\"input-group\">\n            <input type=\"text\" placeholder=\"Datepicker\" class=\"form-control\" #datepicker=\"bsDatepicker\" bsDatepicker\n                [(ngModel)]=\"scheduleDate\"\n                [bsConfig]=\"{ dateInputFormat: 'YYYY/MM/DD', adaptivePosition: true, showWeekNumbers: false, minDate: moment().toDate() }\"\n                (bsValueChange)=\"selectDate($event)\" readonly (click)=\"setDatePicker()\"\n                (onShown)=\"onShowPicker($event)\">\n            <div class=\"input-group-append pointer\" (click)=\"toggleDatepicker()\">\n                <span class=\"input-group-text\"><i class=\"fas fa-caret-down\"></i></span>\n            </div>\n        </div>\n    </div>\n    <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary text-large mb-3\">\n        {{ (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)' }}\n    </p>\n    <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\"\n        [innerHTML]=\"'purchase.cinema.schedule.notfound' | translate\"></p>\n    <app-purchase-performances *ngFor=\"let group of screeningEventsGroup\"\n        [screeningEventsGroup]=\"group\" (select)=\"selectSchedule($event)\" class=\"mb-3\">\n    </app-purchase-performances>\n</div>","import { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-cinema-seat',\n    templateUrl: './purchase-cinema-seat.component.html',\n    styleUrls: ['./purchase-cinema-seat.component.scss']\n})\nexport class PurchaseCinemaSeatComponent extends PurchaseSeatComponent {\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.seat.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.seat.read' | translate\"></p>\n\n    <div class=\"row\">\n        <div class=\"col-lg-9\">\n            <app-screen *ngIf=\"(user | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" \n                class=\"mb-3\"\n                [theaterCode]=\"(user | async)?.theater.branchCode\"\n                [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                [reservations]=\"(purchase | async)?.reservations\"\n                [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\" (select)=\"selectSeat($event)\">\n            </app-screen>\n            <app-seat-info class=\"mb-4\"></app-seat-info>\n            <div *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                <div class=\"d-flex align-items-center\">\n                    <p class=\"mr-2\">{{ 'purchase.cinema.seat.openSeating' | translate }}</p>\n                    <select class=\"form-control d-inline-block w-auto\" (change)=\"selectOpenSeating($event)\"\n                        [ngModel]=\"(purchase | async)?.reservations.length\">\n                        <option value=\"0\">0</option>\n                        <option *ngFor=\"let value of remainingAttendeeCapacityValue({\n                                screeningEvent: (purchase | async)?.screeningEvent,\n                                screeningEventSeats: screeningEventSeats,\n                                authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n                            })\" [value]=\"value\">{{ value }}</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-lg-3\">\n            <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n        </div>\n    </div>\n\n    <div *ngIf=\"environment.PURCHASE_TERMS\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.seat.terms' | translate }}</h2>\n        <div class=\"mb-4\">\n            <app-purchase-terms [language]=\"(user | async)?.language\"\n                [screeningEvent]=\"(purchase | async)?.screeningEvent\"></app-purchase-terms>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button *ngIf=\"!environment.PURCHASE_TERMS\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"onSubmit()\">{{ 'purchase.cinema.seat.next' | translate }}</button>\n        <button *ngIf=\"environment.PURCHASE_TERMS\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"onSubmit()\">{{ 'purchase.cinema.seat.consent' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/cinema/schedule\">{{ 'purchase.cinema.seat.prev' | translate }}</button>\n    </div>\n\n</div>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-cinema-ticket',\n    templateUrl: './purchase-cinema-ticket.component.html',\n    styleUrls: ['./purchase-cinema-ticket.component.scss']\n})\nexport class PurchaseCinemaTicketComponent extends PurchaseTicketComponent {\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.cinema.ticket.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.cinema.ticket.read' | translate\"></p>\n\n    <div *ngIf=\"(purchase | async)?.isUsedMovieTicket\" class=\"mb-4\">\n        <div class=\"bg-white p-3 d-md-flex align-items-center movieticket\">\n            <p class=\"mb-2 mb-md-0\">{{ 'purchase.cinema.ticket.mvtk' | translate }}</p>\n            <div>\n                <button type=\"button\" (click)=\"openMovieTicket()\"\n                    class=\"btn btn-block bg-white border border-gray py-3\">\n                    <img src=\"/assets/images/mvtk.svg\" height=\"24\" alt=\"\">\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"mb-4\">\n        <ul class=\"d-flex flex-wrap\">\n            <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                <div class=\"bg-white p-3 m-2\">\n                    <p class=\"mb-2 font-weight-bold text-large\">\n                        <span class=\"mr-2\">{{ 'common.seat' | translate }}</span>{{ reservation.seat.seatNumber }}\n                    </p>\n                    <div>\n                        <button *ngIf=\"reservation.ticket === undefined\" type=\"button\" (click)=\"openTicketList(reservation)\"\n                            class=\"btn btn-primary btn-block py-3\">{{ 'purchase.cinema.ticket.unselected' | translate }}</button>\n                        <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\" (click)=\"openTicketList(reservation)\"\n                            class=\"btn btn-block border border-primary text-primary bg-white py-3\">\n                            <div class=\"d-flex justify-content-between align-items-center\" *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}</p>\n                                <p class=\"w-50 text-right\">\n                                    <span>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</span><!--\n                                    --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value } }}</span>\n                                </p>\n                            </div>\n                            <div class=\"d-flex justify-content-between align-items-center\" *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                <p class=\"w-50 text-left\">{{ addOn.priceSpecification.name | changeLanguage }}</p>\n                                <p class=\"w-50 text-right\">\n                                    <span>{{ addOn.priceSpecification.price | currency : addOn.priceSpecification.priceCurrency }}</span><!--\n                                    --><span *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                </p>\n                            </div>\n                            <div>\n                                <!-- <p *ngIf=\"reservation.ticket.ticketOffer.description\" class=\"text-small text-left\">\n                                    {{ reservation.ticket.ticketOffer.description | changeLanguage }}\n                                </p> -->\n                                <p *ngIf=\"reservation.ticket.movieTicket\" class=\"text-small text-left\">\n                                    {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }} {{ reservation.ticket.movieTicket.identifier }}\n                                </p>\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n\n    <div class=\"mb-4 additional-ticket-text\">\n        <p>{{ 'common.additionalTicketText' | translate }}</p>\n        <textarea [(ngModel)]=\"additionalTicketText\" class=\"py-1 px-2\"></textarea>\n    </div>\n\n    <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"onSubmit()\">{{ 'purchase.cinema.ticket.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/cinema/seat\">{{ 'purchase.cinema.ticket.prev' | translate }}</button>\n    </div>\n\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport * as moment from 'moment';\nimport { ActionService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-top',\n    templateUrl: './purchase-cinema-top.component.html',\n    styleUrls: ['./purchase-cinema-top.component.scss']\n})\nexport class PurchaseCinemaTopComponent implements OnInit {\n\n    constructor(\n        private actionService: ActionService,\n        private router: Router,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n    }\n\n    /**\n     * \n     */\n    public searchMovie() {\n        const scheduleDate = moment().format('YYYY-MM-DD');\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        this.router.navigate(['/purchase/cinema/schedule/movie']);\n    }\n\n}\n","<div class=\"h-100 d-flex align-items-center px-4\">\n    <div class=\"container px-0\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-4\">\n                <button type=\"button\" class=\"btn btn-primary btn-block py-4\" (click)=\"searchMovie()\">\n                    {{ 'purchase.cinema.top.movie' | translate }}\n                </button>\n            </div>\n            <div class=\"col-4\">\n                <button type=\"button\" class=\"btn btn-primary btn-block py-4\">\n                    {{ 'purchase.cinema.top.time' | translate }}\n                </button>\n            </div>\n            <div class=\"col-4\">\n                <button type=\"button\" class=\"btn btn-primary btn-block py-4\">\n                    {{ 'purchase.cinema.top.inquiry' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { BsDatepickerContainerComponent, BsDatepickerDirective, BsLocaleService } from 'ngx-bootstrap/datepicker';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-event-schedule',\n    templateUrl: './purchase-event-schedule.component.html',\n    styleUrls: ['./purchase-event-schedule.component.scss']\n})\nexport class PurchaseEventScheduleComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public master: Observable<reducers.IMasterState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public screeningEvents: factory.chevre.event.screeningEvent.IEvent[];\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public moment: typeof moment = moment;\n    private updateTimer: any;\n    public scheduleDate: Date;\n    public environment = getEnvironment();\n    @ViewChild('datepicker', { static: true }) private datepicker: BsDatepickerDirective;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private localeService: BsLocaleService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.master = this.store.pipe(select(reducers.getMaster));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.screeningEventsGroup = [];\n        if (this.scheduleDate === undefined) {\n            this.scheduleDate = moment()\n                .add(this.environment.PURCHASE_SCHEDULE_DEFAULT_SELECTED_DATE, 'day')\n                .toDate();\n        }\n        try {\n            if ((await this.actionService.purchase.getData()).transaction === undefined) {\n                return;\n            }\n            await this.actionService.purchase.cancelTransaction();\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        clearTimeout(this.updateTimer);\n    }\n\n    /**\n     * \n     */\n    private update() {\n        if (this.updateTimer !== undefined) {\n            clearTimeout(this.updateTimer);\n        }\n        const time = 600000; // 10 * 60 * 1000\n        this.updateTimer = setTimeout(() => {\n            this.selectDate();\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public async selectDate(date?: Date | null) {\n        if (date !== undefined && date !== null) {\n            this.scheduleDate = date;\n        }\n        try {\n            const user = await this.actionService.user.getData();\n            const theater = user.theater;\n            if (theater === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            if (this.scheduleDate === undefined || this.scheduleDate === null) {\n                this.scheduleDate = moment()\n                    .add(this.environment.PURCHASE_SCHEDULE_DEFAULT_SELECTED_DATE, 'day')\n                    .toDate();\n            }\n            const scheduleDate = moment(this.scheduleDate).format('YYYY-MM-DD');\n            this.actionService.purchase.selectScheduleDate(scheduleDate);\n            this.screeningEvents = await this.masterService.getSchedule({\n                superEvent: { locationBranchCodes: [theater.branchCode] },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').toDate()\n            });\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents: this.screeningEvents });\n            this.update();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        try {\n            const user = await this.actionService.user.getData();\n            if (user.theater === undefined) {\n                throw new Error('user.theater === undefined');\n            }\n            const screeningEvent = this.screeningEvents\n                .find(s => s.offers !== undefined && s.offers.seller !== undefined && s.offers.seller.id !== undefined);\n            if (screeningEvent === undefined\n                || screeningEvent.offers === undefined\n                || screeningEvent.offers.seller === undefined\n                || screeningEvent.offers.seller.id === undefined) {\n                throw new Error('screeningEvent.offers.seller === undefined');\n            }\n            await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const user = await this.actionService.user.getData();\n            await this.actionService.purchase.startTransaction({\n                seller: <factory.chevre.seller.ISeller>purchase.seller,\n                pos: user.pos\n            });\n            this.router.navigate(['/purchase/event/ticket']);\n        } catch (error) {\n            const errorObject = JSON.parse(error);\n            if (errorObject.status === TOO_MANY_REQUESTS) {\n                this.router.navigate(['/congestion']);\n                return;\n            }\n            if (errorObject.status === BAD_REQUEST) {\n                this.router.navigate(['/maintenance']);\n                return;\n            }\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * Datepicker\n     */\n    public setDatePicker() {\n        this.user.subscribe((user) => {\n            this.localeService.use(user.language);\n        }).unsubscribe();\n    }\n\n    /**\n     * Datepicker\n     */\n    public toggleDatepicker() {\n        this.setDatePicker();\n        this.datepicker.toggle();\n    }\n\n    /**\n     * iOS bugfix2\n     */\n    public onShowPicker(container: BsDatepickerContainerComponent) {\n        Functions.Util.iOSDatepickerTapBugFix(container, [\n            this.datepicker\n        ]);\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 pt-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.schedule.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.schedule.read' | translate\"></p>\n</div>\n<div class=\"contents-width mx-auto p-3\">\n    <div class=\"mb-3\">\n        <div class=\"input-group\">\n            <input type=\"text\" placeholder=\"Datepicker\" class=\"form-control\" #datepicker=\"bsDatepicker\" bsDatepicker\n                [(ngModel)]=\"scheduleDate\"\n                [bsConfig]=\"{ dateInputFormat: 'YYYY/MM/DD', adaptivePosition: true, showWeekNumbers: false, minDate: moment().toDate() }\"\n                (bsValueChange)=\"selectDate($event)\" readonly (click)=\"setDatePicker()\"\n                (onShown)=\"onShowPicker($event)\">\n            <div class=\"input-group-append pointer\" (click)=\"toggleDatepicker()\">\n                <span class=\"input-group-text\"><i class=\"fas fa-caret-down\"></i></span>\n            </div>\n        </div>\n    </div>\n    <div class=\"mb-4\">\n        <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary text-large mb-3\">\n            {{ 'purchase.event.schedule.selectedDate' | translate: {value: (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)'} }}\n        </p>\n        <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\"\n            [innerHTML]=\"'purchase.event.schedule.notfound' | translate\"></p>\n        <app-purchase-event-performances-confirm *ngFor=\"let group of screeningEventsGroup\"\n            [screeningEventsGroup]=\"group\" [readonly]=\"true\" class=\"mb-3\">\n        </app-purchase-event-performances-confirm>\n    </div>\n\n    <div *ngIf=\"environment.PURCHASE_TERMS\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.schedule.terms' | translate }}</h2>\n        <div class=\"mb-4\">\n            <app-purchase-terms [language]=\"(user | async)?.language\"></app-purchase-terms>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button *ngIf=\"!environment.PURCHASE_TERMS\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"screeningEventsGroup.length === 0 || (isLoading | async)\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.schedule.next' | translate }}</button>\n        <button *ngIf=\"environment.PURCHASE_TERMS\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            [disabled]=\"screeningEventsGroup.length === 0 || (isLoading | async)\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.schedule.consent' | translate }}</button>\n        <!-- <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/event/schedule\">{{ 'purchase.event.schedule.prev' | translate }}</button> -->\n    </div>\n</div>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-event-seat-ticket',\n    templateUrl: './purchase-event-seat-ticket.component.html',\n    styleUrls: ['./purchase-event-seat-ticket.component.scss']\n})\nexport class PurchaseEventSeatTicketComponent extends PurchaseTicketComponent {\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.seatTicket.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.seatTicket.read' | translate\"></p>\n\n    <div *ngIf=\"(purchase | async)?.isUsedMovieTicket\" class=\"mb-4\">\n        <div class=\"bg-white p-3 d-md-flex align-items-center movieticket\">\n            <p class=\"mb-2 mb-md-0\">{{ 'purchase.event.seatTicket.mvtk' | translate }}</p>\n            <div>\n                <button type=\"button\" (click)=\"openMovieTicket()\"\n                    class=\"btn btn-block bg-white border border-gray py-3\">\n                    <img src=\"/assets/images/mvtk.svg\" height=\"24\" alt=\"\">\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"mb-4\">\n        <ul class=\"d-flex flex-wrap\">\n            <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                <div class=\"bg-white p-3 m-2\">\n                    <p class=\"mb-2 font-weight-bold text-large\">\n                        <span class=\"mr-2\">{{ 'common.seat' | translate }}</span>{{ reservation.seat.seatNumber }}\n                    </p>\n                    <div>\n                        <button *ngIf=\"reservation.ticket === undefined\" type=\"button\" (click)=\"openTicketList(reservation)\"\n                            class=\"btn btn-primary btn-block py-3\">{{ 'purchase.event.seatTicket.unselected' | translate }}</button>\n                        <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\" (click)=\"openTicketList(reservation)\"\n                            class=\"btn btn-block border border-primary text-primary bg-white py-3\">\n                            <div class=\"d-flex justify-content-between align-items-center\" *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}</p>\n                                <p class=\"w-50 text-right\">\n                                    <span>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</span><!--\n                                    --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value } }}</span>\n                                </p>\n                            </div>\n                            <div class=\"d-flex justify-content-between align-items-center\" *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                <p class=\"w-50 text-left\">{{ addOn.priceSpecification.name | changeLanguage }}</p>\n                                <p class=\"w-50 text-right\">\n                                    <span>{{ addOn.priceSpecification.price | currency : addOn.priceSpecification.priceCurrency }}</span><!--\n                                    --><span *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                </p>\n                            </div>\n                            <div>\n                                <!-- <p *ngIf=\"reservation.ticket.ticketOffer.description\" class=\"text-small text-left\">\n                                    {{ reservation.ticket.ticketOffer.description | changeLanguage }}\n                                </p> -->\n                                <p *ngIf=\"reservation.ticket.movieTicket\" class=\"text-small text-left\">\n                                    {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }} {{ reservation.ticket.movieTicket.identifier }}\n                                </p>\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n\n    <div class=\"mb-4 additional-ticket-text\">\n        <p>{{ 'common.additionalTicketText' | translate }}</p>\n        <textarea [(ngModel)]=\"additionalTicketText\" class=\"py-1 px-2\"></textarea>\n    </div>\n\n    <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.seatTicket.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/event/seat\">{{ 'purchase.event.seatTicket.prev' | translate }}</button>\n    </div>\n\n\n</div>","\nimport { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-event-seat',\n    templateUrl: './purchase-event-seat.component.html',\n    styleUrls: ['./purchase-event-seat.component.scss']\n})\nexport class PurchaseEventSeatComponent extends PurchaseSeatComponent {\n    public async prev() {\n        try {\n            const authorizeSeatReservation = (await this.actionService.purchase.getData()).authorizeSeatReservation;\n            if (authorizeSeatReservation !== undefined) {\n                await this.actionService.purchase.cancelTemporaryReservations([authorizeSeatReservation]);\n            }\n            this.router.navigate(['/purchase/event/ticket']);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.seat.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.seat.read' | translate\"></p>\n\n    <div class=\"row\">\n        <div class=\"col-lg-9\">\n            <app-screen *ngIf=\"(user | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\"\n                class=\"mb-3\"\n                [theaterCode]=\"(user | async)?.theater.branchCode\"\n                [screenCode]=\"(purchase | async)?.screen.branchCode\"\n                [screeningEventSeats]=\"screeningEventSeats\"\n                [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                [reservations]=\"(purchase | async)?.reservations\"\n                [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\" (select)=\"selectSeat($event)\">\n            </app-screen>\n            <app-seat-info class=\"mb-4\"></app-seat-info>\n            <div *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                <div class=\"d-flex align-items-center\">\n                    <p class=\"mr-2\">{{ 'purchase.event.seat.openSeating' | translate }}</p>\n                    <select class=\"form-control d-inline-block w-auto\" (change)=\"selectOpenSeating($event)\"\n                        [ngModel]=\"(purchase | async)?.reservations.length\">\n                        <option value=\"0\">0</option>\n                        <option\n                            *ngFor=\"let value of remainingAttendeeCapacityValue({\n                                screeningEvent: (purchase | async)?.screeningEvent,\n                                screeningEventSeats: screeningEventSeats,\n                                authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n                            })\"\n                            [value]=\"value\">{{ value }}</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-lg-3\">\n            <app-purchase-info class=\"mb-4\" [purchase]=\"purchase | async\"></app-purchase-info>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.seat.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\" (click)=\"prev()\">{{ 'purchase.event.seat.prev' | translate }}</button>\n    </div>\n\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\nimport {\n    PurchaseEventTicketModalComponent\n} from '../../../../../shared/components/parts/purchase/event/ticket-modal/ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-event-ticket',\n    templateUrl: './purchase-event-ticket.component.html',\n    styleUrls: ['./purchase-event-ticket.component.scss']\n})\nexport class PurchaseEventTicketComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public master: Observable<reducers.IMasterState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public moment: typeof moment = moment;\n    public environment = getEnvironment();\n    private updateTimer: any;\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private modal: BsModalService\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.master = this.store.pipe(select(reducers.getMaster));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.actionService.purchase.unsettledDelete();\n        this.screeningEventsGroup = [];\n        this.purchase.subscribe((purchase) => {\n            if (purchase.transaction === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.getSchedule();\n        }).unsubscribe();\n    }\n\n    public ngOnDestroy() {\n        clearTimeout(this.updateTimer);\n    }\n\n    /**\n     * \n     */\n    private update() {\n        if (this.updateTimer !== undefined) {\n            clearTimeout(this.updateTimer);\n        }\n        const time = 600000; // 10 * 60 * 1000\n        this.updateTimer = setTimeout(() => {\n            this.getSchedule();\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public async getSchedule() {\n        try {\n            const user = await this.actionService.user.getData();\n            const purchase = await this.actionService.purchase.getData();\n            const theater = user.theater;\n            const scheduleDate = purchase.scheduleDate;\n            if (theater === undefined || scheduleDate === undefined) {\n                throw new Error('theater === undefined || scheduleDate === undefined').message;\n            }\n            const screeningEvents = await this.masterService.getSchedule({\n                superEvent: { locationBranchCodes: [theater.branchCode] },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').toDate()\n            });\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents });\n            this.update();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.event.screeningEvent.IEvent) {\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.seller === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        if (purchase.authorizeSeatReservations.length > 0\n            && Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) === 1) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.ticket.alert.cart')\n            });\n            return;\n        }\n        try {\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.getTicketList({ seller: purchase.seller });\n            await this.actionService.purchase.getScreen({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: { $eq: screeningEvent.superEvent.location.branchCode }\n                }\n            });\n            this.openTicketList();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: ''\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    private async openTicketList() {\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEvent = purchase.screeningEvent;\n        const screeningEventTicketOffers = purchase.screeningEventTicketOffers;\n        const screeningEventSeats = this.screeningEventSeats;\n        const screen = purchase.screen;\n        if (screeningEvent === undefined || screen === undefined) {\n            return;\n        }\n        const performance = new Models.Purchase.Performance(screeningEvent);\n        if (!performance.isInfinitetock()\n            && !screen.openSeatingAllowed\n            && performance.isTicketedSeat()) {\n            // \n            this.router.navigate(['/purchase/event/seat']);\n            return;\n        }\n        // \n        this.modal.show(PurchaseEventTicketModalComponent, {\n            class: 'modal-dialog-centered modal-lg',\n            backdrop: 'static',\n            initialState: {\n                screeningEventTicketOffers,\n                screeningEventSeats,\n                screeningEvent,\n                cb: (params: {\n                    reservations: Models.Purchase.Reservation.IReservation[];\n                    additionalTicketText?: string;\n                }) => {\n                    this.selectTicket(params);\n                }\n            }\n        });\n    }\n\n    /**\n     * \n     */\n    private async selectTicket(params: {\n        reservations: Models.Purchase.Reservation.IReservation[];\n        additionalTicketText?: string;\n    }) {\n        const reservations = params.reservations;\n        const additionalTicketText = params.additionalTicketText;\n        if (reservations.length > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.ticket.alert.limit',\n                    { value: this.environment.PURCHASE_ITEM_MAX_LENGTH }\n                )\n            });\n            return;\n        }\n        try {\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.screeningEvent !== undefined\n                && new Models.Purchase.Performance(purchase.screeningEvent).isTicketedSeat()) {\n                const remainingSeatLength = Functions.Purchase.getRemainingSeatLength({\n                    screeningEventSeats: this.screeningEventSeats,\n                    screeningEvent: purchase.screeningEvent\n                });\n                if (remainingSeatLength < reservations.length) {\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant('purchase.event.ticket.alert.getScreeningEventSeats')\n                    });\n                    return;\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: ''\n            });\n        }\n\n        try {\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats: this.screeningEventSeats\n            });\n            this.utilService.openAlert({\n                title: this.translate.instant('common.complete'),\n                body: this.translate.instant('purchase.event.ticket.success.temporaryReservation')\n            });\n            this.actionService.purchase.unsettledDelete();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant('purchase.event.ticket.alert.temporaryReservation')}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${error}</code>\n                </div>`\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const purchase = await this.actionService.purchase.getData();\n        const authorizeSeatReservations = purchase.authorizeSeatReservations;\n        // \n        if (authorizeSeatReservations.length === 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.ticket.alert.unselected')\n            });\n            return;\n        }\n        // \n        let itemCount = 0;\n        authorizeSeatReservations.forEach(a => itemCount += a.object.acceptedOffer.length);\n        if (itemCount > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.ticket.alert.limit',\n                    { value: Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) }\n                )\n            });\n            return;\n        }\n        this.router.navigate(['/purchase/confirm']);\n    }\n\n    /**\n     * \n     */\n    public removeItem(\n        authorizeSeatReservation: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>\n    ) {\n        this.utilService.openConfirm({\n            title: this.translate.instant('common.confirm'),\n            body: this.translate.instant('purchase.event.cart.confirm.cancel'),\n            cb: async () => {\n                try {\n                    const authorizeSeatReservations = [authorizeSeatReservation];\n                    await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n                } catch (error) {\n                    console.error(error);\n                    this.router.navigate(['/error']);\n                }\n            }\n        });\n    }\n\n}\n\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.ticket.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.event.ticket.read' | translate\"></p>\n\n    <div class=\"mb-4\">\n        <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary text-large mb-3\">\n            {{ (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)' }}\n        </p>\n        <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\">\n            {{ 'purchase.event.ticket.notfound' | translate }}\n        </p>\n        <app-purchase-performances *ngFor=\"let group of screeningEventsGroup\"\n            [screeningEventsGroup]=\"group\" (select)=\"selectSchedule($event)\" class=\"mb-3\">\n        </app-purchase-performances>\n    </div>\n\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.event.cart.title' | translate }}</h2>\n        <div *ngIf=\"(purchase | async)?.authorizeSeatReservations.length === 0\">\n            <p class=\"text-md-center\">{{ 'purchase.event.cart.notfound' | translate }}</p>\n        </div>\n        <div *ngFor=\"let authorizeSeatReservation of (purchase | async)?.authorizeSeatReservations\"\n            class=\"mb-4 bg-white p-3 position-relative\">\n            <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"removeItem(authorizeSeatReservation)\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <div class=\"mb-3\">\n                <div class=\"mb-1\">\n                    <p class=\"font-weight-bold text-large pr-3\">\n                        {{ authorizeSeatReservation.object.event.name | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"authorizeSeatReservation.object.event.superEvent.headline && (authorizeSeatReservation.object.event.superEvent.headline | changeLanguage)\">\n                        {{ authorizeSeatReservation.object.event.superEvent.headline | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"authorizeSeatReservation.object.event.superEvent.description && (authorizeSeatReservation.object.event.superEvent.description | changeLanguage)\">{{\n                        authorizeSeatReservation.object.event.superEvent.description | changeLanguage }}</p>\n                </div>\n                <p class=\"mb-1\">\n                    {{ authorizeSeatReservation.object.event.startDate | formatDate: 'MM/DD(ddd) HH:mm' }}-{{ authorizeSeatReservation.object.event.endDate | formatDate: 'HH:mm' }}\n                </p>\n                <p class=\"text-small mb-1\">\n                    <span class=\"theater-name\">\n                        {{ authorizeSeatReservation.object.event.superEvent.location.name | changeLanguage }}\n                    </span>\n                    <span class=\"screen-name\">\n                        &nbsp;/&nbsp;<span *ngIf=\"authorizeSeatReservation.object.event.location.address | changeLanguage\" class=\"mr-2\">{{ authorizeSeatReservation.object.event.location.address | changeLanguage }}</span>{{ authorizeSeatReservation.object.event.location.name | changeLanguage }}\n                    </span>\n                    <span\n                        *ngIf=\"authorizeSeatReservation.object.event.workPerformed?.duration && moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() > 0\">\n                        &nbsp;/&nbsp;<span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}\n                    </span>\n                </p>\n                <!-- <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3 btn-sm ml-auto p-0\"\n                    (click)=\"removeItem(authorizeSeatReservation)\">{{ 'common.remove' | translate }}</button> -->\n            </div>\n            <hr class=\"mb-3\">\n\n            <app-item-list [authorizeSeatReservations]=\"authorizeSeatReservation?.result?.responseBody.object.reservations\"></app-item-list>\n            \n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\" [disabled]=\"isLoading | async\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            (click)=\"onSubmit()\">{{ 'purchase.event.cart.next' | translate }}</button>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/event/schedule\">{{ 'purchase.event.ticket.prev' | translate }}</button>\n    </div>\n</div>","import { AfterViewChecked, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-base',\n    templateUrl: './purchase-base.component.html',\n    styleUrls: ['./purchase-base.component.scss']\n})\nexport class PurchaseBaseComponent implements OnInit, AfterViewChecked, OnDestroy {\n    public isLoading: Observable<boolean>;\n    public process: Observable<string>;\n    public purchase: Observable<reducers.IPurchaseState>;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private changeDetectorRef: ChangeDetectorRef\n    ) { }\n\n    public ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.process = this.store.pipe(select(reducers.getProcess));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n    }\n\n    public ngAfterViewChecked() {\n        this.changeDetectorRef.detectChanges();\n    }\n\n    public ngOnDestroy() {\n        this.isLoading.subscribe().unsubscribe();\n        this.process.subscribe().unsubscribe();\n        this.purchase.subscribe().unsubscribe();\n    }\n\n}\n","<app-transaction-remaining-time *ngIf=\"(purchase | async)?.transaction\" [transaction]=\"(purchase | async)?.transaction\">\n</app-transaction-remaining-time>\n<router-outlet></router-outlet>\n\n<app-loading [isLoading]=\"isLoading | async\" [process]=\"process | async\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, EpsonEPOSService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-complete',\n    templateUrl: './purchase-complete.component.html',\n    styleUrls: ['./purchase-complete.component.scss']\n})\nexport class PurchaseCompleteComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public error: Observable<string | null>;\n    public moment: typeof moment = moment;\n    public eventOrders: Functions.Purchase.IEventOrder[];\n    public environment = getEnvironment();\n    public qrcode?: string;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public getCustomPaymentMethodTypeName = Functions.Purchase.getCustomPaymentMethodTypeName;\n    public connectionType = Models.Util.Printer.ConnectionType;\n    public createOrderLink = Functions.Order.createOrderLink;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private epsonEPOSService: EpsonEPOSService,\n    ) { }\n\n    public async ngOnInit() {\n        this.eventOrders = [];\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.error = this.store.pipe(select(reducers.getError));\n        let order: factory.order.IOrder;\n        try {\n            const purchaseData = await this.actionService.purchase.getData();\n            if (purchaseData.order === undefined) {\n                throw new Error('order not found').message;\n            }\n            order = purchaseData.order;\n            this.eventOrders = Functions.Purchase.order2EventOrders({ order });\n            this.print();\n        } catch (error) {\n            this.router.navigate(['/error']);\n            return;\n        }\n    }\n\n    /**\n     * \n     */\n    public async print() {\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const user = await this.actionService.user.getData();\n            if (purchase.order === undefined\n                || user.printer === undefined) {\n                throw new Error('printer undefined');\n            }\n            const orders = [purchase.order];\n            const pos = user.pos;\n            const printer = user.printer;\n            await this.actionService.order.print({ orders, pos, printer });\n        } catch (error) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant('purchase.complete.alert.print')}</p>\n                    <div class=\"p-3 bg-light-gray select-text\">\n                    <code>${error}</code>\n                </div>`\n            });\n        }\n    }\n\n    public async test() {\n        try {\n            // \n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.order?.paymentMethods.find(p => p.typeOf === this.paymentMethodType.Cash) !== undefined) {\n                // \n                const paymentMethod = purchase.order?.paymentMethods.find(p => p.typeOf === this.paymentMethodType.Cash);\n                if (paymentMethod === undefined\n                    || paymentMethod.totalPaymentDue?.value === undefined) {\n                    return;\n                }\n                const user = await this.actionService.user.getData();\n                if (user.payment === undefined\n                    || user.payment.cash === undefined) {\n                    throw new Error('payment undefined');\n                }\n                await this.epsonEPOSService.cashchanger.init({ ipAddress: user.payment.cash.ipAddress });\n                await this.epsonEPOSService.cashchanger.dispenseChange({ amount: paymentMethod.totalPaymentDue.value });\n                await this.epsonEPOSService.cashchanger.disconnect();\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.complete.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.complete.read' | translate\"></p>\n\n        <div class=\"mb-4 px-3 py-2 bg-white\">\n            <div class=\"row align-items-center\">\n                <p class=\"col-4\">\n                    {{ 'common.confirmationNumber' | translate }}</p>\n                <p class=\"col-8 text-large text-info font-weight-bold\">\n                    {{ (purchase | async)?.order.confirmationNumber }}\n                </p>\n            </div>\n        </div>\n\n        <div *ngIf=\"qrcode\" class=\"mb-4 px-3 py-2 bg-white\">\n            <div class=\"row align-items-center\">\n                <p class=\"col-md-4 mb-2 mb-md-0\">{{ 'purchase.complete.cooperationQRCode' | translate }}</p>\n                <p class=\"col-md-8 text-large text-center text-md-left\">\n                    <img class=\"border\" [src]=\"qrcode\" alt=\"\">\n                </p>\n            </div>\n        </div>\n\n        <div *ngFor=\"let eventOrder of eventOrders\" class=\"mb-4 bg-white p-3\">\n            <div class=\"mb-3\">\n                <div class=\"mb-1\">\n                    <p class=\"font-weight-bold text-large\">{{ eventOrder.event.name | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"eventOrder.event.superEvent.headline && (eventOrder.event.superEvent.headline | changeLanguage)\">\n                        {{ eventOrder.event.superEvent.headline | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"eventOrder.event.superEvent.description && (eventOrder.event.superEvent.description | changeLanguage)\">{{\n                        eventOrder.event.superEvent.description | changeLanguage }}</p>\n                </div>\n                <p class=\"mb-1\">\n                    {{ eventOrder.event.startDate | formatDate: 'MM/DD(ddd) HH:mm' }}-{{ eventOrder.event.endDate | formatDate: 'HH:mm' }}\n                </p>\n                <p class=\"text-small mb-1\">\n                    <span class=\"theater-name\">{{ eventOrder.event.superEvent.location.name | changeLanguage }}</span>\n                    <span class=\"screen-name\">&nbsp;/&nbsp;<span *ngIf=\"eventOrder.event.location.address | changeLanguage\"\n                            class=\"mr-2\">{{ eventOrder.event.location.address | changeLanguage }}</span>{{ eventOrder.event.location.name | changeLanguage }}</span>\n                    <span\n                        *ngIf=\"eventOrder.event.workPerformed?.duration && moment.duration(eventOrder.event.workPerformed?.duration).asMinutes() > 0\">\n                        &nbsp;/&nbsp;<span\n                            class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(eventOrder.event.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}\n                    </span>\n                </p>\n            </div>\n            <hr class=\"mb-3\">\n            <app-item-list [acceptedOffers]=\"eventOrder.data\"></app-item-list>\n\n        </div>\n\n        <div class=\"mb-4 px-3 bg-white\">\n\n            <div class=\"py-3 border-bottom border-gray\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.paymentMethod' | translate }}</p>\n                    <div class=\"col-md-8\">\n                        <p *ngFor=\"let paymentMethod of (purchase | async)?.order.paymentMethods\">\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.Cash\">{{ 'common.paymentMethodType.cash' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.Account\">{{ 'common.paymentMethodType.account' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.CreditCard\">{{ 'common.paymentMethodType.creditCard' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.EMoney\">{{ 'common.paymentMethodType.eMoney' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.MovieTicket\">{{ 'common.paymentMethodType.movieTicket' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.Others \n                                && paymentMethod.name === 'Others'\">{{ 'common.paymentMethodType.others' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.Others \n                                && paymentMethod.name === 'RegiGrow'\">{{ 'common.paymentMethodType.regiGrow' | translate }}</span>\n                            <span\n                                *ngIf=\"paymentMethod.typeOf === paymentMethodType.Others \n                                && paymentMethod.name !== 'Others' \n                                && paymentMethod.name !== 'RegiGrow'\">{{ getCustomPaymentMethodTypeName({ typeOf: paymentMethod.typeOf, category: paymentMethod.name}) | changeLanguage }}</span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"py-3\">\n                <div class=\"row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.amount' | translate }}</p>\n                    <p class=\"col-md-8 font-weight-bold text-large text-info\">\n                        {{ (purchase | async)?.order.price | currency : 'JPY' }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <button type=\"submit\"\n            class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n            (click)=\"test()\"></button>\n        <a *ngFor=\"let link of environment.ORDER_LINK\" class=\"btn btn-primary btn-block py-3 mb-3\"\n            target=\"_blank\" \n            [href]=\"createOrderLink((purchase | async)?.order, link)\">{{ link.name | changeLanguage }}</a>\n        <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n            routerLink=\"/purchase/root\">{{ 'purchase.complete.prev' | translate }}</button>\n    </div>\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-confirm',\n    templateUrl: './purchase-confirm.component.html',\n    styleUrls: ['./purchase-confirm.component.scss']\n})\nexport class PurchaseConfirmComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public isLoading: Observable<boolean>;\n    public user: Observable<reducers.IUserState>;\n    public moment = moment;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public viewType = Models.Util.ViewType;\n    public depositAmount: number;\n    public amount: number;\n    public environment = getEnvironment();\n    public getCustomPaymentMethodTypeName = Functions.Purchase.getCustomPaymentMethodTypeName;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        this.depositAmount = 0;\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            this.amount = Functions.Purchase.getAmount(purchase.authorizeSeatReservations);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        if (this.amount > 0) {\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        const purchaseData = await this.actionService.purchase.getData();\n        const userData = await this.actionService.user.getData();\n        const profile = userData.customerContact;\n        const seller = purchaseData.seller;\n        if (profile === undefined\n            || seller === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            if (purchaseData.pendingMovieTickets.length > 0) {\n                await this.actionService.purchase.authorizeMovieTicket({ seller });\n            }\n            await this.actionService.purchase.authorizeAnyPayment({ amount: this.amount });\n            await this.actionService.purchase.registerContact(profile);\n            await this.actionService.purchase.endTransaction({ seller, language: userData.language });\n            this.router.navigate(['/purchase/complete']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <div class=\"mb-4\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.confirm.title' | translate }}</h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.confirm.read' | translate\"></p>\n\n        <div *ngFor=\"let authorizeSeatReservation of (purchase | async)?.authorizeSeatReservations\"\n            class=\"mb-4 bg-white p-3\">\n            <div class=\"mb-3\">\n                <div class=\"mb-1\">\n                    <p class=\"font-weight-bold text-large\">\n                        {{ authorizeSeatReservation.object.event.name | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"authorizeSeatReservation.object.event.superEvent.headline && (authorizeSeatReservation.object.event.superEvent.headline | changeLanguage)\">\n                        {{ authorizeSeatReservation.object.event.superEvent.headline | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"authorizeSeatReservation.object.event.superEvent.description && (authorizeSeatReservation.object.event.superEvent.description | changeLanguage)\">{{\n                        authorizeSeatReservation.object.event.superEvent.description | changeLanguage }}</p>\n                </div>\n                <p class=\"mb-1\">\n                    {{ authorizeSeatReservation.object.event.startDate | formatDate: 'MM/DD(ddd) HH:mm' }}-{{ authorizeSeatReservation.object.event.endDate | formatDate: 'HH:mm' }}\n                </p>\n                <p class=\"text-small mb-1\">\n                    <span class=\"theater-name\">\n                        {{ authorizeSeatReservation.object.event.superEvent.location.name | changeLanguage }}\n                    </span>\n                    <span class=\"screen-name\">\n                        &nbsp;/&nbsp;<span\n                            *ngIf=\"authorizeSeatReservation.object.event.location.address | changeLanguage\"\n                            class=\"mr-2\">{{ authorizeSeatReservation.object.event.location.address | changeLanguage }}</span>{{ authorizeSeatReservation.object.event.location.name | changeLanguage }}\n                    </span>\n                    <span\n                        *ngIf=\"authorizeSeatReservation.object.event.workPerformed?.duration && moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() > 0\">\n                        &nbsp;/&nbsp;<span\n                            class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}\n                    </span>\n                </p>\n            </div>\n            <hr class=\"mb-3\">\n\n            <app-item-list\n                [authorizeSeatReservations]=\"authorizeSeatReservation?.result?.responseBody.object.reservations\">\n            </app-item-list>\n\n        </div>\n\n        <div class=\"bg-white px-3 mb-4\">\n            <div class=\"overflow-hidden\">\n                <div class=\"py-3 row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.amount' | translate }}</p>\n                    <p class=\"col-md-8 font-weight-bold text-large text-info\">{{ amount | currency : 'JPY' }}</p>\n                </div>\n            </div>\n        </div>\n\n        <div *ngIf=\"environment.PURCHASE_WARNING\">\n            <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.confirm.warning' | translate }}</h2>\n            <div class=\"mb-4\">\n                <app-purchase-warning [language]=\"(user | async)?.language\"\n                    [screeningEvent]=\"(purchase | async)?.screeningEvent\"></app-purchase-warning>\n            </div>\n        </div>\n\n        <div class=\"buttons mx-auto text-center\">\n            <button *ngIf=\"!environment.PURCHASE_WARNING\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n                (click)=\"onSubmit()\">{{ 'purchase.confirm.next' | translate }}</button>\n            <button *ngIf=\"environment.PURCHASE_WARNING\" type=\"submit\" class=\"btn btn-primary btn-block py-3 mb-3\" [disabled]=\"isLoading | async\"\n                (click)=\"onSubmit()\">{{ 'purchase.confirm.consent' | translate }}</button>\n            <div *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\">\n                <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                    routerLink=\"/purchase/cinema/ticket\">{{ 'purchase.confirm.prev' | translate }}</button>\n            </div>\n            <div *ngIf=\"environment.VIEW_TYPE === viewType.Event\">\n                <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                    routerLink=\"/purchase/event/ticket\">{{ 'purchase.confirm.prev' | translate }}</button>\n            </div>\n        </div>\n    </div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, EpsonEPOSService, PaymentService, UtilService, } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-payment-reception',\n    templateUrl: './purchase-payment-reception.component.html',\n    styleUrls: ['./purchase-payment-reception.component.scss']\n})\nexport class PurchasePaymentReceptionComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public viewType = Models.Util.ViewType;\n    public amount: number;\n    public deposit: number;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private epsonEPOSService: EpsonEPOSService,\n        private paymentService: PaymentService,\n    ) { }\n\n    public async ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            this.amount = Functions.Purchase.getAmount(purchase.authorizeSeatReservations);\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.Cash) {\n                // \n                await this.cash();\n            }\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.CreditCard) {\n                // \n                await this.creditcard();\n            }\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.EMoney) {\n                // \n                await this.eMoney();\n            }\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.Others\n                && purchase.paymentMethod.category === 'code') {\n                // \n                await this.code();\n            }\n        } catch (error) {\n            console.error(error);\n            // this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    private async cash() {\n        this.deposit = 0;\n        const user = await this.actionService.user.getData();\n        if (user.payment === undefined\n            || user.payment.cash === undefined) {\n            throw new Error('payment undefined');\n        }\n        await this.epsonEPOSService.cashchanger.init({\n            ipAddress: user.payment.cash.ipAddress\n        });\n        await this.epsonEPOSService.cashchanger.endDeposit();\n        await this.epsonEPOSService.cashchanger.beginDeposit({\n            cb: (amount: number) => {\n                this.deposit = amount;\n            }\n        });\n    }\n\n    /**\n     * \n     */\n    private async creditcard() {\n        const user = await this.actionService.user.getData();\n        if (user.payment === undefined\n            || user.payment.creditcard === undefined) {\n            throw new Error('payment undefined');\n        }\n        await this.paymentService.init({\n            ipAddress: user.payment.creditcard.ipAddress\n        });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.CREDITCARD.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: moment().format('YYYYMMDDHHmmsss'),\n                AMOUNT: String(this.amount),\n                // MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            }\n        });\n        if (execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL\n            || execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL) {\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (execResult.FUNC_STATUS !== Models.Purchase.Payment.FUNC_STATUS.SUCCESS) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.CREDITCARD.INTERRUPTION,\n            });\n            throw new Error(JSON.stringify(execResult));\n        }\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    private async eMoney() {\n        const user = await this.actionService.user.getData();\n        if (user.payment === undefined\n            || user.payment.emoney === undefined) {\n            throw new Error('payment undefined');\n        }\n        await this.paymentService.init({\n            ipAddress: user.payment.emoney.ipAddress\n        });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.EMONEY.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: moment().format('YYYYMMDDHHmmsss'),\n                AMOUNT: String(this.amount),\n                // MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            }\n        });\n        if (execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL\n            || execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL) {\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (execResult.FUNC_STATUS !== Models.Purchase.Payment.FUNC_STATUS.SUCCESS) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.EMONEY.INTERRUPTION,\n            });\n            throw new Error(JSON.stringify(execResult));\n        }\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    private async code() {\n        const user = await this.actionService.user.getData();\n        if (user.payment === undefined\n            || user.payment.code === undefined) {\n            throw new Error('payment undefined');\n        }\n        await this.paymentService.init({\n            ipAddress: user.payment.code.ipAddress\n        });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.CODE.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: moment().format('YYYYMMDDHHmmsss'),\n                AMOUNT: String(this.amount),\n                MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            }\n        });\n        if (execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL\n            || execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL) {\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (execResult.FUNC_STATUS !== Models.Purchase.Payment.FUNC_STATUS.SUCCESS) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.CODE.INTERRUPTION,\n            });\n            throw new Error(JSON.stringify(execResult));\n        }\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const purchaseData = await this.actionService.purchase.getData();\n        const userData = await this.actionService.user.getData();\n        const profile = userData.customerContact;\n        const seller = purchaseData.seller;\n        const paymentMethod = purchaseData.paymentMethod;\n        if (paymentMethod === undefined\n            || profile === undefined\n            || seller === undefined) {\n            throw new Error('paymentMethod or profile or seller undefined');\n        }\n        try {\n            if (purchaseData.pendingMovieTickets.length > 0) {\n                await this.actionService.purchase.authorizeMovieTicket({ seller });\n            }\n            await this.actionService.purchase.authorizeAnyPayment({ amount: this.amount });\n            await this.actionService.purchase.registerContact(profile);\n            await this.actionService.purchase.endTransaction({ seller, language: userData.language });\n            this.utilService.loadStart({ process: 'load' });\n            if (purchaseData.paymentMethod?.typeOf === this.paymentMethodType.Cash) {\n                // \n                await this.epsonEPOSService.cashchanger.endDeposit();\n                if ((this.deposit - this.amount) > 0) {\n                    await this.epsonEPOSService.cashchanger.dispenseChange({ amount: (this.deposit - this.amount) });\n                }\n                await this.epsonEPOSService.cashchanger.disconnect();\n            }\n            this.router.navigate(['/purchase/complete']);\n            this.utilService.loadEnd();\n        } catch (error) {\n            this.utilService.loadStart({ process: 'load' });\n            await this.epsonEPOSService.cashchanger.endDepositRepay();\n            await this.epsonEPOSService.cashchanger.disconnect();\n            this.utilService.loadEnd();\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public async prev() {\n        try {\n            this.utilService.loadStart({ process: 'load' });\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.Cash) {\n                // \n                await this.epsonEPOSService.cashchanger.endDepositRepay();\n                await this.epsonEPOSService.cashchanger.disconnect();\n            }\n            this.router.navigate(['/purchase/payment']);\n            this.utilService.loadEnd();\n        } catch (error) {\n            console.error(error);\n            this.utilService.loadEnd();\n        }\n    }\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n    <div *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">\n            {{ 'purchase.paymentReception.cash.title' | translate }}\n        </h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.paymentReception.cash.read' | translate\"></p>\n        <div class=\"bg-white px-3 mb-4\">\n            <div class=\"overflow-hidden\">\n                <div class=\"py-3 row align-items-center border-bottom border-gray\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'common.amount' | translate }}</p>\n                    <p class=\"col-md-8\">{{ amount | currency : 'JPY' }}</p>\n                </div>\n                <div class=\"py-3 row align-items-center border-bottom border-gray\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'purchase.paymentReception.cash.deposit' | translate }}</p>\n                    <p class=\"col-md-8\">{{ deposit | currency : 'JPY' }}</p>\n                </div>\n                <div class=\"py-3 row align-items-center\">\n                    <p class=\"mb-2 mb-md-0 col-md-4\">{{ 'purchase.paymentReception.cash.change' | translate }}</p>\n                    <p class=\"col-md-8\">{{ (deposit - amount) | currency : 'JPY' }}</p>\n                </div>\n            </div>\n        </div>\n        <div class=\"buttons mx-auto text-center\">\n            <button type=\"button\" class=\"btn btn-primary btn-block py-3 mb-3\"\n                [disabled]=\"(isLoading | async) || amount > deposit\" (click)=\"onSubmit()\">{{ 'purchase.paymentReception.cash.next' | translate }}</button>\n            <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\" (click)=\"prev()\">{{ 'purchase.paymentReception.cash.prev' | translate }}</button>\n        </div>\n    </div>\n    <div *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.CreditCard\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">\n            {{ 'purchase.paymentReception.creditcard.title' | translate }}\n        </h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.paymentReception.creditcard.read' | translate\"></p>\n    </div>\n    <div *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.EMoney\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">\n            {{ 'purchase.paymentReception.eMoney.title' | translate }}\n        </h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.paymentReception.eMoney.read' | translate\"></p>\n    </div>\n    <div *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Others\n    && (purchase | async)?.paymentMethod?.category === 'code'\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">\n            {{ 'purchase.paymentReception.code.title' | translate }}\n        </h2>\n        <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.paymentReception.code.read' | translate\"></p>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-payment',\n    templateUrl: './purchase-payment.component.html',\n    styleUrls: ['./purchase-payment.component.scss']\n})\nexport class PurchasePaymentComponent implements OnInit {\n    public user: Observable<reducers.IUserState>;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private translate: TranslateService\n    ) { }\n\n    public ngOnInit() {\n        this.user = this.store.pipe(select(reducers.getUser));\n    }\n\n    /**\n     * \n     */\n    public async selectPaymentMethodType(\n        typeOf: factory.chevre.paymentMethodType,\n        category?: string\n    ) {\n        try {\n            const seller = (await this.actionService.purchase.getData()).seller;\n            if (seller === undefined\n                || seller.paymentAccepted === undefined) {\n                throw new Error('seller is undefined or paymentAccepted is undefined');\n            }\n            const findResult = seller.paymentAccepted\n                .find(paymentAccepted => paymentAccepted.paymentMethodType === typeOf);\n            if (findResult === undefined) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant('purchase.payment.alert.notCompatible')\n                });\n                return;\n            }\n            this.actionService.purchase.selectPaymentMethodType({ typeOf, category });\n            this.router.navigate(['/purchase/payment/reception']);\n        } catch (error) {\n            this.router.navigate(['/error']);\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public isDisplay(paymentMethodType: factory.chevre.paymentMethodType | string) {\n        const findResult = this.environment.PAYMENT_METHOD_TO_USE.find(p => p === paymentMethodType);\n        return (findResult !== undefined);\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-5\">\n\n    <h2 class=\"text-large mb-4 text-center font-weight-bold\">{{ 'purchase.payment.title' | translate }}</h2>\n    <p class=\"mb-4 text-md-center\" [innerHTML]=\"'purchase.payment.read' | translate\"></p>\n\n    <div class=\"payment-select d-grid mb-4\">\n        <button *ngIf=\"isDisplay(paymentMethodType.Cash)\" type=\"button\" class=\"btn btn-primary btn-block py-3 m-0\"\n            (click)=\"selectPaymentMethodType(paymentMethodType.Cash)\">\n            <div class=\"mb-md-3\">\n                <i class=\"fas fa-yen-sign mr-2 d-md-none\"></i>{{ 'common.paymentMethodType.cash' | translate }}\n            </div>\n            <div class=\"image d-none d-md-block\"><i class=\"fas fa-yen-sign\"></i></div>\n        </button>\n        <button *ngIf=\"isDisplay(paymentMethodType.CreditCard)\" type=\"button\" class=\"btn btn-primary btn-block py-3 m-0\"\n            (click)=\"selectPaymentMethodType(paymentMethodType.CreditCard)\">\n            <div class=\"mb-md-3\">\n                <i class=\"fas fa-credit-card mr-2 d-md-none\"></i>{{ 'common.paymentMethodType.creditCard' | translate }}\n            </div>\n            <div class=\"image d-none d-md-block\"><i class=\"fas fa-credit-card\"></i></div>\n        </button>\n        <button *ngIf=\"isDisplay(paymentMethodType.EMoney)\" type=\"button\" class=\"btn btn-primary btn-block py-3 m-0\"\n            (click)=\"selectPaymentMethodType(paymentMethodType.EMoney)\">\n            <div class=\"mb-md-3\">\n                <i class=\"fas fa-mobile-alt mr-2 d-md-none\"></i>{{ 'common.paymentMethodType.eMoney' | translate }}\n            </div>\n            <div class=\"image d-none d-md-block\"><i class=\"fas fa-mobile-alt\"></i></div>\n        </button>\n        <button *ngIf=\"isDisplay('RegiGrow')\" type=\"button\" class=\"btn btn-primary btn-block py-3 m-0\"\n            (click)=\"selectPaymentMethodType(paymentMethodType.Others, 'RegiGrow')\">\n            <div class=\"mb-md-3\">\n                <i class=\"fas fa-cash-register mr-2 d-md-none\"></i>{{ 'common.paymentMethodType.regiGrow' | translate }}\n            </div>\n            <div class=\"image d-none d-md-block\"><i class=\"fas fa-cash-register\"></i></div>\n        </button>\n        <button *ngIf=\"isDisplay(paymentMethodType.Others)\" type=\"button\" class=\"btn btn-primary btn-block py-3 m-0\"\n            (click)=\"selectPaymentMethodType(paymentMethodType.Others)\">\n            <div class=\"mb-md-3\">\n                <i class=\"far fa-question-circle mr-2 d-md-none\"></i>{{ 'common.paymentMethodType.others' | translate }}\n            </div>\n            <div class=\"image d-none d-md-block\"><i class=\"far fa-question-circle\"></i></div>\n        </button>\n        <button *ngFor=\"let custom of environment.PAYMENT_METHOD_CUSTOM\" type=\"button\" class=\"btn btn-primary btn-block py-3 m-0\"\n            (click)=\"selectPaymentMethodType(paymentMethodType.Others, custom.category)\">\n            <div>{{ custom.name | changeLanguage }}</div>\n        </button>\n    </div>\n\n    <div class=\"buttons mx-auto text-center\">\n        <div *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\">\n            <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                routerLink=\"/purchase/cinema/ticket\">{{ 'purchase.payment.prev' | translate }}</button>\n        </div>\n        <div *ngIf=\"environment.VIEW_TYPE === viewType.Event\">\n            <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3\"\n                routerLink=\"/purchase/event/ticket\">{{ 'purchase.payment.prev' | translate }}</button>\n        </div>\n\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-root',\n    templateUrl: './purchase-root.component.html',\n    styleUrls: ['./purchase-root.component.scss']\n})\nexport class PurchaseRootComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private actionService: ActionService,\n        private router: Router\n    ) { }\n\n    public async ngOnInit() {\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.transaction !== undefined) {\n                await this.actionService.purchase.cancelTransaction();\n            }\n            this.actionService.purchase.delete();\n            if (this.environment.VIEW_TYPE === Models.Util.ViewType.Cinema) {\n                this.router.navigate(['/purchase/cinema']);\n                return;\n            }\n            this.router.navigate(['/purchase/event/schedule']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { SeatStatus } from '../../../../../models/purchase/screen';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-seat',\n    template: ''\n})\nexport class PurchaseSeatComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public environment = getEnvironment();\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public translateName: string;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        protected router: Router,\n        protected actionService: ActionService\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName = (this.environment.VIEW_TYPE === 'cinema')\n            ? 'purchase.cinema.seat' : 'purchase.event.seat';\n        this.screeningEventSeats = [];\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const screeningEvent = purchase.screeningEvent;\n            const seller = purchase.seller;\n            if (screeningEvent === undefined || seller === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            const reservations = purchase.reservations;\n            await this.resetSeats();\n            reservations.forEach(r => {\n                if (r.seat === undefined) {\n                    return;\n                }\n                this.selectSeat({ seat: r.seat, status: Models.Purchase.Screen.SeatStatus.Default });\n            });\n            await this.actionService.purchase.getScreen({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: { $eq: screeningEvent.superEvent.location.branchCode }\n                }\n            });\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.getTicketList({ seller });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n\n    /**\n     * \n     */\n    public selectSeat(data: {\n        seat: Models.Purchase.Reservation.IReservationSeat,\n        status: Models.Purchase.Screen.SeatStatus\n    }) {\n        if (data.status === SeatStatus.Default) {\n            this.actionService.purchase.selectSeats([data.seat]);\n        } else {\n            this.actionService.purchase.cancelSeats([data.seat]);\n        }\n    }\n\n    /**\n     * \n     */\n    public async allSelectSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEventSeats = this.screeningEventSeats;\n        screeningEventSeats.forEach((s) => {\n            if (s.offers === undefined\n                || s.offers[0].availability !== factory.chevre.itemAvailability.InStock\n                || s.containedInPlace === undefined) {\n                return;\n            }\n            seats.push({\n                typeOf: s.typeOf,\n                seatingType: (s.seatingType === undefined)\n                    ? '' : s.seatingType,\n                seatNumber: s.branchCode,\n                seatRow: '',\n                seatSection: (s.containedInPlace.branchCode === undefined) ? '' : s.containedInPlace.branchCode,\n                offers: s.offers\n            });\n        });\n        if (purchase.authorizeSeatReservation !== undefined\n            && purchase.authorizeSeatReservation.result !== undefined\n            && purchase.authorizeSeatReservation.result.responseBody.object.reservations !== undefined) {\n            purchase.authorizeSeatReservation.result.responseBody.object.reservations.forEach((r) => {\n                if (r.reservedTicket.ticketedSeat === undefined) {\n                    return;\n                }\n                seats.push(r.reservedTicket.ticketedSeat);\n            });\n        }\n        this.actionService.purchase.selectSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public async resetSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        purchase.reservations.forEach((reservation) => {\n            if (reservation.seat === undefined) {\n                return;\n            }\n            seats.push(reservation.seat);\n        });\n        this.actionService.purchase.cancelSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityValue(params: {\n        screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent;\n        authorizeSeatReservations: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>[];\n    }) {\n        const screeningEventSeats = params.screeningEventSeats;\n        const screeningEvent = params.screeningEvent;\n        const values: number[] = [];\n        if (screeningEvent === undefined) {\n            return values;\n        }\n        let limit = Number(this.environment.PURCHASE_ITEM_MAX_LENGTH);\n        if (new Models.Purchase.Performance(screeningEvent).isTicketedSeat()) {\n            // \n            const screeningEventLimit = Functions.Purchase.getRemainingSeatLength({\n                screeningEventSeats, screeningEvent\n            });\n            if (limit > screeningEventLimit) {\n                limit = screeningEventLimit;\n            }\n        }\n        for (let i = 0; i < limit; i++) {\n            values.push(i + 1);\n        }\n        return values;\n    }\n\n    /**\n     * \n     */\n    public async selectOpenSeating(event: Event) {\n        if (event.target === null) {\n            return;\n        }\n        const purchaseData = await this.actionService.purchase.getData();\n        const value = Number((<HTMLSelectElement>event.target).value);\n        const reservations = purchaseData.reservations;\n        const screeningEventSeats = this.screeningEventSeats;\n        const seats = Functions.Purchase.getEmptySeat({ reservations, screeningEventSeats });\n        await this.resetSeats();\n        const selectSeats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        for (let i = 0; i < value; i++) {\n            selectSeats.push(seats[i]);\n        }\n        this.actionService.purchase.selectSeats(selectSeats);\n    }\n\n    /**\n     * onSubmit\n     */\n    public async onSubmit() {\n        const purchase = await this.actionService.purchase.getData();\n        const reservations = purchase.reservations;\n        const screeningEventTicketOffers = purchase.screeningEventTicketOffers;\n        if (reservations.length === 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(`${this.translateName}.alert.unselected`)\n            });\n            return;\n        }\n        if (reservations.length > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    `${this.translateName}.alert.limit`,\n                    { value: this.environment.PURCHASE_ITEM_MAX_LENGTH }\n                )\n            });\n            return;\n        }\n        if (screeningEventTicketOffers.length === 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(`${this.translateName}.alert.ticketNotfound`)\n            });\n            return;\n        }\n        try {\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                screeningEventSeats: this.screeningEventSeats\n            });\n            const navigate = (this.environment.VIEW_TYPE === 'cinema')\n                ? '/purchase/cinema/ticket'\n                : '/purchase/event/seat/ticket';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `<p class=\"mb-4\">${this.translate.instant(`${this.translateName}.alert.temporaryReservation`)}</p>\n                <div class=\"p-3 bg-light-gray select-text\">\n                <code>${error}</code>\n            </div>`});\n        }\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { IReservation, IReservationTicket } from '../../../../../models/purchase/reservation';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\nimport { MvtkCheckModalComponent } from '../../../../shared/components/parts/mvtk/check-modal/check-modal.component';\nimport { PurchaseSeatTicketModalComponent } from '../../../../shared/components/parts/purchase/seat-ticket-modal/seat-ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-ticket',\n    template: ''\n})\nexport class PurchaseTicketComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public additionalTicketText: string;\n    public environment = getEnvironment();\n    public translateName: string;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private modal: BsModalService,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private translate: TranslateService\n    ) { }\n\n    public ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName = (this.environment.VIEW_TYPE === 'cinema')\n            ? 'purchase.cinema.ticket' : 'purchase.event.seatTicket';\n        this.additionalTicketText = '';\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const purchase = await this.actionService.purchase.getData();\n        const transaction = purchase.transaction;\n        const screeningEvent = purchase.screeningEvent;\n        const reservations = purchase.reservations;\n        if (transaction === undefined\n            || screeningEvent === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        const unselectedReservations = reservations.filter((reservation) => {\n            return (reservation.ticket === undefined);\n        });\n        if (unselectedReservations.length > 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(`${this.translateName}.alert.unselected`)\n            });\n            return;\n        }\n        const validResult = reservations.filter((reservation) => {\n            if (reservation.ticket === undefined) {\n                return false;\n            }\n            const priceComponent = reservation.ticket.ticketOffer.priceSpecification.priceComponent;\n            const UnitPriceSpecification = factory.chevre.priceSpecificationType.UnitPriceSpecification;\n            const unitPriceSpecifications = priceComponent.filter(p => p.typeOf === UnitPriceSpecification);\n            const filterResult = reservations.filter((targetReservation) => {\n                return (reservation.ticket !== undefined\n                    && targetReservation.ticket !== undefined\n                    && reservation.ticket.ticketOffer.id === targetReservation.ticket.ticketOffer.id);\n            });\n            const findResult = unitPriceSpecifications.find((unitPriceSpecification) => {\n                const value = (unitPriceSpecification.typeOf === UnitPriceSpecification\n                    && unitPriceSpecification.referenceQuantity.value !== undefined)\n                    ? unitPriceSpecification.referenceQuantity.value : 1;\n\n                return (filterResult.length % value !== 0);\n            });\n\n            return (findResult !== undefined);\n        });\n        if (validResult.length > 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(`${this.translateName}.alert.ticketCondition`)\n            });\n            return;\n        }\n        try {\n            const additionalTicketText = this.additionalTicketText;\n            const screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats\n            });\n            const navigate = (this.environment.VIEW_TYPE === 'cinema')\n                ? '/purchase/confirm'\n                : '/purchase/event/ticket';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant(`${this.translateName}.alert.temporaryReservation`)}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${error}</code>\n                </div>`\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async openTicketList(reservation?: IReservation) {\n        const purchase = await this.actionService.purchase.getData();\n        this.modal.show(PurchaseSeatTicketModalComponent, {\n            class: 'modal-dialog-centered modal-lg',\n            initialState: {\n                authorizeSeatReservation: purchase.authorizeSeatReservation,\n                screeningEventTicketOffers: purchase.screeningEventTicketOffers,\n                checkMovieTicketActions: purchase.checkMovieTicketActions,\n                reservations: purchase.reservations,\n                reservation: reservation,\n                pendingMovieTickets: purchase.pendingMovieTickets,\n                cb: (ticket: IReservationTicket) => {\n                    if (reservation === undefined) {\n                        const reservations = Functions.Util.deepCopy<IReservation[]>(purchase.reservations);\n                        reservations.forEach(r => r.ticket = ticket);\n                        this.actionService.purchase.selectTickets(reservations);\n                        return;\n                    }\n                    this.actionService.purchase.selectTickets([{ ...reservation, ticket }]);\n                }\n            },\n        });\n    }\n\n    /**\n     * \n     */\n    public openMovieTicket() {\n        this.modal.show(MvtkCheckModalComponent, {\n            class: 'modal-dialog-centered'\n        });\n    }\n\n\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\n\n@Component({\n    selector: 'app-purchase-event-performances-confirm',\n    templateUrl: './performances-confirm.component.html',\n    styleUrls: ['./performances-confirm.component.scss']\n})\nexport class PurchaseEventPerformancesConfirmComponent implements OnInit {\n\n    @Input() public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup;\n    @Input() public readonly: boolean;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment: typeof moment = moment;\n\n    constructor() { }\n\n    public ngOnInit() { }\n\n}\n","<div>\n    <div class=\"bg-gray p-3\">\n        <div class=\"mb-2\">\n            <p class=\"font-weight-bold text-large\">{{ screeningEventsGroup.info.name | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventsGroup.info.superEvent.headline && (screeningEventsGroup.info.superEvent.headline | changeLanguage)\">\n                {{ screeningEventsGroup.info.superEvent.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventsGroup.info.superEvent.description && (screeningEventsGroup.info.superEvent.description | changeLanguage)\">{{\n                screeningEventsGroup.info.superEvent.description | changeLanguage }}</p>\n        </div>\n        <div class=\"d-flex align-items-center\">\n            <div *ngIf=\"screeningEventsGroup.info.workPerformed?.duration && moment.duration(screeningEventsGroup.info.workPerformed?.duration).asMinutes() > 0\" class=\"text-small ml-auto\">\n                <span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(screeningEventsGroup.info.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}</div>\n        </div>\n    </div>\n    <div class=\"p-3 bg-white d-flex flex-wrap\" [class.not-event]=\"readonly\">\n        <div *ngFor=\"let performance of screeningEventsGroup.data\"\n            class=\"performance my-2\"\n            [ngClass]=\"{ 'text-dark-gray': !performance.isSales() || performance.isSeatStatus('danger') }\">\n            <div class=\"d-flex align-items-center\">\n                <div class=\"mr-2 font-weight-bold\">{{ moment(performance.screeningEvent.startDate).format('HH:mm') }}-{{ moment(performance.screeningEvent.endDate).format('HH:mm') }}</div>\n                <div class=\"status\"\n                    *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n                    <div *ngIf=\"performance.isSeatStatus('success')\">\n                        <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('warning')\"\n                        class=\"d-flex justify-content-around align-items-center\">\n                        <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('danger')\">\n                        <img src=\"/assets/images/icon/status_danger_color.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus()\">\n                        <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n                    </div>\n                </div>\n\n                <div class=\"status\" *ngIf=\"performance.isSales() && performance.isInfinitetock()\">\n                    <div class=\"d-flex justify-content-around align-items-center\">\n                        <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                    </div>\n                </div>\n\n                <div class=\"status text-x-small\" *ngIf=\"performance.isSales('end')\">\n                    {{ 'purchase.event.schedule.status.endSale' | translate }}</div>\n                <div class=\"status text-x-small\" *ngIf=\"performance.isSales('start')\">\n                    {{ 'purchase.event.schedule.status.outsideSalesPeriod' | translate }}</div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-performance',\n    templateUrl: './performance.component.html',\n    styleUrls: ['./performance.component.scss']\n})\nexport class PurchasePerformanceComponent implements OnInit {\n\n    @Input() public performance: Models.Purchase.Performance;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Util.ViewType;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"row mx-0 border boder-gray rounded p-3 py-md-3 text-md-center d-md-block align-items-center pointer h-100\"\n    [ngClass]=\"{ \n                'bg-white': performance.isSales() && !performance.isSeatStatus('danger'), \n                'bg-dark-gray text-light-gray not-event': !performance.isSales() \n                || performance.isSeatStatus('danger') \n                || (performance.isInfinitetock() && environment.VIEW_TYPE === viewType.Cinema)\n                }\" (click)=\"select.emit(performance.screeningEvent)\">\n    <div class=\"col-md-12 col-8 px-0\">\n        <div class=\"mb-1 text-small screen-name\">\n            <p *ngIf=\"performance.screeningEvent.location.address | changeLanguage\"\n                class=\"text-overflow-ellipsis mr-2 mr-md-0 d-inline-block d-md-block\">\n                {{ performance.screeningEvent.location.address | changeLanguage }}</p>\n            <p class=\"text-overflow-ellipsis d-inline-block d-md-block\">\n                {{ performance.screeningEvent.location.name | changeLanguage }}</p>\n        </div>\n        <div>\n            <strong class=\"text-large\">{{ moment(performance.screeningEvent.startDate).format('HH:mm') }}</strong>\n            <span>-</span>\n            <span>{{ moment(performance.screeningEvent.endDate).format('HH:mm') }}</span>\n        </div>\n    </div>\n    <hr class=\"border-0 bg-light-gray my-2\">\n    <div class=\"col-md-12 col-4 px-0 text-center\">\n        <div class=\"status\" *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n            <div *ngIf=\"performance.isSeatStatus('success')\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"text-success mr-2\">\n                    {{ 'common.performance.status.success' | translate }}</div>\n                <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n            </div>\n            <div *ngIf=\"performance.isSeatStatus('warning')\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"text-warning mr-2\">\n                    {{ 'common.performance.status.warning' | translate }}</div>\n                <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n            </div>\n            <div *ngIf=\"performance.isSeatStatus('danger')\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"mr-2\">\n                    {{ 'common.performance.status.danger' | translate }}</div>\n                <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n            </div>\n            <div *ngIf=\"performance.isSeatStatus()\" class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"mr-2\">\n                    {{ 'common.performance.status.success' | translate }}</div>\n                <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n            </div>\n        </div>\n\n        <div class=\"status\" *ngIf=\"performance.isSales('end')\">\n            {{ 'common.performance.status.endSale' | translate }}</div>\n        <div class=\"status\" *ngIf=\"performance.isSales('start')\">\n            {{ 'common.performance.status.outsideSalesPeriod' | translate }}</div>\n        <div *ngIf=\"performance.isSales() && performance.isInfinitetock()\" class=\"status\">\n            <div class=\"d-flex justify-content-center align-items-center\">\n                <div class=\"text-success mr-2\">\n                    {{ 'common.performance.status.success' | translate }}</div>\n                <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n            </div>\n            <!-- <p class=\"text-small\">{{ 'common.performance.infiniteStock' | translate }}</p> -->\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\n\n@Component({\n    selector: 'app-purchase-performances',\n    templateUrl: './performances.component.html',\n    styleUrls: ['./performances.component.scss']\n})\nexport class PurchasePerformancesComponent implements OnInit {\n\n    @Input() public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment: typeof moment = moment;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"\">\n    <div class=\"p-3 bg-gray\">\n        <div class=\"mb-2\">\n            <p class=\"font-weight-bold text-large\">{{ screeningEventsGroup.info.name | changeLanguage }}</p>\n            <p\n                *ngIf=\"screeningEventsGroup.info.superEvent.headline && (screeningEventsGroup.info.superEvent.headline | changeLanguage)\">\n                {{ screeningEventsGroup.info.superEvent.headline | changeLanguage }}</p>\n            <p\n                *ngIf=\"screeningEventsGroup.info.superEvent.description && (screeningEventsGroup.info.superEvent.description | changeLanguage)\">{{\n                    screeningEventsGroup.info.superEvent.description | changeLanguage }}</p>\n        </div>\n        <div class=\"d-flex align-items-center\">\n            <div *ngIf=\"screeningEventsGroup.info.workPerformed?.contentRating\"\n                class=\"text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                    screeningEventsGroup.info.workPerformed?.contentRating }}</div>\n            <div *ngIf=\"screeningEventsGroup.info.superEvent.dubLanguage\"\n                class=\"text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{ 'common.dubbing' | translate }}</div>\n            <div *ngIf=\"screeningEventsGroup.info.superEvent.subtitleLanguage\"\n                class=\"text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{ 'common.subtitles' | translate }}</div>\n            <div *ngIf=\"screeningEventsGroup.info.workPerformed?.duration && moment.duration(screeningEventsGroup.info.workPerformed?.duration).asMinutes() > 0\"\n                class=\"text-small ml-auto\">\n                <span\n                    class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(screeningEventsGroup.info.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}\n            </div>\n        </div>\n    </div>\n    <ul class=\"py-2 d-flex flex-wrap\">\n        <li *ngFor=\"let performance of screeningEventsGroup.data\" class=\"px-2 my-2\">\n            <app-purchase-performance [performance]=\"performance\" (select)=\"select.emit($event)\"\n                class=\"mb-3\"></app-purchase-performance>\n        </li>\n    </ul>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport * as moment from 'moment';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-info',\n    templateUrl: './purchase-info.component.html',\n    styleUrls: ['./purchase-info.component.scss']\n})\nexport class PurchaseInfoComponent implements OnInit {\n    @Input() public purchase: reducers.IPurchaseState;\n    public moment: typeof moment = moment;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<p class=\"mb-3\">{{ 'purchase.info.read' | translate }}</p>\n<div class=\"bg-white p-3\">\n    <div class=\"mb-3\">\n        <div class=\"mb-1\">\n            <p class=\"font-weight-bold text-large\">{{ purchase.screeningEvent?.name | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"purchase.screeningEvent?.superEvent.headline && (purchase.screeningEvent?.superEvent.headline | changeLanguage)\">\n                {{ purchase.screeningEvent?.superEvent.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"purchase.screeningEvent?.superEvent.description && (purchase.screeningEvent?.superEvent.description | changeLanguage)\">{{\n                        purchase.screeningEvent?.superEvent.description | changeLanguage }}</p>\n        </div>\n        <p class=\"mb-1\">\n            {{ purchase.screeningEvent?.startDate | formatDate: 'MM/DD(ddd) HH:mm' }}-{{ purchase.screeningEvent?.endDate | formatDate: 'HH:mm' }}\n        </p>\n        <p class=\"text-small mb-1\">\n            <span class=\"theater-name\">\n                {{ purchase.screeningEvent?.superEvent.location.name | changeLanguage }}\n            </span>\n            <span class=\"screen-name\">\n                &nbsp;/&nbsp;<span *ngIf=\"purchase.screeningEvent?.location.address | changeLanguage\" class=\"mr-2\">{{ purchase.screeningEvent?.location.address | changeLanguage }}</span>{{ purchase.screeningEvent?.location.name | changeLanguage }}\n            </span>\n            <span *ngIf=\"purchase.screeningEvent?.workPerformed?.duration && moment.duration(purchase.screeningEvent?.workPerformed?.duration).asMinutes() > 0\">\n                &nbsp;/&nbsp;<span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{ moment.duration(purchase.screeningEvent?.workPerformed?.duration).asMinutes() }}{{ 'common.date.minute' | translate }}\n            </span>\n        </p>\n    </div>\n    <hr class=\"mb-3\">\n\n    <app-item-list [reservations]=\"purchase.reservations\"></app-item-list>\n\n</div>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-terms',\n    templateUrl: './purchase-terms.component.html',\n    styleUrls: ['./purchase-terms.component.scss']\n})\nexport class PurchaseTermsComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public terms: string;\n\n    constructor(\n        private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/terms/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.terms = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3  text-small scroll-vertical border\" [innerHTML]=\"terms\"></div>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-warning',\n    templateUrl: './purchase-warning.component.html',\n    styleUrls: ['./purchase-warning.component.scss']\n})\nexport class PurchaseWarningComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public warning: string;\n\n    constructor(\n    private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/warning/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.warning = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3 text-small scroll-vertical border\" [innerHTML]=\"warning\"></div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-seat-info',\n    templateUrl: './seat-info.component.html',\n    styleUrls: ['./seat-info.component.scss']\n})\nexport class SeatInfoComponent implements OnInit {\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"bg-white px-3\">\n    <div class=\"container\">\n        <div class=\"row align-items-center\">\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat\"></div>\n                <div>{{ 'purchase.seat.normal' | translate }}</div>\n            </div>\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat active\"></div>\n                <div>{{ 'purchase.seat.active' | translate }}</div>\n            </div>\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat disabled\"></div>\n                <div>{{ 'purchase.seat.disabled' | translate }}</div>\n            </div>\n            <div class=\"d-flex align-items-center col-6 col-md-3\">\n                <div class=\"seat space disabled\"></div>\n                <div>{{ 'purchase.seat.space' | translate }}</div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-transaction-remaining-time',\n    templateUrl: './transaction-remaining-time.component.html',\n    styleUrls: ['./transaction-remaining-time.component.scss']\n})\nexport class TransactionRemainingTimeComponent implements OnInit, OnDestroy {\n    @Input() public transaction: factory.transaction.placeOrder.ITransaction;\n    public isExpired: boolean;\n    public diff: { hours: string; minutes: string; seconds: string; };\n    public timer: any;\n    public width: number;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router\n    ) { }\n\n    public ngOnInit() {\n        this.update();\n    }\n\n    public ngOnDestroy() {\n        clearTimeout(this.timer);\n    }\n\n    private update() {\n        this.updateProcess();\n        const time = 1000;\n        this.timer = setTimeout(() => { this.update(); }, time);\n    }\n\n    private updateProcess() {\n        const now = moment();\n        const expires = moment(this.transaction.expires);\n        this.isExpired = expires.diff(now) < 0;\n        this.diff = {\n            hours: `00${expires.diff(now, 'hours')}`.slice(-2),\n            minutes: `00${expires.diff(now, 'minutes') % 60}`.slice(-2),\n            seconds: `00${expires.diff(now, 'seconds') % 60 % 60}`.slice(-2)\n        };\n        this.width = Math.floor(expires.diff(now, 'seconds') / (Number(this.environment.PURCHASE_TRANSACTION_TIME) * 60) * 100);\n        if (this.isExpired) {\n            this.router.navigate(['/expired']);\n        }\n    }\n\n}\n","<div class=\"contents-width mx-auto px-3 py-1 position-relative bg-white\" *ngIf=\"!isExpired && environment.PURCHASE_TRANSACTION_TIME_DISPLAY\">\n    <div class=\"cover w-100 h-100 bg-primary\"></div>\n    <div class=\"expired bg-primary\" [style.width.%]=\"width\"></div>\n    <p class=\"text-small text-white position-relative\">{{ 'common.timeLimit' | translate }} {{ this.diff.hours }}:{{ this.diff.minutes }}:{{ this.diff.seconds }}</p>\n</div>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuardService, PurchaseTransactionGuardService, SettingGuardService, ViewTypeGuardService } from '../../canActivates';\nimport { PurchaseCinemaScheduleEventComponent } from './components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component';\nimport { PurchaseCinemaScheduleMovieComponent } from './components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseCinemaTopComponent } from './components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatTicketComponent } from './components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseEventTicketComponent } from './components/pages/event/purchase-event-ticket/purchase-event-ticket.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchaseConfirmComponent } from './components/pages/purchase-confirm/purchase-confirm.component';\nimport { PurchasePaymentReceptionComponent } from './components/pages/purchase-payment-reception/purchase-payment-reception.component';\nimport { PurchasePaymentComponent } from './components/pages/purchase-payment/purchase-payment.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PurchaseBaseComponent,\n    canActivate: [AuthGuardService, SettingGuardService],\n    children: [\n      { path: 'root', component: PurchaseRootComponent },\n      {\n        path: 'cinema',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: '', component: PurchaseCinemaTopComponent },\n          { path: 'schedule', component: PurchaseCinemaScheduleComponent },\n          { path: 'schedule/movie', component: PurchaseCinemaScheduleMovieComponent },\n          { path: 'schedule/event/:identifier', component: PurchaseCinemaScheduleEventComponent },\n          { path: 'seat', component: PurchaseCinemaSeatComponent },\n          { path: 'ticket', component: PurchaseCinemaTicketComponent },\n        ]\n      },\n      {\n        path: 'event',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: 'ticket', component: PurchaseEventTicketComponent },\n          { path: 'schedule', component: PurchaseEventScheduleComponent },\n          {\n            path: 'seat',\n            canActivate: [ViewTypeGuardService],\n            children: [\n              { path: '', component: PurchaseEventSeatComponent },\n              { path: 'ticket', component: PurchaseEventSeatTicketComponent }\n            ]\n          },\n        ]\n      },\n      { path: 'payment', canActivate: [PurchaseTransactionGuardService], component: PurchasePaymentComponent },\n      { path: 'payment/reception', canActivate: [PurchaseTransactionGuardService], component: PurchasePaymentReceptionComponent },\n      { path: 'confirm', canActivate: [PurchaseTransactionGuardService], component: PurchaseConfirmComponent },\n      { path: 'complete', component: PurchaseCompleteComponent }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PurchaseRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PurchaseCinemaScheduleEventComponent } from './components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component';\nimport { PurchaseCinemaScheduleMovieComponent } from './components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseCinemaTopComponent } from './components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatTicketComponent } from './components/pages/event/purchase-event-seat-ticket/purchase-event-seat-ticket.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseEventTicketComponent } from './components/pages/event/purchase-event-ticket/purchase-event-ticket.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchaseConfirmComponent } from './components/pages/purchase-confirm/purchase-confirm.component';\nimport { PurchasePaymentReceptionComponent } from './components/pages/purchase-payment-reception/purchase-payment-reception.component';\nimport { PurchasePaymentComponent } from './components/pages/purchase-payment/purchase-payment.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\nimport { PurchaseSeatComponent } from './components/pages/purchase-seat/purchase-seat.component';\nimport { PurchaseTicketComponent } from './components/pages/purchase-ticket/purchase-ticket.component';\nimport { PurchaseEventPerformancesConfirmComponent } from './components/parts/event/performances-confirm/performances-confirm.component';\nimport { PurchasePerformanceComponent } from './components/parts/performance/performance.component';\nimport { PurchasePerformancesComponent } from './components/parts/performances/performances.component';\nimport { PurchaseInfoComponent } from './components/parts/purchase-info/purchase-info.component';\nimport { PurchaseTermsComponent } from './components/parts/purchase-terms/purchase-terms.component';\nimport { PurchaseWarningComponent } from './components/parts/purchase-warning/purchase-warning.component';\nimport { SeatInfoComponent } from './components/parts/seat-info/seat-info.component';\nimport { TransactionRemainingTimeComponent } from './components/parts/transaction-remaining-time/transaction-remaining-time.component';\nimport { PurchaseRoutingModule } from './purchase-routing.module';\n\n\n@NgModule({\n  declarations: [\n    PurchaseBaseComponent,\n    PurchaseRootComponent,\n    PurchaseCinemaSeatComponent,\n    PurchaseCinemaTicketComponent,\n    PurchaseEventTicketComponent,\n    PurchasePaymentComponent,\n    PurchasePaymentReceptionComponent,\n    PurchaseConfirmComponent,\n    PurchaseCompleteComponent,\n    PurchaseCinemaScheduleComponent,\n    PurchaseEventScheduleComponent,\n    PurchasePerformanceComponent,\n    PurchasePerformancesComponent,\n    PurchaseEventPerformancesConfirmComponent,\n    PurchaseInfoComponent,\n    PurchaseTermsComponent,\n    PurchaseWarningComponent,\n    TransactionRemainingTimeComponent,\n    PurchaseEventSeatComponent,\n    PurchaseEventSeatTicketComponent,\n    PurchaseTicketComponent,\n    PurchaseSeatComponent,\n    SeatInfoComponent,\n    PurchaseCinemaScheduleMovieComponent,\n    PurchaseCinemaScheduleEventComponent,\n    PurchaseCinemaTopComponent,\n  ],\n  imports: [\n    CommonModule,\n    PurchaseRoutingModule,\n    SharedModule,\n  ]\n})\nexport class PurchaseModule { }\n"],"sourceRoot":"webpack:///"}