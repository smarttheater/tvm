{"version":3,"sources":["./src/client/app/modules/purchase/purchase-routing.module.ts","./src/client/app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.ts","./src/client/app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.html","./src/client/app/modules/purchase/components/parts/seat-info/seat-info.component.ts","./src/client/app/modules/purchase/components/parts/seat-info/seat-info.component.html","./src/client/app/modules/purchase/components/pages/event/purchase-event-date/purchase-event-date.component.ts","./src/client/app/modules/purchase/components/pages/event/purchase-event-date/purchase-event-date.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component.html","./src/client/app/modules/purchase/components/pages/purchase-seat/purchase-seat.component.ts","./src/client/app/modules/purchase/components/pages/purchase-ticket/purchase-ticket.component.ts","./src/client/app/modules/purchase/components/pages/purchase-payment-reception/purchase-payment-reception.component.ts","./src/client/app/modules/purchase/components/pages/purchase-payment-reception/purchase-payment-reception.component.html","./src/client/app/modules/purchase/components/parts/purchase-cart/purchase-cart.component.ts","./src/client/app/modules/purchase/components/parts/purchase-cart/purchase-cart.component.html","./src/client/app/modules/purchase/components/pages/purchase-base/purchase-base.component.ts","./src/client/app/modules/purchase/components/pages/purchase-base/purchase-base.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.html","./src/client/app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.ts","./src/client/app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component.html","./src/client/app/modules/purchase/components/pages/event/purchase-event-select/purchase-event-select.component.ts","./src/client/app/modules/purchase/components/pages/event/purchase-event-select/purchase-event-select.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component.html","./src/client/app/modules/purchase/components/parts/performance/performance.component.ts","./src/client/app/modules/purchase/components/parts/performance/performance.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component.html","./src/client/app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.ts","./src/client/app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.html","./src/client/app/modules/purchase/components/parts/performances/performances.component.ts","./src/client/app/modules/purchase/components/parts/performances/performances.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.html","./src/client/app/modules/purchase/components/parts/purchase-info/purchase-info.component.ts","./src/client/app/modules/purchase/components/parts/purchase-info/purchase-info.component.html","./src/client/app/modules/purchase/components/parts/step/step.component.ts","./src/client/app/modules/purchase/components/parts/step/step.component.html","./src/client/app/modules/purchase/components/pages/purchase-payment/purchase-payment.component.ts","./src/client/app/modules/purchase/components/pages/purchase-payment/purchase-payment.component.html","./src/client/app/modules/purchase/components/pages/event/purchase-event-top/purchase-event-top.component.ts","./src/client/app/modules/purchase/components/pages/event/purchase-event-top/purchase-event-top.component.html","./src/client/app/modules/purchase/components/pages/purchase-root/purchase-root.component.ts","./src/client/app/modules/purchase/purchase.module.ts","./src/client/app/modules/purchase/components/parts/input-tickets/input-tickets.component.ts","./src/client/app/modules/purchase/components/parts/input-tickets/input-tickets.component.html","./src/client/app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.ts","./src/client/app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.html","./src/client/app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.ts","./src/client/app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.html","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.ts","./src/client/app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.html","./src/client/app/modules/purchase/components/pages/event/purchase-event-ticket/purchase-event-ticket.component.ts","./src/client/app/modules/purchase/components/pages/event/purchase-event-ticket/purchase-event-ticket.component.html","./src/client/app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.ts","./src/client/app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.html"],"names":[],"mappings":"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","file":"modules-purchase-purchase-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuardService, PurchaseTransactionGuardService, SettingGuardService, ViewTypeGuardService } from '../../canActivates';\nimport { PurchaseCinemaDateComponent } from './components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component';\nimport { PurchaseCinemaScheduleEventComponent } from './components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component';\nimport { PurchaseCinemaScheduleMovieComponent } from './components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseCinemaTopComponent } from './components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component';\nimport { PurchaseEventDateComponent } from './components/pages/event/purchase-event-date/purchase-event-date.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseEventSelectComponent } from './components/pages/event/purchase-event-select/purchase-event-select.component';\nimport { PurchaseEventTicketComponent } from './components/pages/event/purchase-event-ticket/purchase-event-ticket.component';\nimport { PurchaseEventTopComponent } from './components/pages/event/purchase-event-top/purchase-event-top.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchasePaymentReceptionComponent } from './components/pages/purchase-payment-reception/purchase-payment-reception.component';\nimport { PurchasePaymentComponent } from './components/pages/purchase-payment/purchase-payment.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PurchaseBaseComponent,\n    canActivate: [AuthGuardService, SettingGuardService],\n    children: [\n      { path: 'root', component: PurchaseRootComponent },\n      {\n        path: 'cinema',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: '', component: PurchaseCinemaTopComponent },\n          { path: 'date', component: PurchaseCinemaDateComponent },\n          { path: 'schedule', component: PurchaseCinemaScheduleComponent },\n          { path: 'schedule/movie', component: PurchaseCinemaScheduleMovieComponent },\n          { path: 'schedule/event', component: PurchaseCinemaScheduleEventComponent },\n          { path: 'seat', component: PurchaseCinemaSeatComponent },\n          { path: 'ticket', component: PurchaseCinemaTicketComponent },\n        ]\n      },\n      {\n        path: 'event',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: '', component: PurchaseEventTopComponent },\n          { path: 'date', component: PurchaseEventDateComponent },\n          { path: 'schedule', component: PurchaseEventScheduleComponent },\n          { path: 'seat', component: PurchaseEventSeatComponent },\n          { path: 'ticket', component: PurchaseEventTicketComponent },\n          { path: 'select', component: PurchaseEventSelectComponent },\n        ]\n      },\n      { path: 'payment', canActivate: [PurchaseTransactionGuardService], component: PurchasePaymentComponent },\n      { path: 'payment/reception', canActivate: [PurchaseTransactionGuardService], component: PurchasePaymentReceptionComponent },\n      { path: 'complete', component: PurchaseCompleteComponent }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PurchaseRoutingModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\n\n@Component({\n    selector: 'app-transaction-remaining-time',\n    templateUrl: './transaction-remaining-time.component.html',\n    styleUrls: ['./transaction-remaining-time.component.scss']\n})\nexport class TransactionRemainingTimeComponent implements OnInit, OnDestroy {\n    public transaction?: factory.transaction.placeOrder.ITransaction;\n    public isExpired: boolean;\n    public diff: { hours: string; minutes: string; seconds: string; };\n    public timer: any;\n    public width: number;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router,\n        private actionService: ActionService\n    ) { }\n\n    public ngOnInit() {\n        this.update();\n    }\n\n    public ngOnDestroy() {\n        clearTimeout(this.timer);\n    }\n\n    private async update() {\n        const { transaction } = await this.actionService.purchase.getData();\n        if (transaction === undefined) {\n            return;\n        }\n        this.transaction = transaction;\n        const now = moment();\n        const expires = moment(transaction.expires);\n        this.isExpired = expires.diff(now) < 0;\n        this.diff = {\n            hours: `00${expires.diff(now, 'hours')}`.slice(-2),\n            minutes: `00${expires.diff(now, 'minutes') % 60}`.slice(-2),\n            seconds: `00${expires.diff(now, 'seconds') % 60 % 60}`.slice(-2)\n        };\n        this.width = Math.floor(expires.diff(now, 'seconds') / (Number(this.environment.PURCHASE_TRANSACTION_TIME) * 60) * 100);\n        if (this.isExpired) {\n            this.router.navigate(['/expired']);\n        }\n        const time = 1000;\n        this.timer = setTimeout(() => { this.update(); }, time);\n    }\n\n}\n","<!-- <div class=\"parent bg-white\" *ngIf=\"!isExpired && environment.PURCHASE_TRANSACTION_TIME_DISPLAY\">\n    <div class=\"cover w-100 h-100 bg-primary\"></div>\n    <div class=\"expired bg-primary\" [style.width.%]=\"width\"></div>\n</div> -->\n\n\n<p *ngIf=\"transaction\" class=\"text-white position-relative\">\n    {{ 'common.timeLimit' | translate }} {{ this.diff.hours }}:{{ this.diff.minutes }}:{{ this.diff.seconds }}\n</p>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-seat-info',\n    templateUrl: './seat-info.component.html',\n    styleUrls: ['./seat-info.component.scss']\n})\nexport class SeatInfoComponent implements OnInit {\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"px-3 border border-gray\">\n    <div class=\"d-flex align-items-center py-3 border-bottom border-gray\">\n        <div class=\"mr-3 seat\"></div>\n        <div>{{ 'purchase.seat.normal' | translate }}</div>\n    </div>\n    <div class=\"d-flex align-items-center py-3 border-bottom border-gray\">\n        <div class=\"mr-3 seat active\"></div>\n        <div>{{ 'purchase.seat.active' | translate }}</div>\n    </div>\n    <div class=\"d-flex align-items-center py-3 border-bottom border-gray\">\n        <div class=\"mr-3 seat disabled\"></div>\n        <div>{{ 'purchase.seat.disabled' | translate }}</div>\n    </div>\n    <div class=\"d-flex align-items-center py-3\">\n        <div class=\"mr-3 seat space\"></div>\n        <div>{{ 'purchase.seat.space' | translate }}</div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-event-date',\n    templateUrl: './purchase-event-date.component.html',\n    styleUrls: ['./purchase-event-date.component.scss']\n})\nexport class PurchaseEventDateComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public moment = moment;\n    public environment = getEnvironment();\n    public scheduleDates: string[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            this.scheduleDates = [];\n            const { theater } = await this.actionService.user.getData();\n            if (theater === undefined) {\n                throw new Error('theater undefined');\n            }\n            this.scheduleDates = this.cteateScheduleDate({ theater });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public cteateScheduleDate(params: {\n        theater: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom;\n    }) {\n        const { theater } = params;\n        const now = moment().toDate();\n        const today = moment(moment(now).format('YYYYMMDD')).toDate();\n        if (theater.offers === undefined\n            || theater.offers.availabilityStartsGraceTime === undefined\n            || theater.offers.availabilityStartsGraceTime.value === undefined\n            || theater.offers.availabilityStartsGraceTime.unitCode !== factory.chevre.unitCode.Day) {\n            return [];\n        }\n        const limitDate = moment(today).add(theater.offers.availabilityStartsGraceTime.value * -1, 'days');\n        const limit = limitDate.diff(moment(today), 'days');\n        const result = [];\n        for (let i = 0; i < limit; i++) {\n            const date = moment(moment(today).add(i + 1, 'day')).format('YYYY-MM-DD');\n            result.push(date);\n        }\n        return result;\n    }\n\n    /**\n     * \n     */\n    public async toPurchase(scheduleDate: string) {\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        this.router.navigate(['/purchase/event/schedule']);\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.event.date.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\">\n        <div class=\"mb-4\">\n            <div class=\"container px-0\">\n                <div class=\"row\">\n                    <div class=\"col-3\" *ngFor=\"let scheduleDate of scheduleDates\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray py-5 mb-3\"\n                            (click)=\"toPurchase(scheduleDate)\">\n                            <div class=\"text-large\">{{ moment(scheduleDate, 'YYYYMMDD').format('YYYY/MM/DD (ddd)') }}\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/event\">\n                    {{ 'purchase.event.date.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    disabled>\n                    {{ 'purchase.event.date.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport {\n    ActionService,\n    EpsonEPOSService,\n    MasterService,\n    UtilService,\n} from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cinema-top',\n    templateUrl: './purchase-cinema-top.component.html',\n    styleUrls: ['./purchase-cinema-top.component.scss'],\n})\nexport class PurchaseCinemaTopComponent implements OnInit {\n    public user: Observable<reducers.IUserState>;\n    public applicationType = Models.Util.Application.ApplicationType;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private epsonEPOSService: EpsonEPOSService\n    ) {}\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.user = this.store.pipe(select(reducers.getUser));\n            this.actionService.user.updateLanguage('ja');\n            await this.actionService.purchase.transaction.cancel();\n            this.actionService.purchase.delete();\n            if (!this.epsonEPOSService.cashchanger.isConnected()) {\n                await this.actionService.user.checkVersion();\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public async searchMovie() {\n        this.actionService.purchase.selectSearchType({ searchType: 'movie' });\n        await this.startTransaction({\n            routerLink: '/purchase/cinema/schedule/movie',\n        });\n    }\n\n    /**\n     * \n     */\n    public async searchEvent() {\n        this.actionService.purchase.selectSearchType({ searchType: 'event' });\n        await this.startTransaction({\n            routerLink: '/purchase/cinema/schedule',\n        });\n    }\n\n    /**\n     * \n     */\n    public async changeDate() {\n        this.actionService.purchase.selectSearchType({ searchType: 'movie' });\n        await this.startTransaction({ routerLink: '/purchase/cinema/date' });\n    }\n\n    /**\n     * \n     */\n    public async startTransaction(params: { routerLink: string }) {\n        const now = moment().toDate();\n        const today = moment(now).format('YYYY-MM-DD');\n        this.actionService.purchase.selectScheduleDate(today);\n        try {\n            const { theater } = await this.actionService.user.getData();\n            if (theater === undefined) {\n                throw new Error('theater undefined');\n            }\n            const screeningEvents =\n                await this.masterService.searchScreeningEvent({\n                    superEvent: {\n                        locationBranchCodes: [theater.branchCode],\n                    },\n                    startFrom: moment(today, 'YYYY-MM-DD').toDate(),\n                    offers: {\n                        availableFrom: now,\n                        availableThrough: now,\n                    },\n                });\n            const screeningEvent = screeningEvents.find(\n                (s) =>\n                    s.offers !== undefined &&\n                    s.offers.seller !== undefined &&\n                    s.offers.seller.id !== undefined\n            );\n            if (\n                screeningEvent === undefined ||\n                screeningEvent.offers === undefined ||\n                screeningEvent.offers.seller === undefined ||\n                screeningEvent.offers.seller.id === undefined\n            ) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        'purchase.cinema.schedule.notfound'\n                    ),\n                });\n                return;\n            }\n            await this.actionService.purchase.getSeller({\n                id: screeningEvent.offers.seller.id,\n            });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            const { pos } = await this.actionService.user.getData();\n            await this.actionService.purchase.transaction.start({ pos });\n            const { routerLink } = params;\n            this.router.navigate([routerLink]);\n        } catch (error) {\n            const errorObject = JSON.parse(error);\n            if (errorObject.status === TOO_MANY_REQUESTS) {\n                this.router.navigate(['/congestion']);\n                return;\n            }\n            if (errorObject.status === BAD_REQUEST) {\n                this.router.navigate(['/maintenance']);\n                return;\n            }\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public getImageUrl() {\n        const { storageUrl } = Functions.Util.getProject();\n        return `${storageUrl}${this.environment.TOP_IMAGE}`;\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.cinema.top.title' | translate }}\"></app-page-title>\n</app-header>\n<div class=\"contents\">\n    <div class=\"h-100 d-flex align-items-center px-4\">\n        <div class=\"container px-0\">\n            <div class=\"row justify-content-center mb-5\">\n                <div *ngIf=\"(user | async)?.applicationType !== applicationType.Printer\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/cinema/top/movie.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.cinema.top.movie.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary py-3 mb-3\"\n                                (click)=\"searchMovie()\">\n                                {{ 'purchase.cinema.top.movie.search.today' | translate }}\n                            </button>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary py-3\" (click)=\"changeDate()\">\n                                {{ 'purchase.cinema.top.movie.search.other' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div *ngIf=\"(user | async)?.applicationType !== applicationType.Printer\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/cinema/top/time.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.cinema.top.time.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary py-3\" (click)=\"searchEvent()\">\n                                {{ 'purchase.cinema.top.time.search' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/cinema/top/inquiry.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.cinema.top.inquiry.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary py-3\"\n                                routerLink=\"/inquiry/input\">\n                                {{ 'purchase.cinema.top.inquiry.print' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"environment.TOP_IMAGE\" class=\"image\"><img [src]=\"getImageUrl()\" class=\"w-100\" alt=\"\"></div>\n    <app-language></app-language>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-2\">\n                <app-language></app-language>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-seat',\n    template: '',\n})\nexport class PurchaseSeatComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public translateName: string;\n    public reservationCount: number;\n    public Number = Number;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        protected router: Router,\n        protected actionService: ActionService\n    ) {}\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName =\n            this.environment.VIEW_TYPE === 'cinema'\n                ? 'purchase.cinema.seat'\n                : 'purchase.event.seat';\n        this.screeningEventSeats = [];\n        this.reservationCount = 0;\n        try {\n            const { screeningEvent, reservations, seller } =\n                await this.actionService.purchase.getData();\n            if (screeningEvent === undefined || seller === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.reservationCount = reservations.length;\n            await this.resetSeats();\n            reservations.forEach((r) => {\n                if (r.seat === undefined) {\n                    return;\n                }\n                this.selectSeat({\n                    seat: r.seat,\n                    status: Models.Purchase.Screen.SeatStatus.Default,\n                });\n            });\n            await this.actionService.purchase.getScreeningRoom({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: {\n                        $eq: screeningEvent.superEvent.location.branchCode,\n                    },\n                },\n            });\n            this.screeningEventSeats =\n                await this.actionService.purchase.event.getScreeningEventSeats();\n            await this.actionService.purchase.event.searchTicketOffers();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSeat(data: {\n        seat: Models.Purchase.Reservation.IReservationSeat;\n        status: Models.Purchase.Screen.SeatStatus;\n    }) {\n        const { screeningEvent, reservations } =\n            await this.actionService.purchase.getData();\n        if (data.status === Models.Purchase.Screen.SeatStatus.Default) {\n            if (\n                screeningEvent !== undefined &&\n                screeningEvent.offers !== undefined &&\n                screeningEvent.offers.eligibleQuantity.maxValue !== undefined &&\n                reservations.length >=\n                    screeningEvent.offers.eligibleQuantity.maxValue\n            ) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        `${this.translateName}.alert.limit`,\n                        {\n                            value: screeningEvent.offers.eligibleQuantity\n                                .maxValue,\n                        }\n                    ),\n                });\n                return;\n            }\n            this.actionService.purchase.selectSeats([data.seat]);\n        } else {\n            this.actionService.purchase.cancelSeats([data.seat]);\n        }\n    }\n\n    /**\n     * \n     */\n    public async allSelectSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEventSeats = this.screeningEventSeats;\n        screeningEventSeats.forEach((s) => {\n            if (\n                s.offers === undefined ||\n                s.offers[0].availability !==\n                    factory.chevre.itemAvailability.InStock ||\n                s.containedInPlace === undefined\n            ) {\n                return;\n            }\n            seats.push({\n                typeOf: s.typeOf,\n                seatingType: s.seatingType === undefined ? '' : s.seatingType,\n                seatNumber: s.branchCode,\n                seatRow: '',\n                seatSection:\n                    s.containedInPlace.branchCode === undefined\n                        ? ''\n                        : s.containedInPlace.branchCode,\n                offers: s.offers,\n            });\n        });\n        if (\n            purchase.authorizeSeatReservation !== undefined &&\n            purchase.authorizeSeatReservation.result !== undefined &&\n            purchase.authorizeSeatReservation.result.responseBody.object\n                .reservations !== undefined\n        ) {\n            purchase.authorizeSeatReservation.result.responseBody.object.reservations.forEach(\n                (r) => {\n                    if (r.reservedTicket.ticketedSeat === undefined) {\n                        return;\n                    }\n                    seats.push(r.reservedTicket.ticketedSeat);\n                }\n            );\n        }\n        this.actionService.purchase.selectSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public async resetSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        purchase.reservations.forEach((reservation) => {\n            if (reservation.seat === undefined) {\n                return;\n            }\n            seats.push(reservation.seat);\n        });\n        this.actionService.purchase.cancelSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityValue(params: {\n        screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent;\n        authorizeSeatReservations: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>[];\n    }) {\n        const screeningEventSeats = params.screeningEventSeats;\n        const screeningEvent = params.screeningEvent;\n        const values = [];\n        let limit = Number(this.environment.PURCHASE_ITEM_MAX_LENGTH);\n        if (\n            screeningEvent.offers !== undefined &&\n            screeningEvent.offers.eligibleQuantity.maxValue !== undefined &&\n            limit > screeningEvent.offers.eligibleQuantity.maxValue\n        ) {\n            limit = screeningEvent.offers.eligibleQuantity.maxValue;\n        }\n        if (\n            new Models.Purchase.Performance({ screeningEvent }).isTicketedSeat()\n        ) {\n            // \n            const screeningEventLimit =\n                Functions.Purchase.getRemainingSeatLength({\n                    screeningEventSeats,\n                    screeningEvent,\n                });\n            if (limit > screeningEventLimit) {\n                limit = screeningEventLimit;\n            }\n        }\n        for (let i = 0; i < limit; i++) {\n            values.push(i + 1);\n        }\n        return values;\n    }\n\n    /**\n     * \n     */\n    public async selectOpenSeating() {\n        const { reservations } = await this.actionService.purchase.getData();\n        this.screeningEventSeats =\n            await this.actionService.purchase.event.getScreeningEventSeats();\n        const screeningEventSeats = this.screeningEventSeats;\n        const seats = Functions.Purchase.getEmptySeat({\n            reservations,\n            screeningEventSeats,\n        });\n        await this.resetSeats();\n        const selectSeats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        for (let i = 0; i < Number(this.reservationCount); i++) {\n            const seat =\n                seats[i] === undefined\n                    ? {\n                          seatNumber: String(i + 1),\n                          seatRow: '',\n                          seatSection: '',\n                          typeOf: <any>factory.placeType.Seat,\n                      }\n                    : seats[i];\n            selectSeats.push(seat);\n        }\n        this.actionService.purchase.selectSeats(selectSeats);\n    }\n\n    /**\n     * onSubmit\n     */\n    public async onSubmit() {\n        const { screeningEventTicketOffers, screen } =\n            await this.actionService.purchase.getData();\n        try {\n            if (screeningEventTicketOffers.length === 0) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        `${this.translateName}.alert.ticketNotfound`\n                    ),\n                });\n                return;\n            }\n            if (screen !== undefined && screen.openSeatingAllowed) {\n                // \n                await this.selectOpenSeating();\n            }\n            const { reservations } =\n                await this.actionService.purchase.getData();\n            await this.actionService.purchase.transaction.authorizeSeatReservation(\n                {\n                    reservations,\n                    screeningEventSeats: this.screeningEventSeats,\n                }\n            );\n            const navigate =\n                this.environment.VIEW_TYPE === 'cinema'\n                    ? '/purchase/cinema/ticket'\n                    : '/purchase/event/ticket';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            if (screen !== undefined && screen.openSeatingAllowed) {\n                // \n                await this.resetSeats();\n            }\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `<p class=\"mb-4\">${this.translate.instant(\n                    `${this.translateName}.alert.temporaryReservation`\n                )}</p>\n                <div class=\"p-3 bg-light-gray select-text\">\n                <code>${\n                    JSON.stringify(error) === '{}'\n                        ? error\n                        : JSON.stringify(error)\n                }</code>\n            </div>`,\n            });\n        }\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport {\n    IReservation,\n    IReservationTicket,\n} from '../../../../../models/purchase/reservation';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\nimport { PurchaseSeatTicketModalComponent } from '../../../../shared/components/parts/purchase/seat-ticket-modal/seat-ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-ticket',\n    template: '',\n})\nexport class PurchaseTicketComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public additionalTicketText: string;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public translateName: string;\n    public isSelectedTicket: boolean;\n    public paymentServices: factory.service.paymentService.IService[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private modal: BsModalService,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private translate: TranslateService\n    ) {}\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        const paymentServices: factory.service.paymentService.IService[] = [];\n        this.translateName =\n            this.environment.VIEW_TYPE === 'cinema'\n                ? 'purchase.cinema.ticket'\n                : 'purchase.event.ticket';\n        this.additionalTicketText = '';\n        this.isSelectedTicket =\n            (await this.getUnselectedTicketReservations()).length === 0;\n        const { seller } = await this.actionService.purchase.getData();\n        if (seller === undefined) {\n            throw new Error('seller undefined');\n        }\n        const products = await this.actionService.product.search({\n            typeOf: {\n                $eq: factory.service.paymentService.PaymentServiceType\n                    .MovieTicket,\n            },\n        });\n        products.forEach((p) => {\n            if (\n                p.typeOf !==\n                    factory.service.paymentService.PaymentServiceType\n                        .MovieTicket ||\n                p.provider === undefined\n            ) {\n                return;\n            }\n            const findResult = p.provider.find(\n                (provider) => provider.id === seller.id\n            );\n            if (findResult === undefined) {\n                return;\n            }\n            paymentServices.push(p);\n        });\n        this.paymentServices = paymentServices;\n    }\n\n    /**\n     * \n     */\n    public async getUnselectedTicketReservations() {\n        const { reservations } = await this.actionService.purchase.getData();\n        return reservations.filter((reservation) => {\n            return reservation.ticket === undefined;\n        });\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { reservations } = await this.actionService.purchase.getData();\n        const validResult = reservations.filter((reservation) => {\n            if (reservation.ticket === undefined) {\n                return false;\n            }\n            const priceComponent =\n                reservation.ticket.ticketOffer.priceSpecification\n                    .priceComponent;\n            const UnitPriceSpecification =\n                factory.chevre.priceSpecificationType.UnitPriceSpecification;\n            const unitPriceSpecifications = priceComponent.filter(\n                (p) => p.typeOf === UnitPriceSpecification\n            );\n            const filterResult = reservations.filter((targetReservation) => {\n                return (\n                    reservation.ticket !== undefined &&\n                    targetReservation.ticket !== undefined &&\n                    reservation.ticket.ticketOffer.id ===\n                        targetReservation.ticket.ticketOffer.id\n                );\n            });\n            const findResult = unitPriceSpecifications.find(\n                (unitPriceSpecification) => {\n                    const value =\n                        unitPriceSpecification.typeOf ===\n                            UnitPriceSpecification &&\n                        unitPriceSpecification.referenceQuantity.value !==\n                            undefined\n                            ? unitPriceSpecification.referenceQuantity.value\n                            : 1;\n\n                    return filterResult.length % value !== 0;\n                }\n            );\n\n            return findResult !== undefined;\n        });\n        if (validResult.length > 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    `${this.translateName}.alert.ticketCondition`\n                ),\n            });\n            return;\n        }\n        try {\n            const additionalTicketText = this.additionalTicketText;\n            const screeningEventSeats =\n                await this.actionService.purchase.event.getScreeningEventSeats();\n            await this.actionService.purchase.transaction.authorizeSeatReservation(\n                {\n                    reservations,\n                    additionalTicketText,\n                    screeningEventSeats,\n                }\n            );\n            const navigate =\n                this.environment.VIEW_TYPE === 'cinema'\n                    ? '/purchase/payment'\n                    : '/purchase/event/schedule';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant(\n                    `${this.translateName}.alert.temporaryReservation`\n                )}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${\n                        JSON.stringify(error) === '{}'\n                            ? error\n                            : JSON.stringify(error)\n                    }</code>\n                </div>`,\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async openTicketList(reservation?: IReservation) {\n        const {\n            authorizeSeatReservation,\n            screeningEventTicketOffers,\n            checkMovieTickets,\n            checkProducts,\n            reservations,\n            pendingMovieTickets,\n        } = await this.actionService.purchase.getData();\n        this.modal.show(PurchaseSeatTicketModalComponent, {\n            class: 'modal-dialog-centered modal-lg',\n            initialState: {\n                authorizeSeatReservation,\n                screeningEventTicketOffers,\n                checkMovieTickets,\n                checkProducts,\n                reservations,\n                reservation,\n                pendingMovieTickets,\n                cb: async (ticket: IReservationTicket) => {\n                    this.actionService.purchase.selectTickets([\n                        { ...reservation, ticket },\n                    ]);\n                    this.isSelectedTicket =\n                        (await this.getUnselectedTicketReservations())\n                            .length === 0;\n                },\n            },\n        });\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport {\n    ActionService,\n    EpsonEPOSService,\n    PaymentService,\n    UtilService,\n} from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-payment-reception',\n    templateUrl: './purchase-payment-reception.component.html',\n    styleUrls: ['./purchase-payment-reception.component.scss'],\n})\nexport class PurchasePaymentReceptionComponent implements OnInit, OnDestroy {\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private epsonEPOSService: EpsonEPOSService,\n        private paymentService: PaymentService\n    ) {}\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public paymentMethodType = Models.Purchase.Payment.PaymentMethodType;\n    public viewType = Models.Util.ViewType;\n    public amount: number;\n    public environment = getEnvironment();\n\n    public async ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        try {\n            this.utilService.loadStart({ process: 'load' });\n            const purchase = await this.actionService.purchase.getData();\n            this.amount = Functions.Purchase.getAmount(\n                purchase.authorizeSeatReservations\n            );\n            if (this.amount === 0) {\n                await this.onSubmit();\n                this.utilService.loadEnd();\n                return;\n            }\n            if (\n                purchase.paymentMethod?.typeOf ===\n                Models.Purchase.Payment.PaymentMethodType.Cash\n            ) {\n                // \n                await this.cash();\n                this.utilService.loadEnd();\n            } else if (\n                purchase.paymentMethod?.typeOf ===\n                this.paymentMethodType.CreditCard\n            ) {\n                // \n                this.utilService.loadEnd();\n                await this.creditcard();\n            } else if (\n                purchase.paymentMethod?.typeOf ===\n                Models.Purchase.Payment.PaymentMethodType.EMoney\n            ) {\n                // \n                this.utilService.loadEnd();\n                await this.eMoney();\n            } else if (purchase.paymentMethod?.typeOf === 'Code') {\n                // \n                this.utilService.loadEnd();\n                await this.code();\n            } else {\n                throw new Error('paymentMethod not supported');\n            }\n        } catch (error) {\n            console.error(error);\n            this.utilService.loadEnd();\n            // this.router.navigate(['/stop']);\n        }\n    }\n\n    public async ngOnDestroy() {\n        if (this.epsonEPOSService.cashchanger.isConnected()) {\n            try {\n                await this.endDepositRepay();\n            } catch (error) {\n                this.router.navigate(['/stop']);\n            }\n        }\n    }\n\n    /**\n     * \n     */\n    public getDeposit() {\n        const deposit = this.epsonEPOSService.cashchanger.getDeposit().amount;\n        return deposit;\n    }\n\n    /**\n     * \n     */\n    private async cash() {\n        const { cashchanger } = await this.actionService.user.getData();\n        if (cashchanger === undefined) {\n            throw new Error('cashchanger undefined');\n        }\n        await this.epsonEPOSService.cashchanger.init({\n            ipAddress: cashchanger,\n        });\n        await this.epsonEPOSService.cashchanger.beginDeposit();\n    }\n\n    /**\n     * \n     */\n    private async creditcard() {\n        const { transaction } = await this.actionService.purchase.getData();\n        const { payment, pos } = await this.actionService.user.getData();\n        if (transaction === undefined || payment === undefined) {\n            throw new Error('transaction or payment undefined');\n        }\n        const timeout = this.getPaymentTimeout({ transaction });\n        if (timeout < 0) {\n            this.router.navigate(['/expired']);\n            return;\n        }\n        const modal = this.utilService.openStaticModal({\n            title: '', // this.translate.instant('purchase.paymentReception.creditcard.title'),\n            body: '<img class=\"w-100\" src=\"/default/images/purchase/payment/reception/creditcard.svg\" alt=\"\">',\n        });\n        const orderId = Functions.Purchase.createRemiseOrderId(pos?.id);\n        this.actionService.purchase.setOrderId({ id: orderId });\n        await this.paymentService.init({ ipAddress: payment });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.CREDITCARD.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: orderId,\n                AMOUNT: String(this.amount),\n                // MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            },\n            timeout,\n        });\n        if (\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL ||\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL ||\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.APP_ERROR\n        ) {\n            modal.hide();\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (\n            execResult.FUNC_STATUS !==\n            Models.Purchase.Payment.FUNC_STATUS.SUCCESS\n        ) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.CREDITCARD.INTERRUPTION,\n            });\n            modal.hide();\n            throw new Error(JSON.stringify(execResult));\n        }\n        modal.hide();\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    private async eMoney() {\n        const { transaction } = await this.actionService.purchase.getData();\n        const { payment, pos } = await this.actionService.user.getData();\n        if (transaction === undefined || payment === undefined) {\n            throw new Error('transaction or payment undefined');\n        }\n        const timeout = this.getPaymentTimeout({ transaction });\n        if (timeout < 0) {\n            this.router.navigate(['/expired']);\n            return;\n        }\n        const modal = this.utilService.openStaticModal({\n            title: '', // this.translate.instant('purchase.paymentReception.eMoney.title'),\n            body: '<img class=\"w-100\" src=\"/default/images/purchase/payment/reception/eMoney.svg\" alt=\"\">',\n        });\n        const orderId = Functions.Purchase.createRemiseOrderId(pos?.id);\n        this.actionService.purchase.setOrderId({ id: orderId });\n        await this.paymentService.init({ ipAddress: payment });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.EMONEY.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: orderId,\n                AMOUNT: String(this.amount),\n                // MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            },\n            timeout,\n        });\n        if (\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL ||\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL ||\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.APP_ERROR\n        ) {\n            modal.hide();\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (\n            execResult.FUNC_STATUS !==\n            Models.Purchase.Payment.FUNC_STATUS.SUCCESS\n        ) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.EMONEY.INTERRUPTION,\n            });\n            modal.hide();\n            throw new Error(JSON.stringify(execResult));\n        }\n        modal.hide();\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    private async code() {\n        const { transaction } = await this.actionService.purchase.getData();\n        const { payment, pos } = await this.actionService.user.getData();\n        if (transaction === undefined || payment === undefined) {\n            throw new Error('transaction or payment undefined');\n        }\n        const timeout = this.getPaymentTimeout({ transaction });\n        if (timeout < 0) {\n            this.router.navigate(['/expired']);\n            return;\n        }\n        const modal = this.utilService.openStaticModal({\n            title: '', // this.translate.instant('purchase.paymentReception.eMoney.title'),\n            body: '<img class=\"w-100\" src=\"/default/images/purchase/payment/reception/eMoney.svg\" alt=\"\">',\n        });\n        const orderId = Functions.Purchase.createRemiseOrderId(pos?.id);\n        this.actionService.purchase.setOrderId({ id: orderId });\n        await this.paymentService.init({ ipAddress: payment });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.CODE.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: orderId,\n                AMOUNT: String(this.amount),\n                MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            },\n            timeout,\n        });\n        if (\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL ||\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL ||\n            execResult.FUNC_STATUS ===\n                Models.Purchase.Payment.FUNC_STATUS.APP_ERROR\n        ) {\n            modal.hide();\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (\n            execResult.FUNC_STATUS !==\n            Models.Purchase.Payment.FUNC_STATUS.SUCCESS\n        ) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.CODE.INTERRUPTION,\n            });\n            modal.hide();\n            throw new Error(JSON.stringify(execResult));\n        }\n        modal.hide();\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        try {\n            const { pendingMovieTickets, paymentMethod, orderId, seller } =\n                await this.actionService.purchase.getData();\n            const { customerContact } = await this.actionService.user.getData();\n            const profile = customerContact;\n            if (profile === undefined || seller === undefined) {\n                throw new Error('profile or seller undefined');\n            }\n            if (pendingMovieTickets.length > 0) {\n                await this.actionService.purchase.payment.authorizeMovieTicket();\n            }\n            if (paymentMethod !== undefined) {\n                const additionalProperty: { name: string; value: string }[] =\n                    [];\n                if (\n                    paymentMethod.typeOf ===\n                    Models.Purchase.Payment.PaymentMethodType.Cash\n                ) {\n                    // \n                    const deposit = this.getDeposit();\n                    additionalProperty.push({\n                        name: 'depositAmount',\n                        value: String(deposit),\n                    });\n                    additionalProperty.push({\n                        name: 'change',\n                        value: String(deposit - this.amount),\n                    });\n                }\n                if (orderId !== undefined) {\n                    additionalProperty.push({\n                        name: 'orderId',\n                        value: orderId,\n                    });\n                }\n                await this.actionService.purchase.payment.authorizeAnyPayment({\n                    amount: this.amount,\n                    additionalProperty,\n                });\n            }\n            await this.actionService.purchase.transaction.setProfile(profile);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            const { seller } = await this.actionService.purchase.getData();\n            const { language, theater } =\n                await this.actionService.user.getData();\n            if (seller === undefined || theater === undefined) {\n                throw new Error('seller or theater undefined');\n            }\n            await this.actionService.purchase.transaction.confirm({\n                theater,\n                language,\n            });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            if (this.epsonEPOSService.cashchanger.isConnected()) {\n                await this.epsonEPOSService.cashchanger.disconnect();\n            }\n            const { order } = await this.actionService.purchase.getData();\n            const { printer, pos } = await this.actionService.user.getData();\n            if (order === undefined || printer === undefined) {\n                throw new Error('order or printer undefined');\n            }\n            const orders = [order];\n            await this.actionService.order.print({ orders, pos, printer });\n        } catch (error) {\n            try {\n                const { order } = await this.actionService.purchase.getData();\n                const { language, pos } =\n                    await this.actionService.user.getData();\n                if (order === undefined) {\n                    throw new Error('order or printer undefined');\n                }\n                await this.actionService.order.cancel({\n                    orders: [order],\n                    language,\n                    pos,\n                });\n            } catch (error2) {\n                console.error(error2);\n            }\n            try {\n                const { cashchanger } = await this.actionService.user.getData();\n                if (cashchanger === undefined) {\n                    throw new Error('cashchanger undefined');\n                }\n                await this.epsonEPOSService.cashchanger.init({\n                    ipAddress: cashchanger,\n                });\n            } catch (error2) {\n                console.error(error2);\n            }\n            this.utilService.setError(error);\n            this.router.navigate(['/stop']);\n            return;\n        }\n        try {\n            const { order } = await this.actionService.purchase.getData();\n            if (order === undefined) {\n                throw new Error('order undefined');\n            }\n            const findResult = order.paymentMethods.find(\n                (p) =>\n                    p.typeOf === Models.Purchase.Payment.PaymentMethodType.Cash\n            );\n            if (findResult !== undefined) {\n                // \n                this.utilService.loadStart({ process: 'load' });\n                const { cashchanger } = await this.actionService.user.getData();\n                if (cashchanger === undefined) {\n                    throw new Error('cashchanger undefined');\n                }\n                await this.epsonEPOSService.cashchanger.init({\n                    ipAddress: cashchanger,\n                });\n                await this.epsonEPOSService.cashchanger.endDeposit({\n                    endDepositType: 'DEPOSIT_NOCHANGE',\n                });\n                const deposit = this.epsonEPOSService.cashchanger.getDeposit();\n                const change = deposit.amount - this.amount;\n                if (!Number.isNaN(change) && change > 0) {\n                    // \n                    await this.epsonEPOSService.cashchanger.dispenseChange({\n                        change,\n                    });\n                }\n                await this.epsonEPOSService.cashchanger.disconnect();\n                this.utilService.loadEnd();\n            }\n        } catch (error) {\n            this.utilService.loadEnd();\n            console.error(error);\n            this.router.navigate(['/stop']);\n            return;\n        }\n        this.router.navigate(['/purchase/complete']);\n    }\n\n    /**\n     * \n     */\n    private getPaymentTimeout(params: {\n        transaction: factory.transaction.placeOrder.ITransaction;\n    }) {\n        const PAYMENT_NECESSARY_TIME = 20000;\n        const expires = moment(params.transaction.expires).add(\n            -1 * PAYMENT_NECESSARY_TIME,\n            'milliseconds'\n        );\n        const now = moment();\n        const paymentTimeout = Number(this.environment.PAYMENT_TIMEOUT);\n        const diff = moment(expires).diff(now, 'milliseconds');\n        return diff < paymentTimeout ? diff : paymentTimeout;\n    }\n\n    /**\n     * \n     */\n    private async endDepositRepay() {\n        try {\n            this.utilService.loadStart({ process: 'load' });\n            await this.epsonEPOSService.cashchanger.endDeposit({\n                endDepositType: 'DEPOSIT_REPAY',\n            });\n            await this.epsonEPOSService.cashchanger.disconnect();\n            this.utilService.loadEnd();\n        } catch (error) {\n            this.utilService.loadEnd();\n            throw new Error(error);\n        }\n    }\n\n    public async prev() {\n        try {\n            await this.endDepositRepay();\n            this.router.navigate(['/purchase/payment']);\n        } catch (error) {\n            this.router.navigate(['/stop']);\n        }\n    }\n}\n","<app-header>\n    <app-page-title *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\"\n        title=\"{{ 'purchase.paymentReception.cash.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <img *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\"\n                    class=\"w-100 p-3 border border-gray\" src=\"/default/images/purchase/payment/reception/cash.svg\">\n            </div>\n            <div class=\"col-6\">\n                <ng-container *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\">\n                    <div class=\"bg-white px-3 mb-4\">\n                        <div class=\"overflow-hidden\">\n                            <div class=\"p-3 row align-items-center bg-light-gray\">\n                                <p class=\"col-6 text-large\">\n                                    {{ 'purchase.paymentReception.cash.insufficient' | translate }}</p>\n                                <p class=\"col-6 text-x-large text-right font-weight-bold\">\n                                    <span *ngIf=\"(amount - getDeposit()) > 0\">{{ (amount - getDeposit()) | currency :\n                                        'JPY' }}</span>\n                                    <span *ngIf=\"!((amount - getDeposit()) > 0)\">{{ 0 | currency : 'JPY' }}</span>\n                                </p>\n                            </div>\n                            <div class=\"p-3 row align-items-center border-bottom border-gray\">\n                                <p class=\"col-6 text-large\">\n                                    {{ 'purchase.paymentReception.cash.deposit' | translate }}</p>\n                                <p class=\"col-6 text-x-large text-right font-weight-bold\">\n                                    {{ getDeposit() | currency : 'JPY' }}</p>\n                            </div>\n                            <div class=\"p-3 row align-items-center\">\n                                <p class=\"col-6 text-large\">\n                                    {{ 'purchase.paymentReception.cash.change' | translate }}</p>\n                                <p class=\"col-6 text-x-large text-right font-weight-bold\">\n                                    <span *ngIf=\"(getDeposit() - amount) > 0\">{{ (getDeposit() - amount) | currency :\n                                        'JPY' }}</span>\n                                    <span *ngIf=\"!((getDeposit() - amount) > 0)\">{{ 0 | currency : 'JPY' }}</span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </ng-container>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\" class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [currentStep]=\"4\">\n                </app-purchase-step>\n                <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [currentStep]=\"2\">\n                </app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button [disabled]=\"isLoading | async\" type=\"button\"\n                    class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\" (click)=\"prev()\">\n                    {{ 'purchase.paymentReception.cash.prev' | translate }}</button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"submit\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async) || amount > getDeposit()\" (click)=\"onSubmit()\">\n                    {{ 'purchase.paymentReception.cash.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cart',\n    templateUrl: './purchase-cart.component.html',\n    styleUrls: ['./purchase-cart.component.scss'],\n})\nexport class PurchaseCartComponent implements OnInit, OnChanges {\n    @Input() public purchase: reducers.IPurchaseState;\n    @Input() public isAmount: boolean;\n    @Input() public cancel: boolean;\n    public amount: number;\n    public moment = moment;\n    public getAdditionalProperty = Functions.Purchase.getAdditionalProperty;\n\n    constructor(\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService\n    ) {}\n\n    public ngOnInit() {}\n\n    public ngOnChanges() {\n        this.amount = this.getAmount();\n    }\n\n    public getAmount() {\n        const {\n            authorizeSeatReservations,\n            authorizeSeatReservation,\n            reservations,\n        } = this.purchase;\n        if (\n            authorizeSeatReservation !== undefined &&\n            reservations.length === 0\n        ) {\n            return Functions.Purchase.getAmount(authorizeSeatReservations);\n        }\n        let amount = 0;\n        authorizeSeatReservations.forEach((a) => {\n            const findResult = reservations.find((r) => r.ticket === undefined);\n            if (\n                a.id === authorizeSeatReservation?.id &&\n                findResult !== undefined\n            ) {\n                return;\n            }\n            if (a.id === authorizeSeatReservation?.id) {\n                reservations.forEach((r) => {\n                    r.ticket?.ticketOffer.priceSpecification.priceComponent.forEach(\n                        (p) => {\n                            amount += p.price;\n                        }\n                    );\n                    r.ticket?.addOn?.forEach((addOn) => {\n                        amount +=\n                            addOn.priceSpecification?.price === undefined\n                                ? 0\n                                : addOn.priceSpecification?.price;\n                    });\n                });\n                return;\n            }\n            amount += a.result === undefined ? 0 : a.result.price;\n        });\n\n        return amount;\n    }\n\n    /**\n     * \n     */\n    public removeItem(\n        authorizeSeatReservation: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>\n    ) {\n        this.utilService.openConfirm({\n            title: this.translate.instant('common.confirm'),\n            body: this.translate.instant('purchase.event.cart.confirm.cancel'),\n            cb: async () => {\n                try {\n                    const authorizeSeatReservations = [\n                        authorizeSeatReservation,\n                    ];\n                    await this.actionService.purchase.transaction.voidSeatReservation(\n                        { authorizeSeatReservations }\n                    );\n                } catch (error) {\n                    console.error(error);\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant(\n                            'purchase.event.cart.alert.cancel'\n                        ),\n                    });\n                }\n            },\n        });\n    }\n}\n","<div class=\"d-flex justify-content-between p-3 bg-light-gray mb-3\">\n    <p class=\"font-weight-bold\">{{ 'common.amount' | translate }}</p>\n    <p *ngIf=\"isAmount\" class=\"font-weight-bold\">{{ amount | currency : 'JPY' }}</p>\n    <p *ngIf=\"!isAmount\" class=\"font-weight-bold\">-</p>\n</div>\n\n<div *ngIf=\"purchase.authorizeSeatReservations.length === 0\">\n    <p class=\"text-md-center\">{{ 'purchase.event.cart.notfound' | translate }}</p>\n</div>\n\n<div *ngFor=\"let authorizeSeatReservation of purchase.authorizeSeatReservations\"\n    class=\"mb-3 border border-gray p-3 position-relative\">\n    <button *ngIf=\"cancel\" type=\"button\" class=\"close\" aria-label=\"Close\"\n        (click)=\"removeItem(authorizeSeatReservation)\">\n        <span aria-hidden=\"true\">&times;</span>\n    </button>\n    <div class=\"mb-3\">\n        <div class=\"mb-1\">\n            <p class=\"font-weight-bold text-small pr-3\">\n                {{ authorizeSeatReservation.object.event.name | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"authorizeSeatReservation.object.event.superEvent.headline && (authorizeSeatReservation.object.event.superEvent.headline | changeLanguage)\">\n                {{ authorizeSeatReservation.object.event.superEvent.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"authorizeSeatReservation.object.event.superEvent.description && (authorizeSeatReservation.object.event.superEvent.description | changeLanguage)\">\n                {{\n                authorizeSeatReservation.object.event.superEvent.description | changeLanguage }}</p>\n        </div>\n        <p class=\"mb-1\">\n            {{ authorizeSeatReservation.object.event.startDate | formatDate: 'MM/DD(ddd) HH:mm' }}-{{\n            authorizeSeatReservation.object.event.endDate | formatDate: 'HH:mm' }}\n        </p>\n        <p class=\"text-small mb-1\">\n            <span class=\"theater-name\">\n                {{ authorizeSeatReservation.object.event.superEvent.location.name | changeLanguage }}\n            </span>\n            <span class=\"screen-name\">\n                &nbsp;/&nbsp;<span *ngIf=\"authorizeSeatReservation.object.event.location.address | changeLanguage\"\n                    class=\"mr-2\">{{ authorizeSeatReservation.object.event.location.address | changeLanguage\n                    }}</span>{{ authorizeSeatReservation.object.event.location.name | changeLanguage }}\n            </span>\n            <span\n                *ngIf=\"authorizeSeatReservation.object.event.workPerformed?.duration && moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() > 0\">\n                &nbsp;/&nbsp;<span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{\n                moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() }}{{\n                'common.date.minute' | translate }}\n            </span>\n        </p>\n        <!-- <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3 ml-auto p-0\"\n            (click)=\"removeItem(authorizeSeatReservation)\">{{ 'common.remove' | translate }}</button> -->\n    </div>\n    <ng-container\n        *ngIf=\"authorizeSeatReservation.id !== purchase.authorizeSeatReservation?.id || purchase.reservations.length === 0\">\n        <hr class=\"border-top border-gray mb-3\">\n\n        <app-item-list [authorizeSeatReservations]=\"authorizeSeatReservation?.result?.responseBody.object.reservations\">\n        </app-item-list>\n    </ng-container>\n\n\n</div>","import { AfterViewChecked, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-base',\n    templateUrl: './purchase-base.component.html',\n    styleUrls: ['./purchase-base.component.scss']\n})\nexport class PurchaseBaseComponent implements OnInit, AfterViewChecked, OnDestroy {\n    public isLoading: Observable<boolean>;\n    public process: Observable<string>;\n    public purchase: Observable<reducers.IPurchaseState>;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private changeDetectorRef: ChangeDetectorRef\n    ) { }\n\n    public ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.process = this.store.pipe(select(reducers.getProcess));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n    }\n\n    public ngAfterViewChecked() {\n        this.changeDetectorRef.detectChanges();\n    }\n\n    public ngOnDestroy() {\n        this.isLoading.subscribe().unsubscribe();\n        this.process.subscribe().unsubscribe();\n        this.purchase.subscribe().unsubscribe();\n    }\n\n}\n","<router-outlet></router-outlet>\n\n<app-loading [isLoading]=\"isLoading | async\" [process]=\"process | async\"></app-loading>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-cinema-ticket',\n    templateUrl: './purchase-cinema-ticket.component.html',\n    styleUrls: ['./purchase-cinema-ticket.component.scss']\n})\nexport class PurchaseCinemaTicketComponent extends PurchaseTicketComponent {\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.cinema.ticket.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-input-tickets *ngIf=\"(purchase | async)?.screeningEventTicketOffers && paymentServices\"\n                    [screeningEventTicketOffers]=\"(purchase | async)?.screeningEventTicketOffers\"\n                    [paymentServices]=\"paymentServices\"></app-input-tickets>\n            </div>\n            <div class=\"col-6 mh-100 scroll-horizontal\">\n                <div>\n                    <ul class=\"py-2 bg-white\">\n                        <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                            <div class=\"container px-3 py-2\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-2\">\n                                        <p *ngIf=\"reservation.seat?.seatNumber\" class=\"font-weight-bold text-large\">\n                                            {{ reservation.seat?.seatNumber }}\n                                        </p>\n                                    </div>\n                                    <div class=\"col-10\">\n                                        <div>\n                                            <button *ngIf=\"reservation.ticket === undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block border border-gray py-3\">{{\n                                                'purchase.cinema.ticket.unselected' | translate }}</button>\n                                            <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block btn-outline-primary py-3\">\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                                    <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}\n                                                    </p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ priceComponent.price | currency :\n                                                            priceComponent.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{\n                                                            'common.referenceQuantityValue' | translate: { value:\n                                                            priceComponent?.referenceQuantity?.value } }}</span>\n                                                    </p>\n                                                </div>\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                                    <p class=\"w-50 text-left\">\n                                                        {{ addOn.priceSpecification.name | changeLanguage }}</p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ addOn.priceSpecification.price | currency :\n                                                            addOn.priceSpecification.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span\n                                                            *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{\n                                                            'common.referenceQuantityValue' | translate: { value:\n                                                            addOn.priceSpecification?.referenceQuantity?.value }\n                                                            }}</span>\n                                                    </p>\n                                                </div>\n                                                <div>\n                                                    <!-- <p *ngIf=\"reservation.ticket.ticketOffer.description\" class=\"text-small text-left\">\n                                                        {{ reservation.ticket.ticketOffer.description | changeLanguage }}\n                                                    </p> -->\n                                                    <p *ngIf=\"reservation.ticket.movieTicket\"\n                                                        class=\"text-small text-left\">\n                                                        {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }}\n                                                        {{ reservation.ticket.movieTicket.identifier }}\n                                                    </p>\n                                                </div>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info [purchase]=\"purchase | async\" [isAmount]=\"false\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"3\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/cinema/seat\">\n                    {{ 'purchase.cinema.ticket.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"submit\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async) || !isSelectedTicket\" (click)=\"onSubmit()\">\n                    {{ 'purchase.cinema.ticket.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport {\n    ActionService,\n    MasterService,\n    UtilService,\n} from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\nimport { PurchaseEventTicketModalComponent } from '../../../../../shared/components/parts/purchase/event/ticket-modal/ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-event-schedule',\n    templateUrl: './purchase-event-schedule.component.html',\n    styleUrls: ['./purchase-event-schedule.component.scss'],\n})\nexport class PurchaseEventScheduleComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public master: Observable<reducers.IMasterState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent[];\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public animations: boolean[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private modal: BsModalService\n    ) {}\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.master = this.store.pipe(select(reducers.getMaster));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.actionService.purchase.unsettledDelete();\n        this.screeningEventsGroup = [];\n        this.videoFormatTypes = [];\n        this.animations = [];\n        try {\n            const user = await this.actionService.user.getData();\n            const purchase = await this.actionService.purchase.getData();\n            const theater = user.theater;\n            const scheduleDate = purchase.scheduleDate;\n            if (theater === undefined || scheduleDate === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.videoFormatTypes = await this.masterService.searchCategoryCode(\n                {\n                    categorySetIdentifier:\n                        factory.chevre.categoryCode.CategorySetIdentifier\n                            .VideoFormatType,\n                }\n            );\n            this.screeningEventSeries =\n                await this.masterService.searchScreeningEventSeries({\n                    workPerformed: {\n                        identifiers: [],\n                    },\n                    location: {\n                        branchCode: {\n                            $eq: theater.branchCode,\n                        },\n                    },\n                });\n            const screeningEvents =\n                await this.masterService.searchScreeningEvent({\n                    superEvent: { locationBranchCodes: [theater.branchCode] },\n                    startFrom: moment(scheduleDate).toDate(),\n                    startThrough: moment(scheduleDate)\n                        .add(1, 'day')\n                        .add(-1, 'millisecond')\n                        .toDate(),\n                    screeningEventSeries: this.screeningEventSeries,\n                });\n            const now = moment(\n                (await this.utilService.getServerTime()).date\n            ).toDate();\n            this.screeningEventsGroup =\n                Functions.Purchase.screeningEvents2ScreeningEventSeries({\n                    screeningEvents,\n                    now,\n                });\n            await this.addAnimationClass();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(\n        screeningEvent: factory.event.screeningEvent.IEvent\n    ) {\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.seller === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        if (\n            purchase.authorizeSeatReservations.length > 0 &&\n            Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) === 1\n        ) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.cart'\n                ),\n            });\n            return;\n        }\n        try {\n            await this.actionService.purchase.event.getScreeningEvent(\n                screeningEvent\n            );\n            this.screeningEventSeats =\n                await this.actionService.purchase.event.getScreeningEventSeats();\n            await this.actionService.purchase.event.searchTicketOffers();\n            await this.actionService.purchase.getScreeningRoom({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: {\n                        $eq: screeningEvent.superEvent.location.branchCode,\n                    },\n                },\n            });\n            this.openTicketList();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: '',\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    private async openTicketList() {\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEvent = purchase.screeningEvent;\n        const screeningEventTicketOffers = purchase.screeningEventTicketOffers;\n        const screeningEventSeats = this.screeningEventSeats;\n        const screen = purchase.screen;\n        if (screeningEvent === undefined || screen === undefined) {\n            return;\n        }\n        const performance = new Models.Purchase.Performance({ screeningEvent });\n        const isInfinitetock = performance.isInfinitetock();\n        const isTicketedSeat = performance.isTicketedSeat();\n        const isOpenSeatingAllowed =\n            screen.openSeatingAllowed === undefined\n                ? false\n                : screen.openSeatingAllowed;\n        const movieTicketTypeOffers =\n            Functions.Purchase.getMovieTicketTypeOffers({\n                screeningEventTicketOffers,\n            });\n        const membershipTypeOffers = Functions.Purchase.getMembershipTypeOffers(\n            {\n                screeningEventTicketOffers,\n            }\n        );\n        const isOpenModal =\n            (isInfinitetock && !isOpenSeatingAllowed) ||\n            (!isTicketedSeat && !isOpenSeatingAllowed) ||\n            (isOpenSeatingAllowed &&\n                movieTicketTypeOffers.length === 0 &&\n                membershipTypeOffers.length === 0);\n        if (!this.environment.PURCHASE_CART) {\n            // \n            this.router.navigate(['/purchase/event/select']);\n            return;\n        }\n        if (isOpenModal) {\n            // \n            this.modal.show(PurchaseEventTicketModalComponent, {\n                class: 'modal-dialog-centered modal-xl',\n                backdrop: 'static',\n                initialState: {\n                    screeningEventTicketOffers,\n                    screeningEventSeats,\n                    screeningEvent,\n                    cb: (params: {\n                        reservations: Models.Purchase.Reservation.IReservation[];\n                        additionalTicketText?: string;\n                    }) => {\n                        this.selectTicket(params);\n                    },\n                },\n            });\n            return;\n        }\n        // \n        this.router.navigate(['/purchase/event/seat']);\n    }\n\n    /**\n     * \n     */\n    private async selectTicket(params: {\n        reservations: Models.Purchase.Reservation.IReservation[];\n        additionalTicketText?: string;\n    }) {\n        const reservations = params.reservations;\n        const additionalTicketText = params.additionalTicketText;\n        if (\n            reservations.length >\n            Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)\n        ) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.limit',\n                    { value: this.environment.PURCHASE_ITEM_MAX_LENGTH }\n                ),\n            });\n            return;\n        }\n        try {\n            this.screeningEventSeats =\n                await this.actionService.purchase.event.getScreeningEventSeats();\n            const { screeningEvent } =\n                await this.actionService.purchase.getData();\n            if (\n                screeningEvent !== undefined &&\n                new Models.Purchase.Performance({\n                    screeningEvent,\n                }).isTicketedSeat()\n            ) {\n                const remainingSeatLength =\n                    Functions.Purchase.getRemainingSeatLength({\n                        screeningEventSeats: this.screeningEventSeats,\n                        screeningEvent: screeningEvent,\n                    });\n                if (remainingSeatLength < reservations.length) {\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant(\n                            'purchase.event.schedule.alert.getScreeningEventSeats'\n                        ),\n                    });\n                    return;\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: '',\n            });\n        }\n\n        try {\n            await this.actionService.purchase.transaction.authorizeSeatReservation(\n                {\n                    reservations,\n                    additionalTicketText,\n                    screeningEventSeats: this.screeningEventSeats,\n                }\n            );\n            this.utilService.openAlert({\n                title: this.translate.instant('common.complete'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.success.temporaryReservation'\n                ),\n            });\n            this.actionService.purchase.unsettledDelete();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant(\n                    'purchase.event.schedule.alert.temporaryReservation'\n                )}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${error}</code>\n                </div>`,\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { authorizeSeatReservations } =\n            await this.actionService.purchase.getData();\n        // \n        if (authorizeSeatReservations.length === 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.unselected'\n                ),\n            });\n            return;\n        }\n        // \n        let itemCount = 0;\n        authorizeSeatReservations.forEach(\n            (a) => (itemCount += a.object.acceptedOffer.length)\n        );\n        if (itemCount > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.limit',\n                    { value: Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) }\n                ),\n            });\n            return;\n        }\n        this.router.navigate(['/purchase/payment']);\n    }\n\n    /**\n     * \n     */\n    public async addAnimationClass() {\n        this.screeningEventsGroup.forEach(() => this.animations.push(false));\n        const startTime = 300;\n        await Functions.Util.sleep(startTime);\n        for (let i = 0; i < this.animations.length; i++) {\n            const time = 300;\n            const target = this.animations.length - i - 1;\n            this.animations[target] = true;\n            await Functions.Util.sleep(time);\n        }\n    }\n\n    /**\n     * \n     */\n    public getScreeningEventSeries(id: string) {\n        return this.screeningEventSeries.find((s) => s.id === id);\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.event.schedule.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-9 mh-100 scroll-horizontal\">\n                <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary text-large mb-3\">\n                    {{ (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)' }}\n                </p>\n                <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\">\n                    {{ 'purchase.event.schedule.notfound' | translate }}\n                </p>\n                <app-purchase-performances *ngFor=\"let group of screeningEventsGroup; let index = index\"\n                    [screeningEventsGroup]=\"group\"\n                    [screeningEventSeries]=\"getScreeningEventSeries(group.screeningEvent.superEvent.id)\"\n                    [videoFormatTypes]=\"videoFormatTypes\" [animation]=\"animations[index]\"\n                    (select)=\"selectSchedule($event)\" class=\"mb-3\">\n                </app-purchase-performances>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-cart [purchase]=\"purchase | async\" [isAmount]=\"true\" [cancel]=\"true\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/event\">\n                    {{ 'purchase.event.schedule.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"submit\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async) || (purchase | async)?.authorizeSeatReservations.length === 0\"\n                    (click)=\"onSubmit()\">\n                    <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.event.schedule.next' | translate }}\n                    </ng-container>\n                    <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.event.schedule.consent' | translate }}\n                    </ng-container>\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport {\n    ActionService,\n    MasterService,\n    UtilService,\n} from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule-event',\n    templateUrl: './purchase-cinema-schedule-event.component.html',\n    styleUrls: ['./purchase-cinema-schedule-event.component.scss'],\n})\nexport class PurchaseCinemaScheduleEventComponent implements OnInit {\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent[];\n    public animations: boolean[];\n    public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    constructor(\n        private router: Router,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private utilService: UtilService\n    ) {}\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.videoFormatTypes = [];\n            this.screeningEventSeries = [];\n            this.screeningEventsGroup = [];\n            this.animations = [];\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate, creativeWork } =\n                await this.actionService.purchase.getData();\n            if (\n                scheduleDate === undefined ||\n                theater === undefined ||\n                creativeWork === undefined\n            ) {\n                throw new Error(\n                    'scheduleDate or creativeWork or theater undefined'\n                );\n            }\n            this.videoFormatTypes = await this.masterService.searchCategoryCode(\n                {\n                    categorySetIdentifier:\n                        factory.chevre.categoryCode.CategorySetIdentifier\n                            .VideoFormatType,\n                }\n            );\n            this.screeningEventSeries =\n                await this.masterService.searchScreeningEventSeries({\n                    workPerformed: {\n                        identifiers: [creativeWork.identifier],\n                    },\n                    location: {\n                        branchCode: {\n                            $eq: theater.branchCode,\n                        },\n                    },\n                });\n            const screeningEvents =\n                await this.masterService.searchScreeningEvent({\n                    superEvent: {\n                        locationBranchCodes: [theater.branchCode],\n                        workPerformedIdentifiers: [creativeWork.identifier],\n                    },\n                    startFrom: moment(scheduleDate).toDate(),\n                    startThrough: moment(scheduleDate)\n                        .add(1, 'day')\n                        .add(-1, 'millisecond')\n                        .toDate(),\n                    screeningEventSeries: this.screeningEventSeries,\n                });\n            const now = moment(\n                (await this.utilService.getServerTime()).date\n            ).toDate();\n            this.screeningEventsGroup =\n                Functions.Purchase.screeningEvents2ScreeningEventSeries({\n                    screeningEvents,\n                    now,\n                });\n            await this.addAnimationClass();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent\n    ) {\n        try {\n            const screeningEventSeries = this.getScreeningEventSeries(\n                screeningEvent.superEvent.id\n            );\n            if (screeningEventSeries === undefined) {\n                throw new Error('screeningEventSeries === undefined');\n            }\n            this.actionService.purchase.unsettledDelete();\n            this.actionService.purchase.selectScreeningEventSeries(\n                screeningEventSeries\n            );\n            await this.actionService.purchase.event.getScreeningEvent(\n                screeningEvent\n            );\n            const { authorizeSeatReservations } =\n                await this.actionService.purchase.getData();\n            if (authorizeSeatReservations.length > 0) {\n                await this.actionService.purchase.transaction.voidSeatReservation(\n                    { authorizeSeatReservations }\n                );\n            }\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n    }\n\n    /**\n     * \n     */\n    public async addAnimationClass() {\n        this.screeningEventsGroup.forEach(() => this.animations.push(false));\n        const startTime = 300;\n        await Functions.Util.sleep(startTime);\n        for (let i = 0; i < this.animations.length; i++) {\n            const time = 300;\n            const target = this.animations.length - i - 1;\n            this.animations[target] = true;\n            await Functions.Util.sleep(time);\n        }\n    }\n\n    /**\n     * \n     */\n    public getScreeningEventSeries(id: string) {\n        return this.screeningEventSeries.find((s) => s.id === id);\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.cinema.scheduleEvent.title' | translate }}\"></app-page-title>\n</app-header>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\">\n        <app-purchase-performances *ngFor=\"let group of screeningEventsGroup; let index = index\"\n            [screeningEventsGroup]=\"group\"\n            [screeningEventSeries]=\"getScreeningEventSeries(group.screeningEvent.superEvent.id)\"\n            [videoFormatTypes]=\"videoFormatTypes\" [animation]=\"animations[index]\" (select)=\"selectSchedule($event)\"\n            class=\"\">\n        </app-purchase-performances>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/cinema/schedule/movie\">\n                    {{ 'purchase.cinema.scheduleEvent.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    disabled>\n                    {{ 'purchase.cinema.scheduleEvent.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\ntype IMovieTicketTypeChargeSpecification =\n    factory.chevre.priceSpecification.IPriceSpecification<factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification>;\n\ninterface ISelectedTickets {\n    id: string;\n    count: number;\n    addOn: {\n        id: string;\n        count: number;\n    }[];\n}\n\n@Component({\n    selector: 'app-purchase-event-select',\n    templateUrl: './purchase-event-select.component.html',\n    styleUrls: ['./purchase-event-select.component.scss'],\n})\nexport class PurchaseEventSelectComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventTicketOffers: factory.chevre.event.screeningEvent.ITicketOffer[];\n    public screeningEvent: factory.event.screeningEvent.IEvent;\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public tickets: factory.chevre.event.screeningEvent.ITicketOffer[];\n    public selectedTickets: ISelectedTickets[];\n    public getRemainingSeatLength = Functions.Purchase.getRemainingSeatLength;\n    public performance: Models.Purchase.Performance;\n    public additionalTicketText: string;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService\n    ) {}\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.tickets = [];\n        this.screeningEventSeats = [];\n        try {\n            const {\n                screeningEvent,\n                screeningEventTicketOffers,\n                authorizeSeatReservations,\n            } = await this.actionService.purchase.getData();\n            if (authorizeSeatReservations.length > 0) {\n                await this.actionService.purchase.transaction.voidSeatReservation(\n                    { authorizeSeatReservations }\n                );\n            }\n            if (screeningEvent === undefined) {\n                throw new Error(\n                    'screeningEvent or screeningEventTicketOffers undefined'\n                );\n            }\n            this.screeningEvent = screeningEvent;\n            this.screeningEventTicketOffers = screeningEventTicketOffers;\n            this.screeningEventSeats =\n                await this.actionService.purchase.event.getScreeningEventSeats();\n            this.performance = new Models.Purchase.Performance({\n                screeningEvent,\n            });\n            this.tickets = screeningEventTicketOffers\n                .filter((ticketOffer) => {\n                    const movieTicketTypeChargeSpecification = <\n                        IMovieTicketTypeChargeSpecification\n                    >ticketOffer.priceSpecification.priceComponent.find(\n                        (c) =>\n                            c.typeOf ===\n                            factory.chevre.priceSpecificationType\n                                .MovieTicketTypeChargeSpecification\n                    );\n                    return movieTicketTypeChargeSpecification === undefined;\n                })\n                .filter((ticketOffer) => {\n                    return ticketOffer.eligibleMembershipType === undefined;\n                });\n            const selectedTickets: ISelectedTickets[] = [];\n            this.tickets.forEach((t) => {\n                if (t.id === undefined) {\n                    return;\n                }\n                const addOn: { id: string; count: number }[] = [];\n                if (t.addOn !== undefined) {\n                    t.addOn.forEach((a) => {\n                        if (a.id === undefined) {\n                            return;\n                        }\n                        addOn.push({ id: a.id, count: 0 });\n                    });\n                }\n                selectedTickets.push({ id: t.id, count: 0, addOn });\n            });\n            this.selectedTickets = selectedTickets;\n            this.additionalTicketText = '';\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityValue(\n        screeningEventTicketOffer: factory.chevre.event.screeningEvent.ITicketOffer\n    ) {\n        const values = [];\n        const screeningEvent = this.screeningEvent;\n        const screeningEventSeats = this.screeningEventSeats;\n        let limit = Number(this.environment.PURCHASE_ITEM_MAX_LENGTH);\n        if (\n            screeningEvent.offers !== undefined &&\n            screeningEvent.offers.eligibleQuantity.maxValue !== undefined &&\n            limit > screeningEvent.offers.eligibleQuantity.maxValue\n        ) {\n            limit = screeningEvent.offers.eligibleQuantity.maxValue;\n        }\n        if (\n            screeningEvent.remainingAttendeeCapacity !== undefined &&\n            limit > screeningEvent.remainingAttendeeCapacity\n        ) {\n            limit = screeningEvent.remainingAttendeeCapacity;\n        }\n        if (\n            new Models.Purchase.Performance({ screeningEvent }).isTicketedSeat()\n        ) {\n            // \n            const screeningEventLimit =\n                Functions.Purchase.getRemainingSeatLength({\n                    screeningEvent,\n                    screeningEventSeats,\n                });\n            if (limit > screeningEventLimit) {\n                limit = screeningEventLimit;\n            }\n            // \n            if (\n                screeningEvent.aggregateOffer !== undefined &&\n                screeningEvent.aggregateOffer.offers !== undefined\n            ) {\n                const findResult = screeningEvent.aggregateOffer.offers.find(\n                    (o) => o.id === screeningEventTicketOffer.id\n                );\n                if (\n                    findResult !== undefined &&\n                    findResult.remainingAttendeeCapacity !== undefined &&\n                    limit > findResult.remainingAttendeeCapacity\n                ) {\n                    limit = findResult.remainingAttendeeCapacity;\n                }\n            }\n        }\n        for (let i = 0; i < limit; i++) {\n            values.push(i + 1);\n        }\n        return values;\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityAddOnValue(\n        screeningEventTicketOffer: factory.chevre.event.screeningEvent.ITicketOffer\n    ) {\n        const id = screeningEventTicketOffer.id;\n        const findResult = this.selectedTickets.find((s) => s.id === id);\n        if (findResult === undefined) {\n            return [];\n        }\n        return [...Array(findResult.count)].map((_, i) => i + 1);\n    }\n\n    /**\n     * \n     */\n    public createReservations() {\n        const reservations: Models.Purchase.Reservation.IReservation[] = [];\n        this.selectedTickets.forEach((t) => {\n            const count = t.count;\n            for (let i = 0; i < count; i++) {\n                const findResult = this.screeningEventTicketOffers.find(\n                    (s) => s.id === t.id\n                );\n                const addOn: factory.chevre.offer.IOffer[] = [];\n                if (findResult === undefined) {\n                    break;\n                }\n                t.addOn.forEach((a) => {\n                    if (findResult.addOn === undefined) {\n                        return;\n                    }\n                    const findAddOnResult = findResult.addOn.find(\n                        (a2) => a2.id === a.id && i < a.count\n                    );\n                    if (findAddOnResult === undefined) {\n                        return;\n                    }\n                    addOn.push(findAddOnResult);\n                });\n\n                reservations.push({\n                    ticket: { ticketOffer: findResult, addOn },\n                });\n            }\n        });\n        return reservations;\n    }\n\n    /**\n     * \n     */\n    public changeSelect(id: string, count: number) {\n        const findResult = this.selectedTickets.find((s) => s.id === id);\n        if (findResult === undefined) {\n            return;\n        }\n        findResult.count = count;\n        findResult.addOn.forEach((a) => {\n            if (a.count > count) {\n                a.count = count;\n            }\n        });\n    }\n\n    /**\n     * \n     */\n    public getSelectTicket(id: string) {\n        const findResult = <\n            {\n                id: string;\n                count: number;\n                addOn: {\n                    id: string;\n                }[];\n            }\n        >this.selectedTickets.find((s) => s.id === id);\n        return findResult;\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const reservations = this.createReservations();\n        const additionalTicketText = this.additionalTicketText;\n        try {\n            const { screeningEvent } =\n                await this.actionService.purchase.getData();\n            // \n            const limit =\n                screeningEvent === undefined ||\n                screeningEvent.offers === undefined ||\n                screeningEvent.offers.eligibleQuantity.maxValue === undefined\n                    ? Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)\n                    : screeningEvent.offers.eligibleQuantity.maxValue;\n            if (reservations.length > limit) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        'purchase.event.select.alert.limit',\n                        { value: limit }\n                    ),\n                });\n                return;\n            }\n            this.screeningEventSeats =\n                await this.actionService.purchase.event.getScreeningEventSeats();\n            if (\n                screeningEvent !== undefined &&\n                new Models.Purchase.Performance({\n                    screeningEvent,\n                }).isTicketedSeat()\n            ) {\n                const remainingSeatLength =\n                    Functions.Purchase.getRemainingSeatLength({\n                        screeningEventSeats: this.screeningEventSeats,\n                        screeningEvent,\n                    });\n                if (remainingSeatLength < reservations.length) {\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant(\n                            'purchase.event.select.alert.getScreeningEventSeats'\n                        ),\n                    });\n                    return;\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n\n        try {\n            await this.actionService.purchase.transaction.authorizeSeatReservation(\n                {\n                    reservations,\n                    additionalTicketText,\n                    screeningEventSeats: this.screeningEventSeats,\n                }\n            );\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant(\n                    'purchase.event.select.alert.temporaryReservation'\n                )}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${error}</code>\n                </div>`,\n            });\n            return;\n        }\n        this.router.navigate(['/purchase/payment']);\n    }\n\n    /**\n     * \n     */\n    public async prev() {\n        const { authorizeSeatReservations } =\n            await this.actionService.purchase.getData();\n        if (authorizeSeatReservations.length > 0) {\n            await this.actionService.purchase.transaction.voidSeatReservation({\n                authorizeSeatReservations,\n            });\n        }\n        this.router.navigate(['/purchase/event/schedule']);\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.event.select.title' | translate }}\"></app-page-title>\n</app-header>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n\n            </div>\n            <div class=\"col-6 mh-100 scroll-horizontal\">\n                <ul *ngIf=\"tickets.length > 0\" class=\"mb-4\">\n                    <li *ngFor=\"let ticket of tickets; let i = index;\"\n                        class=\"ticket mb-3 pb-3 border-bottom border-gray\"\n                        [class.text-danger]=\"remainingAttendeeCapacityValue(ticket).length === 0\">\n                        <div class=\"container px-0\">\n                            <div class=\"row justify-content-between align-items-center\">\n                                <div class=\"col-8 text-left\">\n                                    <p *ngFor=\"let priceComponent of ticket.priceSpecification.priceComponent\">\n                                        <span>{{ priceComponent.name | changeLanguage }}</span>\n                                        <!--\n                                    --><span>&nbsp;/&nbsp;{{ priceComponent.price | currency :\n                                            priceComponent.priceCurrency }}</span>\n                                        <!--\n                                    --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{\n                                            'common.referenceQuantityValue' | translate: { value:\n                                            priceComponent?.referenceQuantity?.value } }}</span>\n                                    </p>\n                                    <p *ngIf=\"ticket.description\" class=\"text-x-small text-left\">\n                                        {{ ticket.description | changeLanguage }}</p>\n                                </div>\n                                <div class=\"col-4 text-right\">\n                                    <app-quantity-input class=\"pl-3\" [value]=\"selectedTickets[i].count\"\n                                        (valueChange)=\"changeSelect(ticket.id, $event)\"\n                                        [maxValue]=\"remainingAttendeeCapacityValue(ticket).length\"></app-quantity-input>\n                                </div>\n                            </div>\n                        </div>\n                        <ul *ngIf=\"ticket.addOn && ticket.addOn.length > 0\" class=\"mt-3\">\n                            <li class=\"my-1\" *ngFor=\"let addOn of ticket.addOn; let i2 = index\">\n                                <div class=\"container px-0\">\n                                    <div class=\"row justify-content-between align-items-center\">\n                                        <div class=\"col-8 text-left\">\n                                            <p class=\"pl-4\"\n                                                *ngFor=\"let priceComponent of ticket.priceSpecification.priceComponent\">\n                                                <span>{{ addOn.priceSpecification?.name | changeLanguage }}</span>\n                                                <!--\n                                            --><span>&nbsp;/&nbsp;{{ addOn.priceSpecification?.price | currency :\n                                                    addOn.priceSpecification?.priceCurrency }}</span>\n                                                <!--\n                                            --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{\n                                                    'common.referenceQuantityValue' | translate: { value:\n                                                    addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                            </p>\n                                        </div>\n                                        <div class=\"col-4 text-right\">\n                                            <app-quantity-input class=\"pl-3\"\n                                                [(value)]=\"selectedTickets[i].addOn[i2].count\"\n                                                [maxValue]=\"remainingAttendeeCapacityAddOnValue(ticket).length\">\n                                            </app-quantity-input>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n                <p *ngIf=\"tickets.length === 0\" class=\"mb-4\">{{ 'purchase.event.select.notfound' | translate }}</p>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-cart [purchase]=\"purchase | async\" [isAmount]=\"false\" [cancel]=\"false\">\n                </app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    (click)=\"prev()\">\n                    {{ 'purchase.event.select.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"submit\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async) || (selectedTickets && createReservations().length === 0)\"\n                    (click)=\"onSubmit()\">\n                    {{ 'purchase.event.select.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule-movie',\n    templateUrl: './purchase-cinema-schedule-movie.component.html',\n    styleUrls: ['./purchase-cinema-schedule-movie.component.scss']\n})\nexport class PurchaseCinemaScheduleMovieComponent implements OnInit {\n\n    public moment = moment;\n    public environment = getEnvironment();\n    public creativeWorks: factory.chevre.creativeWork.movie.ICreativeWork[];\n    public screeningEvents: factory.chevre.event.screeningEvent.IEvent[];\n    public animations: boolean[];\n    public getAdditionalProperty = Functions.Purchase.getAdditionalProperty;\n    public contentRatingTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public now: Date;\n\n    constructor(\n        private router: Router,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private utilService: UtilService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.creativeWorks = [];\n        this.screeningEvents = [];\n        this.animations = [];\n        try {\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate } = await this.actionService.purchase.getData();\n            if (scheduleDate === undefined\n                || theater === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.now = moment((await this.utilService.getServerTime()).date).toDate();\n            this.contentRatingTypes = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.ContentRatingType\n            });\n            this.screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n            });\n            const creativeWorks = await this.masterService.searchMovies({\n                offers: {\n                    availableFrom: moment(scheduleDate).toDate(),\n                },\n            });\n            this.creativeWorks = creativeWorks.filter(c =>\n                this.screeningEvents.find(s =>\n                    s.workPerformed?.identifier === c.identifier) !== undefined);\n            await this.addAnimationClass();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n\n    }\n\n    /**\n     * \n     */\n    public async addAnimationClass() {\n        this.creativeWorks.forEach(() => this.animations.push(false));\n        const row = 6;\n        const startTime = 300;\n        await Functions.Util.sleep(startTime);\n        for (let i = 0; i < this.animations.length; i++) {\n            const time = 300;\n            const target = this.animations.length - i - 1;\n            this.animations[target] = true;\n            if (target % row === 0) {\n                await Functions.Util.sleep(time);\n            }\n        }\n    }\n\n    /**\n     * \n     */\n    public isSales(identifier: string) {\n        const findResult = this.screeningEvents.find(s => {\n            return (s.workPerformed?.identifier === identifier\n                && new Models.Purchase.Performance({ screeningEvent: s, now: this.now }).isSales());\n        });\n        return (findResult !== undefined);\n    }\n\n    /**\n     * \n     */\n    public getContentRatingType(code?: string) {\n        return this.contentRatingTypes.find(c => c.codeValue === code);\n    }\n\n    public selectCreativeWork(creativeWork: factory.chevre.creativeWork.movie.ICreativeWork) {\n        this.actionService.purchase.selectCreativeWork(creativeWork);\n        this.router.navigate(['/purchase/cinema/schedule/event']);\n    }\n\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.cinema.scheduleMovie.title' | translate }}\"></app-page-title>\n</app-header>\n<div *ngIf=\"creativeWorks.length === 0\" class=\"contents scroll-horizontal\">\n    <p class=\"p-3\">{{ 'purchase.cinema.scheduleMovie.notfound' | translate }}</p>\n</div>\n<div *ngIf=\"creativeWorks.length > 0\" class=\"contents scroll-horizontal\">\n    <div class=\"container p-3\">\n        <div class=\"row\">\n            <div *ngFor=\"let creativeWork of creativeWorks; let index = index\" class=\"item mb-3\" [ngClass]=\"{\n                   'not-event not-sales': !isSales(creativeWork.identifier)\n               }\" [class.animation]=\"animations[index]\" (click)=\"selectCreativeWork(creativeWork)\">\n                <div class=\"position-relative mb-2\">\n                    <div class=\"image\">\n                        <div class=\"poster-title d-flex align-items-center\">\n                            <p class=\"p-3 text-white text-small\">{{ creativeWork.name | changeLanguage }}</p>\n                        </div>\n                        <div class=\"poster\" *ngIf=\"creativeWork.thumbnailUrl\"\n                            [style.backgroundImage]=\"'url('+ creativeWork.thumbnailUrl +')'\">\n                        </div>\n                    </div>\n                    <div class=\"content-rating p-2 bg-dark text-white\"\n                        *ngIf=\"getContentRatingType(creativeWork?.contentRating)\">\n                        {{ getContentRatingType(creativeWork?.contentRating)?.name | changeLanguage }}\n                    </div>\n                </div>\n                <p class=\"text-small\">{{ creativeWork.name | changeLanguage }}</p>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/cinema\">\n                    {{ 'purchase.cinema.scheduleMovie.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    disabled>\n                    {{ 'purchase.cinema.scheduleMovie.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-performance',\n    templateUrl: './performance.component.html',\n    styleUrls: ['./performance.component.scss']\n})\nexport class PurchasePerformanceComponent implements OnInit {\n\n    @Input() public performance: Models.Purchase.Performance;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Util.ViewType;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"p-3 pointer h-100 btn btn-block text-left shadow-none\" [ngClass]=\"{ \n                'btn-custom-success': performance.isSales() && performance.isSeatStatus('success'),\n                'btn-custom-warning': performance.isSales() && performance.isSeatStatus('warning'), \n                'bg-dark-gray text-light-gray not-event': !performance.isSales() \n                || performance.isSeatStatus('danger') \n                }\" (click)=\"select.emit(performance.screeningEvent)\">\n    <div class=\"container px-0\">\n        <div class=\"row align-items-center\">\n            <div class=\"col-9\">\n                <div class=\"mb-1 align-middle\">\n                    <span class=\"text-x-large font-weight-bold\">{{\n                        moment(performance.screeningEvent.startDate).format('HH:mm') }}</span>\n                    <span>-</span>\n                    <span>{{ moment(performance.screeningEvent.endDate).format('HH:mm') }}</span>\n                </div>\n                <div class=\"mb-1 text-small screen-name text-overflow-ellipsis\">\n                    <p *ngIf=\"performance.screeningEvent.location.address | changeLanguage\" class=\"mr-2 d-inline-block\">\n                        {{ performance.screeningEvent.location.address | changeLanguage }}</p>\n                    <p class=\"d-inline-block\">\n                        {{ performance.screeningEvent.location.name | changeLanguage }}</p>\n                    <p *ngIf=\"performance.screeningEvent.maximumAttendeeCapacity\">\n                        {{ 'common.seatValue' | translate: { value: performance.screeningEvent.maximumAttendeeCapacity }\n                        }}\n                    </p>\n                </div>\n            </div>\n            <div class=\"col-3\">\n                <div class=\"status text-center\" *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n                    <div *ngIf=\"performance.isSeatStatus('success')\">\n                        <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('warning')\">\n                        <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('danger')\" class=\"text-small\">\n                        <!-- {{ 'common.performance.status.danger' | translate }} -->\n                        <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus()\">\n                        <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n                    </div>\n                </div>\n\n                <div class=\"status text-center text-small\" *ngIf=\"performance.isSales('end')\">\n                    <!-- {{ 'common.performance.status.endSale' | translate }} -->\n                    <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                </div>\n                <div class=\"status text-center text-small\" *ngIf=\"performance.isSales('start')\">\n                    <!-- {{ 'common.performance.status.outsideSalesPeriod' | translate }} -->\n                    <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                </div>\n                <div *ngIf=\"performance.isSales() && performance.isInfinitetock()\" class=\"status text-center\">\n                    <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cinema-date',\n    templateUrl: './purchase-cinema-date.component.html',\n    styleUrls: ['./purchase-cinema-date.component.scss'],\n})\nexport class PurchaseCinemaDateComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public moment = moment;\n    public environment = getEnvironment();\n    public scheduleDates: string[];\n    public preScheduleDates: string[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService\n    ) {}\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            this.scheduleDates = [];\n            this.preScheduleDates = [];\n            const { theater } = await this.actionService.user.getData();\n            if (theater === undefined) {\n                throw new Error('theater undefined');\n            }\n            this.scheduleDates = this.cteateScheduleDate({ theater });\n            this.preScheduleDates =\n                await this.actionService.purchase.event.getPreScheduleDates({\n                    theater,\n                });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public cteateScheduleDate(params: {\n        theater: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom;\n    }) {\n        const { theater } = params;\n        const now = moment().toDate();\n        const today = moment(moment(now).format('YYYYMMDD')).toDate();\n        if (\n            theater.offers === undefined ||\n            theater.offers.availabilityStartsGraceTime === undefined ||\n            theater.offers.availabilityStartsGraceTime.value === undefined ||\n            theater.offers.availabilityStartsGraceTime.unitCode !==\n                factory.chevre.unitCode.Day\n        ) {\n            return [];\n        }\n        const limitDate = moment(today).add(\n            theater.offers.availabilityStartsGraceTime.value * -1,\n            'days'\n        );\n        const limit = limitDate.diff(moment(today), 'days');\n        const result = [];\n        for (let i = 0; i < limit; i++) {\n            const date = moment(moment(today).add(i + 1, 'day')).format(\n                'YYYY-MM-DD'\n            );\n            result.push(date);\n        }\n        return result;\n    }\n\n    /**\n     * \n     */\n    public async searchMovie(scheduleDate: string) {\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        this.actionService.purchase.selectSearchType({ searchType: 'movie' });\n        this.router.navigate(['/purchase/cinema/schedule/movie']);\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.date.title' | translate }}\"></app-page-title>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\">\n        <div class=\"mb-4\">\n            <div class=\"p-4 bg-light-gray mb-3 font-weight-bold\">{{ 'purchase.cinema.date.schedule' | translate }}</div>\n            <div class=\"container px-0\">\n                <div class=\"row\">\n                    <div class=\"col-3\" *ngFor=\"let scheduleDate of scheduleDates\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray py-5 mb-3\"\n                            (click)=\"searchMovie(scheduleDate)\">\n                            <div class=\"text-large\">{{ moment(scheduleDate, 'YYYYMMDD').format('YYYY/MM/DD (ddd)') }}\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div *ngIf=\"preScheduleDates.length > 0\">\n            <div class=\"p-4 bg-light-gray mb-3 font-weight-bold\">{{ 'purchase.cinema.date.preSchedule' | translate }}\n            </div>\n            <div class=\"container px-0\">\n                <div class=\"row\">\n                    <div class=\"col-3\" *ngFor=\"let scheduleDate of preScheduleDates\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray py-5 mb-3\"\n                            (click)=\"searchMovie(scheduleDate)\">\n                            <div class=\"text-large\">{{ moment(scheduleDate, 'YYYYMMDD').format('YYYY/MM/DD (ddd)') }}\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/cinema\">{{ 'purchase.cinema.date.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    disabled>{{\n                    'purchase.cinema.date.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-terms',\n    templateUrl: './purchase-terms.component.html',\n    styleUrls: ['./purchase-terms.component.scss']\n})\nexport class PurchaseTermsComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public terms: string;\n\n    constructor(\n        private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/terms/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.terms = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3  text-small scroll-vertical border\" [innerHTML]=\"terms\"></div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\n\n@Component({\n    selector: 'app-purchase-performances',\n    templateUrl: './performances.component.html',\n    styleUrls: ['./performances.component.scss']\n})\nexport class PurchasePerformancesComponent implements OnInit {\n\n    @Input() public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup;\n    @Input() public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent;\n    @Input() public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    @Input() public animation?: boolean;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n\n    constructor() { }\n\n    public ngOnInit() {\n        this.animation = (this.animation === undefined) ? false : this.animation;\n    }\n\n    public getVideoFormatType(code: string) {\n        return this.videoFormatTypes.find(v => v.codeValue === code);\n    }\n\n}\n","<div class=\"\">\n    <div class=\"p-3 bg-light-gray\">\n        <div class=\"container px-0\">\n            <div class=\"row\">\n                <div class=\"col-10\">\n                    <div class=\"mb-2\">\n                        <p class=\"font-weight-bold text-large\">\n                            {{ screeningEventSeries.name | changeLanguage }}\n                        </p>\n                        <p *ngIf=\"screeningEventSeries.headline && (screeningEventSeries.headline | changeLanguage)\">\n                            {{ screeningEventSeries.headline | changeLanguage }}\n                        </p>\n                        <p class=\"text-small\"\n                            *ngIf=\"screeningEventSeries.description && (screeningEventSeries.description | changeLanguage)\">\n                            {{ screeningEventSeries.description | changeLanguage }}\n                        </p>\n                    </div>\n                    <div class=\"d-flex align-items-center text-small\">\n                        <div *ngIf=\"screeningEventSeries.dubLanguage\"\n                            class=\"rounded bg-white py-1 px-3 mr-2 dub-language\">\n                            {{ 'common.dubbing' | translate }}\n                        </div>\n                        <div *ngIf=\"screeningEventSeries.subtitleLanguage\"\n                            class=\"rounded bg-white py-1 px-3 mr-2 subtitle-language\">\n                            {{ 'common.subtitles' | translate }}\n                        </div>\n                        <div *ngFor=\"let videoFormat of screeningEventSeries.videoFormat\"\n                            class=\"rounded bg-white py-1 px-2 mr-2 video-format\">\n                            {{ getVideoFormatType(videoFormat.typeOf)?.name | changeLanguage }}\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-2\">\n                    <div *ngIf=\"screeningEventsGroup.screeningEvent.workPerformed?.duration && moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() > 0\"\n                        class=\"text-right\">\n                        <div class=\"d-inline-flex py-1 px-2 bg-white text-small rounded\">\n                            <div class=\"mr-1\">{{ 'common.duration' | translate }}</div>\n                            <div>\n                                {{\n                                moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes()\n                                }}\n                            </div>\n                            <div>\n                                {{ 'common.date.minute' | translate }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"container px-0 py-2\">\n        <ul *ngIf=\"animation\" class=\"row animation\">\n            <li *ngFor=\"let performance of screeningEventsGroup.data\" class=\"col-3 my-2\">\n                <app-purchase-performance [performance]=\"performance\" (select)=\"select.emit($event)\" class=\"mb-3\">\n                </app-purchase-performance>\n            </li>\n        </ul>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport {\n    ActionService,\n    MasterService,\n    UtilService,\n} from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule',\n    templateUrl: './purchase-cinema-schedule.component.html',\n    styleUrls: ['./purchase-cinema-schedule.component.scss'],\n})\nexport class PurchaseCinemaScheduleComponent implements OnInit {\n    public creativeWorks: factory.chevre.creativeWork.movie.ICreativeWork[];\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent[];\n    public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public contentRatingTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public moment = moment;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private masterService: MasterService\n    ) {}\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.videoFormatTypes = [];\n            this.contentRatingTypes = [];\n            this.screeningEventSeries = [];\n            this.screeningEventsGroup = [];\n            this.creativeWorks = [];\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate } =\n                await this.actionService.purchase.getData();\n            if (scheduleDate === undefined || theater === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.contentRatingTypes =\n                await this.masterService.searchCategoryCode({\n                    categorySetIdentifier:\n                        factory.chevre.categoryCode.CategorySetIdentifier\n                            .ContentRatingType,\n                });\n            this.videoFormatTypes = await this.masterService.searchCategoryCode(\n                {\n                    categorySetIdentifier:\n                        factory.chevre.categoryCode.CategorySetIdentifier\n                            .VideoFormatType,\n                }\n            );\n            this.creativeWorks = await this.masterService.searchMovies({\n                offers: {\n                    availableFrom: moment(scheduleDate).toDate(),\n                },\n            });\n            this.screeningEventSeries =\n                await this.masterService.searchScreeningEventSeries({\n                    workPerformed: {\n                        identifiers: this.creativeWorks.map(\n                            (c) => c.identifier\n                        ),\n                    },\n                    location: {\n                        branchCode: {\n                            $eq: theater.branchCode,\n                        },\n                    },\n                });\n            const screeningEvents =\n                await this.masterService.searchScreeningEvent({\n                    superEvent: {\n                        locationBranchCodes: [theater.branchCode],\n                    },\n                    startFrom: moment(scheduleDate).toDate(),\n                    startThrough: moment(scheduleDate)\n                        .add(1, 'day')\n                        .add(-1, 'millisecond')\n                        .toDate(),\n                });\n            const filterResult = screeningEvents.filter((s) => {\n                const performance = new Models.Purchase.Performance({\n                    screeningEvent: s,\n                });\n                return !performance.isSales('end');\n            });\n            const now = moment(\n                (await this.utilService.getServerTime()).date\n            ).toDate();\n            this.screeningEventsGroup =\n                Functions.Purchase.screeningEvents2ScreeningEventSeries({\n                    screeningEvents: filterResult,\n                    sortType: 'startDate',\n                    now,\n                });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n    /**\n     * \n     */\n    public async selectSchedule(\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent\n    ) {\n        try {\n            if (screeningEvent.workPerformed?.identifier === undefined) {\n                throw new Error('workPerformed.identifier === undefined');\n            }\n            const creativeWork = this.getCreativeWorks(\n                screeningEvent.workPerformed?.identifier\n            );\n            const screeningEventSeries = this.getScreeningEventSeries(\n                screeningEvent.superEvent.id\n            );\n            if (\n                creativeWork === undefined ||\n                screeningEventSeries === undefined\n            ) {\n                throw new Error(\n                    'creativeWork or screeningEventSeries === undefined'\n                );\n            }\n            this.actionService.purchase.unsettledDelete();\n            this.actionService.purchase.selectCreativeWork(creativeWork);\n            this.actionService.purchase.selectScreeningEventSeries(\n                screeningEventSeries\n            );\n            await this.actionService.purchase.event.getScreeningEvent(\n                screeningEvent\n            );\n            const { authorizeSeatReservations } =\n                await this.actionService.purchase.getData();\n            if (authorizeSeatReservations.length > 0) {\n                await this.actionService.purchase.transaction.voidSeatReservation(\n                    { authorizeSeatReservations }\n                );\n            }\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n    }\n\n    /**\n     * \n     */\n    public getScreeningEventSeries(id: string) {\n        return this.screeningEventSeries.find((s) => s.id === id);\n    }\n\n    /**\n     * \n     */\n    public getCreativeWorks(identifier: string) {\n        return this.creativeWorks.find((c) => c.identifier === identifier);\n    }\n\n    /**\n     * \n     */\n    public getVideoFormatType(code: string) {\n        return this.videoFormatTypes.find((v) => v.codeValue === code);\n    }\n\n    /**\n     * \n     */\n    public getContentRatingType(code?: string) {\n        return this.contentRatingTypes.find((c) => c.codeValue === code);\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.cinema.schedule.title' | translate }}\"></app-page-title>\n</app-header>\n<div *ngIf=\"screeningEventsGroup.length === 0\" class=\"contents scroll-horizontal\">\n    <p class=\"px-3\">{{ 'purchase.cinema.schedule.notfound' | translate }}</p>\n</div>\n<div *ngIf=\"screeningEventsGroup.length > 0\" class=\"contents scroll-horizontal\">\n    <div class=\"px-3\">\n        <div *ngFor=\"let group of screeningEventsGroup\">\n            <div class=\"container px-0\">\n                <div class=\"row align-items-stretch\">\n                    <div class=\"col-1 pb-3\">\n                        <div class=\"border-left border-dark p-3 h-100\">\n                            {{ moment(group.screeningEvent.startDate).format('HH') }}:00\n                        </div>\n                    </div>\n                    <div class=\"col-10\">\n                        <div *ngFor=\"let performance of group.data\" class=\"border border-gray py-4 px-3 mb-3\" [ngClass]=\"{ \n                                'not-event': !performance.isSales() \n                                || performance.isSeatStatus('danger') \n                                || performance.isInfinitetock()\n                                }\" (click)=\"selectSchedule(performance.screeningEvent)\">\n                            <div class=\"container px-0\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-1 text-center\">\n                                        <div class=\"status\"\n                                            *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n                                            <div *ngIf=\"performance.isSeatStatus('success')\">\n                                                <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                                            </div>\n                                            <div *ngIf=\"performance.isSeatStatus('warning')\">\n                                                <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n                                            </div>\n                                            <div *ngIf=\"performance.isSeatStatus('danger')\">\n                                                <!-- {{ 'common.performance.status.danger' | translate }} -->\n                                                <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                                            </div>\n                                            <div *ngIf=\"performance.isSeatStatus()\">\n                                                <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n                                            </div>\n                                        </div>\n                                        <div class=\"status\" *ngIf=\"performance.isSales('end')\">\n                                            <!-- {{ 'common.performance.status.endSale' | translate }} -->\n                                            <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                                        </div>\n                                        <div class=\"status\" *ngIf=\"performance.isSales('start')\">\n                                            <!-- {{ 'common.performance.status.outsideSalesPeriod' | translate }} -->\n                                            <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                                        </div>\n                                        <div *ngIf=\"performance.isSales() && performance.isInfinitetock()\"\n                                            class=\"status\">\n                                            <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                                            <!-- <p class=\"text-small\">{{ 'common.performance.infiniteStock' | translate }}</p> -->\n                                        </div>\n                                    </div>\n                                    <div class=\"col-2\">\n                                        <span class=\"text-x-large font-weight-bold\">{{\n                                            moment(performance.screeningEvent.startDate).format('HH:mm') }}</span>\n                                        <span>-</span>\n                                        <span>{{ moment(performance.screeningEvent.endDate).format('HH:mm')\n                                            }}</span>\n                                    </div>\n                                    <div class=\"col-6\">\n                                        <p class=\"font-weight-bold text-large\">\n                                            {{ performance.screeningEvent.name | changeLanguage }}</p>\n                                        <p *ngIf=\"performance.screeningEvent.superEvent.headline \n                                                && (performance.screeningEvent.superEvent.headline | changeLanguage)\">\n                                            {{ performance.screeningEvent.superEvent.headline | changeLanguage }}\n                                        </p>\n                                        <p class=\"text-small\"\n                                            *ngIf=\"performance.screeningEvent.superEvent.description \n                                                && (performance.screeningEvent.superEvent.description | changeLanguage)\">\n                                            {{ performance.screeningEvent.superEvent.description | changeLanguage }}\n                                        </p>\n                                    </div>\n                                    <div class=\"col-2\">\n                                        <div class=\"mb-1 screen-name\">\n                                            <p *ngIf=\"performance.screeningEvent.location.address | changeLanguage\">\n                                                {{ performance.screeningEvent.location.address | changeLanguage }}\n                                            </p>\n                                            <p>\n                                                {{ performance.screeningEvent.location.name | changeLanguage }}</p>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-1\">\n                                        <p *ngIf=\"performance.screeningEvent.maximumAttendeeCapacity\"\n                                            class=\"screen-name\">\n                                            {{ 'common.seatValue' | translate: { value:\n                                            performance.screeningEvent.maximumAttendeeCapacity } }}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"mt-3\" *ngIf=\"getScreeningEventSeries(performance.screeningEvent.superEvent.id) \n                                && getCreativeWorks(performance.screeningEvent.workPerformed?.identifier);\">\n                                <div class=\"d-flex align-items-center\">\n                                    <div *ngIf=\"getContentRatingType(getCreativeWorks(performance.screeningEvent.workPerformed?.identifier)?.contentRating)\"\n                                        class=\"content-rating text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                                        getContentRatingType(getCreativeWorks(performance.screeningEvent.workPerformed?.identifier)?.contentRating)?.name\n                                        | changeLanguage }}\n                                    </div>\n                                    <div *ngIf=\"getScreeningEventSeries(performance.screeningEvent.superEvent.id)?.dubLanguage\"\n                                        class=\"dub-language text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                                        'common.dubbing' | translate }}</div>\n                                    <div *ngIf=\"getScreeningEventSeries(performance.screeningEvent.superEvent.id)?.subtitleLanguage\"\n                                        class=\"subtitle-language text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                                        'common.subtitles'\n                                        | translate }}</div>\n                                    <div *ngFor=\"let videoFormat of getScreeningEventSeries(performance.screeningEvent.superEvent.id)?.videoFormat\"\n                                        class=\"video-format text-small bg-dark-gray text-white py-1 px-2 mr-2\">\n                                        {{ getVideoFormatType(videoFormat.typeOf)?.name | changeLanguage }}\n                                    </div>\n                                    <div *ngIf=\"performance.screeningEvent.workPerformed?.duration && moment.duration(performance.screeningEvent.workPerformed?.duration).asMinutes() > 0\"\n                                        class=\"text-small ml-auto\">\n                                        <span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{\n                                        moment.duration(performance.screeningEvent.workPerformed?.duration).asMinutes()\n                                        }}{{\n                                        'common.date.minute' | translate }}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/cinema\">\n                    {{ 'purchase.cinema.schedule.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    disabled>\n                    {{ 'purchase.cinema.schedule.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, Input, OnInit } from '@angular/core';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-info',\n    templateUrl: './purchase-info.component.html',\n    styleUrls: ['./purchase-info.component.scss'],\n})\nexport class PurchaseInfoComponent implements OnInit {\n    @Input() public purchase: reducers.IPurchaseState;\n    @Input() public isAmount: boolean;\n    public image?: string;\n    public amount: number;\n    public moment = moment;\n    public getAdditionalProperty = Functions.Purchase.getAdditionalProperty;\n\n    constructor() {}\n\n    public ngOnInit() {\n        this.image = this.purchase.creativeWork?.thumbnailUrl;\n        this.amount = this.isAmount\n            ? Functions.Purchase.getAmount(\n                  this.purchase.authorizeSeatReservations\n              )\n            : 0;\n    }\n}\n","<div class=\"min-h-100 border border-gray\">\n    <div class=\"p-3\">\n        <div class=\"container px-0 mb-2\">\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <div class=\"image\">\n                        <!-- <div class=\"loading d-flex justify-content-center align-items-center\">\n                        <div class=\"loader\"></div>\n                    </div> -->\n                        <div class=\"poster\" *ngIf=\"image\" [style.backgroundImage]=\"'url('+ image +')'\"></div>\n                        <div class=\"poster-no\" *ngIf=\"!image\"></div>\n                    </div>\n                </div>\n                <div class=\"col-8\">\n                    <p class=\"font-weight-bold\">{{ purchase.screeningEvent?.name | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"purchase.screeningEvent?.superEvent.headline && (purchase.screeningEvent?.superEvent.headline | changeLanguage)\">\n                        {{ purchase.screeningEvent?.superEvent.headline | changeLanguage }}</p>\n                </div>\n            </div>\n        </div>\n        <p class=\"text-small\"\n            *ngIf=\"purchase.screeningEvent?.superEvent.description && (purchase.screeningEvent?.superEvent.description | changeLanguage)\">{{\n                        purchase.screeningEvent?.superEvent.description | changeLanguage }}</p>\n        <p class=\"font-weight-bold text-small\">\n            {{ purchase.screeningEvent?.startDate | formatDate: 'YYYY/MM/DD(ddd) HH:mm' }}-{{ purchase.screeningEvent?.endDate | formatDate: 'HH:mm' }}\n        </p>\n        <p class=\"screen-name text-small font-weight-bold\">\n            <span *ngIf=\"purchase.screeningEvent?.location.address | changeLanguage\"\n                class=\"mr-2\">{{ purchase.screeningEvent?.location.address | changeLanguage }}</span>{{ purchase.screeningEvent?.location.name | changeLanguage }}\n        </p>\n    </div>\n    <div class=\"d-flex justify-content-between p-3 bg-light-gray\">\n        <p class=\"font-weight-bold\">{{ 'common.amount' | translate }}</p>\n        <p *ngIf=\"isAmount\" class=\"font-weight-bold\">{{ amount | currency : 'JPY' }}</p>\n        <p *ngIf=\"!isAmount\" class=\"font-weight-bold\">-</p>\n    </div>\n    <div class=\"py-3 px-2\">\n        <app-item-list [reservations]=\"purchase.reservations\"></app-item-list>\n    </div>\n\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-step',\n    templateUrl: './step.component.html',\n    styleUrls: ['./step.component.scss']\n})\nexport class PurchaseStepComponent implements OnInit {\n    @Input() public currentStep: number;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public steps: number[];\n\n    constructor() { }\n\n    /**\n     * \n     */\n    public ngOnInit() {\n        this.steps = (this.environment.VIEW_TYPE === this.viewType.Cinema)\n            ? [1, 2, 3, 4, 5] : [1, 2, 3];\n    }\n\n}\n","<ul class=\"d-inline-flex align-items-center h-100 mb-0 border rounded-lg overflow-hidden\">\n    <li *ngFor=\"let step of steps\" class=\"step px-0 h-100 triangle\" [class.active]=\"currentStep === step\">\n        <div [class.d-none]=\"currentStep !== step\" class=\"px-3 py-2 bg-white h-100\">\n            <div class=\"d-flex align-items-center h-100 font-weight-bold\">\n                <div class=\"text-large mr-2\">{{ step }}</div>\n                <p class=\"text-small\" [innerHtml]=\"'purchase.step.' + step | translate\"></p>\n            </div>\n        </div>\n        <div [class.d-none]=\"currentStep === step\" [class.d-flex]=\"currentStep !== step\"\n            class=\"pl-4 pr-3 py-2 h-100 align-items-center text-large\">\n            {{ step }}\n        </div>\n    </li>\n</ul>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport {\n    ActionService,\n    EpsonEPOSService,\n    MasterService,\n    UtilService,\n} from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-payment',\n    templateUrl: './purchase-payment.component.html',\n    styleUrls: ['./purchase-payment.component.scss'],\n})\nexport class PurchasePaymentComponent implements OnInit {\n    public isLoading: Observable<boolean>;\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public paymentMethodType = Models.Purchase.Payment.PaymentMethodType;\n    public payments: {\n        paymentAccepted: factory.chevre.seller.IPaymentAccepted;\n        categoryCode: factory.chevre.categoryCode.ICategoryCode;\n        image?: string;\n    }[];\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public amount: number;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private translate: TranslateService,\n        private epsonEPOSService: EpsonEPOSService\n    ) {}\n\n    public async ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        this.payments = [];\n        try {\n            const { cashchanger, payment } =\n                await this.actionService.user.getData();\n            const { authorizeSeatReservations, seller } =\n                await this.actionService.purchase.getData();\n            if (seller === undefined || seller.paymentAccepted === undefined) {\n                throw new Error('seller or seller.paymentAccepted undefined');\n            }\n            this.amount = Functions.Purchase.getAmount(\n                authorizeSeatReservations\n            );\n            const paymentAccepted = seller.paymentAccepted.filter((p) => {\n                return (\n                    (p.paymentMethodType ===\n                        Models.Purchase.Payment.PaymentMethodType.Cash &&\n                        cashchanger) ||\n                    (p.paymentMethodType ===\n                        factory.chevre.paymentMethodType.CreditCard &&\n                        payment) ||\n                    (p.paymentMethodType ===\n                        Models.Purchase.Payment.PaymentMethodType.EMoney &&\n                        payment) ||\n                    (p.paymentMethodType ===\n                        Models.Purchase.Payment.PaymentMethodType.Code &&\n                        payment)\n                );\n            });\n            const categoryCodePayment =\n                await this.masterService.searchCategoryCode({\n                    categorySetIdentifier:\n                        factory.chevre.categoryCode.CategorySetIdentifier\n                            .PaymentMethodType,\n                });\n            paymentAccepted.forEach((p) => {\n                const categoryCode = categoryCodePayment.find(\n                    (c) => c.codeValue === p.paymentMethodType\n                );\n                if (categoryCode === undefined) {\n                    return;\n                }\n                const imageTable = [\n                    {\n                        paymentMethodType: this.paymentMethodType.Cash,\n                        image: '/default/images/purchase/payment/icon/cash.svg',\n                    },\n                    {\n                        paymentMethodType: this.paymentMethodType.CreditCard,\n                        image: '/default/images/purchase/payment/icon/creditcard.svg',\n                    },\n                    {\n                        paymentMethodType: this.paymentMethodType.EMoney,\n                        image: '/default/images/purchase/payment/icon/eMoney.svg',\n                    },\n                    {\n                        paymentMethodType: this.paymentMethodType.Code,\n                        image: '/default/images/purchase/payment/icon/code.svg',\n                    },\n                ];\n\n                this.payments.push({\n                    paymentAccepted: p,\n                    categoryCode,\n                    image: imageTable.find(\n                        (i) => i.paymentMethodType === p.paymentMethodType\n                    )?.image,\n                });\n            });\n            this.actionService.purchase.setPaymentMethodType({});\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectPaymentMethodType(typeOf: string) {\n        try {\n            if (this.epsonEPOSService.cashchanger.isConnected()) {\n                return;\n            }\n            const seller = (await this.actionService.purchase.getData()).seller;\n            if (seller === undefined || seller.paymentAccepted === undefined) {\n                throw new Error(\n                    'seller is undefined or paymentAccepted is undefined'\n                );\n            }\n            const findResult = seller.paymentAccepted.find(\n                (paymentAccepted) =>\n                    paymentAccepted.paymentMethodType === typeOf\n            );\n            if (findResult === undefined) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        'purchase.payment.alert.notCompatible'\n                    ),\n                });\n                return;\n            }\n            this.actionService.purchase.setPaymentMethodType({\n                paymentMethod: { typeOf },\n            });\n            this.router.navigate(['/purchase/payment/reception']);\n        } catch (error) {\n            this.router.navigate(['/error']);\n            console.error(error);\n        }\n    }\n}\n","<app-header>\n    <app-page-title *ngIf=\"amount > 0\" title=\"{{ 'purchase.payment.title' | translate }}\"></app-page-title>\n    <app-page-title *ngIf=\"amount === 0\" title=\"{{ 'purchase.payment.notPayment' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n            </div>\n            <div class=\"col-6\">\n                <div *ngIf=\"amount > 0\">\n                    <ng-container *ngFor=\"let payment of payments\">\n                        <button type=\"button\" [disabled]=\"isLoading | async\"\n                            class=\"btn btn-block border border-gray p-4 mb-3\"\n                            [class]=\"payment.paymentAccepted.paymentMethodType\"\n                            (click)=\"selectPaymentMethodType(payment.paymentAccepted.paymentMethodType)\">\n                            <div class=\"d-flex align-items-center\">\n                                <img *ngIf=\"payment.image\" width=\"50\" class=\"mr-3\" [src]=\"payment.image\" alt=\"\">\n                                <p class=\"text-large\">{{ payment.categoryCode?.name | changeLanguage }}</p>\n                            </div>\n                        </button>\n\n                    </ng-container>\n                </div>\n                <div *ngIf=\"amount === 0\">\n\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [currentStep]=\"4\">\n                </app-purchase-step>\n                <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [currentStep]=\"2\">\n                </app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <ng-container *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\">\n                    <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                        routerLink=\"/purchase/cinema/ticket\">{{ 'purchase.payment.prev' | translate }}</button>\n                </ng-container>\n                <ng-container *ngIf=\"environment.VIEW_TYPE === viewType.Event\">\n                    <button *ngIf=\"environment.PURCHASE_CART\" type=\"button\"\n                        class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                        routerLink=\"/purchase/event/schedule\">{{ 'purchase.payment.prev' | translate }}</button>\n                    <button *ngIf=\"!environment.PURCHASE_CART\" type=\"button\"\n                        class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                        routerLink=\"/purchase/event/select\">{{ 'purchase.payment.prev' | translate }}</button>\n                </ng-container>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"submit\" [disabled]=\"amount > 0\" routerLink=\"/purchase/payment/reception\"\n                    class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\">\n                    {{ 'purchase.payment.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport {\n    ActionService,\n    EpsonEPOSService,\n    MasterService,\n    UtilService,\n} from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-event-top',\n    templateUrl: './purchase-event-top.component.html',\n    styleUrls: ['./purchase-event-top.component.scss'],\n})\nexport class PurchaseEventTopComponent implements OnInit {\n    public user: Observable<reducers.IUserState>;\n    public applicationType = Models.Util.Application.ApplicationType;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private epsonEPOSService: EpsonEPOSService\n    ) {}\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.user = this.store.pipe(select(reducers.getUser));\n            this.actionService.user.updateLanguage('ja');\n            await this.actionService.purchase.transaction.cancel();\n            this.actionService.purchase.delete();\n            if (!this.epsonEPOSService.cashchanger.isConnected()) {\n                await this.actionService.user.checkVersion();\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public async toPurchase() {\n        await this.startTransaction({ routerLink: '/purchase/event/schedule' });\n    }\n\n    /**\n     * \n     */\n    public async changeDate() {\n        await this.startTransaction({ routerLink: '/purchase/event/date' });\n    }\n\n    /**\n     * \n     */\n    public async startTransaction(params: { routerLink: string }) {\n        const now = moment().toDate();\n        const today = moment(now).format('YYYY-MM-DD');\n        this.actionService.purchase.selectScheduleDate(today);\n        try {\n            const { theater } = await this.actionService.user.getData();\n            if (theater === undefined) {\n                throw new Error('theater undefined');\n            }\n            const screeningEvents =\n                await this.masterService.searchScreeningEvent({\n                    superEvent: {\n                        locationBranchCodes: [theater.branchCode],\n                    },\n                    startFrom: moment(today, 'YYYY-MM-DD').toDate(),\n                    offers: {\n                        availableFrom: now,\n                        availableThrough: now,\n                    },\n                });\n            const screeningEvent = screeningEvents.find(\n                (s) =>\n                    s.offers !== undefined &&\n                    s.offers.seller !== undefined &&\n                    s.offers.seller.id !== undefined\n            );\n            if (\n                screeningEvent === undefined ||\n                screeningEvent.offers === undefined ||\n                screeningEvent.offers.seller === undefined ||\n                screeningEvent.offers.seller.id === undefined\n            ) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        'purchase.event.schedule.notfound'\n                    ),\n                });\n                return;\n            }\n            await this.actionService.purchase.getSeller({\n                id: screeningEvent.offers.seller.id,\n            });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            const { pos } = await this.actionService.user.getData();\n            await this.actionService.purchase.transaction.start({ pos });\n            const { routerLink } = params;\n            this.router.navigate([routerLink]);\n        } catch (error) {\n            const errorObject = JSON.parse(error);\n            if (errorObject.status === TOO_MANY_REQUESTS) {\n                this.router.navigate(['/congestion']);\n                return;\n            }\n            if (errorObject.status === BAD_REQUEST) {\n                this.router.navigate(['/maintenance']);\n                return;\n            }\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public getImageUrl() {\n        const { storageUrl } = Functions.Util.getProject();\n        return `${storageUrl}${this.environment.TOP_IMAGE}`;\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.event.top.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"h-100 d-flex align-items-center px-4\">\n        <div class=\"container px-0\">\n            <div class=\"row justify-content-center mb-5\">\n                <div *ngIf=\"(user | async)?.applicationType !== applicationType.Printer\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.event.top.purchase.read' | translate }}\n                            </div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/event/top/time.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.event.top.purchase.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary py-3 mb-3\"\n                                (click)=\"toPurchase()\">\n                                {{ 'purchase.event.top.purchase.search.today' | translate }}\n                            </button>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary py-3\" (click)=\"changeDate()\">\n                                {{ 'purchase.event.top.purchase.search.other' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.event.top.inquiry.read' | translate }}\n                            </div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/event/top/inquiry.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.event.top.inquiry.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-custom-primary rounded-pill py-3\"\n                                routerLink=\"/inquiry/input\">\n                                {{ 'purchase.event.top.inquiry.print' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"environment.TOP_IMAGE\" class=\"image\"><img [src]=\"getImageUrl()\" class=\"w-100\" alt=\"\"></div>\n    <app-language></app-language>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-2\">\n                <app-language></app-language>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-root',\n    templateUrl: './purchase-root.component.html',\n    styleUrls: ['./purchase-root.component.scss'],\n})\nexport class PurchaseRootComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private actionService: ActionService,\n        private router: Router\n    ) {}\n\n    public async ngOnInit() {\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.transaction !== undefined) {\n                await this.actionService.purchase.transaction.cancel();\n            }\n            this.actionService.purchase.delete();\n            if (this.environment.VIEW_TYPE === Models.Util.ViewType.Cinema) {\n                this.router.navigate(['/purchase/cinema']);\n                return;\n            }\n            this.router.navigate(['/purchase/event']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PurchaseCinemaDateComponent } from './components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component';\nimport { PurchaseCinemaScheduleEventComponent } from './components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component';\nimport { PurchaseCinemaScheduleMovieComponent } from './components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseCinemaTopComponent } from './components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component';\nimport { PurchaseEventDateComponent } from './components/pages/event/purchase-event-date/purchase-event-date.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseEventSelectComponent } from './components/pages/event/purchase-event-select/purchase-event-select.component';\nimport { PurchaseEventTicketComponent } from './components/pages/event/purchase-event-ticket/purchase-event-ticket.component';\nimport { PurchaseEventTopComponent } from './components/pages/event/purchase-event-top/purchase-event-top.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchasePaymentReceptionComponent } from './components/pages/purchase-payment-reception/purchase-payment-reception.component';\nimport { PurchasePaymentComponent } from './components/pages/purchase-payment/purchase-payment.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\nimport { PurchaseSeatComponent } from './components/pages/purchase-seat/purchase-seat.component';\nimport { PurchaseTicketComponent } from './components/pages/purchase-ticket/purchase-ticket.component';\nimport { InputTicketsComponent } from './components/parts/input-tickets/input-tickets.component';\nimport { PurchasePerformanceComponent } from './components/parts/performance/performance.component';\nimport { PurchasePerformancesComponent } from './components/parts/performances/performances.component';\nimport { PurchaseCartComponent } from './components/parts/purchase-cart/purchase-cart.component';\nimport { PurchaseInfoComponent } from './components/parts/purchase-info/purchase-info.component';\nimport { PurchaseTermsComponent } from './components/parts/purchase-terms/purchase-terms.component';\nimport { PurchaseWarningComponent } from './components/parts/purchase-warning/purchase-warning.component';\nimport { SeatInfoComponent } from './components/parts/seat-info/seat-info.component';\nimport { PurchaseStepComponent } from './components/parts/step/step.component';\nimport { TransactionRemainingTimeComponent } from './components/parts/transaction-remaining-time/transaction-remaining-time.component';\nimport { PurchaseRoutingModule } from './purchase-routing.module';\n\n@NgModule({\n    declarations: [\n        PurchaseBaseComponent,\n        PurchaseRootComponent,\n        PurchaseCinemaSeatComponent,\n        PurchaseCinemaTicketComponent,\n        PurchaseEventTicketComponent,\n        PurchasePaymentComponent,\n        PurchasePaymentReceptionComponent,\n        PurchaseCompleteComponent,\n        PurchaseCinemaScheduleComponent,\n        PurchaseEventScheduleComponent,\n        PurchasePerformanceComponent,\n        PurchasePerformancesComponent,\n        PurchaseInfoComponent,\n        PurchaseTermsComponent,\n        PurchaseWarningComponent,\n        TransactionRemainingTimeComponent,\n        PurchaseEventSeatComponent,\n        PurchaseEventTicketComponent,\n        PurchaseTicketComponent,\n        PurchaseSeatComponent,\n        SeatInfoComponent,\n        PurchaseCinemaScheduleMovieComponent,\n        PurchaseCinemaScheduleEventComponent,\n        PurchaseCinemaTopComponent,\n        PurchaseCinemaDateComponent,\n        PurchaseStepComponent,\n        InputTicketsComponent,\n        PurchaseEventTopComponent,\n        PurchaseEventDateComponent,\n        PurchaseCartComponent,\n        PurchaseEventSelectComponent,\n    ],\n    imports: [CommonModule, PurchaseRoutingModule, SharedModule],\n})\nexport class PurchaseModule {}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport * as Models from '../../../../../models';\nimport { MembershipCheckModalComponent } from '../../../../shared/components/parts/membership/check-modal/check-modal.component';\nimport { MovieTicketCheckModalComponent } from '../../../../shared/components/parts/movie-ticket/check-modal/check-modal.component';\n\n@Component({\n    selector: 'app-input-tickets',\n    templateUrl: './input-tickets.component.html',\n    styleUrls: ['./input-tickets.component.scss'],\n})\nexport class InputTicketsComponent implements OnInit {\n    @Input()\n    public screeningEventTicketOffers: factory.chevre.event.screeningEvent.ITicketOffer[];\n    @Input() public paymentServices: factory.service.paymentService.IService[];\n    public availablePaymentServices: factory.service.paymentService.IService[];\n    public isMembership: boolean;\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Util.ViewType;\n\n    constructor(private modal: BsModalService) {}\n\n    public async ngOnInit() {\n        const screeningEventTicketOffers = this.screeningEventTicketOffers;\n        const movieTicketTypeOffers =\n            Functions.Purchase.getMovieTicketTypeOffers({\n                screeningEventTicketOffers,\n            });\n        this.availablePaymentServices = [];\n        this.paymentServices.forEach((s) => {\n            const isAvailable =\n                movieTicketTypeOffers.find((m) => {\n                    const findResult = m.priceSpecification.priceComponent.find(\n                        (p) =>\n                            p.typeOf ===\n                                factory.chevre.priceSpecificationType\n                                    .UnitPriceSpecification &&\n                            p.appliesToMovieTicket?.serviceOutput?.typeOf ===\n                                s.serviceType?.codeValue\n                    );\n                    return findResult !== undefined;\n                }) !== undefined;\n            if (!isAvailable) {\n                return;\n            }\n            this.availablePaymentServices.push(s);\n        });\n        this.isMembership =\n            Functions.Purchase.getMembershipTypeOffers({\n                screeningEventTicketOffers,\n            }).length > 0;\n    }\n\n    /**\n     * \n     */\n    public openMovieTicket(paymentMethodType: string) {\n        this.modal.show(MovieTicketCheckModalComponent, {\n            initialState: {\n                paymentMethodType,\n            },\n            class: 'modal-dialog-centered modal-lg',\n        });\n    }\n\n    /**\n     * \n     */\n    public openMembership() {\n        this.modal.show(MembershipCheckModalComponent, {\n            initialState: {},\n            class: 'modal-dialog-centered modal-lg',\n        });\n    }\n}\n","<div *ngIf=\"availablePaymentServices.length || isMembership\" class=\"py-4 px-3 border border-gray\">\n    <p class=\"mb-4\">{{ 'common.inputTicket.read' | translate }}</p>\n    <ng-container *ngIf=\"availablePaymentServices.length\">\n        <div *ngFor=\"let service of availablePaymentServices\" class=\"mb-4\">\n            <button type=\"button\" (click)=\"openMovieTicket(service.serviceType?.codeValue)\"\n                class=\"btn btn-block bg-white border border-gray py-3 rounded-pill\"\n                [class]=\"service.serviceType?.codeValue\">\n                <div class=\"font-weight-bold text-large bg-image\">{{ service.name | changeLanguage }}</div>\n            </button>\n        </div>\n    </ng-container>\n    <ng-container *ngIf=\"isMembership\">\n        <div class=\"mb-4\">\n            <button type=\"button\" (click)=\"openMembership()\"\n                class=\"btn btn-block bg-white border border-gray py-3 rounded-pill membership\">\n                <div class=\"font-weight-bold text-large\">\n                    {{ 'common.membership.label' | translate }}\n                </div>\n            </button>\n        </div>\n    </ng-container>\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-complete',\n    templateUrl: './purchase-complete.component.html',\n    styleUrls: ['./purchase-complete.component.scss'],\n})\nexport class PurchaseCompleteComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public error: Observable<string | null>;\n    public moment = moment;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public qrcode?: string;\n    public connectionType = Models.Util.Printer.ConnectionType;\n    public createOrderLink = Functions.Order.createOrderLink;\n    private timer: any;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService\n    ) {}\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.error = this.store.pipe(select(reducers.getError));\n        try {\n            const { order } = await this.actionService.purchase.getData();\n            if (order === undefined) {\n                throw new Error('order not found');\n            }\n        } catch (error) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        if (this.environment.PRINT_SUCCESS_WAIT_TIME === '') {\n            return;\n        }\n        const time = Number(this.environment.PRINT_SUCCESS_WAIT_TIME);\n        this.timer = setTimeout(() => {\n            this.router.navigate(['/']);\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        if (this.timer !== undefined) {\n            clearTimeout(this.timer);\n        }\n    }\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.complete.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n            </div>\n            <div class=\"col-6\">\n                <app-print-result *ngIf=\"(purchase | async)?.order\" [order]=\"(purchase | async)?.order\">\n                </app-print-result>\n            </div>\n            <div class=\"col-3 mh-100\">\n\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [currentStep]=\"5\">\n                </app-purchase-step>\n                <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [currentStep]=\"3\">\n                </app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    disabled>\n                    {{ 'purchase.complete.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    routerLink=\"/\">\n                    {{ 'purchase.complete.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-event-seat',\n    templateUrl: './purchase-event-seat.component.html',\n    styleUrls: ['./purchase-event-seat.component.scss'],\n})\nexport class PurchaseEventSeatComponent extends PurchaseSeatComponent {\n    public async prev() {\n        try {\n            const authorizeSeatReservation = (\n                await this.actionService.purchase.getData()\n            ).authorizeSeatReservation;\n            if (authorizeSeatReservation !== undefined) {\n                const authorizeSeatReservations = [authorizeSeatReservation];\n                await this.actionService.purchase.transaction.voidSeatReservation(\n                    { authorizeSeatReservations }\n                );\n            }\n            this.router.navigate(['/purchase/event/schedule']);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n","<app-header>\n    <app-page-title *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\"\n        title=\"{{ 'purchase.event.seat.title' | translate }}\"></app-page-title>\n    <app-page-title *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\"\n        title=\"{{ 'purchase.event.seat.openSeating.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <app-seat-info *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\"></app-seat-info>\n            </div>\n            <div class=\"col-6\">\n                <div *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\">\n                    <app-screen *ngIf=\"(user | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" [theaterCode]=\"(user | async)?.theater.branchCode\"\n                        [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                        [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                        [reservations]=\"(purchase | async)?.reservations\"\n                        [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\"\n                        (select)=\"selectSeat($event)\">\n                    </app-screen>\n                </div>\n                <div *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                    <div class=\"container p-3\">\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-5\">\n                                <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                    {{ 'purchase.event.seat.openSeating.seat' | translate }}\n                                </p>\n                            </div>\n                            <div class=\"col-7\">\n                                <app-quantity-input class=\"pl-3\" [(value)]=\"reservationCount\" [maxValue]=\"remainingAttendeeCapacityValue({\n                                    screeningEventSeats: screeningEventSeats,\n                                    screeningEvent: (purchase | async)?.screeningEvent,\n                                    authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n                                }).length\"></app-quantity-input>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    (click)=\"prev()\">{{\n                    'purchase.event.seat.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\" type=\"submit\"\n                    class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async)  || (purchase | async)?.reservations.length === 0\"\n                    (click)=\"onSubmit()\">\n                    {{ 'purchase.event.seat.next' | translate }}\n                </button>\n                <button *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" type=\"submit\"\n                    class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async)  || Number(reservationCount) === 0\" (click)=\"onSubmit()\">\n                    {{ 'purchase.event.seat.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-cinema-seat',\n    templateUrl: './purchase-cinema-seat.component.html',\n    styleUrls: ['./purchase-cinema-seat.component.scss']\n})\nexport class PurchaseCinemaSeatComponent extends PurchaseSeatComponent {\n    public async prev() {\n        const { screeningEvent, searchType } = await this.actionService.purchase.getData();\n        if (screeningEvent === undefined\n            || screeningEvent.workPerformed === undefined\n            || searchType === undefined) {\n            console.error('screeningEvent.workPerformed or searchType undefined');\n            this.router.navigate(['/error']);\n            return;\n        }\n        if (searchType === 'event') {\n            this.router.navigate([`/purchase/cinema/schedule`]);\n            return;\n        }\n        this.router.navigate([`/purchase/cinema/schedule/event`]);\n    }\n}\n","<app-header>\n    <app-page-title *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\"\n        title=\"{{ 'purchase.cinema.seat.title' | translate }}\"></app-page-title>\n    <app-page-title *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\"\n        title=\"{{ 'purchase.cinema.seat.openSeating.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <app-seat-info *ngIf=\"(purchase | async)?.screen && !((purchase | async)?.screen?.openSeatingAllowed)\">\n                </app-seat-info>\n            </div>\n            <div class=\"col-6\">\n                <div *ngIf=\"(purchase | async)?.screen && !((purchase | async)?.screen?.openSeatingAllowed)\">\n                    <app-screen *ngIf=\"(user | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" [theaterCode]=\"(user | async)?.theater.branchCode\"\n                        [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                        [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                        [reservations]=\"(purchase | async)?.reservations\"\n                        [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\"\n                        (select)=\"selectSeat($event)\">\n                    </app-screen>\n                </div>\n                <div *ngIf=\"(purchase | async)?.screen && (purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                    <div class=\"container p-3\">\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-7\">\n                                <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                    {{ 'purchase.cinema.seat.openSeating.seat' | translate }}\n                                </p>\n                            </div>\n                            <div class=\"col-5 text-right\">\n                                <app-quantity-input class=\"pl-3\" [(value)]=\"reservationCount\" [maxValue]=\"remainingAttendeeCapacityValue({\n                                            screeningEventSeats: screeningEventSeats,\n                                            screeningEvent: (purchase | async)?.screeningEvent,\n                                            authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n                                        }).length\"></app-quantity-input>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100\">\n                <app-purchase-info [purchase]=\"purchase | async\" [isAmount]=\"false\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"2\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    (click)=\"prev()\">{{\n                    'purchase.cinema.seat.prev' | translate }}</button>\n            </div>\n            <div class=\"col-2\">\n                <button *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\" type=\"submit\"\n                    class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async) || (purchase | async)?.reservations.length === 0\"\n                    (click)=\"onSubmit()\">\n                    <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.next' | translate }}\n                    </ng-container>\n                    <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.consent' | translate }}\n                    </ng-container>\n                </button>\n                <button *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" type=\"submit\"\n                    class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async)  || Number(reservationCount) === 0\" (click)=\"onSubmit()\">\n                    <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.next' | translate }}\n                    </ng-container>\n                    <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.consent' | translate }}\n                    </ng-container>\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-event-ticket',\n    templateUrl: './purchase-event-ticket.component.html',\n    styleUrls: ['./purchase-event-ticket.component.scss']\n})\nexport class PurchaseEventTicketComponent extends PurchaseTicketComponent {\n}\n","<app-header>\n    <app-page-title title=\"{{ 'purchase.event.ticket.title' | translate }}\"></app-page-title>\n</app-header>\n\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-input-tickets *ngIf=\"(purchase | async)?.screeningEventTicketOffers && paymentServices\"\n                    [screeningEventTicketOffers]=\"(purchase | async)?.screeningEventTicketOffers\"\n                    [paymentServices]=\"paymentServices\"></app-input-tickets>\n            </div>\n            <div class=\"col-6 mh-100 scroll-horizontal\">\n                <div>\n                    <ul class=\"py-2 bg-white\">\n                        <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                            <div class=\"container px-3 py-2\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-2\">\n                                        <p *ngIf=\"reservation.seat?.seatNumber\" class=\"font-weight-bold text-large\">\n                                            {{ reservation.seat?.seatNumber }}\n                                        </p>\n                                    </div>\n                                    <div class=\"col-10\">\n                                        <div>\n                                            <button *ngIf=\"reservation.ticket === undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block border border-gray py-3\">{{\n                                                'purchase.event.ticket.unselected' | translate }}</button>\n                                            <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block btn-outline-primary py-3\">\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                                    <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}\n                                                    </p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ priceComponent.price | currency :\n                                                            priceComponent.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{\n                                                            'common.referenceQuantityValue' | translate: { value:\n                                                            priceComponent?.referenceQuantity?.value } }}</span>\n                                                    </p>\n                                                </div>\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                                    <p class=\"w-50 text-left\">\n                                                        {{ addOn.priceSpecification.name | changeLanguage }}</p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ addOn.priceSpecification.price | currency :\n                                                            addOn.priceSpecification.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span\n                                                            *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{\n                                                            'common.referenceQuantityValue' | translate: { value:\n                                                            addOn.priceSpecification?.referenceQuantity?.value }\n                                                            }}</span>\n                                                    </p>\n                                                </div>\n                                                <div>\n                                                    <!-- <p *ngIf=\"reservation.ticket.ticketOffer.description\" class=\"text-small text-left\">\n                                                        {{ reservation.ticket.ticketOffer.description | changeLanguage }}\n                                                    </p> -->\n                                                    <p *ngIf=\"reservation.ticket.movieTicket\"\n                                                        class=\"text-small text-left\">\n                                                        {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }}\n                                                        {{ reservation.ticket.movieTicket.identifier }}\n                                                    </p>\n                                                </div>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-end h-100\">\n            <div class=\"col-6\">\n                <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"btn btn-custom-secondary btn-block py-2\" routerLink=\"/\">\n                    {{ 'common.clear' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"button\" class=\"text-large btn btn-custom-secondary btn-block font-weight-bold py-3\"\n                    routerLink=\"/purchase/event/seat\">\n                    {{ 'purchase.event.ticket.prev' | translate }}\n                </button>\n            </div>\n            <div class=\"col-2\">\n                <button type=\"submit\" class=\"text-large btn btn-custom-primary btn-block font-weight-bold py-3\"\n                    [disabled]=\"(isLoading | async) || !isSelectedTicket\" (click)=\"onSubmit()\">\n                    {{ 'purchase.event.ticket.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-warning',\n    templateUrl: './purchase-warning.component.html',\n    styleUrls: ['./purchase-warning.component.scss']\n})\nexport class PurchaseWarningComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public warning: string;\n\n    constructor(\n    private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/warning/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.warning = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3 text-small scroll-vertical border\" [innerHTML]=\"warning\"></div>"],"sourceRoot":"webpack:///"}