{"version":3,"sources":["./app/modules/purchase/components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component.html","./app/modules/purchase/components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component.ts","./app/modules/purchase/components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component.html","./app/modules/purchase/components/pages/event/purchase-event-date/purchase-event-date.component.ts","./app/modules/purchase/components/pages/event/purchase-event-date/purchase-event-date.component.html","./app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.ts","./app/modules/purchase/components/pages/event/purchase-event-schedule/purchase-event-schedule.component.html","./app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.ts","./app/modules/purchase/components/pages/event/purchase-event-seat/purchase-event-seat.component.html","./app/modules/purchase/components/pages/event/purchase-event-select/purchase-event-select.component.ts","./app/modules/purchase/components/pages/event/purchase-event-select/purchase-event-select.component.html","./app/modules/purchase/components/pages/event/purchase-event-ticket/purchase-event-ticket.component.ts","./app/modules/purchase/components/pages/event/purchase-event-ticket/purchase-event-ticket.component.html","./app/modules/purchase/components/pages/event/purchase-event-top/purchase-event-top.component.ts","./app/modules/purchase/components/pages/event/purchase-event-top/purchase-event-top.component.html","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.ts","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.html","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.ts","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.html","./app/modules/purchase/components/pages/purchase-payment-reception/purchase-payment-reception.component.ts","./app/modules/purchase/components/pages/purchase-payment-reception/purchase-payment-reception.component.html","./app/modules/purchase/components/pages/purchase-payment/purchase-payment.component.ts","./app/modules/purchase/components/pages/purchase-payment/purchase-payment.component.html","./app/modules/purchase/components/pages/purchase-root/purchase-root.component.ts","./app/modules/purchase/components/pages/purchase-seat/purchase-seat.component.ts","./app/modules/purchase/components/pages/purchase-ticket/purchase-ticket.component.ts","./app/modules/purchase/components/parts/movie-tickets/movie-tickets.component.ts","./app/modules/purchase/components/parts/movie-tickets/movie-tickets.component.html","./app/modules/purchase/components/parts/performance/performance.component.ts","./app/modules/purchase/components/parts/performance/performance.component.html","./app/modules/purchase/components/parts/performances/performances.component.ts","./app/modules/purchase/components/parts/performances/performances.component.html","./app/modules/purchase/components/parts/purchase-cart/purchase-cart.component.ts","./app/modules/purchase/components/parts/purchase-cart/purchase-cart.component.html","./app/modules/purchase/components/parts/purchase-info/purchase-info.component.ts","./app/modules/purchase/components/parts/purchase-info/purchase-info.component.html","./app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.ts","./app/modules/purchase/components/parts/purchase-terms/purchase-terms.component.html","./app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.ts","./app/modules/purchase/components/parts/purchase-warning/purchase-warning.component.html","./app/modules/purchase/components/parts/seat-info/seat-info.component.ts","./app/modules/purchase/components/parts/seat-info/seat-info.component.html","./app/modules/purchase/components/parts/step/step.component.ts","./app/modules/purchase/components/parts/step/step.component.html","./app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.ts","./app/modules/purchase/components/parts/transaction-remaining-time/transaction-remaining-time.component.html","./app/modules/purchase/purchase-routing.module.ts","./app/modules/purchase/purchase.module.ts"],"names":[],"mappings":"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","file":"modules-purchase-purchase-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cinema-date',\n    templateUrl: './purchase-cinema-date.component.html',\n    styleUrls: ['./purchase-cinema-date.component.scss']\n})\nexport class PurchaseCinemaDateComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public moment = moment;\n    public environment = getEnvironment();\n    public scheduleDates: string[];\n    public preScheduleDates: string[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            this.scheduleDates = [];\n            this.preScheduleDates = [];\n            const { theater } = await this.actionService.user.getData();\n            if (theater === undefined) {\n                throw new Error('theater undefined');\n            }\n            this.scheduleDates = this.cteateScheduleDate({ theater });\n            this.preScheduleDates = await this.actionService.purchase.getPreScheduleDates({ theater });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public cteateScheduleDate(params: {\n        theater: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom;\n    }) {\n        const { theater } = params;\n        const now = moment().toDate();\n        const today = moment(moment(now).format('YYYYMMDD')).toDate();\n        if (theater.offers === undefined\n            || theater.offers.availabilityStartsGraceTime === undefined\n            || theater.offers.availabilityStartsGraceTime.value === undefined\n            || theater.offers.availabilityStartsGraceTime.unitCode !== factory.chevre.unitCode.Day) {\n            return [];\n        }\n        const limitDate = moment(today).add(theater.offers.availabilityStartsGraceTime.value * -1, 'days');\n        const limit = limitDate.diff(moment(today), 'days');\n        const result = [];\n        for (let i = 0; i < limit; i++) {\n            const date = moment(moment(today).add(i + 1, 'day')).format('YYYY-MM-DD');\n            result.push(date);\n        }\n        return result;\n    }\n\n    /**\n     * \n     */\n    public async searchMovie(scheduleDate: string) {\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        this.actionService.purchase.selectSearchType({ searchType: 'movie' });\n        this.router.navigate(['/purchase/cinema/schedule/movie']);\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.date.title' | translate }}\"></app-page-title>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\">\n        <div class=\"mb-4\">\n            <div class=\"p-4 bg-light-gray mb-3 font-weight-bold\">{{ 'purchase.cinema.date.schedule' | translate }}</div>\n            <div class=\"container px-0\">\n                <div class=\"row\">\n                    <div class=\"col-3\" *ngFor=\"let scheduleDate of scheduleDates\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray py-5 mb-3\"\n                            (click)=\"searchMovie(scheduleDate)\">\n                            <div class=\"text-large\">{{ moment(scheduleDate, 'YYYYMMDD').format('YYYY/MM/DD') }}</div>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div *ngIf=\"preScheduleDates.length > 0\">\n            <div class=\"p-4 bg-light-gray mb-3 font-weight-bold\">{{ 'purchase.cinema.date.preSchedule' | translate }}</div>\n            <div class=\"container px-0\">\n                <div class=\"row\">\n                    <div class=\"col-3\" *ngFor=\"let scheduleDate of preScheduleDates\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray py-5 mb-3\"\n                            (click)=\"searchMovie(scheduleDate)\">\n                            <div class=\"text-large\">{{ moment(scheduleDate, 'YYYYMMDD').format('YYYY/MM/DD') }}</div>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/cinema\">{{ 'purchase.cinema.date.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    disabled>{{ 'purchase.cinema.date.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule-event',\n    templateUrl: './purchase-cinema-schedule-event.component.html',\n    styleUrls: ['./purchase-cinema-schedule-event.component.scss']\n})\nexport class PurchaseCinemaScheduleEventComponent implements OnInit {\n\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent[];\n    public animations: boolean[];\n    public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    constructor(\n        private router: Router,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private translate: TranslateService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.videoFormatTypes = [];\n            this.screeningEventSeries = [];\n            this.screeningEventsGroup = [];\n            this.animations = [];\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate, creativeWork } = await this.actionService.purchase.getData();\n            if (scheduleDate === undefined\n                || theater === undefined\n                || creativeWork === undefined) {\n                throw new Error('scheduleDate or creativeWork or theater undefined');\n            }\n            this.videoFormatTypes = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.VideoFormatType\n            });\n            this.screeningEventSeries = await this.masterService.searchScreeningEventSeries({\n                workPerformed: {\n                    identifiers: [creativeWork.identifier],\n                },\n                location: {\n                    branchCode: {\n                        $eq: theater.branchCode\n                    }\n                }\n            });\n            const screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                    workPerformedIdentifiers: [creativeWork.identifier]\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n                screeningEventSeries: this.screeningEventSeries\n            });\n            const now = moment((await this.utilService.getServerTime()).date).toDate();\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents, now });\n            await this.addAnimationClass();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.chevre.event.screeningEvent.IEvent) {\n        if (screeningEvent.remainingAttendeeCapacity === undefined\n            || screeningEvent.remainingAttendeeCapacity === 0) {\n            return;\n        }\n        if (screeningEvent.offers === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket.ticketedSeat === undefined) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.cinema.schedule.alert.ticketedSeat')\n            });\n            return;\n        }\n        try {\n            const screeningEventSeries = this.getScreeningEventSeries(screeningEvent.superEvent.id);\n            if (screeningEventSeries === undefined) {\n                throw new Error('screeningEventSeries === undefined');\n            }\n            this.actionService.purchase.unsettledDelete();\n            this.actionService.purchase.selectScreeningEventSeries(screeningEventSeries);\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            const { authorizeSeatReservations } = await this.actionService.purchase.getData();\n            if (authorizeSeatReservations.length > 0) {\n                await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n            }\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n    }\n\n    /**\n     * \n     */\n    public async addAnimationClass() {\n        this.screeningEventsGroup.forEach(() => this.animations.push(false));\n        const startTime = 300;\n        await Functions.Util.sleep(startTime);\n        for (let i = 0; i < this.animations.length; i++) {\n            const time = 300;\n            const target = this.animations.length - i - 1;\n            this.animations[target] = true;\n            await Functions.Util.sleep(time);\n        }\n    }\n\n    /**\n     * \n     */\n    public getScreeningEventSeries(id: string) {\n        return this.screeningEventSeries.find(s => s.id === id);\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.scheduleEvent.title' | translate }}\"></app-page-title>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"px-3\">\n        <app-purchase-performances *ngFor=\"let group of screeningEventsGroup; let index = index\" \n        [screeningEventsGroup]=\"group\" \n        [screeningEventSeries]=\"getScreeningEventSeries(group.screeningEvent.superEvent.id)\"\n        [videoFormatTypes]=\"videoFormatTypes\"\n        [animation]=\"animations[index]\"\n            (select)=\"selectSchedule($event)\" class=\"\">\n        </app-purchase-performances>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/cinema/schedule/movie\">{{ 'purchase.cinema.scheduleEvent.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    disabled>{{ 'purchase.cinema.scheduleEvent.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule-movie',\n    templateUrl: './purchase-cinema-schedule-movie.component.html',\n    styleUrls: ['./purchase-cinema-schedule-movie.component.scss']\n})\nexport class PurchaseCinemaScheduleMovieComponent implements OnInit {\n\n    public moment = moment;\n    public environment = getEnvironment();\n    public creativeWorks: factory.chevre.creativeWork.movie.ICreativeWork[];\n    public screeningEvents: factory.chevre.event.screeningEvent.IEvent[];\n    public animations: boolean[];\n    public getAdditionalProperty = Functions.Purchase.getAdditionalProperty;\n    public contentRatingTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public now: Date;\n\n    constructor(\n        private router: Router,\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private utilService: UtilService\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.creativeWorks = [];\n        this.screeningEvents = [];\n        this.animations = [];\n        try {\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate } = await this.actionService.purchase.getData();\n            if (scheduleDate === undefined\n                || theater === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.now = moment((await this.utilService.getServerTime()).date).toDate();\n            this.contentRatingTypes = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.ContentRatingType\n            });\n            this.screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n            });\n            const creativeWorks = await this.masterService.searchMovies({\n                offers: {\n                    availableFrom: moment(scheduleDate).toDate(),\n                },\n            });\n            this.creativeWorks = creativeWorks.filter(c =>\n                this.screeningEvents.find(s =>\n                    s.workPerformed?.identifier === c.identifier) !== undefined);\n            await this.addAnimationClass();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n\n    }\n\n    /**\n     * \n     */\n    public async addAnimationClass() {\n        this.creativeWorks.forEach(() => this.animations.push(false));\n        const row = 6;\n        const startTime = 300;\n        await Functions.Util.sleep(startTime);\n        for (let i = 0; i < this.animations.length; i++) {\n            const time = 300;\n            const target = this.animations.length - i - 1;\n            this.animations[target] = true;\n            if (target % row === 0) {\n                await Functions.Util.sleep(time);\n            }\n        }\n    }\n\n    /**\n     * \n     */\n    public isSales(identifier: string) {\n        const findResult = this.screeningEvents.find(s => {\n            return (s.workPerformed?.identifier === identifier\n                && new Models.Purchase.Performance({ screeningEvent: s, now: this.now }).isSales());\n        });\n        return (findResult !== undefined);\n    }\n\n    /**\n     * \n     */\n    public getContentRatingType(code?: string) {\n        return this.contentRatingTypes.find(c => c.codeValue === code);\n    }\n\n    public selectCreativeWork(creativeWork: factory.chevre.creativeWork.movie.ICreativeWork) {\n        this.actionService.purchase.selectCreativeWork(creativeWork);\n        this.router.navigate(['/purchase/cinema/schedule/event']);\n    }\n\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.scheduleMovie.title' | translate }}\"></app-page-title>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"container px-3\">\n        <div class=\"row\">\n            <div *ngFor=\"let creativeWork of creativeWorks; let index = index\" class=\"item mb-3\" [ngClass]=\"{\n                   'not-event not-sales': !isSales(creativeWork.identifier)\n               }\" [class.animation]=\"animations[index]\"\n                (click)=\"selectCreativeWork(creativeWork)\">\n                <div class=\"position-relative\">\n                    <div class=\"image\">\n                        <div class=\"poster-title d-flex align-items-center\">\n                            <p class=\"p-3 text-white text-small\">{{ creativeWork.name }}</p>\n                        </div>\n                        <div class=\"poster\" *ngIf=\"creativeWork.thumbnailUrl\"\n                            [style.backgroundImage]=\"'url('+ creativeWork.thumbnailUrl +')'\">\n                        </div>\n                    </div>\n                    <div class=\"content-rating p-2 bg-dark text-white\" *ngIf=\"getContentRatingType(creativeWork?.contentRating)\">\n                        {{ getContentRatingType(creativeWork?.contentRating)?.name | changeLanguage }}\n                    </div>\n                    <p class=\"p-2 bg-dark text-white text-overflow-ellipsis text-small\">{{ creativeWork.name }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/cinema\">{{ 'purchase.cinema.scheduleMovie.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    disabled>{{ 'purchase.cinema.scheduleMovie.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-schedule',\n    templateUrl: './purchase-cinema-schedule.component.html',\n    styleUrls: ['./purchase-cinema-schedule.component.scss']\n})\nexport class PurchaseCinemaScheduleComponent implements OnInit {\n    public creativeWorks: factory.chevre.creativeWork.movie.ICreativeWork[];\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent[];\n    public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public contentRatingTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public moment = moment;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private translate: TranslateService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            this.videoFormatTypes = [];\n            this.contentRatingTypes = [];\n            this.screeningEventSeries = [];\n            this.screeningEventsGroup = [];\n            this.creativeWorks = [];\n            const { theater } = await this.actionService.user.getData();\n            const { scheduleDate } = await this.actionService.purchase.getData();\n            if (scheduleDate === undefined\n                || theater === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.contentRatingTypes = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.ContentRatingType\n            });\n            this.videoFormatTypes = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.VideoFormatType\n            });\n            this.creativeWorks = await this.masterService.searchMovies({\n                offers: {\n                    availableFrom: moment(scheduleDate).toDate(),\n                },\n            });\n            this.screeningEventSeries = await this.masterService.searchScreeningEventSeries({\n                workPerformed: {\n                    identifiers: this.creativeWorks.map(c => c.identifier),\n                },\n                location: {\n                    branchCode: {\n                        $eq: theater.branchCode\n                    }\n                }\n            });\n            const screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: {\n                    locationBranchCodes: [theater.branchCode],\n                },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate()\n            });\n            const filterResult = screeningEvents.filter((s) => {\n                const performance = new Models.Purchase.Performance({ screeningEvent: s });\n                return !(performance.isSales('end'));\n            });\n            const now = moment((await this.utilService.getServerTime()).date).toDate();\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({\n                screeningEvents: filterResult,\n                sortType: 'startDate',\n                now\n            });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.chevre.event.screeningEvent.IEvent) {\n        if (screeningEvent.remainingAttendeeCapacity === undefined\n            || screeningEvent.remainingAttendeeCapacity === 0) {\n            return;\n        }\n        if (screeningEvent.offers === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket === undefined\n            || screeningEvent.offers.itemOffered.serviceOutput.reservedTicket.ticketedSeat === undefined) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.cinema.schedule.alert.ticketedSeat')\n            });\n            return;\n        }\n        try {\n            if (screeningEvent.workPerformed?.identifier === undefined) {\n                throw new Error('workPerformed.identifier === undefined');\n            }\n            const creativeWork = this.getCreativeWorks(screeningEvent.workPerformed?.identifier);\n            const screeningEventSeries = this.getScreeningEventSeries(screeningEvent.superEvent.id);\n            if (creativeWork === undefined\n                || screeningEventSeries === undefined) {\n                throw new Error('creativeWork or screeningEventSeries === undefined');\n            }\n            this.actionService.purchase.unsettledDelete();\n            this.actionService.purchase.selectCreativeWork(creativeWork);\n            this.actionService.purchase.selectScreeningEventSeries(screeningEventSeries);\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            const { authorizeSeatReservations } = await this.actionService.purchase.getData();\n            if (authorizeSeatReservations.length > 0) {\n                await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n            }\n            this.router.navigate(['/purchase/cinema/seat']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n    }\n\n    /**\n     * \n     */\n    public getScreeningEventSeries(id: string) {\n        return this.screeningEventSeries.find(s => s.id === id);\n    }\n\n    /**\n     * \n     */\n    public getCreativeWorks(identifier: string) {\n        return this.creativeWorks.find(c => c.identifier === identifier);\n    }\n\n    /**\n     * \n     */\n    public getVideoFormatType(code: string) {\n        return this.videoFormatTypes.find(v => v.codeValue === code);\n    }\n\n    /**\n     * \n     */\n    public getContentRatingType(code?: string) {\n        return this.contentRatingTypes.find(c => c.codeValue === code);\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.schedule.title' | translate }}\"></app-page-title>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"px-3\">\n        <div *ngFor=\"let group of screeningEventsGroup\">\n            <div class=\"container px-0\">\n                <div class=\"row align-items-stretch\">\n                    <div class=\"col-1 pb-3\">\n                        <div class=\"border-left border-dark p-3 h-100\">\n                            {{ moment(group.screeningEvent.startDate).format('HH') }}:00\n                        </div>\n                    </div>\n                    <div class=\"col-10\">\n                        <div *ngFor=\"let performance of group.data\" class=\"border border-gray py-4 px-3 mb-3\" [ngClass]=\"{ \n                                'not-event': !performance.isSales() \n                                || performance.isSeatStatus('danger') \n                                || performance.isInfinitetock()\n                                }\" (click)=\"selectSchedule(performance.screeningEvent)\">\n                            <div class=\"container px-0\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-1 text-center\">\n                                        <div class=\"status\"\n                                            *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n                                            <div *ngIf=\"performance.isSeatStatus('success')\">\n                                                <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                                            </div>\n                                            <div *ngIf=\"performance.isSeatStatus('warning')\">\n                                                <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n                                            </div>\n                                            <div *ngIf=\"performance.isSeatStatus('danger')\">\n                                                <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\">\n                                            </div>\n                                            <div *ngIf=\"performance.isSeatStatus()\">\n                                                <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n                                            </div>\n                                        </div>\n                                        <div class=\"status\" *ngIf=\"performance.isSales('end')\">\n                                            {{ 'common.performance.status.endSale' | translate }}</div>\n                                        <div class=\"status\" *ngIf=\"performance.isSales('start')\">\n                                            {{ 'common.performance.status.outsideSalesPeriod' | translate }}</div>\n                                        <div *ngIf=\"performance.isSales() && performance.isInfinitetock()\"\n                                            class=\"status\">\n                                            <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                                            <!-- <p class=\"text-small\">{{ 'common.performance.infiniteStock' | translate }}</p> -->\n                                        </div>\n                                    </div>\n                                    <div class=\"col-2\">\n                                        <span class=\"text-x-large font-weight-bold\">{{\n                                            moment(performance.screeningEvent.startDate).format('HH:mm') }}</span>\n                                        <span>-</span>\n                                        <span>{{ moment(performance.screeningEvent.endDate).format('HH:mm')\n                                            }}</span>\n                                    </div>\n                                    <div class=\"col-6\">\n                                        <p class=\"font-weight-bold text-large\">\n                                            {{ performance.screeningEvent.name | changeLanguage }}</p>\n                                        <p *ngIf=\"performance.screeningEvent.superEvent.headline \n                                                && (performance.screeningEvent.superEvent.headline | changeLanguage)\">\n                                            {{ performance.screeningEvent.superEvent.headline | changeLanguage }}\n                                        </p>\n                                        <p class=\"text-small\"\n                                            *ngIf=\"performance.screeningEvent.superEvent.description \n                                                && (performance.screeningEvent.superEvent.description | changeLanguage)\">\n                                            {{ performance.screeningEvent.superEvent.description | changeLanguage }}\n                                        </p>\n                                    </div>\n                                    <div class=\"col-2\">\n                                        <div class=\"mb-1 screen-name\">\n                                            <p *ngIf=\"performance.screeningEvent.location.address | changeLanguage\">\n                                                {{ performance.screeningEvent.location.address | changeLanguage }}\n                                            </p>\n                                            <p>\n                                                {{ performance.screeningEvent.location.name | changeLanguage }}</p>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-1\">\n                                        <p *ngIf=\"performance.screeningEvent.maximumAttendeeCapacity\"\n                                            class=\"screen-name\">\n                                            {{ 'common.seatValue' | translate: { value:\n                                            performance.screeningEvent.maximumAttendeeCapacity } }}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"mt-3\" *ngIf=\"getScreeningEventSeries(performance.screeningEvent.superEvent.id) \n                                && getCreativeWorks(performance.screeningEvent.workPerformed?.identifier);\">\n                                <div class=\"d-flex align-items-center\">\n                                    <div *ngIf=\"getContentRatingType(getCreativeWorks(performance.screeningEvent.workPerformed?.identifier)?.contentRating)\"\n                                        class=\"content-rating text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                                        getContentRatingType(getCreativeWorks(performance.screeningEvent.workPerformed?.identifier)?.contentRating)?.name\n                                        | changeLanguage }}\n                                    </div>\n                                    <div *ngIf=\"getScreeningEventSeries(performance.screeningEvent.superEvent.id)?.dubLanguage\"\n                                        class=\"dub-language text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                                        'common.dubbing' | translate }}</div>\n                                    <div *ngIf=\"getScreeningEventSeries(performance.screeningEvent.superEvent.id)?.subtitleLanguage\"\n                                        class=\"subtitle-language text-small bg-dark-gray text-white py-1 px-3 mr-2\">{{\n                                        'common.subtitles'\n                                        | translate }}</div>\n                                    <div *ngFor=\"let videoFormat of getScreeningEventSeries(performance.screeningEvent.superEvent.id)?.videoFormat\"\n                                        class=\"video-format text-small bg-dark-gray text-white py-1 px-2 mr-2\">\n                                        {{ getVideoFormatType(videoFormat.typeOf)?.name | changeLanguage }}\n                                    </div>\n                                    <div *ngIf=\"performance.screeningEvent.workPerformed?.duration && moment.duration(performance.screeningEvent.workPerformed?.duration).asMinutes() > 0\"\n                                        class=\"text-small ml-auto\">\n                                        <span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{\n                                        moment.duration(performance.screeningEvent.workPerformed?.duration).asMinutes()\n                                        }}{{\n                                        'common.date.minute' | translate }}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/cinema\">{{ 'purchase.cinema.scheduleMovie.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\" disabled>{{\n                    'purchase.cinema.scheduleMovie.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-cinema-seat',\n    templateUrl: './purchase-cinema-seat.component.html',\n    styleUrls: ['./purchase-cinema-seat.component.scss']\n})\nexport class PurchaseCinemaSeatComponent extends PurchaseSeatComponent {\n    public async prev() {\n        const { screeningEvent, searchType } = await this.actionService.purchase.getData();\n        if (screeningEvent === undefined\n            || screeningEvent.workPerformed === undefined\n            || searchType === undefined) {\n            console.error('screeningEvent.workPerformed or searchType undefined');\n            this.router.navigate(['/error']);\n            return;\n        }\n        if (searchType === 'event') {\n            this.router.navigate([`/purchase/cinema/schedule`]);\n            return;\n        }\n        this.router.navigate([`/purchase/cinema/schedule/event`]);\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"2\"></app-purchase-step>\n</app-header>\n<app-page-title *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\"\n    title=\"{{ 'purchase.cinema.seat.title' | translate }}\"></app-page-title>\n<app-page-title *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\"\n    title=\"{{ 'purchase.cinema.seat.openSeating.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <app-seat-info *ngIf=\"(purchase | async)?.screen && !((purchase | async)?.screen?.openSeatingAllowed)\">\n                </app-seat-info>\n            </div>\n            <div class=\"col-6\">\n                <div *ngIf=\"(purchase | async)?.screen && !((purchase | async)?.screen?.openSeatingAllowed)\">\n                    <app-screen *ngIf=\"(user | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" [theaterCode]=\"(user | async)?.theater.branchCode\"\n                        [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                        [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                        [reservations]=\"(purchase | async)?.reservations\"\n                        [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\"\n                        (select)=\"selectSeat($event)\">\n                    </app-screen>\n                </div>\n                <div *ngIf=\"(purchase | async)?.screen && (purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                    <div class=\"container p-3\">\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-md-3 col-12\">\n                                <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                    {{ 'purchase.cinema.seat.openSeating.seat' | translate }}\n                                </p>\n                            </div>\n                            <div class=\"col-md-9 col-12\">\n                                <select class=\"form-control\" [(ngModel)]=\"reservationCount\">\n                                    <option [value]=\"0\">0</option>\n                                    <option *ngFor=\"let value of remainingAttendeeCapacityValue({\n                screeningEventSeats: screeningEventSeats,\n                screeningEvent: (purchase | async)?.screeningEvent,\n                authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n            })\" [value]=\"value\">{{ value }}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100\">\n                <app-purchase-info [purchase]=\"purchase | async\" [isAmount]=\"false\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    (click)=\"prev()\">{{ 'purchase.cinema.seat.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\" type=\"submit\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\" [disabled]=\"(isLoading | async) \n                || (purchase | async)?.reservations.length === 0\" (click)=\"onSubmit()\">\n                    <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.next' | translate }}\n                    </ng-container>\n                    <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.consent' | translate }}\n                    </ng-container>\n                </button>\n                <button *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" type=\"submit\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\" [disabled]=\"(isLoading | async) \n                || Number(reservationCount) === 0\" (click)=\"onSubmit()\">\n                    <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.next' | translate }}\n                    </ng-container>\n                    <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.cinema.seat.consent' | translate }}\n                    </ng-container>\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-cinema-ticket',\n    templateUrl: './purchase-cinema-ticket.component.html',\n    styleUrls: ['./purchase-cinema-ticket.component.scss']\n})\nexport class PurchaseCinemaTicketComponent extends PurchaseTicketComponent {\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"3\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.ticket.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <app-movie-tickets *ngIf=\"(purchase | async)?.screeningEventTicketOffers\"\n                    [screeningEventTicketOffers]=\"(purchase | async)?.screeningEventTicketOffers\"\n                    (select)=\"openMovieTicket($event)\"></app-movie-tickets>\n            </div>\n            <div class=\"col-6 mh-100 scroll-horizontal\">\n                <div>\n                    <ul class=\"py-2 bg-white\">\n                        <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                            <div class=\"container px-3 py-2\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-2\">\n                                        <p class=\"font-weight-bold text-large\">{{ reservation.seat.seatNumber }}</p>\n                                    </div>\n                                    <div class=\"col-10\">\n                                        <div>\n                                            <button *ngIf=\"reservation.ticket === undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block border border-gray py-3\">{{ 'purchase.cinema.ticket.unselected' | translate }}</button>\n                                            <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block btn-outline-primary py-3\">\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                                    <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}\n                                                    </p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span\n                                                            *ngIf=\"priceComponent?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value } }}</span>\n                                                    </p>\n                                                </div>\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                                    <p class=\"w-50 text-left\">\n                                                        {{ addOn.priceSpecification.name | changeLanguage }}</p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ addOn.priceSpecification.price | currency : addOn.priceSpecification.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span\n                                                            *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                                    </p>\n                                                </div>\n                                                <div>\n                                                    <!-- <p *ngIf=\"reservation.ticket.ticketOffer.description\" class=\"text-small text-left\">\n                                                        {{ reservation.ticket.ticketOffer.description | changeLanguage }}\n                                                    </p> -->\n                                                    <p *ngIf=\"reservation.ticket.movieTicket\"\n                                                        class=\"text-small text-left\">\n                                                        {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }}\n                                                        {{ reservation.ticket.movieTicket.identifier }}\n                                                    </p>\n                                                </div>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info [purchase]=\"purchase | async\" [isAmount]=\"false\"></app-purchase-info>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/cinema/seat\">{{ 'purchase.cinema.ticket.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"submit\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    [disabled]=\"(isLoading | async) || !isSelectedTicket\"\n                    (click)=\"onSubmit()\">{{ 'purchase.cinema.ticket.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-cinema-top',\n    templateUrl: './purchase-cinema-top.component.html',\n    styleUrls: ['./purchase-cinema-top.component.scss']\n})\nexport class PurchaseCinemaTopComponent implements OnInit {\n    public environment = getEnvironment();\n\n    constructor(\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private router: Router,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            const { cashchanger } = await this.actionService.user.getData();\n            if (cashchanger !== undefined) {\n                await this.actionService.purchase.depositRepay({ ipAddress: cashchanger });\n            }\n            await this.actionService.purchase.cancelTransaction();\n            await this.actionService.user.checkVersion();\n            this.actionService.purchase.delete();\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public async searchMovie() {\n        this.actionService.purchase.selectSearchType({ searchType: 'movie' });\n        await this.startTransaction({ routerLink: '/purchase/cinema/schedule/movie' });\n    }\n\n    /**\n     * \n     */\n    public async searchEvent() {\n        this.actionService.purchase.selectSearchType({ searchType: 'event' });\n        await this.startTransaction({ routerLink: '/purchase/cinema/schedule' });\n    }\n\n    /**\n     * \n     */\n    public async changeDate() {\n        this.actionService.purchase.selectSearchType({ searchType: 'movie' });\n        await this.startTransaction({ routerLink: '/purchase/cinema/date' });\n    }\n\n    /**\n     * \n     */\n    public async setSeller() {\n        const { theater } = await this.actionService.user.getData();\n        const { scheduleDate } = await this.actionService.purchase.getData();\n        if (theater === undefined\n            || scheduleDate === undefined) {\n            throw new Error('theater or scheduleDate undefined');\n        }\n        const screeningEvents = await this.masterService.searchScreeningEvent({\n            superEvent: {\n                locationBranchCodes: [theater.branchCode],\n            },\n            startFrom: moment(scheduleDate).toDate(),\n            startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n        });\n        const screeningEvent = screeningEvents\n            .find(s => s.offers !== undefined && s.offers.seller !== undefined && s.offers.seller.id !== undefined);\n        if (screeningEvent === undefined\n            || screeningEvent.offers === undefined\n            || screeningEvent.offers.seller === undefined\n            || screeningEvent.offers.seller.id === undefined) {\n            throw new Error('screeningEvent.offers.seller === undefined');\n        }\n        await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n    }\n\n    /**\n     * \n     */\n    public async startTransaction(params: { routerLink: string; }) {\n        const scheduleDate = moment().format('YYYY-MM-DD');\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        try {\n            await this.setSeller();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const user = await this.actionService.user.getData();\n            await this.actionService.purchase.startTransaction({\n                seller: <factory.chevre.seller.ISeller>purchase.seller,\n                pos: user.pos\n            });\n            const { routerLink } = params;\n            this.router.navigate([routerLink]);\n        } catch (error) {\n            const errorObject = JSON.parse(error);\n            if (errorObject.status === TOO_MANY_REQUESTS) {\n                this.router.navigate(['/congestion']);\n                return;\n            }\n            if (errorObject.status === BAD_REQUEST) {\n                this.router.navigate(['/maintenance']);\n                return;\n            }\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public isDisplay(value: string) {\n        const findResult = this.environment.TOP_MENU.find(t => t === value);\n        return findResult !== undefined;\n    }\n\n    /**\n     * \n     */\n    public getImageUrl() {\n        const { storageUrl } = Functions.Util.getProject();\n        return `${storageUrl}${this.environment.TOP_IMAGE}`;\n    }\n\n}\n","<app-header [topButton]=\"false\" [languageSelect]=\"true\">\n</app-header>\n<app-page-title title=\"{{ 'purchase.cinema.top.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"h-100 d-flex align-items-center px-4\">\n        <div class=\"container px-0\">\n            <div class=\"row justify-content-center mb-5\">\n                <div *ngIf=\"isDisplay('movie')\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.cinema.top.movie.read' | translate }}</div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/cinema/top/movie.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.cinema.top.movie.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-primary py-3 mb-3\" (click)=\"searchMovie()\">\n                                {{ 'purchase.cinema.top.movie.search.today' | translate }}\n                            </button>\n                            <button type=\"button\" class=\"btn btn-block btn-primary py-3\" (click)=\"changeDate()\">\n                                {{ 'purchase.cinema.top.movie.search.other' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div *ngIf=\"isDisplay('time')\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.cinema.top.time.read' | translate }}</div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/cinema/top/time.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.cinema.top.time.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-primary py-3\" (click)=\"searchEvent()\">\n                                {{ 'purchase.cinema.top.time.search' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div *ngIf=\"isDisplay('inquiry')\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.cinema.top.inquiry.read' | translate }}\n                            </div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/cinema/top/inquiry.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.cinema.top.inquiry.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-primary rounded-pill py-3\"\n                                routerLink=\"/inquiry/input\">\n                                {{ 'purchase.cinema.top.inquiry.print' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"environment.TOP_IMAGE\" class=\"image\"><img [src]=\"getImageUrl()\" class=\"w-100\" alt=\"\"></div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-event-date',\n    templateUrl: './purchase-event-date.component.html',\n    styleUrls: ['./purchase-event-date.component.scss']\n})\nexport class PurchaseEventDateComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public moment = moment;\n    public environment = getEnvironment();\n    public scheduleDates: string[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            this.scheduleDates = [];\n            const { theater } = await this.actionService.user.getData();\n            if (theater === undefined) {\n                throw new Error('theater undefined');\n            }\n            this.scheduleDates = this.cteateScheduleDate({ theater });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    public cteateScheduleDate(params: {\n        theater: factory.chevre.place.movieTheater.IPlaceWithoutScreeningRoom;\n    }) {\n        const { theater } = params;\n        const now = moment().toDate();\n        const today = moment(moment(now).format('YYYYMMDD')).toDate();\n        if (theater.offers === undefined\n            || theater.offers.availabilityStartsGraceTime === undefined\n            || theater.offers.availabilityStartsGraceTime.value === undefined\n            || theater.offers.availabilityStartsGraceTime.unitCode !== factory.chevre.unitCode.Day) {\n            return [];\n        }\n        const limitDate = moment(today).add(theater.offers.availabilityStartsGraceTime.value * -1, 'days');\n        const limit = limitDate.diff(moment(today), 'days');\n        const result = [];\n        for (let i = 0; i < limit; i++) {\n            const date = moment(moment(today).add(i + 1, 'day')).format('YYYY-MM-DD');\n            result.push(date);\n        }\n        return result;\n    }\n\n    /**\n     * \n     */\n    public async toPurchase(scheduleDate: string) {\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        this.router.navigate(['/purchase/event/schedule']);\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.event.date.title' | translate }}\"></app-page-title>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\">\n        <div class=\"mb-4\">\n            <div class=\"container px-0\">\n                <div class=\"row\">\n                    <div class=\"col-3\" *ngFor=\"let scheduleDate of scheduleDates\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray py-5 mb-3\"\n                            (click)=\"toPurchase(scheduleDate)\">\n                            <div class=\"text-large\">{{ moment(scheduleDate, 'YYYYMMDD').format('YYYY/MM/DD') }}</div>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/event\">{{ 'purchase.event.date.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    disabled>{{ 'purchase.event.date.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\nimport {\n    PurchaseEventTicketModalComponent\n} from '../../../../../shared/components/parts/purchase/event/ticket-modal/ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-event-schedule',\n    templateUrl: './purchase-event-schedule.component.html',\n    styleUrls: ['./purchase-event-schedule.component.scss']\n})\nexport class PurchaseEventScheduleComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public master: Observable<reducers.IMasterState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup[];\n    public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent[];\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    public animations: boolean[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private modal: BsModalService\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.master = this.store.pipe(select(reducers.getMaster));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.actionService.purchase.unsettledDelete();\n        this.screeningEventsGroup = [];\n        this.videoFormatTypes = [];\n        this.animations = [];\n        try {\n            const user = await this.actionService.user.getData();\n            const purchase = await this.actionService.purchase.getData();\n            const theater = user.theater;\n            const scheduleDate = purchase.scheduleDate;\n            if (theater === undefined\n                || scheduleDate === undefined) {\n                throw new Error('scheduleDate or theater undefined');\n            }\n            this.videoFormatTypes = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.VideoFormatType\n            });\n            this.screeningEventSeries = await this.masterService.searchScreeningEventSeries({\n                workPerformed: {\n                    identifiers: [],\n                },\n                location: {\n                    branchCode: {\n                        $eq: theater.branchCode\n                    }\n                }\n            });\n            const screeningEvents = await this.masterService.searchScreeningEvent({\n                superEvent: { locationBranchCodes: [theater.branchCode] },\n                startFrom: moment(scheduleDate).toDate(),\n                startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n                screeningEventSeries: this.screeningEventSeries\n            });\n            const now = moment((await this.utilService.getServerTime()).date).toDate();\n            this.screeningEventsGroup = Functions.Purchase.screeningEvents2ScreeningEventSeries({ screeningEvents, now });\n            await this.addAnimationClass();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectSchedule(screeningEvent: factory.event.screeningEvent.IEvent) {\n        const purchase = await this.actionService.purchase.getData();\n        if (purchase.seller === undefined) {\n            this.router.navigate(['/error']);\n            return;\n        }\n        if (purchase.authorizeSeatReservations.length > 0\n            && Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) === 1) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.schedule.alert.cart')\n            });\n            return;\n        }\n        try {\n            await this.actionService.purchase.getScreeningEvent(screeningEvent);\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.getTicketList({ seller: purchase.seller });\n            await this.actionService.purchase.getScreen({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: { $eq: screeningEvent.superEvent.location.branchCode }\n                }\n            });\n            this.openTicketList();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: ''\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    private async openTicketList() {\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEvent = purchase.screeningEvent;\n        const screeningEventTicketOffers = purchase.screeningEventTicketOffers;\n        const screeningEventSeats = this.screeningEventSeats;\n        const screen = purchase.screen;\n        if (screeningEvent === undefined || screen === undefined) {\n            return;\n        }\n        const performance = new Models.Purchase.Performance({ screeningEvent });\n        if (!performance.isInfinitetock()\n            && !screen.openSeatingAllowed\n            && performance.isTicketedSeat()) {\n            // \n            this.router.navigate(['/purchase/event/seat']);\n            return;\n        }\n        if (!this.environment.PURCHASE_CART) {\n            // \n            this.router.navigate(['/purchase/event/select']);\n            return;\n        }\n        // \n        this.modal.show(PurchaseEventTicketModalComponent, {\n            class: 'modal-dialog-centered modal-xl',\n            backdrop: 'static',\n            initialState: {\n                screeningEventTicketOffers,\n                screeningEventSeats,\n                screeningEvent,\n                cb: (params: {\n                    reservations: Models.Purchase.Reservation.IReservation[];\n                    additionalTicketText?: string;\n                }) => {\n                    this.selectTicket(params);\n                }\n            }\n        });\n    }\n\n    /**\n     * \n     */\n    private async selectTicket(params: {\n        reservations: Models.Purchase.Reservation.IReservation[];\n        additionalTicketText?: string;\n    }) {\n        const reservations = params.reservations;\n        const additionalTicketText = params.additionalTicketText;\n        if (reservations.length > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.limit',\n                    { value: this.environment.PURCHASE_ITEM_MAX_LENGTH }\n                )\n            });\n            return;\n        }\n        try {\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            const { screeningEvent } = await this.actionService.purchase.getData();\n            if (screeningEvent !== undefined\n                && new Models.Purchase.Performance({ screeningEvent }).isTicketedSeat()) {\n                const remainingSeatLength = Functions.Purchase.getRemainingSeatLength({\n                    screeningEventSeats: this.screeningEventSeats,\n                    screeningEvent: screeningEvent\n                });\n                if (remainingSeatLength < reservations.length) {\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant('purchase.event.schedule.alert.getScreeningEventSeats')\n                    });\n                    return;\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: ''\n            });\n        }\n\n        try {\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats: this.screeningEventSeats\n            });\n            this.utilService.openAlert({\n                title: this.translate.instant('common.complete'),\n                body: this.translate.instant('purchase.event.schedule.success.temporaryReservation')\n            });\n            this.actionService.purchase.unsettledDelete();\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant('purchase.event.schedule.alert.temporaryReservation')}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${error}</code>\n                </div>`\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { authorizeSeatReservations } = await this.actionService.purchase.getData();\n        // \n        if (authorizeSeatReservations.length === 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('purchase.event.schedule.alert.unselected')\n            });\n            return;\n        }\n        // \n        let itemCount = 0;\n        authorizeSeatReservations.forEach(a => itemCount += a.object.acceptedOffer.length);\n        if (itemCount > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.schedule.alert.limit',\n                    { value: Number(this.environment.PURCHASE_ITEM_MAX_LENGTH) }\n                )\n            });\n            return;\n        }\n        this.router.navigate(['/purchase/payment']);\n    }\n\n    /**\n     * \n     */\n    public async addAnimationClass() {\n        this.screeningEventsGroup.forEach(() => this.animations.push(false));\n        const startTime = 300;\n        await Functions.Util.sleep(startTime);\n        for (let i = 0; i < this.animations.length; i++) {\n            const time = 300;\n            const target = this.animations.length - i - 1;\n            this.animations[target] = true;\n            await Functions.Util.sleep(time);\n        }\n    }\n\n    /**\n     * \n     */\n    public getScreeningEventSeries(id: string) {\n        return this.screeningEventSeries.find(s => s.id === id);\n    }\n\n}\n\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.event.schedule.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-9 mh-100 scroll-horizontal\">\n                <p *ngIf=\"(purchase | async)?.scheduleDate\" class=\"text-primary text-large mb-3\">\n                    {{ (purchase | async)?.scheduleDate | formatDate: 'YYYY/MM/DD (ddd)' }}\n                </p>\n                <p *ngIf=\"screeningEventsGroup.length === 0\" class=\"mb-3\">\n                    {{ 'purchase.event.schedule.notfound' | translate }}\n                </p>\n                <app-purchase-performances *ngFor=\"let group of screeningEventsGroup; let index = index\" [screeningEventsGroup]=\"group\"\n                    [screeningEventSeries]=\"getScreeningEventSeries(group.screeningEvent.superEvent.id)\"\n                    [videoFormatTypes]=\"videoFormatTypes\"\n                    [animation]=\"animations[index]\"\n                    (select)=\"selectSchedule($event)\" class=\"mb-3\">\n                </app-purchase-performances>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-cart [purchase]=\"purchase | async\" [isAmount]=\"false\" [cancel]=\"true\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                routerLink=\"/purchase/event\">{{ 'purchase.event.schedule.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"submit\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\" [disabled]=\"(isLoading | async) || (purchase | async)?.authorizeSeatReservations.length === 0\" (click)=\"onSubmit()\">\n                    <ng-container *ngIf=\"!environment.PURCHASE_TERMS\">{{ 'purchase.event.schedule.next' | translate }}\n                    </ng-container>\n                    <ng-container *ngIf=\"environment.PURCHASE_TERMS\">{{ 'purchase.event.schedule.consent' | translate }}\n                    </ng-container>\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>\n\n\n","\nimport { Component } from '@angular/core';\nimport { PurchaseSeatComponent } from '../../purchase-seat/purchase-seat.component';\n\n@Component({\n    selector: 'app-purchase-event-seat',\n    templateUrl: './purchase-event-seat.component.html',\n    styleUrls: ['./purchase-event-seat.component.scss']\n})\nexport class PurchaseEventSeatComponent extends PurchaseSeatComponent {\n    public async prev() {\n        try {\n            const authorizeSeatReservation = (await this.actionService.purchase.getData()).authorizeSeatReservation;\n            if (authorizeSeatReservation !== undefined) {\n                await this.actionService.purchase.cancelTemporaryReservations([authorizeSeatReservation]);\n            }\n            this.router.navigate(['/purchase/event/schedule']);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\"\n    title=\"{{ 'purchase.event.seat.title' | translate }}\"></app-page-title>\n<app-page-title *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\"\n    title=\"{{ 'purchase.event.seat.openSeating.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <app-seat-info *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\"></app-seat-info>\n            </div>\n            <div class=\"col-6\">\n                <div *ngIf=\"!((purchase | async)?.screen?.openSeatingAllowed)\">\n                    <app-screen *ngIf=\"(user | async)?.theater \n                && screeningEventSeats.length > 0 \n                && (purchase | async)?.screen\" [theaterCode]=\"(user | async)?.theater.branchCode\"\n                        [screenCode]=\"(purchase | async)?.screen.branchCode\" [screeningEventSeats]=\"screeningEventSeats\"\n                        [openSeatingAllowed]=\"(purchase | async)?.screen.openSeatingAllowed\"\n                        [reservations]=\"(purchase | async)?.reservations\"\n                        [authorizeSeatReservation]=\"(purchase | async)?.authorizeSeatReservation\"\n                        (select)=\"selectSeat($event)\">\n                    </app-screen>\n                </div>\n                <div *ngIf=\"(purchase | async)?.screen?.openSeatingAllowed\" class=\"mb-4\">\n                    <div class=\"container p-3\">\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-md-3 col-12\">\n                                <p class=\"mb-2 mb-md-0 font-weight-bold text-large\">\n                                    {{ 'purchase.event.seat.openSeating.seat' | translate }}\n                                </p>\n                            </div>\n                            <div class=\"col-md-9 col-12\">\n                                <select class=\"form-control\" [(ngModel)]=\"reservationCount\">\n                                    <option [value]=\"0\">0</option>\n                                    <option *ngFor=\"let value of remainingAttendeeCapacityValue({\n                screeningEventSeats: screeningEventSeats,\n                screeningEvent: (purchase | async)?.screeningEvent,\n                authorizeSeatReservations: (purchase | async)?.authorizeSeatReservations\n            })\" [value]=\"value\">{{ value }}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\" [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\" [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    (click)=\"prev()\">{{ 'purchase.event.seat.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button *ngIf=\"!environment.PURCHASE_TERMS\" type=\"submit\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    [disabled]=\"(isLoading | async) || (purchase | async)?.reservations.length === 0\"\n                    (click)=\"onSubmit()\">{{ 'purchase.event.seat.next' | translate }}</button>\n                <button *ngIf=\"environment.PURCHASE_TERMS\" type=\"submit\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    [disabled]=\"(isLoading | async) || (purchase | async)?.reservations.length === 0\"\n                    (click)=\"onSubmit()\">{{ 'purchase.event.seat.consent' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../../services';\nimport * as reducers from '../../../../../../store/reducers';\n\ntype IMovieTicketTypeChargeSpecification =\n    factory.chevre.priceSpecification.IPriceSpecification<factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification>;\n\n@Component({\n    selector: 'app-purchase-event-select',\n    templateUrl: './purchase-event-select.component.html',\n    styleUrls: ['./purchase-event-select.component.scss']\n})\nexport class PurchaseEventSelectComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public error: Observable<string | null>;\n    public isLoading: Observable<boolean>;\n    public moment = moment;\n    public environment = getEnvironment();\n    public screeningEventTicketOffers: factory.chevre.event.screeningEvent.ITicketOffer[];\n    public screeningEvent: factory.event.screeningEvent.IEvent;\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public tickets: factory.chevre.event.screeningEvent.ITicketOffer[];\n    public selectedTickets: {\n        id: string;\n        count: number;\n        addOn: { id: string; }[];\n    }[];\n    public getRemainingSeatLength = Functions.Purchase.getRemainingSeatLength;\n    public performance: Models.Purchase.Performance;\n    public additionalTicketText: string;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService,\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.tickets = [];\n        this.screeningEventSeats = [];\n        try {\n            const {\n                screeningEvent,\n                screeningEventTicketOffers,\n                authorizeSeatReservations\n            } = await this.actionService.purchase.getData();\n            if (authorizeSeatReservations.length > 0) {\n                await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n            }\n            if (screeningEvent === undefined) {\n                throw new Error('screeningEvent or screeningEventTicketOffers undefined');\n            }\n            this.screeningEvent = screeningEvent;\n            this.screeningEventTicketOffers = screeningEventTicketOffers;\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            this.performance = new Models.Purchase.Performance({ screeningEvent });\n            this.tickets = screeningEventTicketOffers.filter((ticketOffer) => {\n                const movieTicketTypeChargeSpecification =\n                    <IMovieTicketTypeChargeSpecification>ticketOffer.priceSpecification.priceComponent.find(\n                        (c) => c.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification\n                    );\n                return movieTicketTypeChargeSpecification === undefined;\n            });\n            const selectedTickets: {\n                id: string;\n                count: number;\n                addOn: { id: string; }[];\n            }[] = [];\n            this.tickets.forEach((ticket) => {\n                if (ticket.id === undefined) {\n                    return;\n                }\n                selectedTickets.push({ id: ticket.id, count: 0, addOn: [] });\n            });\n            this.selectedTickets = selectedTickets;\n            this.additionalTicketText = '';\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityValue(screeningEventTicketOffer: factory.chevre.event.screeningEvent.ITicketOffer) {\n        const values = [];\n        const screeningEvent = this.screeningEvent;\n        const screeningEventSeats = this.screeningEventSeats;\n        let limit = Number(this.environment.PURCHASE_ITEM_MAX_LENGTH);\n        if (screeningEvent.offers !== undefined\n            && screeningEvent.offers.eligibleQuantity.maxValue !== undefined\n            && limit > screeningEvent.offers.eligibleQuantity.maxValue) {\n            limit = screeningEvent.offers.eligibleQuantity.maxValue;\n        }\n        if (screeningEvent.remainingAttendeeCapacity !== undefined\n            && limit > screeningEvent.remainingAttendeeCapacity) {\n            limit = screeningEvent.remainingAttendeeCapacity;\n        }\n        if (new Models.Purchase.Performance({ screeningEvent }).isTicketedSeat()) {\n            // \n            const screeningEventLimit = Functions.Purchase.getRemainingSeatLength({\n                screeningEvent,\n                screeningEventSeats\n            });\n            if (limit > screeningEventLimit) {\n                limit = screeningEventLimit;\n            }\n            // \n            if (screeningEvent.aggregateOffer !== undefined\n                && screeningEvent.aggregateOffer.offers !== undefined) {\n                const findResult =\n                    screeningEvent.aggregateOffer.offers.find(o => o.id === screeningEventTicketOffer.id);\n                if (findResult !== undefined\n                    && findResult.remainingAttendeeCapacity !== undefined\n                    && limit > findResult.remainingAttendeeCapacity) {\n                    limit = findResult.remainingAttendeeCapacity;\n                }\n            }\n        }\n        for (let i = 0; i < limit; i++) {\n            values.push(i + 1);\n        }\n        return values;\n    }\n\n    /**\n     * \n     */\n    public createReservations() {\n        const reservations: Models.Purchase.Reservation.IReservation[] = [];\n        this.selectedTickets.forEach((t) => {\n            const count = t.count;\n            for (let i = 0; i < count; i++) {\n                const findResult = this.screeningEventTicketOffers.find(s => s.id === t.id);\n                const addOn: factory.chevre.offer.IOffer[] = [];\n                if (findResult === undefined) {\n                    break;\n                }\n                t.addOn.forEach(a => {\n                    if (findResult.addOn === undefined) {\n                        return;\n                    }\n                    const findAddOnResult = findResult.addOn.find(a2 => a2.id === a.id);\n                    if (findAddOnResult === undefined) {\n                        return;\n                    }\n                    addOn.push(findAddOnResult);\n                });\n\n                reservations.push({\n                    ticket: { ticketOffer: findResult, addOn }\n                });\n            }\n        });\n\n        return reservations;\n    }\n\n    /**\n     * \n     */\n    public getSelectTicket(id: string) {\n        const findResult = <{\n            id: string;\n            count: number;\n            addOn: {\n                id: string;\n            }[];\n        }>this.selectedTickets.find(s => s.id === id);\n        return findResult;\n    }\n\n    /**\n     * \n     */\n    public changeAddOn(id: string, addOnId: string) {\n        const findResult = this.selectedTickets.find(s => s.id === id);\n        if (findResult === undefined) {\n            return;\n        }\n        const findAddOnResult = findResult.addOn.find(a => a.id === addOnId);\n        if (findAddOnResult === undefined) {\n            findResult.addOn.push({ id: addOnId });\n            return;\n        }\n        findResult.addOn = findResult.addOn.filter(a => a.id !== addOnId);\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const reservations = this.createReservations();\n        const additionalTicketText = this.additionalTicketText;\n        // \n        if (reservations.length > Number(this.environment.PURCHASE_ITEM_MAX_LENGTH)) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(\n                    'purchase.event.select.alert.limit',\n                    { value: this.environment.PURCHASE_ITEM_MAX_LENGTH }\n                )\n            });\n            return;\n        }\n        try {\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            const { screeningEvent } = await this.actionService.purchase.getData();\n            if (screeningEvent !== undefined\n                && new Models.Purchase.Performance({ screeningEvent }).isTicketedSeat()) {\n                const remainingSeatLength = Functions.Purchase.getRemainingSeatLength({\n                    screeningEventSeats: this.screeningEventSeats,\n                    screeningEvent\n                });\n                if (remainingSeatLength < reservations.length) {\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant('purchase.event.select.alert.getScreeningEventSeats')\n                    });\n                    return;\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n\n        try {\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats: this.screeningEventSeats\n            });\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant('purchase.event.select.alert.temporaryReservation')}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${error}</code>\n                </div>`\n            });\n            return;\n        }\n        this.router.navigate(['/purchase/payment']);\n    }\n\n    /**\n     * \n     */\n    public async prev() {\n        const { authorizeSeatReservations } = await this.actionService.purchase.getData();\n        if (authorizeSeatReservations.length > 0) {\n            await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n        }\n        this.router.navigate(['/purchase/event/schedule']);\n    }\n\n}\n\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.event.select.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n\n            </div>\n            <div class=\"col-6 mh-100 scroll-horizontal\">\n                <ul *ngIf=\"tickets.length > 0\" class=\"mb-4\">\n                    <li *ngFor=\"let ticket of tickets; let index = index;\"\n                        class=\"ticket mb-3 pb-3 border-bottom border-gray\"\n                        [class.text-danger]=\"remainingAttendeeCapacityValue(ticket).length === 0\">\n                        <div class=\"container px-0\">\n                            <div class=\"row justify-content-between align-items-center\">\n                                <div class=\"col-8 text-left\">\n                                    <p *ngFor=\"let priceComponent of ticket.priceSpecification.priceComponent\">\n                                        <span>{{ priceComponent.name | changeLanguage }}</span>\n                                        <!--\n                                    --><span>&nbsp;/&nbsp;{{ priceComponent.price | currency :\n                                            priceComponent.priceCurrency }}</span>\n                                        <!--\n                                    --><span *ngIf=\"priceComponent?.referenceQuantity?.value\">{{\n                                            'common.referenceQuantityValue' | translate: { value:\n                                            priceComponent?.referenceQuantity?.value } }}</span>\n                                    </p>\n                                    <p *ngIf=\"ticket.description\" class=\"text-x-small text-left\">\n                                        {{ ticket.description | changeLanguage }}</p>\n                                </div>\n                                <div class=\"col-4 text-right\">\n                                    <app-quantity-input class=\"pl-3\" [(value)]=\"selectedTickets[index].count\"\n                                        [maxValue]=\"remainingAttendeeCapacityValue(ticket).length\"></app-quantity-input>\n                                </div>\n                            </div>\n                        </div>\n                        <ul *ngIf=\"ticket.addOn && ticket.addOn.length > 0\" class=\"mt-2 bg-light-gray py-2 px-3\">\n                            <li class=\"my-1\" *ngFor=\"let addOn of ticket.addOn; let index = index\">\n                                <app-checkbox class=\"pointer\" (change)=\"changeAddOn(ticket.id, addOn.id)\">\n                                    {{ addOn.priceSpecification?.name | changeLanguage }}\n                                    <!--\n                                    -->&nbsp;/&nbsp;\n                                    <!--\n                                    -->{{ addOn.priceSpecification?.price | currency :\n                                    addOn.priceSpecification?.priceCurrency }}<span\n                                        *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{\n                                        'common.referenceQuantityValue' | translate: { value:\n                                        addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                </app-checkbox>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n                <p *ngIf=\"tickets.length === 0\" class=\"mb-4\">{{ 'purchase.event.select.notfound' | translate }}</p>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-cart [purchase]=\"purchase | async\" [isAmount]=\"false\" [cancel]=\"false\">\n                </app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    (click)=\"prev()\">{{ 'purchase.event.select.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"submit\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    [disabled]=\"(isLoading | async) || (selectedTickets && createReservations().length === 0)\"\n                    (click)=\"onSubmit()\">\n                    {{ 'purchase.event.select.next' | translate }}\n                </button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component } from '@angular/core';\nimport { PurchaseTicketComponent } from '../../purchase-ticket/purchase-ticket.component';\n\n@Component({\n    selector: 'app-purchase-event-ticket',\n    templateUrl: './purchase-event-ticket.component.html',\n    styleUrls: ['./purchase-event-ticket.component.scss']\n})\nexport class PurchaseEventTicketComponent extends PurchaseTicketComponent {\n}\n","<app-header>\n    <app-purchase-step [currentStep]=\"1\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.event.ticket.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <app-movie-tickets *ngIf=\"(purchase | async)?.screeningEventTicketOffers\"\n                    [screeningEventTicketOffers]=\"(purchase | async)?.screeningEventTicketOffers\"\n                    (select)=\"openMovieTicket($event)\"></app-movie-tickets>\n            </div>\n            <div class=\"col-6 mh-100 scroll-horizontal\">\n                <div>\n                    <ul class=\"py-2 bg-white\">\n                        <li *ngFor=\"let reservation of (purchase | async)?.reservations\">\n                            <div class=\"container px-3 py-2\">\n                                <div class=\"row align-items-center\">\n                                    <div class=\"col-2\">\n                                        <p class=\"font-weight-bold text-large\">{{ reservation.seat.seatNumber }}</p>\n                                    </div>\n                                    <div class=\"col-10\">\n                                        <div>\n                                            <button *ngIf=\"reservation.ticket === undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block border border-gray py-3\">{{ 'purchase.event.ticket.unselected' | translate }}</button>\n                                            <button *ngIf=\"reservation.ticket !== undefined\" type=\"button\"\n                                                (click)=\"openTicketList(reservation)\"\n                                                class=\"btn btn-block btn-outline-primary py-3\">\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let priceComponent of reservation.ticket?.ticketOffer.priceSpecification.priceComponent\">\n                                                    <p class=\"w-50 text-left\">{{ priceComponent.name | changeLanguage }}\n                                                    </p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span\n                                                            *ngIf=\"priceComponent?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value } }}</span>\n                                                    </p>\n                                                </div>\n                                                <div class=\"d-flex justify-content-between align-items-center\"\n                                                    *ngFor=\"let addOn of reservation.ticket?.addOn;\">\n                                                    <p class=\"w-50 text-left\">\n                                                        {{ addOn.priceSpecification.name | changeLanguage }}</p>\n                                                    <p class=\"w-50 text-right\">\n                                                        <span>{{ addOn.priceSpecification.price | currency : addOn.priceSpecification.priceCurrency }}</span>\n                                                        <!--\n                                                        --><span\n                                                            *ngIf=\"addOn.priceSpecification?.referenceQuantity?.value\">{{ 'common.referenceQuantityValue' | translate: { value: addOn.priceSpecification?.referenceQuantity?.value } }}</span>\n                                                    </p>\n                                                </div>\n                                                <div>\n                                                    <!-- <p *ngIf=\"reservation.ticket.ticketOffer.description\" class=\"text-small text-left\">\n                                                        {{ reservation.ticket.ticketOffer.description | changeLanguage }}\n                                                    </p> -->\n                                                    <p *ngIf=\"reservation.ticket.movieTicket\"\n                                                        class=\"text-small text-left\">\n                                                        {{ 'modal.purchase.seatTicket.movieTicket.code' | translate }}\n                                                        {{ reservation.ticket.movieTicket.identifier }}\n                                                    </p>\n                                                </div>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\" [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\" [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    routerLink=\"/purchase/event/seat\">{{ 'purchase.event.ticket.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button type=\"submit\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    [disabled]=\"(isLoading | async) || !isSelectedTicket\"\n                    (click)=\"onSubmit()\">{{ 'purchase.event.ticket.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { BAD_REQUEST, TOO_MANY_REQUESTS } from 'http-status';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../../..';\nimport { getEnvironment } from '../../../../../../../environments/environment';\nimport { ActionService, MasterService } from '../../../../../../services';\n\n@Component({\n    selector: 'app-purchase-event-top',\n    templateUrl: './purchase-event-top.component.html',\n    styleUrls: ['./purchase-event-top.component.scss']\n})\nexport class PurchaseEventTopComponent implements OnInit {\n    public environment = getEnvironment();\n\n    constructor(\n        private masterService: MasterService,\n        private actionService: ActionService,\n        private router: Router,\n    ) { }\n\n    /**\n     * \n     */\n    public async ngOnInit() {\n        try {\n            const { cashchanger } = await this.actionService.user.getData();\n            if (cashchanger !== undefined) {\n                await this.actionService.purchase.depositRepay({ ipAddress: cashchanger });\n            }\n            await this.actionService.purchase.cancelTransaction();\n            await this.actionService.user.checkVersion();\n            this.actionService.purchase.delete();\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    public async toPurchase() {\n        await this.startTransaction({ routerLink: '/purchase/event/schedule' });\n    }\n\n    /**\n     * \n     */\n    public async changeDate() {\n        await this.startTransaction({ routerLink: '/purchase/event/date' });\n    }\n\n    /**\n     * \n     */\n    public async setSeller() {\n        const { theater } = await this.actionService.user.getData();\n        const { scheduleDate } = await this.actionService.purchase.getData();\n        if (theater === undefined\n            || scheduleDate === undefined) {\n            throw new Error('theater or scheduleDate undefined');\n        }\n        const screeningEvents = await this.masterService.searchScreeningEvent({\n            superEvent: {\n                locationBranchCodes: [theater.branchCode],\n            },\n            startFrom: moment(scheduleDate).toDate(),\n            startThrough: moment(scheduleDate).add(1, 'day').add(-1, 'millisecond').toDate(),\n        });\n        const screeningEvent = screeningEvents\n            .find(s => s.offers !== undefined && s.offers.seller !== undefined && s.offers.seller.id !== undefined);\n        if (screeningEvent === undefined\n            || screeningEvent.offers === undefined\n            || screeningEvent.offers.seller === undefined\n            || screeningEvent.offers.seller.id === undefined) {\n            throw new Error('screeningEvent.offers.seller === undefined');\n        }\n        await this.actionService.purchase.getSeller(screeningEvent.offers.seller.id);\n    }\n\n    /**\n     * \n     */\n    public async startTransaction(params: { routerLink: string; }) {\n        const scheduleDate = moment().format('YYYY-MM-DD');\n        this.actionService.purchase.selectScheduleDate(scheduleDate);\n        try {\n            await this.setSeller();\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n            return;\n        }\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const user = await this.actionService.user.getData();\n            await this.actionService.purchase.startTransaction({\n                seller: <factory.chevre.seller.ISeller>purchase.seller,\n                pos: user.pos\n            });\n            const { routerLink } = params;\n            this.router.navigate([routerLink]);\n        } catch (error) {\n            const errorObject = JSON.parse(error);\n            if (errorObject.status === TOO_MANY_REQUESTS) {\n                this.router.navigate(['/congestion']);\n                return;\n            }\n            if (errorObject.status === BAD_REQUEST) {\n                this.router.navigate(['/maintenance']);\n                return;\n            }\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public isDisplay(value: string) {\n        const findResult = this.environment.TOP_MENU.find(t => t === value);\n        return findResult !== undefined;\n    }\n\n    /**\n     * \n     */\n    public getImageUrl() {\n        const { storageUrl } = Functions.Util.getProject();\n        return `${storageUrl}${this.environment.TOP_IMAGE}`;\n    }\n\n}\n","<app-header [topButton]=\"false\" [languageSelect]=\"true\">\n</app-header>\n<app-page-title title=\"{{ 'purchase.event.top.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"h-100 d-flex align-items-center px-4\">\n        <div class=\"container px-0\">\n            <div class=\"row justify-content-center mb-5\">\n                <div class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.event.top.purchase.read' | translate }}</div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/event/top/time.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.event.top.purchase.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-primary py-3 mb-3\" (click)=\"toPurchase()\">\n                                {{ 'purchase.event.top.purchase.search.today' | translate }}\n                            </button>\n                            <button type=\"button\" class=\"btn btn-block btn-primary py-3\" (click)=\"changeDate()\">\n                                {{ 'purchase.event.top.purchase.search.other' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div *ngIf=\"isDisplay('inquiry')\" class=\"col-4\">\n                    <div class=\"bg-light-gray p-4 h-100\">\n                        <div class=\"text-center mb-3\">\n                            <div class=\"font-weight-bold mb-3\">{{ 'purchase.event.top.inquiry.read' | translate }}\n                            </div>\n                            <div class=\"mb-3\">\n                                <img height=\"80\" src=\"/default/images/purchase/event/top/inquiry.svg\" alt=\"\">\n                            </div>\n                            <div class=\"font-weight-bold\">{{ 'purchase.event.top.inquiry.title' | translate }}</div>\n                        </div>\n                        <div>\n                            <button type=\"button\" class=\"btn btn-block btn-primary rounded-pill py-3\"\n                                routerLink=\"/inquiry/input\">\n                                {{ 'purchase.event.top.inquiry.print' | translate }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"environment.TOP_IMAGE\" class=\"image\"><img [src]=\"getImageUrl()\" class=\"w-100\" alt=\"\"></div>\n</div>","import { AfterViewChecked, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-base',\n    templateUrl: './purchase-base.component.html',\n    styleUrls: ['./purchase-base.component.scss']\n})\nexport class PurchaseBaseComponent implements OnInit, AfterViewChecked, OnDestroy {\n    public isLoading: Observable<boolean>;\n    public process: Observable<string>;\n    public purchase: Observable<reducers.IPurchaseState>;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private changeDetectorRef: ChangeDetectorRef\n    ) { }\n\n    public ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.process = this.store.pipe(select(reducers.getProcess));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n    }\n\n    public ngAfterViewChecked() {\n        this.changeDetectorRef.detectChanges();\n    }\n\n    public ngOnDestroy() {\n        this.isLoading.subscribe().unsubscribe();\n        this.process.subscribe().unsubscribe();\n        this.purchase.subscribe().unsubscribe();\n    }\n\n}\n","<router-outlet></router-outlet>\n\n<app-loading [isLoading]=\"isLoading | async\" [process]=\"process | async\"></app-loading>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-complete',\n    templateUrl: './purchase-complete.component.html',\n    styleUrls: ['./purchase-complete.component.scss']\n})\nexport class PurchaseCompleteComponent implements OnInit, OnDestroy {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public error: Observable<string | null>;\n    public moment = moment;\n    public eventOrders: Functions.Purchase.IEventOrder[];\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public qrcode?: string;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public connectionType = Models.Util.Printer.ConnectionType;\n    public createOrderLink = Functions.Order.createOrderLink;\n    private timer: any;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    public async ngOnInit() {\n        this.eventOrders = [];\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.error = this.store.pipe(select(reducers.getError));\n        let order: factory.order.IOrder;\n        try {\n            const purchaseData = await this.actionService.purchase.getData();\n            if (purchaseData.order === undefined) {\n                throw new Error('order not found');\n            }\n            order = purchaseData.order;\n            this.eventOrders = Functions.Purchase.order2EventOrders({ order });\n            await this.print();\n        } catch (error) {\n            this.router.navigate(['/stop']);\n            return;\n        }\n        if (this.environment.PRINT_SUCCESS_WAIT_TIME === '') {\n            return;\n        }\n        const time = Number(this.environment.PRINT_SUCCESS_WAIT_TIME);\n        this.timer = setTimeout(() => {\n            this.router.navigate(['/']);\n        }, time);\n    }\n\n    /**\n     * \n     */\n    public ngOnDestroy() {\n        if (this.timer !== undefined) {\n            clearTimeout(this.timer);\n        }\n    }\n\n\n    /**\n     * \n     */\n    public async print() {\n        const purchase = await this.actionService.purchase.getData();\n        const user = await this.actionService.user.getData();\n        if (purchase.order === undefined\n            || user.printer === undefined) {\n            throw new Error('printer undefined');\n        }\n        const orders = [purchase.order];\n        const pos = user.pos;\n        const printer = user.printer;\n        await this.actionService.order.print({ orders, pos, printer });\n    }\n\n}\n","<app-header>\n    <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [currentStep]=\"5\"></app-purchase-step>\n    <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [currentStep]=\"3\"></app-purchase-step>\n</app-header>\n<app-page-title title=\"{{ 'purchase.complete.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n            </div>\n            <div class=\"col-6\">\n                <app-print-result *ngIf=\"(purchase | async)?.order\" [order]=\"(purchase | async)?.order\"></app-print-result>\n            </div>\n            <div class=\"col-3 mh-100\">\n                \n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                    disabled>{{ 'purchase.complete.prev' | translate }}</button>\n            </div>\n            <div class=\"col-3\">\n                <button *ngIf=\"environment.INQUIRY_PRINT\" type=\"button\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                    routerLink=\"/\">{{ 'purchase.complete.next' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, EpsonEPOSService, PaymentService, UtilService, } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-payment-reception',\n    templateUrl: './purchase-payment-reception.component.html',\n    styleUrls: ['./purchase-payment-reception.component.scss']\n})\nexport class PurchasePaymentReceptionComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public viewType = Models.Util.ViewType;\n    public amount: number;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private epsonEPOSService: EpsonEPOSService,\n        private paymentService: PaymentService,\n    ) { }\n\n    public async ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        try {\n            this.utilService.loadStart({ process: 'load' });\n            const purchase = await this.actionService.purchase.getData();\n            this.amount = Functions.Purchase.getAmount(purchase.authorizeSeatReservations);\n            if (this.amount === 0) {\n                await this.onSubmit();\n                this.utilService.loadEnd();\n                return;\n            }\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.Cash) {\n                // \n                await this.cash();\n                this.utilService.loadEnd();\n            } else if (purchase.paymentMethod?.typeOf === this.paymentMethodType.CreditCard) {\n                // \n                this.utilService.loadEnd();\n                await this.creditcard();\n            } else if (purchase.paymentMethod?.typeOf === this.paymentMethodType.EMoney) {\n                // \n                this.utilService.loadEnd();\n                await this.eMoney();\n            } else if (purchase.paymentMethod?.typeOf === 'Code') {\n                // \n                this.utilService.loadEnd();\n                await this.code();\n            } else {\n                throw new Error('paymentMethod not supported');\n            }\n        } catch (error) {\n            console.error(error);\n            this.utilService.loadEnd();\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public getDeposit() {\n        const deposit = this.epsonEPOSService.cashchanger.getDeposit().amount;\n        return deposit;\n    }\n\n    /**\n     * \n     */\n    private async cash() {\n        const { cashchanger } = await this.actionService.user.getData();\n        if (cashchanger === undefined) {\n            throw new Error('cashchanger undefined');\n        }\n        await this.epsonEPOSService.cashchanger.init({\n            ipAddress: cashchanger\n        });\n        await this.epsonEPOSService.cashchanger.beginDeposit();\n    }\n\n    /**\n     * \n     */\n    private async creditcard() {\n        const { transaction } = await this.actionService.purchase.getData();\n        const { payment } = await this.actionService.user.getData();\n        if (transaction === undefined\n            || payment === undefined) {\n            throw new Error('transaction or payment undefined');\n        }\n        const modal = this.utilService.openStaticModal({\n            title: '', // this.translate.instant('purchase.paymentReception.creditcard.title'),\n            body: '<img class=\"w-100\" src=\"/default/images/purchase/payment/reception/creditcard.svg\" alt=\"\">'\n        });\n        const orderId = moment().format('YYYYMMDDHHmmsss');\n        this.actionService.purchase.setOrderId({ id: orderId });\n        await this.paymentService.init({ ipAddress: payment });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.CREDITCARD.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: orderId,\n                AMOUNT: String(this.amount),\n                // MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            },\n            timeout: this.getPaymentTimeout({ transaction })\n        });\n        if (execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL\n            || execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL) {\n            modal.hide();\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (execResult.FUNC_STATUS !== Models.Purchase.Payment.FUNC_STATUS.SUCCESS) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.CREDITCARD.INTERRUPTION,\n            });\n            modal.hide();\n            throw new Error(JSON.stringify(execResult));\n        }\n        modal.hide();\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    private async eMoney() {\n        const { transaction } = await this.actionService.purchase.getData();\n        const { payment } = await this.actionService.user.getData();\n        if (transaction === undefined\n            || payment === undefined) {\n            throw new Error('transaction or payment undefined');\n        }\n        const modal = this.utilService.openStaticModal({\n            title: '', // this.translate.instant('purchase.paymentReception.eMoney.title'),\n            body: '<img class=\"w-100\" src=\"/default/images/purchase/payment/reception/eMoney.svg\" alt=\"\">'\n        });\n        const orderId = moment().format('YYYYMMDDHHmmsss');\n        this.actionService.purchase.setOrderId({ id: orderId });\n        await this.paymentService.init({ ipAddress: payment });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.EMONEY.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: orderId,\n                AMOUNT: String(this.amount),\n                // MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            },\n            timeout: this.getPaymentTimeout({ transaction })\n        });\n        if (execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL\n            || execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL) {\n            modal.hide();\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (execResult.FUNC_STATUS !== Models.Purchase.Payment.FUNC_STATUS.SUCCESS) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.EMONEY.INTERRUPTION,\n            });\n            modal.hide();\n            throw new Error(JSON.stringify(execResult));\n        }\n        modal.hide();\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    private async code() {\n        const { transaction } = await this.actionService.purchase.getData();\n        const { payment } = await this.actionService.user.getData();\n        if (transaction === undefined\n            || payment === undefined) {\n            throw new Error('transaction or payment undefined');\n        }\n        const modal = this.utilService.openStaticModal({\n            title: '', // this.translate.instant('purchase.paymentReception.eMoney.title'),\n            body: '<img class=\"w-100\" src=\"/default/images/purchase/payment/reception/eMoney.svg\" alt=\"\">'\n        });\n        const orderId = moment().format('YYYYMMDDHHmmsss');\n        this.actionService.purchase.setOrderId({ id: orderId });\n        await this.paymentService.init({ ipAddress: payment });\n        const execResult = await this.paymentService.exec({\n            func: Models.Purchase.Payment.FUNC_CODE.CODE.SETTLEMENT,\n            options: {\n                JOB: Models.Purchase.Payment.JOB.CAPTURE,\n                ORDERID: orderId,\n                AMOUNT: String(this.amount),\n                MACHINE_CODE: '',\n                // TRANID: '',\n                // CANTRANID: ''\n            },\n            timeout: this.getPaymentTimeout({ transaction })\n        });\n        if (execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.APP_CANCEL\n            || execResult.FUNC_STATUS === Models.Purchase.Payment.FUNC_STATUS.MACHINE_CANCEL) {\n            modal.hide();\n            this.router.navigate(['/purchase/payment']);\n            return;\n        }\n        if (execResult.FUNC_STATUS !== Models.Purchase.Payment.FUNC_STATUS.SUCCESS) {\n            await this.paymentService.exec({\n                func: Models.Purchase.Payment.FUNC_CODE.CODE.INTERRUPTION,\n            });\n            modal.hide();\n            throw new Error(JSON.stringify(execResult));\n        }\n        modal.hide();\n        this.onSubmit();\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            const user = await this.actionService.user.getData();\n            const profile = user.customerContact;\n            const seller = purchase.seller;\n            if (profile === undefined\n                || seller === undefined) {\n                throw new Error('profile or seller undefined');\n            }\n            if (purchase.pendingMovieTickets.length > 0) {\n                await this.actionService.purchase.authorizeMovieTicket({ seller });\n            }\n            if (purchase.paymentMethod !== undefined) {\n                const deposit = this.getDeposit();\n                const additionalProperty: { name: string; value: string; }[] = [];\n                if (purchase.paymentMethod.typeOf === factory.chevre.paymentMethodType.Cash\n                    && deposit !== undefined) {\n                    // \n                    additionalProperty.push({ name: 'depositAmount', value: String(deposit) });\n                    additionalProperty.push({ name: 'change', value: String(deposit - this.amount) });\n                }\n                if (purchase.orderId !== undefined) {\n                    additionalProperty.push({ name: 'orderId', value: purchase.orderId });\n                }\n                await this.actionService.purchase.authorizeAnyPayment({ amount: this.amount, additionalProperty });\n            }\n            await this.actionService.purchase.registerContact(profile);\n            await this.actionService.purchase.endTransaction({ seller, language: user.language });\n            this.utilService.loadStart({ process: 'load' });\n            if (purchase.paymentMethod?.typeOf === this.paymentMethodType.Cash) {\n                // \n                const deposit = this.getDeposit();\n                await this.epsonEPOSService.cashchanger.endDeposit();\n                if ((deposit - this.amount) > 0) {\n                    await this.epsonEPOSService.cashchanger.dispenseChange({ amount: (deposit - this.amount) });\n                }\n                await this.epsonEPOSService.cashchanger.disconnect();\n            }\n            this.router.navigate(['/purchase/complete']);\n            this.utilService.loadEnd();\n        } catch (error) {\n            this.utilService.loadStart({ process: 'load' });\n            await this.epsonEPOSService.cashchanger.endDepositRepay();\n            await this.epsonEPOSService.cashchanger.disconnect();\n            this.utilService.loadEnd();\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async prev() {\n        try {\n            const { cashchanger } = await this.actionService.user.getData();\n            if (cashchanger !== undefined) {\n                await this.actionService.purchase.depositRepay({ ipAddress: cashchanger });\n            }\n            this.router.navigate(['/purchase/payment']);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    /**\n     * \n     */\n    private getPaymentTimeout(params: {\n        transaction: factory.transaction.placeOrder.ITransaction;\n    }) {\n        const expires = params.transaction.expires;\n        const now = moment();\n        const paymentTimeout = Number(this.environment.PAYMENT_TIMEOUT);\n        const diff = moment(expires).diff(now, 'milliseconds');\n        return (diff < paymentTimeout) ? diff : paymentTimeout;\n    }\n}\n","<app-header>\n    <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [currentStep]=\"4\"></app-purchase-step>\n    <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [currentStep]=\"2\"></app-purchase-step>\n</app-header>\n<app-page-title *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\"\n    title=\"{{ 'purchase.paymentReception.cash.title' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n                <img *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\" class=\"w-100 p-3 border border-gray\"\n                    src=\"/default/images/purchase/payment/reception/cash.svg\">\n            </div>\n            <div class=\"col-6\">\n                <ng-container *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\">\n                    <div class=\"bg-white px-3 mb-4\">\n                        <div class=\"overflow-hidden\">\n                            <div class=\"p-3 row align-items-center bg-light-gray\">\n                                <p class=\"col-4 text-large\">\n                                    {{ 'purchase.paymentReception.cash.insufficient' | translate }}</p>\n                                <p class=\"col-8 text-x-large text-right font-weight-bold\">\n                                    <span\n                                        *ngIf=\"(amount - getDeposit()) > 0\">{{ (amount - getDeposit()) | currency : 'JPY' }}</span>\n                                    <span *ngIf=\"!((amount - getDeposit()) > 0)\">{{ 0 | currency : 'JPY' }}</span>\n                                </p>\n                            </div>\n                            <div class=\"p-3 row align-items-center border-bottom border-gray\">\n                                <p class=\"col-4 text-large\">\n                                    {{ 'purchase.paymentReception.cash.deposit' | translate }}</p>\n                                <p class=\"col-8 text-x-large text-right font-weight-bold\">\n                                    {{ getDeposit() | currency : 'JPY' }}</p>\n                            </div>\n                            <div class=\"p-3 row align-items-center\">\n                                <p class=\"col-4 text-large\">\n                                    {{ 'purchase.paymentReception.cash.change' | translate }}</p>\n                                <p class=\"col-8 text-x-large text-right font-weight-bold\">\n                                    <span\n                                        *ngIf=\"(getDeposit() - amount) > 0\">{{ (getDeposit() - amount) | currency : 'JPY' }}</span>\n                                    <span *ngIf=\"!((getDeposit() - amount) > 0)\">{{ 0 | currency : 'JPY' }}</span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </ng-container>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\" [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\" [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n\n\n\n\n\n\n\n\n\n    <ng-container *ngIf=\"(purchase | async)?.paymentMethod?.typeOf === paymentMethodType.Cash\">\n        <div class=\"container h-100\">\n            <div class=\"row align-items-center justify-content-center h-100\">\n                <div class=\"col-3\">\n                    <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                        (click)=\"prev()\">{{ 'purchase.paymentReception.cash.prev' | translate }}</button>\n                </div>\n                <div class=\"col-3\">\n                    <button type=\"submit\" class=\"text-large btn btn-primary btn-block font-weight-bold py-2\"\n                        [disabled]=\"(isLoading | async) || amount > getDeposit()\"\n                        (click)=\"onSubmit()\">{{ 'purchase.paymentReception.cash.next' | translate }}</button>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, MasterService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-payment',\n    templateUrl: './purchase-payment.component.html',\n    styleUrls: ['./purchase-payment.component.scss']\n})\nexport class PurchasePaymentComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public paymentMethodType = factory.chevre.paymentMethodType;\n    public payments: {\n        paymentAccepted: factory.chevre.seller.IPaymentAccepted;\n        categoryCode: factory.chevre.categoryCode.ICategoryCode;\n    }[];\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public amount: number;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private utilService: UtilService,\n        private actionService: ActionService,\n        private masterService: MasterService,\n        private translate: TranslateService\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.amount = 0;\n        this.payments = [];\n        try {\n            const { authorizeSeatReservations, seller } = await this.actionService.purchase.getData();\n            if (seller === undefined\n                || seller.paymentAccepted === undefined) {\n                throw new Error('seller or seller.paymentAccepted undefined');\n            }\n            this.amount = Functions.Purchase.getAmount(authorizeSeatReservations);\n            const paymentAccepted = seller.paymentAccepted.filter(p => {\n                return (p.paymentMethodType === factory.chevre.paymentMethodType.Cash\n                    || p.paymentMethodType === factory.chevre.paymentMethodType.CreditCard\n                    || p.paymentMethodType === factory.chevre.paymentMethodType.EMoney\n                    || p.paymentMethodType === 'Code');\n            });\n            const categoryCodePayment = await this.masterService.searchCategoryCode({\n                categorySetIdentifier: factory.chevre.categoryCode.CategorySetIdentifier.PaymentMethodType\n            });\n            paymentAccepted.forEach(p => {\n                const categoryCode = categoryCodePayment.find(c => c.codeValue === p.paymentMethodType);\n                if (categoryCode === undefined) {\n                    return;\n                }\n                this.payments.push({\n                    paymentAccepted: p,\n                    categoryCode\n                });\n            });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n    /**\n     * \n     */\n    public async selectPaymentMethodType(\n        typeOf: factory.chevre.paymentMethodType,\n        category?: string\n    ) {\n        try {\n            const seller = (await this.actionService.purchase.getData()).seller;\n            if (seller === undefined\n                || seller.paymentAccepted === undefined) {\n                throw new Error('seller is undefined or paymentAccepted is undefined');\n            }\n            const findResult = seller.paymentAccepted\n                .find(paymentAccepted => paymentAccepted.paymentMethodType === typeOf);\n            if (findResult === undefined) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant('purchase.payment.alert.notCompatible')\n                });\n                return;\n            }\n            this.actionService.purchase.selectPaymentMethodType({ typeOf, category });\n            this.router.navigate(['/purchase/payment/reception']);\n        } catch (error) {\n            this.router.navigate(['/error']);\n            console.error(error);\n        }\n    }\n\n}\n","<app-header>\n    <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [currentStep]=\"4\"></app-purchase-step>\n    <app-purchase-step *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [currentStep]=\"2\"></app-purchase-step>\n</app-header>\n<app-page-title *ngIf=\"amount > 0\" title=\"{{ 'purchase.payment.title' | translate }}\"></app-page-title>\n<app-page-title *ngIf=\"amount === 0\" title=\"{{ 'purchase.payment.notPayment' | translate }}\"></app-page-title>\n<div class=\"contents\">\n    <div class=\"container h-100 px-3 pb-3\">\n        <div class=\"row h-100\">\n            <div class=\"col-3 h-100\">\n            </div>\n            <div class=\"col-6\">\n                <div *ngIf=\"amount > 0\">\n                    <ng-container *ngFor=\"let payment of payments\">\n                        <button type=\"button\" class=\"btn btn-block border border-gray p-4 mb-3\"\n                            [class]=\"payment.paymentAccepted.paymentMethodType\"\n                            (click)=\"selectPaymentMethodType(payment.paymentAccepted.paymentMethodType)\">\n                            <div class=\"d-flex align-items-center\">\n                                <img *ngIf=\"payment.paymentAccepted.paymentMethodType === paymentMethodType.Cash\"\n                                    width=\"50\" class=\"mr-3\" src=\"/default/images/purchase/payment/icon/cash.svg\" alt=\"\">\n                                <img *ngIf=\"payment.paymentAccepted.paymentMethodType === paymentMethodType.CreditCard\"\n                                    width=\"50\" class=\"mr-3\" src=\"/default/images/purchase/payment/icon/creditCard.svg\"\n                                    alt=\"\">\n                                <img *ngIf=\"payment.paymentAccepted.paymentMethodType === paymentMethodType.EMoney\"\n                                    width=\"50\" class=\"mr-3\" src=\"/default/images/purchase/payment/icon/eMoney.svg\"\n                                    alt=\"\">\n                                <img *ngIf=\"payment.paymentAccepted.paymentMethodType === 'Code'\" width=\"50\"\n                                    class=\"mr-3\" src=\"/default/images/purchase/payment/icon/code.svg\" alt=\"\">\n                                <p class=\"text-large\">{{ payment.categoryCode?.name | changeLanguage }}</p>\n                            </div>\n                        </button>\n\n                    </ng-container>\n                </div>\n                <div *ngIf=\"amount === 0\">\n\n                </div>\n            </div>\n            <div class=\"col-3 mh-100 scroll-horizontal\">\n                <app-purchase-info *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\"></app-purchase-info>\n                <app-purchase-cart *ngIf=\"environment.VIEW_TYPE === viewType.Event\" [purchase]=\"purchase | async\"\n                    [isAmount]=\"true\" [cancel]=\"false\"></app-purchase-cart>\n            </div>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"position-absolute d-flex align-items-center h-100\">\n        <app-transaction-remaining-time></app-transaction-remaining-time>\n    </div>\n    <div class=\"container h-100\">\n        <div class=\"row align-items-center justify-content-center h-100\">\n            <div class=\"col-3\">\n                <div *ngIf=\"environment.VIEW_TYPE === viewType.Cinema\">\n                    <button type=\"button\" class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                        routerLink=\"/purchase/cinema/ticket\">{{ 'purchase.payment.prev' | translate }}</button>\n                </div>\n                <div *ngIf=\"environment.VIEW_TYPE === viewType.Event\">\n                    <button *ngIf=\"environment.PURCHASE_CART\" type=\"button\"\n                        class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                        routerLink=\"/purchase/event/schedule\">{{ 'purchase.payment.prev' | translate }}</button>\n                    <button *ngIf=\"!environment.PURCHASE_CART\" type=\"button\"\n                        class=\"text-large btn btn-outline-light btn-block font-weight-bold py-2\"\n                        routerLink=\"/purchase/event/select\">{{ 'purchase.payment.prev' | translate }}</button>\n                </div>\n            </div>\n            <div class=\"col-3\">\n                <button *ngIf=\"amount > 0\" type=\"submit\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\" disabled>{{\n                    'purchase.payment.next' | translate }}</button>\n                <button *ngIf=\"amount === 0\" type=\"submit\" routerLink=\"/purchase/payment/reception\"\n                    class=\"text-large btn btn-primary btn-block font-weight-bold py-2\">{{ 'purchase.payment.next' |\n                    translate }}</button>\n            </div>\n        </div>\n    </div>\n</app-footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-root',\n    templateUrl: './purchase-root.component.html',\n    styleUrls: ['./purchase-root.component.scss']\n})\nexport class PurchaseRootComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public environment = getEnvironment();\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private actionService: ActionService,\n        private router: Router\n    ) { }\n\n    public async ngOnInit() {\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        try {\n            const purchase = await this.actionService.purchase.getData();\n            if (purchase.transaction !== undefined) {\n                await this.actionService.purchase.cancelTransaction();\n            }\n            this.actionService.purchase.delete();\n            if (this.environment.VIEW_TYPE === Models.Util.ViewType.Cinema) {\n                this.router.navigate(['/purchase/cinema']);\n                return;\n            }\n            this.router.navigate(['/purchase/event']);\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-seat',\n    template: ''\n})\nexport class PurchaseSeatComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n    public translateName: string;\n    public reservationCount: number;\n    public Number = Number;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private utilService: UtilService,\n        private translate: TranslateService,\n        protected router: Router,\n        protected actionService: ActionService\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName = (this.environment.VIEW_TYPE === 'cinema')\n            ? 'purchase.cinema.seat' : 'purchase.event.seat';\n        this.screeningEventSeats = [];\n        this.reservationCount = 0;\n        try {\n            const { screeningEvent, reservations, seller } = await this.actionService.purchase.getData();\n            if (screeningEvent === undefined || seller === undefined) {\n                this.router.navigate(['/error']);\n                return;\n            }\n            this.reservationCount = reservations.length;\n            await this.resetSeats();\n            reservations.forEach(r => {\n                if (r.seat === undefined) {\n                    return;\n                }\n                this.selectSeat({ seat: r.seat, status: Models.Purchase.Screen.SeatStatus.Default });\n            });\n            await this.actionService.purchase.getScreen({\n                branchCode: { $eq: screeningEvent.location.branchCode },\n                containedInPlace: {\n                    branchCode: { $eq: screeningEvent.superEvent.location.branchCode }\n                }\n            });\n            this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.getTicketList({ seller });\n        } catch (error) {\n            console.error(error);\n            this.router.navigate(['/error']);\n        }\n    }\n\n\n    /**\n     * \n     */\n    public async selectSeat(data: {\n        seat: Models.Purchase.Reservation.IReservationSeat,\n        status: Models.Purchase.Screen.SeatStatus\n    }) {\n        const { screeningEvent, reservations } = await this.actionService.purchase.getData();\n        if (data.status === Models.Purchase.Screen.SeatStatus.Default) {\n            if (screeningEvent !== undefined\n                && screeningEvent.offers !== undefined\n                && screeningEvent.offers.eligibleQuantity.maxValue !== undefined\n                && reservations.length >= screeningEvent.offers.eligibleQuantity.maxValue) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(\n                        `${this.translateName}.alert.limit`,\n                        { value: screeningEvent.offers.eligibleQuantity.maxValue }\n                    )\n                });\n                return;\n            }\n            this.actionService.purchase.selectSeats([data.seat]);\n        } else {\n            this.actionService.purchase.cancelSeats([data.seat]);\n        }\n    }\n\n    /**\n     * \n     */\n    public async allSelectSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        const screeningEventSeats = this.screeningEventSeats;\n        screeningEventSeats.forEach((s) => {\n            if (s.offers === undefined\n                || s.offers[0].availability !== factory.chevre.itemAvailability.InStock\n                || s.containedInPlace === undefined) {\n                return;\n            }\n            seats.push({\n                typeOf: s.typeOf,\n                seatingType: (s.seatingType === undefined)\n                    ? '' : s.seatingType,\n                seatNumber: s.branchCode,\n                seatRow: '',\n                seatSection: (s.containedInPlace.branchCode === undefined) ? '' : s.containedInPlace.branchCode,\n                offers: s.offers\n            });\n        });\n        if (purchase.authorizeSeatReservation !== undefined\n            && purchase.authorizeSeatReservation.result !== undefined\n            && purchase.authorizeSeatReservation.result.responseBody.object.reservations !== undefined) {\n            purchase.authorizeSeatReservation.result.responseBody.object.reservations.forEach((r) => {\n                if (r.reservedTicket.ticketedSeat === undefined) {\n                    return;\n                }\n                seats.push(r.reservedTicket.ticketedSeat);\n            });\n        }\n        this.actionService.purchase.selectSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public async resetSeats() {\n        const seats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        const purchase = await this.actionService.purchase.getData();\n        purchase.reservations.forEach((reservation) => {\n            if (reservation.seat === undefined) {\n                return;\n            }\n            seats.push(reservation.seat);\n        });\n        this.actionService.purchase.cancelSeats(seats);\n    }\n\n    /**\n     * \n     */\n    public remainingAttendeeCapacityValue(params: {\n        screeningEventSeats: factory.chevre.place.seat.IPlaceWithOffer[];\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent;\n        authorizeSeatReservations: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>[];\n    }) {\n        const screeningEventSeats = params.screeningEventSeats;\n        const screeningEvent = params.screeningEvent;\n        const values = [];\n        let limit = Number(this.environment.PURCHASE_ITEM_MAX_LENGTH);\n        if (screeningEvent.offers !== undefined\n            && screeningEvent.offers.eligibleQuantity.maxValue !== undefined\n            && limit > screeningEvent.offers.eligibleQuantity.maxValue) {\n            limit = screeningEvent.offers.eligibleQuantity.maxValue;\n        }\n        if (new Models.Purchase.Performance({ screeningEvent }).isTicketedSeat()) {\n            // \n            const screeningEventLimit = Functions.Purchase.getRemainingSeatLength({\n                screeningEventSeats, screeningEvent\n            });\n            if (limit > screeningEventLimit) {\n                limit = screeningEventLimit;\n            }\n        }\n        for (let i = 0; i < limit; i++) {\n            values.push(i + 1);\n        }\n        return values;\n    }\n\n    /**\n     * \n     */\n    public async selectOpenSeating() {\n        const { reservations } = await this.actionService.purchase.getData();\n        this.screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n        const screeningEventSeats = this.screeningEventSeats;\n        const seats = Functions.Purchase.getEmptySeat({ reservations, screeningEventSeats });\n        await this.resetSeats();\n        const selectSeats: Models.Purchase.Reservation.IReservationSeat[] = [];\n        for (let i = 0; i < Number(this.reservationCount); i++) {\n            selectSeats.push(seats[i]);\n        }\n        this.actionService.purchase.selectSeats(selectSeats);\n    }\n\n    /**\n     * onSubmit\n     */\n    public async onSubmit() {\n        const { screeningEventTicketOffers, screen } = await this.actionService.purchase.getData();\n        try {\n            if (screeningEventTicketOffers.length === 0) {\n                this.utilService.openAlert({\n                    title: this.translate.instant('common.error'),\n                    body: this.translate.instant(`${this.translateName}.alert.ticketNotfound`)\n                });\n                return;\n            }\n            if (screen !== undefined && screen.openSeatingAllowed) {\n                // \n                await this.selectOpenSeating();\n            }\n            const { reservations } = await this.actionService.purchase.getData();\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                screeningEventSeats: this.screeningEventSeats\n            });\n            const navigate = (this.environment.VIEW_TYPE === 'cinema')\n                ? '/purchase/cinema/ticket'\n                : '/purchase/event/ticket';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            if (screen !== undefined && screen.openSeatingAllowed) {\n                // \n                await this.resetSeats();\n            }\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `<p class=\"mb-4\">${this.translate.instant(`${this.translateName}.alert.temporaryReservation`)}</p>\n                <div class=\"p-3 bg-light-gray select-text\">\n                <code>${(JSON.stringify(error) === '{}') ? error : JSON.stringify(error)}</code>\n            </div>`});\n        }\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { Observable } from 'rxjs';\nimport { Functions, Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { IReservation, IReservationTicket } from '../../../../../models/purchase/reservation';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\nimport { MovieTicketCheckModalComponent } from '../../../../shared/components/parts/movie-ticket/check-modal/check-modal.component';\nimport { PurchaseSeatTicketModalComponent } from '../../../../shared/components/parts/purchase/seat-ticket-modal/seat-ticket-modal.component';\n\n@Component({\n    selector: 'app-purchase-ticket',\n    template: ''\n})\nexport class PurchaseTicketComponent implements OnInit {\n    public purchase: Observable<reducers.IPurchaseState>;\n    public user: Observable<reducers.IUserState>;\n    public isLoading: Observable<boolean>;\n    public additionalTicketText: string;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public translateName: string;\n    public isSelectedTicket: boolean;\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private router: Router,\n        private modal: BsModalService,\n        private actionService: ActionService,\n        private utilService: UtilService,\n        private translate: TranslateService\n    ) { }\n\n    public async ngOnInit() {\n        this.purchase = this.store.pipe(select(reducers.getPurchase));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.translateName = (this.environment.VIEW_TYPE === 'cinema')\n            ? 'purchase.cinema.ticket' : 'purchase.event.ticket';\n        this.additionalTicketText = '';\n        this.isSelectedTicket = (await this.getUnselectedTicketReservations()).length === 0;\n    }\n\n    /**\n     * \n     */\n    public async getUnselectedTicketReservations() {\n        const { reservations } = await this.actionService.purchase.getData();\n        return reservations.filter((reservation) => {\n            return (reservation.ticket === undefined);\n        });\n    }\n\n    /**\n     * \n     */\n    public async onSubmit() {\n        const { reservations } = await this.actionService.purchase.getData();\n        const validResult = reservations.filter((reservation) => {\n            if (reservation.ticket === undefined) {\n                return false;\n            }\n            const priceComponent = reservation.ticket.ticketOffer.priceSpecification.priceComponent;\n            const UnitPriceSpecification = factory.chevre.priceSpecificationType.UnitPriceSpecification;\n            const unitPriceSpecifications = priceComponent.filter(p => p.typeOf === UnitPriceSpecification);\n            const filterResult = reservations.filter((targetReservation) => {\n                return (reservation.ticket !== undefined\n                    && targetReservation.ticket !== undefined\n                    && reservation.ticket.ticketOffer.id === targetReservation.ticket.ticketOffer.id);\n            });\n            const findResult = unitPriceSpecifications.find((unitPriceSpecification) => {\n                const value = (unitPriceSpecification.typeOf === UnitPriceSpecification\n                    && unitPriceSpecification.referenceQuantity.value !== undefined)\n                    ? unitPriceSpecification.referenceQuantity.value : 1;\n\n                return (filterResult.length % value !== 0);\n            });\n\n            return (findResult !== undefined);\n        });\n        if (validResult.length > 0) {\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant(`${this.translateName}.alert.ticketCondition`)\n            });\n            return;\n        }\n        try {\n            const additionalTicketText = this.additionalTicketText;\n            const screeningEventSeats = await this.actionService.purchase.getScreeningEventSeats();\n            await this.actionService.purchase.temporaryReservation({\n                reservations,\n                additionalTicketText,\n                screeningEventSeats\n            });\n            const navigate = (this.environment.VIEW_TYPE === 'cinema')\n                ? '/purchase/payment'\n                : '/purchase/event/schedule';\n            this.router.navigate([navigate]);\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: `\n                <p class=\"mb-4\">${this.translate.instant(`${this.translateName}.alert.temporaryReservation`)}</p>\n                <div class=\"p-3 bg-light-gray select-text text-left\">\n                    <code>${(JSON.stringify(error) === '{}') ? error : JSON.stringify(error)}</code>\n                </div>`\n            });\n        }\n    }\n\n    /**\n     * \n     */\n    public async openTicketList(reservation?: IReservation) {\n        const purchase = await this.actionService.purchase.getData();\n        this.modal.show(PurchaseSeatTicketModalComponent, {\n            class: 'modal-dialog-centered modal-lg',\n            initialState: {\n                authorizeSeatReservation: purchase.authorizeSeatReservation,\n                screeningEventTicketOffers: purchase.screeningEventTicketOffers,\n                checkMovieTicketActions: purchase.checkMovieTicketActions,\n                reservations: purchase.reservations,\n                reservation: reservation,\n                pendingMovieTickets: purchase.pendingMovieTickets,\n                cb: async (ticket: IReservationTicket) => {\n                    if (reservation === undefined) {\n                        const reservations = Functions.Util.deepCopy<IReservation[]>(purchase.reservations);\n                        reservations.forEach(r => r.ticket = ticket);\n                        this.actionService.purchase.selectTickets(reservations);\n                        this.isSelectedTicket = (await this.getUnselectedTicketReservations()).length === 0;\n                        return;\n                    }\n                    this.actionService.purchase.selectTickets([{ ...reservation, ticket }]);\n                    this.isSelectedTicket = (await this.getUnselectedTicketReservations()).length === 0;\n                }\n            },\n        });\n    }\n\n    /**\n     * \n     */\n    public openMovieTicket(paymentMethodType: factory.chevre.paymentMethodType) {\n        this.modal.show(MovieTicketCheckModalComponent, {\n            initialState: {\n                paymentMethodType\n            },\n            class: 'modal-dialog-centered modal-lg'\n        });\n    }\n\n\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport * as Models from '../../../../../models';\n\n@Component({\n    selector: 'app-movie-tickets',\n    templateUrl: './movie-tickets.component.html',\n    styleUrls: ['./movie-tickets.component.scss']\n})\nexport class MovieTicketsComponent implements OnInit {\n\n    @Input() public screeningEventTicketOffers: factory.chevre.event.screeningEvent.ITicketOffer[];\n    @Output() public select = new EventEmitter<factory.paymentMethodType>();\n    public isMovieTicket: boolean;\n    public isMGTicket: boolean;\n    public paymentMethodType = factory.paymentMethodType;\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Util.ViewType;\n\n    constructor() { }\n\n    public async ngOnInit() {\n        const screeningEventTicketOffers = this.screeningEventTicketOffers;\n        const movieTicketTypeOffers = Functions.Purchase.getMovieTicketTypeOffers({ screeningEventTicketOffers });\n        this.isMovieTicket = (movieTicketTypeOffers.find(m => {\n            const findResult = m.priceSpecification.priceComponent.find(\n                p => (p.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification\n                    && p.appliesToMovieTicket?.serviceOutput?.typeOf === factory.chevre.paymentMethodType.MovieTicket)\n            );\n            return findResult !== undefined;\n        }) !== undefined);\n        this.isMGTicket = (movieTicketTypeOffers.find(m => {\n            const findResult = m.priceSpecification.priceComponent.find(\n                p => (p.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification\n                    && p.appliesToMovieTicket?.serviceOutput?.typeOf === factory.chevre.paymentMethodType.MGTicket)\n            );\n            return findResult !== undefined;\n        }) !== undefined);\n    }\n\n}\n","<div *ngIf=\"isMovieTicket || isMovieTicket\" class=\"p-3 border border-gray\">\n    <div *ngIf=\"isMovieTicket\" class=\"movieticket mb-4\">\n        <p class=\"mb-3\" [innerHtml]=\"'common.paymentMethodType.movieTicket.use' | translate\"></p>\n        <div>\n            <button type=\"button\" (click)=\"select.emit(paymentMethodType.MovieTicket)\"\n                class=\"btn btn-block bg-white border border-gray py-3 rounded-pill\">\n                <img src=\"/assets/images/mvtk.svg\" height=\"34\" alt=\"\">\n            </button>\n        </div>\n    </div>\n    <div *ngIf=\"isMGTicket\" class=\"mgticket\">\n        <p class=\"mb-3\" [innerHtml]=\"'common.paymentMethodType.mgTicket.use' | translate\"></p>\n        <div>\n            <button type=\"button\" (click)=\"select.emit(paymentMethodType.MGTicket)\"\n                class=\"btn btn-block bg-white border border-gray py-3 rounded-pill\">\n                <div class=\"font-weight-bold text-large\">{{ 'common.paymentMethodType.mgTicket.label' | translate }}</div>\n                <!-- <img src=\"/assets/images/mvtk.svg\" height=\"24\" alt=\"\"> -->\n            </button>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-performance',\n    templateUrl: './performance.component.html',\n    styleUrls: ['./performance.component.scss']\n})\nexport class PurchasePerformanceComponent implements OnInit {\n\n    @Input() public performance: Models.Purchase.Performance;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n    public environment = getEnvironment();\n    public viewType = Models.Util.ViewType;\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"border border-gray p-3 pointer h-100\" [ngClass]=\"{ \n                'bg-white': performance.isSales() && !performance.isSeatStatus('danger'), \n                'bg-dark-gray text-light-gray not-event': !performance.isSales() \n                || performance.isSeatStatus('danger') \n                || (performance.isInfinitetock() && environment.VIEW_TYPE === viewType.Cinema)\n                }\" (click)=\"select.emit(performance.screeningEvent)\">\n    <div class=\"container px-0\">\n        <div class=\"row align-items-center\">\n            <div class=\"col-9\">\n                <div class=\"mb-1 align-middle\">\n                    <span\n                        class=\"text-x-large font-weight-bold\">{{ moment(performance.screeningEvent.startDate).format('HH:mm') }}</span>\n                    <span>-</span>\n                    <span>{{ moment(performance.screeningEvent.endDate).format('HH:mm') }}</span>\n                </div>\n                <div class=\"mb-1 text-small screen-name text-overflow-ellipsis\">\n                    <p *ngIf=\"performance.screeningEvent.location.address | changeLanguage\" class=\"mr-2 d-inline-block\">\n                        {{ performance.screeningEvent.location.address | changeLanguage }}</p>\n                    <p class=\"d-inline-block\">\n                        {{ performance.screeningEvent.location.name | changeLanguage }}</p>\n                    <p *ngIf=\"performance.screeningEvent.maximumAttendeeCapacity\">\n                        {{ 'common.seatValue' | translate: { value: performance.screeningEvent.maximumAttendeeCapacity } }}</p>\n                </div>\n            </div>\n            <div class=\"col-3\">\n                <div class=\"status text-center\" *ngIf=\"performance.isSales() && !performance.isInfinitetock()\">\n                    <div *ngIf=\"performance.isSeatStatus('success')\">\n                        <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('warning')\">\n                        <img src=\"/assets/images/icon/status_warning.svg\" alt=\"\">\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus('danger')\">\n                        {{ 'common.performance.status.danger' | translate }}\n                        <!-- <img src=\"/assets/images/icon/status_danger.svg\" alt=\"\"> -->\n                    </div>\n                    <div *ngIf=\"performance.isSeatStatus()\">\n                        <img src=\"/assets/images/icon/status_undefined.svg\" alt=\"\">\n                    </div>\n                </div>\n        \n                <div class=\"status text-center\" *ngIf=\"performance.isSales('end')\">\n                    {{ 'common.performance.status.endSale' | translate }}</div>\n                <div class=\"status text-center\" *ngIf=\"performance.isSales('start')\">\n                    {{ 'common.performance.status.outsideSalesPeriod' | translate }}</div>\n                <div *ngIf=\"performance.isSales() && performance.isInfinitetock()\" class=\"status text-center\">\n                    <img src=\"/assets/images/icon/status_success.svg\" alt=\"\">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\n\n@Component({\n    selector: 'app-purchase-performances',\n    templateUrl: './performances.component.html',\n    styleUrls: ['./performances.component.scss']\n})\nexport class PurchasePerformancesComponent implements OnInit {\n\n    @Input() public screeningEventsGroup: Functions.Purchase.IScreeningEventsGroup;\n    @Input() public screeningEventSeries: factory.chevre.event.screeningEventSeries.IEvent;\n    @Input() public videoFormatTypes: factory.chevre.categoryCode.ICategoryCode[];\n    @Input() public animation?: boolean;\n    @Output() public select = new EventEmitter<factory.chevre.event.screeningEvent.IEvent>();\n    public moment = moment;\n\n    constructor() { }\n\n    public ngOnInit() {\n        console.log(this.videoFormatTypes);\n        this.animation = (this.animation === undefined) ? false : this.animation;\n    }\n\n    public getVideoFormatType(code: string) {\n        return this.videoFormatTypes.find(v => v.codeValue === code);\n    }\n\n}\n","<div class=\"\">\n    <div class=\"p-3 bg-light-gray\">\n        <div class=\"mb-2\">\n            <p class=\"font-weight-bold text-large\">{{ screeningEventSeries.name | changeLanguage }}</p>\n            <p *ngIf=\"screeningEventSeries.headline && (screeningEventSeries.headline | changeLanguage)\">\n                {{ screeningEventSeries.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"screeningEventSeries.description && (screeningEventSeries.description | changeLanguage)\">{{\n                screeningEventSeries.description | changeLanguage }}</p>\n        </div>\n        <div class=\"d-flex align-items-center\">\n            <div *ngIf=\"screeningEventSeries.dubLanguage\"\n                class=\"text-small bg-dark-gray text-white py-1 px-3 mr-2 dub-language\">{{\n                'common.dubbing' | translate }}</div>\n            <div *ngIf=\"screeningEventSeries.subtitleLanguage\"\n                class=\"text-small bg-dark-gray text-white py-1 px-3 mr-2 subtitle-language\">{{ 'common.subtitles' |\n                translate }}</div>\n            <div *ngFor=\"let videoFormat of screeningEventSeries.videoFormat\"\n                class=\"video-format text-small bg-dark-gray text-white py-1 px-2 mr-2\">\n                {{ getVideoFormatType(videoFormat.typeOf)?.name | changeLanguage }}\n            </div>\n            <div *ngIf=\"screeningEventsGroup.screeningEvent.workPerformed?.duration && moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() > 0\"\n                class=\"text-small ml-auto\">\n                <span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{\n                moment.duration(screeningEventsGroup.screeningEvent.workPerformed?.duration).asMinutes() }}{{\n                'common.date.minute' | translate }}\n            </div>\n        </div>\n    </div>\n    <div class=\"container px-0 py-2\">\n        <ul *ngIf=\"animation\" class=\"row animation\">\n            <li *ngFor=\"let performance of screeningEventsGroup.data\" class=\"col-3 my-2\">\n                <app-purchase-performance [performance]=\"performance\" (select)=\"select.emit($event)\" class=\"mb-3\">\n                </app-purchase-performance>\n            </li>\n        </ul>\n    </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport { ActionService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-cart',\n    templateUrl: './purchase-cart.component.html',\n    styleUrls: ['./purchase-cart.component.scss']\n})\nexport class PurchaseCartComponent implements OnInit {\n    @Input() public purchase: reducers.IPurchaseState;\n    @Input() public isAmount: boolean;\n    @Input() public cancel: boolean;\n    public amount: number;\n    public moment = moment;\n    public getAdditionalProperty = Functions.Purchase.getAdditionalProperty;\n\n    constructor(\n        private utilService: UtilService,\n        private translate: TranslateService,\n        private actionService: ActionService\n    ) { }\n\n    public ngOnInit() {\n        this.amount = (this.isAmount)\n            ? Functions.Purchase.getAmount(this.purchase.authorizeSeatReservations)\n            : 0;\n    }\n\n    /**\n     * \n     */\n    public removeItem(\n        authorizeSeatReservation: factory.action.authorize.offer.seatReservation.IAction<factory.service.webAPI.Identifier.Chevre>\n    ) {\n        this.utilService.openConfirm({\n            title: this.translate.instant('common.confirm'),\n            body: this.translate.instant('purchase.event.cart.confirm.cancel'),\n            cb: async () => {\n                try {\n                    const authorizeSeatReservations = [authorizeSeatReservation];\n                    await this.actionService.purchase.cancelTemporaryReservations(authorizeSeatReservations);\n                } catch (error) {\n                    console.error(error);\n                    this.utilService.openAlert({\n                        title: this.translate.instant('common.error'),\n                        body: this.translate.instant('purchase.event.cart.alert.cancel'),\n                    });\n                }\n            }\n        });\n    }\n\n\n\n}\n","<div class=\"d-flex justify-content-between p-3 bg-light-gray mb-3\">\n    <p class=\"font-weight-bold\">{{ 'common.amount' | translate }}</p>\n    <p *ngIf=\"isAmount\" class=\"font-weight-bold\">{{ amount | currency : 'JPY' }}</p>\n    <p *ngIf=\"!isAmount\" class=\"font-weight-bold\">-</p>\n</div>\n\n<div *ngIf=\"purchase.authorizeSeatReservations.length === 0\">\n    <p class=\"text-md-center\">{{ 'purchase.event.cart.notfound' | translate }}</p>\n</div>\n\n<div *ngFor=\"let authorizeSeatReservation of purchase.authorizeSeatReservations\"\n    class=\"mb-3 border border-gray p-3 position-relative\">\n    <button *ngIf=\"cancel\" type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"removeItem(authorizeSeatReservation)\">\n        <span aria-hidden=\"true\">&times;</span>\n    </button>\n    <div class=\"mb-3\">\n        <div class=\"mb-1\">\n            <p class=\"font-weight-bold text-small pr-3\">\n                {{ authorizeSeatReservation.object.event.name | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"authorizeSeatReservation.object.event.superEvent.headline && (authorizeSeatReservation.object.event.superEvent.headline | changeLanguage)\">\n                {{ authorizeSeatReservation.object.event.superEvent.headline | changeLanguage }}</p>\n            <p class=\"text-small\"\n                *ngIf=\"authorizeSeatReservation.object.event.superEvent.description && (authorizeSeatReservation.object.event.superEvent.description | changeLanguage)\">\n                {{\n                authorizeSeatReservation.object.event.superEvent.description | changeLanguage }}</p>\n        </div>\n        <p class=\"mb-1\">\n            {{ authorizeSeatReservation.object.event.startDate | formatDate: 'MM/DD(ddd) HH:mm' }}-{{\n            authorizeSeatReservation.object.event.endDate | formatDate: 'HH:mm' }}\n        </p>\n        <p class=\"text-small mb-1\">\n            <span class=\"theater-name\">\n                {{ authorizeSeatReservation.object.event.superEvent.location.name | changeLanguage }}\n            </span>\n            <span class=\"screen-name\">\n                &nbsp;/&nbsp;<span\n                    *ngIf=\"authorizeSeatReservation.object.event.location.address | changeLanguage\"\n                    class=\"mr-2\">{{ authorizeSeatReservation.object.event.location.address | changeLanguage\n                    }}</span>{{ authorizeSeatReservation.object.event.location.name | changeLanguage }}\n            </span>\n            <span\n                *ngIf=\"authorizeSeatReservation.object.event.workPerformed?.duration && moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() > 0\">\n                &nbsp;/&nbsp;<span class=\"mr-1\">{{ 'common.duration' | translate }}</span>{{\n                moment.duration(authorizeSeatReservation.object.event.workPerformed?.duration).asMinutes() }}{{\n                'common.date.minute' | translate }}\n            </span>\n        </p>\n        <!-- <button type=\"button\" class=\"btn btn-outline-primary btn-block py-3 ml-auto p-0\"\n            (click)=\"removeItem(authorizeSeatReservation)\">{{ 'common.remove' | translate }}</button> -->\n    </div>\n    <hr class=\"border-top border-gray mb-3\">\n\n    <app-item-list\n        [authorizeSeatReservations]=\"authorizeSeatReservation?.result?.responseBody.object.reservations\">\n    </app-item-list>\n\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport * as moment from 'moment';\nimport { Functions } from '../../../../..';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-purchase-info',\n    templateUrl: './purchase-info.component.html',\n    styleUrls: ['./purchase-info.component.scss']\n})\nexport class PurchaseInfoComponent implements OnInit {\n    @Input() public purchase: reducers.IPurchaseState;\n    @Input() public isAmount: boolean;\n    public image?: string;\n    public amount: number;\n    public moment = moment;\n    public getAdditionalProperty = Functions.Purchase.getAdditionalProperty;\n\n    constructor() { }\n\n    public ngOnInit() {\n        this.image = this.purchase.screeningEvent?.workPerformed?.thumbnailUrl;\n        this.amount = (this.isAmount)\n            ? Functions.Purchase.getAmount(this.purchase.authorizeSeatReservations)\n            : 0;\n    }\n\n\n\n}\n","<div class=\"min-h-100 border border-gray\">\n    <div class=\"p-3\">\n        <div class=\"container px-0 mb-2\">\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <div class=\"image\">\n                        <!-- <div class=\"loading d-flex justify-content-center align-items-center\">\n                        <div class=\"loader\"></div>\n                    </div> -->\n                        <div class=\"poster\" *ngIf=\"image\" [style.backgroundImage]=\"'url('+ image +')'\"></div>\n                        <div class=\"poster-no\" *ngIf=\"!image\"></div>\n                    </div>\n                </div>\n                <div class=\"col-8\">\n                    <p class=\"font-weight-bold\">{{ purchase.screeningEvent?.name | changeLanguage }}</p>\n                    <p class=\"text-small\"\n                        *ngIf=\"purchase.screeningEvent?.superEvent.headline && (purchase.screeningEvent?.superEvent.headline | changeLanguage)\">\n                        {{ purchase.screeningEvent?.superEvent.headline | changeLanguage }}</p>\n                </div>\n            </div>\n        </div>\n        <p class=\"text-small\"\n            *ngIf=\"purchase.screeningEvent?.superEvent.description && (purchase.screeningEvent?.superEvent.description | changeLanguage)\">{{\n                        purchase.screeningEvent?.superEvent.description | changeLanguage }}</p>\n        <p class=\"font-weight-bold text-small\">\n            {{ purchase.screeningEvent?.startDate | formatDate: 'YYYY/MM/DD(ddd) HH:mm' }}-{{ purchase.screeningEvent?.endDate | formatDate: 'HH:mm' }}\n        </p>\n        <p class=\"screen-name text-small font-weight-bold\">\n            <span *ngIf=\"purchase.screeningEvent?.location.address | changeLanguage\"\n                class=\"mr-2\">{{ purchase.screeningEvent?.location.address | changeLanguage }}</span>{{ purchase.screeningEvent?.location.name | changeLanguage }}\n        </p>\n    </div>\n    <div class=\"d-flex justify-content-between p-3 bg-light-gray\">\n        <p class=\"font-weight-bold\">{{ 'common.amount' | translate }}</p>\n        <p *ngIf=\"isAmount\" class=\"font-weight-bold\">{{ amount | currency : 'JPY' }}</p>\n        <p *ngIf=\"!isAmount\" class=\"font-weight-bold\">-</p>\n    </div>\n    <div class=\"py-3 px-2\">\n        <app-item-list [reservations]=\"purchase.reservations\"></app-item-list>\n    </div>\n\n</div>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-terms',\n    templateUrl: './purchase-terms.component.html',\n    styleUrls: ['./purchase-terms.component.scss']\n})\nexport class PurchaseTermsComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public terms: string;\n\n    constructor(\n        private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/terms/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.terms = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3  text-small scroll-vertical border\" [innerHTML]=\"terms\"></div>","import { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/sdk';\nimport { Functions } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { UtilService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-warning',\n    templateUrl: './purchase-warning.component.html',\n    styleUrls: ['./purchase-warning.component.scss']\n})\nexport class PurchaseWarningComponent implements OnInit, OnChanges {\n    @Input() public language: string;\n    @Input() public screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\n    public environment = getEnvironment();\n    public warning: string;\n\n    constructor(\n    private utilService: UtilService\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public async ngOnChanges() {\n        try {\n            const path = `/ejs/purchase/warning/${this.language}.ejs`;\n            const url = (await Functions.Util.isFile(`${Functions.Util.getProject().storageUrl}${path}`))\n                ? `${Functions.Util.getProject().storageUrl}${path}`\n                : `/default${path}`;\n            const view = await this.utilService.getText(url);\n            this.warning = (<any>window).ejs.render(view, {\n                screeningEvent: this.screeningEvent\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<div class=\"border bg-white p-3 text-small scroll-vertical border\" [innerHTML]=\"warning\"></div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-seat-info',\n    templateUrl: './seat-info.component.html',\n    styleUrls: ['./seat-info.component.scss']\n})\nexport class SeatInfoComponent implements OnInit {\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n\n}\n","<div class=\"px-3 border border-gray\">\n    <div class=\"d-flex align-items-center py-3 border-bottom border-gray\">\n        <div class=\"mr-3 seat\"></div>\n        <div>{{ 'purchase.seat.normal' | translate }}</div>\n    </div>\n    <div class=\"d-flex align-items-center py-3 border-bottom border-gray\">\n        <div class=\"mr-3 seat active\"></div>\n        <div>{{ 'purchase.seat.active' | translate }}</div>\n    </div>\n    <div class=\"d-flex align-items-center py-3 border-bottom border-gray\">\n        <div class=\"mr-3 seat disabled\"></div>\n        <div>{{ 'purchase.seat.disabled' | translate }}</div>\n    </div>\n    <div class=\"d-flex align-items-center py-3\">\n        <div class=\"mr-3 seat space\"></div>\n        <div>{{ 'purchase.seat.space' | translate }}</div>\n    </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { Models } from '../../../../..';\nimport { getEnvironment } from '../../../../../../environments/environment';\n\n@Component({\n    selector: 'app-purchase-step',\n    templateUrl: './step.component.html',\n    styleUrls: ['./step.component.scss']\n})\nexport class PurchaseStepComponent implements OnInit {\n    @Input() public currentStep: number;\n    public viewType = Models.Util.ViewType;\n    public environment = getEnvironment();\n    public steps: number[];\n\n    constructor() { }\n\n    /**\n     * \n     */\n    public ngOnInit() {\n        this.steps = (this.environment.VIEW_TYPE === this.viewType.Cinema)\n            ? [1, 2, 3, 4, 5] : [1, 2, 3];\n    }\n\n}\n","<ul class=\"d-flex align-items-center h-100\">\n    <li class=\"step px-0 h-100\" *ngFor=\"let step of steps\">\n        <div [class.d-none]=\"currentStep !== step\" class=\"px-5 bg-white h-100\">\n            <div class=\"d-flex align-items-center h-100\">\n                <div class=\"text-x-large font-weight-bold mr-2\">0{{ step }}</div>\n                <p class=\"text-x-small\" [innerHtml]=\"'purchase.step.' + step | translate\"></p>\n            </div>\n        </div>\n        <div [class.d-none]=\"currentStep === step\" [class.d-flex]=\"currentStep !== step\"\n            class=\"px-5 h-100 align-items-center text-large\">\n            0{{ step }}\n        </div>\n    </li>\n</ul>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@cinerino/sdk';\nimport * as moment from 'moment';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { ActionService } from '../../../../../services';\n\n@Component({\n    selector: 'app-transaction-remaining-time',\n    templateUrl: './transaction-remaining-time.component.html',\n    styleUrls: ['./transaction-remaining-time.component.scss']\n})\nexport class TransactionRemainingTimeComponent implements OnInit, OnDestroy {\n    public transaction?: factory.transaction.placeOrder.ITransaction;\n    public isExpired: boolean;\n    public diff: { hours: string; minutes: string; seconds: string; };\n    public timer: any;\n    public width: number;\n    public environment = getEnvironment();\n\n    constructor(\n        private router: Router,\n        private actionService: ActionService\n    ) { }\n\n    public ngOnInit() {\n        this.update();\n    }\n\n    public ngOnDestroy() {\n        clearTimeout(this.timer);\n    }\n\n    private async update() {\n        const { transaction } = await this.actionService.purchase.getData();\n        if (transaction === undefined) {\n            return;\n        }\n        this.transaction = transaction;\n        const now = moment();\n        const expires = moment(transaction.expires);\n        this.isExpired = expires.diff(now) < 0;\n        this.diff = {\n            hours: `00${expires.diff(now, 'hours')}`.slice(-2),\n            minutes: `00${expires.diff(now, 'minutes') % 60}`.slice(-2),\n            seconds: `00${expires.diff(now, 'seconds') % 60 % 60}`.slice(-2)\n        };\n        this.width = Math.floor(expires.diff(now, 'seconds') / (Number(this.environment.PURCHASE_TRANSACTION_TIME) * 60) * 100);\n        if (this.isExpired) {\n            this.router.navigate(['/expired']);\n        }\n        const time = 1000;\n        this.timer = setTimeout(() => { this.update(); }, time);\n    }\n\n}\n","<!-- <div class=\"parent bg-white\" *ngIf=\"!isExpired && environment.PURCHASE_TRANSACTION_TIME_DISPLAY\">\n    <div class=\"cover w-100 h-100 bg-primary\"></div>\n    <div class=\"expired bg-primary\" [style.width.%]=\"width\"></div>\n</div> -->\n\n\n<p *ngIf=\"transaction\" class=\"text-white position-relative\">\n    {{ 'common.timeLimit' | translate }} {{ this.diff.hours }}:{{ this.diff.minutes }}:{{ this.diff.seconds }}\n</p>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuardService, PurchaseTransactionGuardService, SettingGuardService, ViewTypeGuardService } from '../../canActivates';\nimport { PurchaseCinemaDateComponent } from './components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component';\nimport { PurchaseCinemaScheduleEventComponent } from './components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component';\nimport { PurchaseCinemaScheduleMovieComponent } from './components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseCinemaTopComponent } from './components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component';\nimport { PurchaseEventDateComponent } from './components/pages/event/purchase-event-date/purchase-event-date.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseEventSelectComponent } from './components/pages/event/purchase-event-select/purchase-event-select.component';\nimport { PurchaseEventTicketComponent } from './components/pages/event/purchase-event-ticket/purchase-event-ticket.component';\nimport { PurchaseEventTopComponent } from './components/pages/event/purchase-event-top/purchase-event-top.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchasePaymentReceptionComponent } from './components/pages/purchase-payment-reception/purchase-payment-reception.component';\nimport { PurchasePaymentComponent } from './components/pages/purchase-payment/purchase-payment.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PurchaseBaseComponent,\n    canActivate: [AuthGuardService, SettingGuardService],\n    children: [\n      { path: 'root', component: PurchaseRootComponent },\n      {\n        path: 'cinema',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: '', component: PurchaseCinemaTopComponent },\n          { path: 'date', component: PurchaseCinemaDateComponent },\n          { path: 'schedule', component: PurchaseCinemaScheduleComponent },\n          { path: 'schedule/movie', component: PurchaseCinemaScheduleMovieComponent },\n          { path: 'schedule/event', component: PurchaseCinemaScheduleEventComponent },\n          { path: 'seat', component: PurchaseCinemaSeatComponent },\n          { path: 'ticket', component: PurchaseCinemaTicketComponent },\n        ]\n      },\n      {\n        path: 'event',\n        canActivate: [ViewTypeGuardService],\n        children: [\n          { path: '', component: PurchaseEventTopComponent },\n          { path: 'date', component: PurchaseEventDateComponent },\n          { path: 'schedule', component: PurchaseEventScheduleComponent },\n          { path: 'seat', component: PurchaseEventSeatComponent },\n          { path: 'ticket', component: PurchaseEventTicketComponent },\n          { path: 'select', component: PurchaseEventSelectComponent },\n        ]\n      },\n      { path: 'payment', canActivate: [PurchaseTransactionGuardService], component: PurchasePaymentComponent },\n      { path: 'payment/reception', canActivate: [PurchaseTransactionGuardService], component: PurchasePaymentReceptionComponent },\n      { path: 'complete', component: PurchaseCompleteComponent }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PurchaseRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PurchaseCinemaDateComponent } from './components/pages/cinema/purchase-cinema-date/purchase-cinema-date.component';\nimport { PurchaseCinemaScheduleEventComponent } from './components/pages/cinema/purchase-cinema-schedule-event/purchase-cinema-schedule-event.component';\nimport { PurchaseCinemaScheduleMovieComponent } from './components/pages/cinema/purchase-cinema-schedule-movie/purchase-cinema-schedule-movie.component';\nimport { PurchaseCinemaScheduleComponent } from './components/pages/cinema/purchase-cinema-schedule/purchase-cinema-schedule.component';\nimport { PurchaseCinemaSeatComponent } from './components/pages/cinema/purchase-cinema-seat/purchase-cinema-seat.component';\nimport { PurchaseCinemaTicketComponent } from './components/pages/cinema/purchase-cinema-ticket/purchase-cinema-ticket.component';\nimport { PurchaseCinemaTopComponent } from './components/pages/cinema/purchase-cinema-top/purchase-cinema-top.component';\nimport { PurchaseEventDateComponent } from './components/pages/event/purchase-event-date/purchase-event-date.component';\nimport { PurchaseEventScheduleComponent } from './components/pages/event/purchase-event-schedule/purchase-event-schedule.component';\nimport { PurchaseEventSeatComponent } from './components/pages/event/purchase-event-seat/purchase-event-seat.component';\nimport { PurchaseEventSelectComponent } from './components/pages/event/purchase-event-select/purchase-event-select.component';\nimport { PurchaseEventTicketComponent } from './components/pages/event/purchase-event-ticket/purchase-event-ticket.component';\nimport { PurchaseEventTopComponent } from './components/pages/event/purchase-event-top/purchase-event-top.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchasePaymentReceptionComponent } from './components/pages/purchase-payment-reception/purchase-payment-reception.component';\nimport { PurchasePaymentComponent } from './components/pages/purchase-payment/purchase-payment.component';\nimport { PurchaseRootComponent } from './components/pages/purchase-root/purchase-root.component';\nimport { PurchaseSeatComponent } from './components/pages/purchase-seat/purchase-seat.component';\nimport { PurchaseTicketComponent } from './components/pages/purchase-ticket/purchase-ticket.component';\nimport { MovieTicketsComponent } from './components/parts/movie-tickets/movie-tickets.component';\nimport { PurchasePerformanceComponent } from './components/parts/performance/performance.component';\nimport { PurchasePerformancesComponent } from './components/parts/performances/performances.component';\nimport { PurchaseCartComponent } from './components/parts/purchase-cart/purchase-cart.component';\nimport { PurchaseInfoComponent } from './components/parts/purchase-info/purchase-info.component';\nimport { PurchaseTermsComponent } from './components/parts/purchase-terms/purchase-terms.component';\nimport { PurchaseWarningComponent } from './components/parts/purchase-warning/purchase-warning.component';\nimport { SeatInfoComponent } from './components/parts/seat-info/seat-info.component';\nimport { PurchaseStepComponent } from './components/parts/step/step.component';\nimport { TransactionRemainingTimeComponent } from './components/parts/transaction-remaining-time/transaction-remaining-time.component';\nimport { PurchaseRoutingModule } from './purchase-routing.module';\n\n\n@NgModule({\n  declarations: [\n    PurchaseBaseComponent,\n    PurchaseRootComponent,\n    PurchaseCinemaSeatComponent,\n    PurchaseCinemaTicketComponent,\n    PurchaseEventTicketComponent,\n    PurchasePaymentComponent,\n    PurchasePaymentReceptionComponent,\n    PurchaseCompleteComponent,\n    PurchaseCinemaScheduleComponent,\n    PurchaseEventScheduleComponent,\n    PurchasePerformanceComponent,\n    PurchasePerformancesComponent,\n    PurchaseInfoComponent,\n    PurchaseTermsComponent,\n    PurchaseWarningComponent,\n    TransactionRemainingTimeComponent,\n    PurchaseEventSeatComponent,\n    PurchaseEventTicketComponent,\n    PurchaseTicketComponent,\n    PurchaseSeatComponent,\n    SeatInfoComponent,\n    PurchaseCinemaScheduleMovieComponent,\n    PurchaseCinemaScheduleEventComponent,\n    PurchaseCinemaTopComponent,\n    PurchaseCinemaDateComponent,\n    PurchaseStepComponent,\n    MovieTicketsComponent,\n    PurchaseEventTopComponent,\n    PurchaseEventDateComponent,\n    PurchaseCartComponent,\n    PurchaseEventSelectComponent,\n  ],\n  imports: [\n    CommonModule,\n    PurchaseRoutingModule,\n    SharedModule,\n  ]\n})\nexport class PurchaseModule { }\n"],"sourceRoot":"webpack:///"}