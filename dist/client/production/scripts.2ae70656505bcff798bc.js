var StarWebPrintTrader=function(e){this.papertype=this.checkedblock=this.url=null,this.timeout=9e4,this._json=this._url=this.onTimeout=this.onError=this.onReceive=null,null!=e&&(null!=e.url&&(this.url=e.url),null!=e.checkedblock&&(this.checkedblock=e.checkedblock),null!=e.papertype&&(this.papertype=e.papertype),null!=e.timeout&&(this.timeout=e.timeout))},_handlerCallback={},_onFinish=function(e){var t=_handlerCallback[e.url],i=e.response;_handlerCallback[e.url]=null,200==e.htmlCode?t.onReceive({traderSuccess:i.slice(i.indexOf("&lt;success&gt;")+15,i.indexOf("&lt;/success&gt;")),traderCode:i.slice(i.indexOf("&lt;code&gt;")+12,i.indexOf("&lt;/code&gt;")),traderStatus:i.slice(i.indexOf("&lt;status&gt;")+14,i.indexOf("&lt;/status&gt;")),status:e.htmlCode,responseText:i}):t.onError({status:e.htmlCode,responseText:i})};StarWebPrintTrader.prototype._callMessageHandler=function(){var e=this;null==_handlerCallback[e._url]?(_handlerCallback[e._url]=e,webkit.messageHandlers.sendMessageHandler.postMessage(e._json)):setTimeout((function(){e._callMessageHandler()}),500)},StarWebPrintTrader.prototype.sendMessage=function(e){var t="<root";null!=e.checkedblock?0==e.checkedblock&&(t+=' checkedblock="false"'):0==this.checkedblock&&(t+=' checkedblock="false"'),null!=e.papertype?"normal"==e.papertype?t+=' papertype="normal"':"black_mark"==e.papertype?t+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==e.papertype&&(t+=' papertype="black_mark_and_detect_at_power_on"'):"normal"==this.papertype?t+=' papertype="normal"':"black_mark"==this.papertype?t+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==this.papertype&&(t+=' papertype="black_mark_and_detect_at_power_on"');var i;t=t+">"+e.request+"</root>";if(i='<StarWebPrint xmlns="http://www.star-m.jp" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Request>',i+=this._encodeEscapeSequence(t),i+="</Request>",i+="</StarWebPrint>",t="",t=null!=e.url?e.url:this.url,/^https?:\/\/(localhost|127\.0\.0\.1):8001\//.test(t.toLowerCase())&&-1!=navigator.userAgent.indexOf("webPRNTSupportMessageHandler"))this._json=JSON.stringify({url:t,body:i}),this._url=t,this._callMessageHandler();else{var s=null;if(window.XMLHttpRequest)s=new XMLHttpRequest;else{if(!window.ActiveXObject)return void(this.onError&&this.onError({status:10001,responseText:"XMLHttpRequest is not supported."}));s=new ActiveXObject("Microsoft.XMLHTTP")}-1==navigator.userAgent.indexOf("iPad;")&&-1==navigator.userAgent.indexOf("iPhone;")&&-1==navigator.userAgent.indexOf("iPod touch;")&&-1==navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("WebPRNTSupportHTTPS")||0!=t.toLowerCase().indexOf("https://localhost")&&0!=t.toLowerCase().indexOf("https://127.0.0.1")||(t="http://"+t.substring(8));try{s.open("POST",t,!0)}catch(r){return void(this.onError&&this.onError({status:10002,responseText:r.message}))}try{null!=e.timeout?s.timeout=e.timeout:this.timeout&&(s.timeout=this.timeout)}catch(a){}s.setRequestHeader("Content-Type","text/xml; charset=UTF-8");var n=this;s.onreadystatechange=function(){if(4==s.readyState)try{if(200==s.status){var e=s.responseXML.getElementsByTagName("Response");if(0<e.length){if(n.onReceive){var t=e[0].childNodes[0].nodeValue;n.onReceive({traderSuccess:t.slice(t.indexOf("<success>")+9,t.indexOf("</success>")),traderCode:t.slice(t.indexOf("<code>")+6,t.indexOf("</code>")),traderStatus:t.slice(t.indexOf("<status>")+8,t.indexOf("</status>")),status:s.status,responseText:s.responseText})}}else n.onError&&n.onError({status:s.status,responseText:s.responseText})}else n.onError&&n.onError({status:s.status,responseText:s.responseText})}catch(i){n.onError&&n.onError({status:0,responseText:"Connection timeout occurred."})}};try{s.ontimeout=function(){n.onTimeout&&n.onTimeout()}}catch(k){}try{s.send(i)}catch(o){this.onError&&this.onError({status:10003,responseText:o.message})}}},StarWebPrintTrader.prototype._onHandlerSuccess=function(e){trader.onReceive&&trader.onReceive(e)},StarWebPrintTrader.prototype._onHandlerError=function(e){trader.onError&&trader.onError(e)},StarWebPrintTrader.prototype.isCoverOpen=function(e){return!!(32&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isOffLine=function(e){return!!(8&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isCompulsionSwitchClose=function(e){return!!(4&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isEtbCommandExecute=function(e){return!!(2&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isHighTemperatureStop=function(e){return!!(64&parseInt(e.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isNonRecoverableError=function(e){return!!(32&parseInt(e.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isAutoCutterError=function(e){return!!(8&parseInt(e.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isBlackMarkError=function(e){return!!(8&parseInt(e.traderStatus.substr(8,2),16))},StarWebPrintTrader.prototype.isPaperEnd=function(e){return!!(8&parseInt(e.traderStatus.substr(10,2),16))},StarWebPrintTrader.prototype.isPaperNearEnd=function(e){return!!(4&parseInt(e.traderStatus.substr(10,2),16))},StarWebPrintTrader.prototype.extractionEtbCounter=function(e){var t=0;return 64&parseInt(e.traderStatus.substr(14,2),16)&&(t|=16),32&parseInt(e.traderStatus.substr(14,2),16)&&(t|=8),8&parseInt(e.traderStatus.substr(14,2),16)&&(t|=4),4&parseInt(e.traderStatus.substr(14,2),16)&&(t|=2),2&parseInt(e.traderStatus.substr(14,2),16)&&(t|=1),t},StarWebPrintTrader.prototype._encodeEscapeSequence=function(e){var t=/[<>&]/g;return t.test(e)&&(e=e.replace(t,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;"}return"&amp;"}))),e};var StarWebPrintBuilder=function(){};StarWebPrintBuilder.prototype.createAlignmentElement=function(e){var t="<alignment";return null!=e&&(t+=this._analysisEnumAttribute("position",e.position,/^(left|center|right)$/)),t+"/>"},StarWebPrintBuilder.prototype.createBarcodeElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(t="<barcode"+this._analysisEnumAttribute("symbology",e.symbology,/^(UPCE|UPCA|JAN8|JAN13|Code39|ITF|Code128|Code93|NW7)$/),t+=this._analysisEnumAttribute("width",e.width,/^(width[2-4]|width_mode[1-9])$/),t+=this._analysisEnumAttribute("hri",e.hri,/^(false|true)$/),t+=this._analysisValueAttribute("height",e.height,1,255),null==e.data)throw Error('Argument "data" is undefined.');return(t=t+">"+this._encodeEscapeSequenceBinary(e.data))+"</barcode>"},StarWebPrintBuilder.prototype.createBitImageElement=function(e){var t="<bitimage";if(null==e)throw Error("Argument is undefined.");var i=0,s=0,n=0,r=0;if(null!=e.x&&(i=e.x),null!=e.y&&(s=e.y),null!=e.width&&(n=e.width),null!=e.height&&(r=e.height),this._analysisValueAttribute("x",i,0,65535),this._analysisValueAttribute("y",s,0,65535),t+=this._analysisValueAttribute("width",n,0,65535),t+=this._analysisValueAttribute("height",r,0,65535),null==e.context)throw Error('Argument "context" is undefined.');return(t=t+">"+this._encodeRasterImage(e.context.getImageData(i,s,n,r).data,n,r))+"</bitimage>"},StarWebPrintBuilder.prototype.createCutPaperElement=function(e){var t="<cutpaper";return null!=e&&(t+=this._analysisEnumAttribute("feed",e.feed,/^(false|true)$/),t+=this._analysisEnumAttribute("type",e.type,/^(full|partial)$/)),t+"/>"},StarWebPrintBuilder.prototype.createFeedElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(null==e.line&&null==e.unit)throw Error('Argument "line / unit" is undefined.');return t="<feed"+this._analysisValueAttribute("line",e.line,1,255),(t+=this._analysisValueAttribute("unit",e.unit,1,255))+"/>"},StarWebPrintBuilder.prototype.createInitializationElement=function(e){var t="<initialization";return null!=e&&(t+=this._analysisEnumAttribute("reset",e.reset,/^(false|true)$/),t+=this._analysisEnumAttribute("print",e.print,/^(false|true)$/)),t+"/>"},StarWebPrintBuilder.prototype.createLogoElement=function(e){var t="<logo";return null!=e&&(t+=this._analysisEnumAttribute("width",e.width,/^(single|double)$/),t+=this._analysisEnumAttribute("height",e.height,/^(single|double)$/),t+=this._analysisValueAttribute("number",e.number,1,255)),t+"/>"},StarWebPrintBuilder.prototype.createPdf417Element=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(t="<pdf417"+this._analysisEnumAttribute("level",e.level,/^(level[0-8])$/),null!=e.line&&(t=0!=e.line?t+this._analysisValueAttribute("line",e.line,3,90):t+' line="0"'),t+=this._analysisValueAttribute("column",e.column,0,30),t+=this._analysisValueAttribute("module",e.module,1,8),t+=this._analysisValueAttribute("aspect",e.aspect,1,8),null==e.data)throw Error('Argument "data" is undefined.');return(t=t+">"+this._encodeEscapeSequenceBinary(e.data))+"</pdf417>"},StarWebPrintBuilder.prototype.createPeripheralElement=function(e){var t="<peripheral";return null!=e&&(t+=this._analysisValueAttribute("channel",e.channel,1,2),t+=this._analysisValueAttribute("on",e.on,1,65535),t+=this._analysisValueAttribute("off",e.off,1,65535)),t+"/>"},StarWebPrintBuilder.prototype.createQrCodeElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(t="<qrcode"+this._analysisEnumAttribute("model",e.model,/^(model[12])$/),t+=this._analysisEnumAttribute("level",e.level,/^(level_[lmqh])$/),t+=this._analysisValueAttribute("cell",e.cell,1,8),null==e.data)throw Error('Argument "data" is undefined.');return(t=t+">"+this._encodeEscapeSequenceBinary(e.data))+"</qrcode>"},StarWebPrintBuilder.prototype.createRawDataElement=function(e){if(null==e)throw Error("Argument is undefined.");if(null==e.data)throw Error('Argument "data" is undefined.');return(e="<rawdata>"+this._encodeBase64Binary(e.data))+"</rawdata>"},StarWebPrintBuilder.prototype.createRuledLineElement=function(e){var t="<ruledline";return null!=e&&(t+=this._analysisEnumAttribute("thickness",e.thickness,/^(thin|medium|thick|double_(thin|medium|thick))$/),t+=this._analysisValueAttribute("width",e.width,1,65535)),t+"/>"},StarWebPrintBuilder.prototype.createSoundElement=function(e){var t="<sound";return null!=e&&(t+=this._analysisValueAttribute("channel",e.channel,1,2),t+=this._analysisValueAttribute("repeat",e.repeat,1,20)),t+"/>"},StarWebPrintBuilder.prototype.createTextElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");return t="<text"+this._analysisEnumAttribute("emphasis",e.emphasis,/^(false|true)$/),t+=this._analysisEnumAttribute("invert",e.invert,/^(false|true)$/),t+=this._analysisEnumAttribute("linespace",e.linespace,/^(24|32)$/),t+=this._analysisEnumAttribute("font",e.font,/^(font_[ab])$/),t+=this._analysisEnumAttribute("underline",e.underline,/^(false|true)$/),t+=this._analysisValueAttribute("characterspace",e.characterspace,0,7),t+=this._analysisValueAttribute("width",e.width,1,6),t+=this._analysisValueAttribute("height",e.height,1,6),t+=this._analysisEnumAttribute("codepage",e.codepage,/^(cp(437|737|772|774|851|852|855|857|858|860|861|862|863|864|865|866|869|874|928|932|998|999|1001|1250|1251|1252|2001|3001|3002|3011|3012|3021|3041|3840|3841|3843|3844|3845|3846|3847|3848)|utf8|blank|utf8|shift_jis|gb18030|gb2312|big5|korea)$/),t+=this._analysisEnumAttribute("international",e.international,/^(usa|france|germany|uk|denmark|sweden|italy|spain|japan|norway|denmark2|spain2|latin_america|korea|ireland|legal)$/),null!=e.data?(t+=">",t=1==e.binary?t+this._encodeEscapeSequenceBinary(e.data):t+this._encodeEscapeSequence(e.data),t+="</text>"):t+="/>",t},StarWebPrintBuilder.prototype._analysisEnumAttribute=function(e,t,i){if(null!=t){if(!i.test(t))throw Error('Argument "'+e+'" is invalid.');return" "+e+'="'+t+'"'}return""},StarWebPrintBuilder.prototype._analysisValueAttribute=function(e,t,i,s){if(null!=t){if(t<i||t>s)throw Error('Argument "'+e+'" is invalid.');return" "+e+'="'+t+'"'}return""},StarWebPrintBuilder.prototype._encodeEscapeSequence=function(e){var t=/[\\\x00-\x20\x26\x3c\x3e\x7f]/g;return t.test(e)&&(e=e.replace(t,(function(e){return"\\"==e?"\\\\":"\\x"+("0"+e.charCodeAt(0).toString(16)).slice(-2)}))),e},StarWebPrintBuilder.prototype._encodeEscapeSequenceBinary=function(e){var t=/[\\\x00-\x20\x26\x3c\x3e\x7f-\xff]/g;return t.test(e)&&(e=e.replace(t,(function(e){return"\\"==e?"\\\\":"\\x"+("0"+e.charCodeAt(0).toString(16)).slice(-2)}))),e},StarWebPrintBuilder.prototype._encodeBase64Binary=function(e){var t="",i=e.length;e+="\0\0";for(var s=0;s<i;s+=3){var n=e.charCodeAt(s)<<16|e.charCodeAt(s+1)<<8|e.charCodeAt(s+2);t=t+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&n))}switch(i%3){case 1:return t.slice(0,-2)+"==";case 2:return t.slice(0,-1)+"="}return t},StarWebPrintBuilder.prototype._encodeRasterImage=function(e,t,i){for(var s=[[-254,-126,-222,-94,-246,-118,-214,-86],[-62,-190,-30,-158,-54,-182,-22,-150],[-206,-78,-238,-110,-198,-70,-230,-102],[-14,-142,-46,-174,-6,-134,-38,-166],[-242,-114,-210,-82,-250,-122,-218,-90],[-50,-178,-18,-146,-58,-186,-26,-154],[-194,-66,-226,-98,-202,-74,-234,-106],[-2,-130,-34,-162,-10,-138,-42,-170]],n="",r=0,a=0;a<i;a++){for(var o=0,l=128,c=0;c<t;c++)((30*e[r]+59*e[r+1]+11*e[r+2])*e[r+3]+12800)/25500-e[r+3]<s[7&a][7&c]&&(o|=l),r+=4,0==(l>>=1)&&(n+=String.fromCharCode(o),o=0,l=128);128!=l&&(n+=String.fromCharCode(o))}for(e=n,n="",t=e.length,e+="\0\0",a=0;a<t;a+=3)i=e.charCodeAt(a)<<16|e.charCodeAt(a+1)<<8|e.charCodeAt(a+2),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);switch(t%3){case 1:return n.slice(0,-2)+"==";case 2:return n.slice(0,-1)+"="}return n},function(window,undefined){function callbackInfo(){this.callbackInfoList=new Object}function CommBox(e,t,i){this.ERROR_OK="OK",this.ERROR_NOT_OPENED="NOT_OPENED",this.ERROR_MEMBER_NOT_FOUND="MEMBER_NOT_FOUND",this.ERROR_SYSTEM_ERROR="SYSTEM_ERROR",this.boxID=e,this.commBoxManager=t,this.callbackInfo=i,this.onreceive=null,this.connectionObj=this.commBoxManager.connectionObj}function CommBoxManager(){this.ERROR_OK="OK",this.ERROR_BOX_COUNT_OVER="BOX_COUNT_OVER",this.ERROR_BOX_CLIENT_OVER="BOX_CLIENT_OVER",this.ERROR_MEMBERID_ALREADY_USED="MEMBERID_ALREADY_USED",this.ERROR_ALREADY_OPENED="ALREADY_OPENED",this.ERROR_NOT_OPENED="NOT_OPENED",this.ERROR_PARAMETER_ERROR="PARAMETER_ERROR",this.ERROR_SYSTEM_ERROR="SYSTEM_ERROR",this.callbackInfo=new callbackInfo,this.commBoxList=new Array,this.connectionObj=null}function DeviceObjectSelector(){this.type2objectMap={type_scanner:"Scanner",type_keyboard:"Keyboard",type_poskeyboard:"POSKeyboard",type_msr:"MSR",type_cat:"CAT",type_cash_changer:"CashChanger",type_printer:"Printer",type_display:"Display",type_simple_serial:"SimpleSerial",type_hybrid_printer:"HybridPrinter",type_hybrid_printer2:"HybridPrinter2",type_dt:"DeviceTerminal",type_other_peripheral:"OtherPeripheral",type_storage:"GermanyFiscalElement"},this.connectionObj=null}function CashChanger(e,t){this.CONFIG_LEFT_CASH="CONFIG_LEFT_CASH",this.CONFIG_COUNT_MODE="CONFIG_COUNT_MODE",this.MODE_MANUAL_INPUT="MODE_MANUAL_INPUT",this.MODE_AUTOCOUNT="MODE_AUTO_COUNT",this.DEPOSIT_CHANGE="DEPOSIT_CHANGE",this.DEPOSIT_NOCHANGE="DEPOSIT_NOCHANGE",this.DEPOSIT_REPAY="DEPOSIT_REPAY",this.COLLECT_ALL_CASH="ALL_CASH",this.COLLECT_PART_OF_CASH="PART_OF_CASH",this.SUE_POWER_ONLINE=2001,this.SUE_POWER_OFF=2002,this.SUE_POWER_OFFLINE=2003,this.SUE_POWER_OFF_OFFLINE=2004,this.SUE_STATUS_EMPTY=11,this.SUE_STATUS_NEAREMPTY=12,this.SUE_STATUS_EMPTYOK=13,this.SUE_STATUS_FULL=21,this.SUE_STATUS_NEARFULL=22,this.SUE_STATUS_FULLOK=23,this.SUE_STATUS_JAM=31,this.SUE_STATUS_JAMOK=32,this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function CAT(e,t){this.SUE_LOGSTATUS_OK=0,this.SUE_LOGSTATUS_NEARFULL=1,this.SUE_LOGSTATUS_FULL=2,this.SUE_POWER_ONLINE=2001,this.SUE_POWER_OFF_OFFLINE=2004,this.deviceID=e,this.isCrypto=t,this.timeout=0,this.trainingMode=!1,this.connectionObj=null}function DeviceTerminal(e,t){this.deviceID=e,this.isCrypto=t,this.onshutdown=null,this.onrestart=null,this.connectionObj=null}function Display(e,t,i){this.message="",this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.timeout=1e4,this.onreceive=null,this.onerror=null,this.ASB_NO_RESPONSE=1,this.ASB_DISPLAY_SUCCESS=2,this.SCROLL_OVERWRITE="overwrite",this.SCROLL_VERTICAL="v_scroll",this.SCROLL_HORIZONTAL="h_scroll",this.MOVE_TOP_LEFT="top_left",this.MOVE_TOP_RIGHT="top_right",this.MOVE_BOTTOM_LEFT="bottom_left",this.MOVE_BOTTOM_RIGHT="bottom_right",this.CURSOR_NONE="none",this.CURSOR_UNDERLINE="underline",this.BRIGHTNESS_20=20,this.BRIGHTNESS_40=40,this.BRIGHTNESS_60=60,this.BRIGHTNESS_100=100,this.MARQUEE_WALK="walk",this.MARQUEE_PLACE="place",this.connectionObj=null}callbackInfo.prototype={addCallback:function(e,t){this.callbackInfoList[t]=e},removeCallback:function(e){for(var t in this.callbackInfoList)if(t==e)return void delete this.callbackInfoList[t]},getCallback:function(e){return null!=this.callbackInfoList[e]?this.callbackInfoList[e]:null}},CommBox.prototype={getCommHistory:function(e,t){var i="function"==typeof e?null:e,s="function"==typeof e?e:t,n=null!=i&&null!=i.allHistory&&e.allHistory,r={type:"getcommhistory",box_id:this.boxID,all_history:n},a=MessageFactory.getCommBoxDataMessage(r);return this.commBoxManager.isOpened(this.getBoxId())?(this.callbackInfo.addCallback(s,a.sequence),this.connectionObj.emit(a),a.sequence):(null!=s&&s(this.ERROR_NOT_OPENED,null,a.sequence),a.sequence)},send:function(e,t,i){var s={type:"send",box_id:this.boxID,message:e,member_id:t},n=MessageFactory.getCommBoxDataMessage(s);return this.commBoxManager.isOpened(this.getBoxId())?(this.callbackInfo.addCallback(i,n.sequence),this.connectionObj.emit(n),n.sequence):(null!=i&&i(this.ERROR_NOT_OPENED,0,n.sequence),n.sequence)},client_getcommhistory:function(e,t){var i=e.code,s=e.history_list,n=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=n&&n(i,s,t)},client_send:function(e,t){var i=e.code,s=e.count,n=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=n&&n(i,s,t)},client_onreceive:function(e,t){var i=new Object;i.senderId=e.sender_id,i.receiverId=e.receiver_id,i.message=e.message,null!=this.onreceive&&this.onreceive(i)},getBoxId:function(){return this.boxID}},CommBoxManager.prototype={setConnectionObject:function(e){this.connectionObj=e},openCommBox:function(e,t,i){var s="";null!=t&&null!=t.memberID&&(s=t.memberID);var n={box_id:e,member_id:s},r=MessageFactory.getOpenCommBoxMessage(n);return this.connectionObj.isUsableDeviceIF()?(this.connectionObj.emit(r),this.callbackInfo.addCallback(i,r.sequence),r.sequence):(i(null,this.ERROR_SYSTEM_ERROR,r.sequence),r.sequence)},closeCommBox:function(e,t){var i={box_id:n},s=MessageFactory.getCloseCommBoxMessage(i);try{var n=e.getBoxId();if(i.box_id=n,s=MessageFactory.getCloseCommBoxMessage(i),!this.isOpened(n))return null!=t&&t(this.ERROR_NOT_OPENED,s.sequence),s.sequence;this.connectionObj.emit(s)}catch(r){null!=t&&t(this.ERROR_PARAMETER_ERROR,s.sequence)}return this.callbackInfo.addCallback(t,s.sequence),s.sequence},client_opencommbox:function(e,t){var i=e.box_id,s=e.code,n=null;s==this.ERROR_OK&&null==this.getCommBox(i)&&(n=new CommBox(i,this,this.callbackInfo)),null!=n&&this.commBoxList.push(n);var r=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=r&&r(n,s,t)},client_closecommbox:function(e,t){var i=e.box_id,s=e.code;this.removeCommBox(i);var n=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=n&&n(s,t)},executeCommDataCallback:function(data,sq){var boxID=data.box_id,commBoxObj=this.getCommBox(boxID),method="client_"+data.type;try{eval("commBoxObj."+method+"(data, sq)")}catch(e){throw new Error("")}},getCommBox:function(e){for(var t=null,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==e){t=this.commBoxList[i];break}return t},removeCommBox:function(e){for(var t=!1,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==e){this.commBoxList.splice(i,1),t=!0;break}return t},isOpened:function(e){for(var t=!1,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==e){t=!0;break}return t}},DeviceObjectSelector.prototype={setConnectionObject:function(e){this.connectionObj=e},isSelectable:function(e){return!!this.connectionObj.isUsableDeviceIF()||(!("type_printer"!=e||!this.connectionObj.isUsablePrintIF())||!("type_display"!=e||!this.connectionObj.isUsableDisplayIF()))},select:function(deviceId,deviceType,specificDevice,isCrypto,ePOSDeviceContext){var deviceObjectName="";deviceObjectName="string"==typeof specificDevice?specificDevice:this.type2objectMap[deviceType];var templateObject=null;try{templateObject=eval(deviceObjectName)}catch(e){throw new Error("ERROR_PARAMETER")}if("function"!=typeof templateObject)throw new Error("ERROR_PARAMETER");return"Printer"==deviceObjectName||"Display"==deviceObjectName||"HybridPrinter"==deviceObjectName||"HybridPrinter2"==deviceObjectName?new templateObject(deviceId,isCrypto,ePOSDeviceContext):new templateObject(deviceId,isCrypto)}},CashChanger.prototype={setConnectionObject:function(e){this.connectionObj=e},client_oncashcounts:function(e){try{if(null==this.oncashcounts)return;this.oncashcounts(e)}catch(t){}},client_onstatuschange:function(e){try{if(null==this.onstatuschange)return;this.onstatuschange(e)}catch(t){}},client_ondeposit:function(e){try{if(null==this.ondeposit)return;this.ondeposit(e)}catch(t){}},client_ondispense:function(e){try{if(null==this.ondispense)return;this.ondispense(e)}catch(t){}},client_oncollect:function(e){try{if(null==this.oncollect)return;this.oncollect(e)}catch(t){}},client_onconfigchange:function(e){try{if(null==this.onconfigchange)return;this.onconfigchange(e)}catch(t){}},client_oncommandreply:function(e){try{if(null==this.oncommandreply)return;if(""!=typeof e.command);else{var t=e.data;t=t.replace(/[0-9a-fA-F]{2}/g,(function(e){var t=parseInt(e,16);return String.fromCharCode(t)})),e.data=t}this.oncommandreply(e)}catch(i){}},client_ondirectio:function(e){try{if(null==this.ondirectio)return;this.ondirectio(e)}catch(t){}},client_onstatusupdate:function(e){try{if(null==this.onstatusupdate)return;this.onstatusupdate(e)}catch(t){}},readCashCounts:function(){return this.send({type:"readcashcounts"})},beginDeposit:function(){return this.send({type:"begindeposit"})},pauseDeposit:function(){return this.send({type:"pausedeposit"})},restartDeposit:function(){return this.send({type:"restartdeposit"})},endDeposit:function(e){var t={type:"enddeposit",cmd:e};return this.send(t)},dispenseCash:function(e){var t;return"object"==typeof e?(t=e).type="dispensecash":t={type:"dispensecash",cash:e},this.send(t)},dispenseChange:function(e){var t;return"object"==typeof e?(t=e).type="dispensechange":t={type:"dispensechange",cash:e},this.send(t)},openDrawer:function(){return this.send({type:"opendrawer"})},collectCash:function(e){var t={type:"collectcash",collectmode:e};return this.send(t)},setConfig:function(e,t){var i=null;switch(e){case this.CONFIG_COUNT_MODE:i={type:"setconfig",config:e,mode:t.mode};break;case this.CONFIG_LEFT_CASH:null!=t.bills&&""!=t.bills||(t.bills="0"),null!=t.coins&&""!=t.coins||(t.coins="0"),i={type:"setconfig",config:e,bills:t.bills,coins:t.coins}}var s=-1;return null!=i&&(s=this.send(i)),s},sendCommand:function(e){var t;return"object"==typeof e?(t=e).type="sendcommand":t={type:"sendcommand",command:toHexBinary(e)},this.send(t)},callEvent:function(e,t){var i=t;return i.type=e,this.send(i)},send:function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(s){}return i}},CAT.prototype={setConnectionObject:function(e){this.connectionObj=e},authorizeSales:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizesales"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},authorizeVoid:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizevoid"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},authorizeRefund:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizerefund"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},authorizeCompletion:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizecompletion"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},accessDailyLog:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"accessdailylog"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},sendCommand:function(e){var t={service:e.service,command:e.command,data:e.data,string:e.string,type:"sendcommand"};return t.training=this.trainingMode,this.send(t)},send:function(e){this.deviceID;var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(s){}return i},client_onauthorizesales:function(e){try{if(null==this.onauthorizesales)return;this.onauthorizesales(this.getResultObject(e))}catch(t){}},client_onauthorizevoid:function(e){try{if(null==this.onauthorizevoid)return;this.onauthorizevoid(this.getResultObject(e))}catch(t){}},client_onauthorizerefund:function(e){try{if(null==this.onauthorizerefund)return;this.onauthorizerefund(this.getResultObject(e))}catch(t){}},client_onauthorizecompletion:function(e){try{if(null==this.onauthorizecompletion)return;this.onauthorizecompletion(this.getResultObject(e))}catch(t){}},client_onaccessdailylog:function(e){try{if(null==this.onaccessdailylog)return;this.onaccessdailylog(this.getDailyLogObject(e))}catch(t){}},client_oncommandreply:function(e){try{if(null==this.oncommandreply)return;this.oncommandreply(this.getCommandReplyObject(e))}catch(t){}},client_onstatusupdate:function(e){try{if(null==this.onstatusupdate)return;this.onstatusupdate(e)}catch(t){}},getResultObject:function(e){return{status:e.status,sequence:e.sequence,service:e.service,accountNumber:e.account_number,settledAmount:e.settled_amount,slipNumber:e.slip_number,kid:e.kid,approvalCode:e.approval_code,transactionNumber:e.transaction_number,paymentCondition:e.payment_condition,voidSlipNumber:e.void_slip_number,balance:e.balance}},getDailyLogObject:function(e){var t={};t.status=e.status,t.service=e.service,t.sequence=e.sequence;var i=[];try{e.daily_log.forEach((function(e){var t={};if(0===e)throw i;t.kid=e.kid,t.salesCount=e.sales_count,t.salesAmount=e.sales_amount,t.voidCount=e.void_count,t.voidAmount=e.void_amount,i.push(t)}))}catch(s){}return t.dailyLog=i,t},getCommandReplyObject:function(e){return{status:e.status,command:e.command,data:e.data,string:e.string,service:e.service,sequence:e.sequence,accountNumber:e.account_number,settledAmount:e.settled_amount,slipNumber:e.slip_number,transactionNumber:e.transaction_number,paymentCondition:e.payment_condition,balance:e.balance,additionalSecurityInformation:e.additional_security_information}},callEvent:function(e,t){var i=t;return i.type=e,this.send(i)}},DeviceTerminal.prototype={setConnectionObject:function(e){this.connectionObj=e},shutdown:function(e,t){this.onshutdown=t;var i={type:"shutdown",password:e};return this.send(i)},client_onshutdown:function(e){try{if("function"!=typeof this.onshutdown)return;this.onshutdown(e)}catch(t){}},restart:function(e,t){this.onrestart=t;var i={type:"restart",password:e};return this.send(i)},client_onrestart:function(e){try{if("function"!=typeof this.onrestart)return;this.onrestart(e)}catch(t){}},send:function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(s){}return i}},Display.prototype.setConnectionObject=function(e){this.connectionObj=e},Display.prototype.reset=function(){try{this.message+="<reset />"}catch(e){throw e}return this},Display.prototype.createWindow=function(e,t,i,s,n,r){try{var a="";a+=getIntAttr("number",e,1,4),a+=getIntAttr("x",t,1,20),a+=getIntAttr("y",i,1,2),a+=getIntAttr("width",s,1,21-t),a+=getIntAttr("height",n,1,3-i),a+=getEnumAttr("scrollmode",r,regexScrollMode),this.message+="<window"+a+"/>"}catch(o){throw o}return this},Display.prototype.destroyWindow=function(e){try{var t="";t+=getIntAttr("number",e,1,4),this.message+="<window"+t+' destroy="true"/>'}catch(i){throw i}return this},Display.prototype.setCurrentWindow=function(e){try{var t="";t+=getIntAttr("number",e,1,4),this.message+="<window"+t+"/>"}catch(i){throw i}return this},Display.prototype.setCursorPosition=function(){try{var e="";e+=getIntAttr("x",arguments[0],1,20),e+=getIntAttr("y",arguments[1],1,2),this.message+="<cursor"+e+"/>"}catch(t){throw t}return this},Display.prototype.moveCursorPosition=function(){try{var e="";e+=getEnumAttr("moveto",arguments[0],regexMoveto),this.message+="<cursor"+e+"/>"}catch(t){throw t}return this},Display.prototype.setCursorType=function(e){try{var t="";t+=getEnumAttr("type",e,regexUnderline),this.message+="<cursor"+t+"/>"}catch(i){throw i}return this},Display.prototype.addText=function(){try{var e="";switch(arguments.length){case 1:break;case 2:e+=' lang="'+arguments[1]+'"';break;case 3:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2);break;case 4:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2),e+=' lang="'+arguments[3]+'"';break;default:throw new Error("Parameters are invalid")}this.message+="<text"+e+">"+escapeMarkup(arguments[0])+"</text>"}catch(t){throw t}return this},Display.prototype.addReverseText=function(){try{var e="";switch(arguments.length){case 1:e+=getBoolAttr("reverse",!0);break;case 2:e+=' lang="'+arguments[1]+'"',e+=getBoolAttr("reverse",!0);break;case 3:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2),e+=getBoolAttr("reverse",!0);break;case 4:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2),e+=' lang="'+arguments[3]+'"',e+=getBoolAttr("reverse",!0);break;default:throw new Error("Parameters are invalid")}this.message+="<text"+e+">"+escapeMarkup(arguments[0])+"</text>"}catch(t){throw t}return this},Display.prototype.clearWindow=function(){try{this.message+="<clear/>"}catch(e){throw e}return this},Display.prototype.setBlink=function(e){try{var t="";t+=getUShortAttr("interval",e),this.message+="<blink"+t+"/>"}catch(i){throw i}return this},Display.prototype.setBrightness=function(e){try{var t="";t+=getEnumAttr("value",e,regexBrightness),this.message+="<brightness"+t+"/>"}catch(i){throw i}return this},Display.prototype.addMarquee=function(e,t,i,s,n,r){try{var a="";a+=getEnumAttr("format",t,regexMarquee),a+=getIntAttr("uwait",i,0,2e3),a+=getIntAttr("rwait",s,100,2e3),a+=getIntAttr("repeat",n,0,127),void 0!==r&&(a+=' lang="'+r+'"'),this.message+="<marquee"+a+">"+escapeMarkup(e)+"</marquee>"}catch(o){throw o}return this},Display.prototype.showClock=function(){try{this.message+="<clock/>"}catch(e){throw e}return this},Display.prototype.addCommand=function(e){try{this.message+="<command>"+toHexBinary(e)+"</command>"}catch(t){throw t}return this},Display.prototype.send=function(){var e=-1;if(!this.ePosDev.eposprint&&this.connectionObj.isUsableDeviceIF())try{var t=this.toString(),i={type:"display",timeout:this.timeout,displaydata:t},s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto);this.connectionObj.emit(s),e=s.sequence,this.message=""}catch(p){e=-1}else{var n,r,a,o,l,c,h,d=this,u=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid="+this.deviceID+"&timeout="+this.timeout;if(o={},n='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',n+="<s:Body>"+this.toString()+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(r=new XMLHttpRequest))&&window.XDomainRequest?((r=new XDomainRequest).open("POST",u,!0),r.onload=function(){o=r.responseText,/response/.test(o)?(l=/success\s*=\s*"\s*(1|true)\s*"/.test(o),c=o.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",h=o.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,d.fireReceiveEvent(l,c,h,0)):d.fireErrorEvent(0,r.responseText,0)},r.onerror=function(){d.fireErrorEvent(0,r.responseText,0)},r.onprogress=function(){},r.ontimeout=r.onerror,r.timeout=d.timeout,r.send(n)):(r.open("POST",u,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){4==r.readyState&&(clearTimeout(a),200==r.status&&r.responseXML&&(o=r.responseXML.getElementsByTagName("response")).length>0?(l=/^(1|true)$/.test(o[0].getAttribute("success")),c=o[0].hasAttribute("code")?o[0].getAttribute("code"):"",h=o[0].hasAttribute("status")?parseInt(o[0].getAttribute("status")):0,d.fireReceiveEvent(l,c,h,0)):d.fireErrorEvent(r.status,r.responseText,0))},a=setTimeout((function(){r.abort()}),this.timeout),r.send(n)),this.message="",e=0}return e},Display.prototype.fireReceiveEvent=function(e,t,i,s){"EX_ENPC_TIMEOUT"==t&&(t="ERROR_DEVICE_BUSY"),this.onreceive&&this.onreceive({success:e,code:t,status:i},s)},Display.prototype.fireErrorEvent=function(e,t,i){this.onerror&&this.onerror({status:0,responseText:this.ASB_NO_RESPONSE},i),this.ePosDev.cleanup()},Display.prototype.client_onxmlresult=function(e,t){if(e){var i=e.resultdata,s=/success\s*=\s*"\s*(1|true)\s*"/.test(i);i.match(/code\s*=\s*"\s*(\S*)\s*"/);var n=RegExp.$1;i.match(/status\s*=\s*"\s*(\d+)\s*"/);var r=parseInt(RegExp.$1);this.onreceive&&this.onreceive({success:s,code:n,status:r},t)}else this.onerror&&this.onerror({status:0,responseText:this.ASB_NO_RESPONSE},t),this.ePosDev.cleanup()},Display.prototype.toString=function(){return'<epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display">'+this.message+"</epos-display>"},Display.prototype.setXmlString=function(e){this.message=e},Display.prototype.getXmlString=function(){return this.message},Display.prototype.callEvent=function(e,t){var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s};var regexBrightness=/^(20|40|60|100)$/,regexScrollMode=/^(overwrite|v_scroll|h_scroll)$/,regexMoveto=/^(top_left|top_right|bottom_left|bottom_right)$/,regexUnderline=/^(none|underline)$/,regexMarquee=/^(walk|place)$/;function OtherPeripheral(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function Keyboard(e,t){this.VK_CANCEL=3,this.VK_BACK=8,this.VK_TAB=9,this.VK_RETURN=13,this.VK_SHIFT=16,this.VK_CONTROL=17,this.VK_MENU=18,this.VK_PAUSE=19,this.VK_CAPITAL=20,this.VK_KANA=21,this.VK_ESCAPE=27,this.VK_CONVERT=28,this.VK_NONCONVERT=29,this.VK_SPACE=32,this.VK_PRIOR=33,this.VK_NEXT=34,this.VK_END=35,this.VK_HOME=36,this.VK_LEFT=37,this.VK_UP=38,this.VK_RIGHT=39,this.VK_DOWN=40,this.VK_INSERT=45,this.VK_DELETE=46,this.VK_0=48,this.VK_1=49,this.VK_2=50,this.VK_3=51,this.VK_4=52,this.VK_5=53,this.VK_6=54,this.VK_7=55,this.VK_8=56,this.VK_9=57,this.VK_A=65,this.VK_B=66,this.VK_C=67,this.VK_D=68,this.VK_E=69,this.VK_F=70,this.VK_G=71,this.VK_H=72,this.VK_I=73,this.VK_J=74,this.VK_K=75,this.VK_L=76,this.VK_M=77,this.VK_N=78,this.VK_O=79,this.VK_P=80,this.VK_Q=81,this.VK_R=82,this.VK_S=83,this.VK_T=84,this.VK_U=85,this.VK_V=86,this.VK_W=87,this.VK_X=88,this.VK_Y=89,this.VK_Z=90,this.VK_LWIN=91,this.VK_RWIN=92,this.VK_APPS=93,this.VK_NUMPAD0=96,this.VK_NUMPAD1=97,this.VK_NUMPAD2=98,this.VK_NUMPAD3=99,this.VK_NUMPAD4=100,this.VK_NUMPAD5=101,this.VK_NUMPAD6=102,this.VK_NUMPAD7=103,this.VK_NUMPAD8=104,this.VK_NUMPAD9=105,this.VK_MULTIPLY=106,this.VK_ADD=107,this.VK_SEPARATOR=108,this.VK_SUBTRACT=109,this.VK_DECIMAL=110,this.VK_DIVIDE=111,this.VK_F1=112,this.VK_F2=113,this.VK_F3=114,this.VK_F4=115,this.VK_F5=116,this.VK_F6=117,this.VK_F7=118,this.VK_F8=119,this.VK_F9=120,this.VK_F10=121,this.VK_F11=122,this.VK_F12=123,this.VK_NUMLOCK=144,this.VK_SCROLL=145,this.VK_LSHIFT=160,this.VK_RSHIFT=161,this.VK_LCONTROL=162,this.VK_RCONTROL=163,this.VK_LMENU=164,this.VK_RMENU=165,this.VK_OEM_1=186,this.VK_OEM_PLUS=187,this.VK_OEM_COMMA=188,this.VK_OEM_MINUS=189,this.VK_OEM_PERIOD=190,this.VK_OEM_2=191,this.VK_OEM_3=192,this.VK_OEM_4=219,this.VK_OEM_5=220,this.VK_OEM_6=221,this.VK_OEM_7=222,this.VK_OEM_102=226,this.VK_OEM_ATTN=240,this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function MSR(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function ePOSBuilder(){this.message="",this.halftone=0,this.brightness=1,this.force=!1,this.FONT_A="font_a",this.FONT_B="font_b",this.FONT_C="font_c",this.FONT_D="font_d",this.FONT_E="font_e",this.FONT_SPECIAL_A="special_a",this.FONT_SPECIAL_B="special_b",this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.BARCODE_UPC_A="upc_a",this.BARCODE_UPC_E="upc_e",this.BARCODE_EAN13="ean13",this.BARCODE_JAN13="jan13",this.BARCODE_EAN8="ean8",this.BARCODE_JAN8="jan8",this.BARCODE_CODE39="code39",this.BARCODE_ITF="itf",this.BARCODE_CODABAR="codabar",this.BARCODE_CODE93="code93",this.BARCODE_CODE128="code128",this.BARCODE_GS1_128="gs1_128",this.BARCODE_GS1_DATABAR_OMNIDIRECTIONAL="gs1_databar_omnidirectional",this.BARCODE_GS1_DATABAR_TRUNCATED="gs1_databar_truncated",this.BARCODE_GS1_DATABAR_LIMITED="gs1_databar_limited",this.BARCODE_GS1_DATABAR_EXPANDED="gs1_databar_expanded",this.HRI_NONE="none",this.HRI_ABOVE="above",this.HRI_BELOW="below",this.HRI_BOTH="both",this.SYMBOL_PDF417_STANDARD="pdf417_standard",this.SYMBOL_PDF417_TRUNCATED="pdf417_truncated",this.SYMBOL_QRCODE_MODEL_1="qrcode_model_1",this.SYMBOL_QRCODE_MODEL_2="qrcode_model_2",this.SYMBOL_QRCODE_MICRO="qrcode_micro",this.SYMBOL_MAXICODE_MODE_2="maxicode_mode_2",this.SYMBOL_MAXICODE_MODE_3="maxicode_mode_3",this.SYMBOL_MAXICODE_MODE_4="maxicode_mode_4",this.SYMBOL_MAXICODE_MODE_5="maxicode_mode_5",this.SYMBOL_MAXICODE_MODE_6="maxicode_mode_6",this.SYMBOL_GS1_DATABAR_STACKED="gs1_databar_stacked",this.SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL="gs1_databar_stacked_omnidirectional",this.SYMBOL_GS1_DATABAR_EXPANDED_STACKED="gs1_databar_expanded_stacked",this.SYMBOL_AZTECCODE_FULLRANGE="azteccode_fullrange",this.SYMBOL_AZTECCODE_COMPACT="azteccode_compact",this.SYMBOL_DATAMATRIX_SQUARE="datamatrix_square",this.SYMBOL_DATAMATRIX_RECTANGLE_8="datamatrix_rectangle_8",this.SYMBOL_DATAMATRIX_RECTANGLE_12="datamatrix_rectangle_12",this.SYMBOL_DATAMATRIX_RECTANGLE_16="datamatrix_rectangle_16",this.LEVEL_0="level_0",this.LEVEL_1="level_1",this.LEVEL_2="level_2",this.LEVEL_3="level_3",this.LEVEL_4="level_4",this.LEVEL_5="level_5",this.LEVEL_6="level_6",this.LEVEL_7="level_7",this.LEVEL_8="level_8",this.LEVEL_L="level_l",this.LEVEL_M="level_m",this.LEVEL_Q="level_q",this.LEVEL_H="level_h",this.LEVEL_DEFAULT="default",this.LINE_THIN="thin",this.LINE_MEDIUM="medium",this.LINE_THICK="thick",this.LINE_THIN_DOUBLE="thin_double",this.LINE_MEDIUM_DOUBLE="medium_double",this.LINE_THICK_DOUBLE="thick_double",this.DIRECTION_LEFT_TO_RIGHT="left_to_right",this.DIRECTION_BOTTOM_TO_TOP="bottom_to_top",this.DIRECTION_RIGHT_TO_LEFT="right_to_left",this.DIRECTION_TOP_TO_BOTTOM="top_to_bottom",this.CUT_NO_FEED="no_feed",this.CUT_FEED="feed",this.CUT_RESERVE="reserve",this.DRAWER_1="drawer_1",this.DRAWER_2="drawer_2",this.PULSE_100="pulse_100",this.PULSE_200="pulse_200",this.PULSE_300="pulse_300",this.PULSE_400="pulse_400",this.PULSE_500="pulse_500",this.PATTERN_NONE="none",this.PATTERN_0="pattern_0",this.PATTERN_1="pattern_1",this.PATTERN_2="pattern_2",this.PATTERN_3="pattern_3",this.PATTERN_4="pattern_4",this.PATTERN_5="pattern_5",this.PATTERN_6="pattern_6",this.PATTERN_7="pattern_7",this.PATTERN_8="pattern_8",this.PATTERN_9="pattern_9",this.PATTERN_10="pattern_10",this.PATTERN_A="pattern_a",this.PATTERN_B="pattern_b",this.PATTERN_C="pattern_c",this.PATTERN_D="pattern_d",this.PATTERN_E="pattern_e",this.PATTERN_ERROR="error",this.PATTERN_PAPER_END="paper_end",this.LAYOUT_RECEIPT="receipt",this.LAYOUT_RECEIPT_BM="receipt_bm",this.LAYOUT_LABEL="label",this.LAYOUT_LABEL_BM="label_bm",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2}function toHexBinary(e){var t,i=e.length,s=new Array(i);for(t=0;t<i;t++)s[t]=("0"+e.charCodeAt(t).toString(16)).slice(-2);return s.join("")}function toBase64Binary(e){var t,i=e.length,s=new Array((i+2)/3<<2),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=(3-i%3)%3,a=0,o=0;for(e+="\0\0";o<i;)t=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++),s[a++]=n.charAt(t>>18&63),s[a++]=n.charAt(t>>12&63),s[a++]=n.charAt(t>>6&63),s[a++]=n.charAt(63&t);for(;r--;)s[--a]="=";return s.join("")}function toMonoImage(e,t,i){var s,n,r,a,o,l,c,h=String.fromCharCode,d=[[2,130,34,162,10,138,42,170],[194,66,226,98,202,74,234,106],[50,178,18,146,58,186,26,154],[242,114,210,82,250,122,218,90],[14,142,46,174,6,134,38,166],[206,78,238,110,198,70,230,102],[62,190,30,158,54,182,22,150],[254,126,222,94,246,118,214,86]],u=e.data,p=e.width,f=e.height,m=new Array((p+7>>3)*f),v=0,E=0,g=0,_=128,y=new Array;if(1==t)for(l=p;l--;)y.push(0);for(c=0;c<f;c++)for(s=0,n=0,l=0;l<p;)r=7&l,0==t&&(_=d[7&c][r]),a=255*Math.pow(((.29891*u[E++]+.58661*u[E++]+.11448*u[E++])*u[E]/255+255-u[E++])/255,1/i)|0,1==t&&(o=(a+=y[l]+s>>4)-(a<_?0:255),l>0&&(y[l-1]+=o),y[l]=7*o+n,s=5*o,n=3*o),a<_&&(v|=128>>r),l++,7!=r&&l!=p||(m[g++]=h(16==v?32:v),v=0);return m.join("")}function toGrayImage(e,t){var i,s,n,r,a,o=String.fromCharCode,l=[[0,9,2,11],[13,4,15,6],[3,12,1,10],[16,7,14,5]],c=[0,7,13,19,23,27,31,35,40,44,49,52,54,55,57,59,61,62,64,66,67,69,70,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,86,87,88,88,89,90,90,91,91,92,93,93,94,94,95,96,96,97,98,98,99,99,100,101,101,102,102,103,103,104,104,105,105,106,106,107,107,108,108,109,109,110,110,111,111,112,112,112,113,113,114,114,115,115,116,116,117,117,118,118,119,119,120,120,120,121,121,122,122,123,123,123,124,124,125,125,125,126,126,127,127,127,128,128,129,129,130,130,130,131,131,132,132,132,133,133,134,134,135,135,135,136,136,137,137,137,138,138,139,139,139,140,140,141,141,141,142,142,143,143,143,144,144,145,145,146,146,146,147,147,148,148,148,149,149,150,150,150,151,151,152,152,152,153,153,154,154,155,155,155,156,156,157,157,158,158,159,159,160,160,161,161,161,162,162,163,163,164,164,165,165,166,166,166,167,167,168,168,169,169,170,170,171,171,172,173,173,174,175,175,176,177,178,178,179,180,180,181,182,182,183,184,184,185,186,186,187,189,191,193,195,198,200,202,255],h=e.data,d=e.width,u=e.height,p=new Array((d+1>>1)*u),f=0,m=0,v=0;for(a=0;a<u;a++)for(r=0;r<d;)i=1&r,n=(s=c[255*Math.pow(((.29891*h[m++]+.58661*h[m++]+.11448*h[m++])*h[m]/255+255-h[m++])/255,1/t)|0])/17|0,l[3&a][3&r]<s%17&&n++,f|=n<<(1-i<<2),r++,1!=i&&r!=d||(p[v++]=o(f),f=0);return p.join("")}function escapeMarkup(e){var t=/[<>&'"\t\n\r]/g;return t.test(e)&&(e=e.replace(t,(function(e){var t="";switch(e){case"<":t="&lt;";break;case">":t="&gt;";break;case"&":t="&amp;";break;case"'":t="&apos;";break;case'"':t="&quot;";break;case"\t":t="&#9;";break;case"\n":t="&#10;";break;case"\r":t="&#13;"}return t}))),e}function escapeControl(e){var t=/[\\\x00-\x1f\x7f-\xff]/g;return t.test(e)&&(e=e.replace(t,(function(e){return"\\"==e?"\\\\":"\\x"+("0"+e.charCodeAt(0).toString(16)).slice(-2)}))),e}OtherPeripheral.prototype={setConnectionObject:function(e){this.connectionObj=e},send:function(e,t){var i={};for(var s in t)i[s]=t[s];i.type=e;var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(a){}return r},client_onreceive:function(e){try{var t=e;delete t.type,this.onreceive(e.type,t)}catch(i){}},callEvent:function(e,t){var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s}},Keyboard.prototype={setConnectionObject:function(e){this.connectionObj=e},client_onkeypress:function(e){try{if(null==this.onkeypress)return;this.onkeypress(e)}catch(t){}},client_onstring:function(e){try{if(null==this.onstring)return;this.onstring(e)}catch(t){}},setPrefix:function(e){var t={type:"setprefix"};if("object"==typeof e){if(0==e.length)return-1;t.keycodes=e}else{if(null==e||""==e)return-1;t.keycodes=[e]}var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s},callEvent:function(e,t){var i=t;i.type=e;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},MSR.prototype={setConnectionObject:function(e){this.connectionObj=e},client_ondata:function(e){try{if(null==this.ondata)return;this.ondata(e)}catch(t){}},callEvent:function(e,t){var i=t;i.type=e;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},ePOSBuilder.prototype.addText=function(e){return this.message+="<text>"+escapeMarkup(e)+"</text>",this},ePOSBuilder.prototype.addTextLang=function(e){return this.message+='<text lang="'+e+'"/>',this},ePOSBuilder.prototype.addTextAlign=function(e){var t="";return t+=getEnumAttr("align",e,regexAlign),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextRotate=function(e){var t="";return t+=getBoolAttr("rotate",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextLineSpace=function(e){var t="";return t+=getUByteAttr("linespc",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextFont=function(e){var t="";return t+=getEnumAttr("font",e,regexFont),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextSmooth=function(e){var t="";return t+=getBoolAttr("smooth",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextDouble=function(e,t){var i="";return e!==undefined&&(i+=getBoolAttr("dw",e)),t!==undefined&&(i+=getBoolAttr("dh",t)),this.message+="<text"+i+"/>",this},ePOSBuilder.prototype.addTextSize=function(e,t){var i="";return e!==undefined&&(i+=getIntAttr("width",e,1,8)),t!==undefined&&(i+=getIntAttr("height",t,1,8)),this.message+="<text"+i+"/>",this},ePOSBuilder.prototype.addTextStyle=function(e,t,i,s){var n="";return e!==undefined&&(n+=getBoolAttr("reverse",e)),t!==undefined&&(n+=getBoolAttr("ul",t)),i!==undefined&&(n+=getBoolAttr("em",i)),s!==undefined&&(n+=getEnumAttr("color",s,regexColor)),this.message+="<text"+n+"/>",this},ePOSBuilder.prototype.addTextPosition=function(e){var t="";return t+=getUShortAttr("x",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextVPosition=function(e){var t="";return t+=getUShortAttr("y",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addFeedUnit=function(e){var t="";return t+=getUByteAttr("unit",e),this.message+="<feed"+t+"/>",this},ePOSBuilder.prototype.addFeedLine=function(e){var t="";return t+=getUByteAttr("line",e),this.message+="<feed"+t+"/>",this},ePOSBuilder.prototype.addFeed=function(){return this.message+="<feed/>",this},ePOSBuilder.prototype.addFeedPosition=function(e){var t="";return t+=getEnumAttr("pos",e,regexFeed),this.message+="<feed"+t+"/>",this},ePOSBuilder.prototype.addImage=function(e,t,i,s,n,r,a){var o,l,c="",h=this.halftone,d=this.brightness;if(getUShortAttr("x",t),getUShortAttr("y",i),c+=getUShortAttr("width",s),c+=getUShortAttr("height",n),r!==undefined&&(c+=getEnumAttr("color",r,regexColor)),a!==undefined&&(c+=getEnumAttr("mode",a,regexMode)),isNaN(h)||h<0||h>2)throw new Error('Property "halftone" is invalid');if(isNaN(d)||d<.1||d>10)throw new Error('Property "brightness" is invalid');return o=e.getImageData(t,i,s,n),l=a==this.MODE_GRAY16?toGrayImage(o,d):toMonoImage(o,h,d),this.message+="<image"+c+">"+toBase64Binary(l)+"</image>",this},ePOSBuilder.prototype.addLogo=function(e,t){var i="";return i+=getUByteAttr("key1",e),i+=getUByteAttr("key2",t),this.message+="<logo"+i+"/>",this},ePOSBuilder.prototype.addBarcode=function(e,t,i,s,n,r){var a="";return a+=getEnumAttr("type",t,regexBarcode),i!==undefined&&(a+=getEnumAttr("hri",i,regexHri)),s!==undefined&&(a+=getEnumAttr("font",s,regexFont)),n!==undefined&&(a+=getUByteAttr("width",n)),r!==undefined&&(a+=getUByteAttr("height",r)),this.message+="<barcode"+a+">"+escapeControl(escapeMarkup(e))+"</barcode>",this},ePOSBuilder.prototype.addSymbol=function(e,t,i,s,n,r){var a="";return a+=getEnumAttr("type",t,regexSymbol),i!==undefined&&(a+=getEnumIntAttr("level",i,regexLevel,0,255)),s!==undefined&&(a+=getUByteAttr("width",s)),n!==undefined&&(a+=getUByteAttr("height",n)),r!==undefined&&(a+=getUShortAttr("size",r)),this.message+="<symbol"+a+">"+escapeControl(escapeMarkup(e))+"</symbol>",this},ePOSBuilder.prototype.addHLine=function(e,t,i){var s="";return s+=getUShortAttr("x1",e),s+=getUShortAttr("x2",t),i!==undefined&&(s+=getEnumAttr("style",i,regexLine)),this.message+="<hline"+s+"/>",this},ePOSBuilder.prototype.addVLineBegin=function(e,t){var i="";return i+=getUShortAttr("x",e),t!==undefined&&(i+=getEnumAttr("style",t,regexLine)),this.message+="<vline-begin"+i+"/>",this},ePOSBuilder.prototype.addVLineEnd=function(e,t){var i="";return i+=getUShortAttr("x",e),t!==undefined&&(i+=getEnumAttr("style",t,regexLine)),this.message+="<vline-end"+i+"/>",this},ePOSBuilder.prototype.addPageBegin=function(){return this.message+="<page>",this},ePOSBuilder.prototype.addPageEnd=function(){return this.message+="</page>",this},ePOSBuilder.prototype.addPageArea=function(e,t,i,s){var n="";return n+=getUShortAttr("x",e),n+=getUShortAttr("y",t),n+=getUShortAttr("width",i),n+=getUShortAttr("height",s),this.message+="<area"+n+"/>",this},ePOSBuilder.prototype.addPageDirection=function(e){var t="";return t+=getEnumAttr("dir",e,regexDirection),this.message+="<direction"+t+"/>",this},ePOSBuilder.prototype.addPagePosition=function(e,t){var i="";return i+=getUShortAttr("x",e),i+=getUShortAttr("y",t),this.message+="<position"+i+"/>",this},ePOSBuilder.prototype.addPageLine=function(e,t,i,s,n){var r="";return r+=getUShortAttr("x1",e),r+=getUShortAttr("y1",t),r+=getUShortAttr("x2",i),r+=getUShortAttr("y2",s),n!==undefined&&(r+=getEnumAttr("style",n,regexLine)),this.message+="<line"+r+"/>",this},ePOSBuilder.prototype.addPageRectangle=function(e,t,i,s,n){var r="";return r+=getUShortAttr("x1",e),r+=getUShortAttr("y1",t),r+=getUShortAttr("x2",i),r+=getUShortAttr("y2",s),n!==undefined&&(r+=getEnumAttr("style",n,regexLine)),this.message+="<rectangle"+r+"/>",this},ePOSBuilder.prototype.addRotateBegin=function(){return this.message+="<rotate-begin/>",this},ePOSBuilder.prototype.addRotateEnd=function(){return this.message+="<rotate-end/>",this},ePOSBuilder.prototype.addCut=function(e){var t="";return e!==undefined&&(t+=getEnumAttr("type",e,regexCut)),this.message+="<cut"+t+"/>",this},ePOSBuilder.prototype.addPulse=function(e,t){var i="";return e!==undefined&&(i+=getEnumAttr("drawer",e,regexDrawer)),t!==undefined&&(i+=getEnumAttr("time",t,regexPulse)),this.message+="<pulse"+i+"/>",this},ePOSBuilder.prototype.addSound=function(e,t,i){var s="";return e!==undefined&&(s+=getEnumAttr("pattern",e,regexPattern)),t!==undefined&&(s+=getUByteAttr("repeat",t)),i!==undefined&&(s+=getUShortAttr("cycle",i)),this.message+="<sound"+s+"/>",this},ePOSBuilder.prototype.addLayout=function(e,t,i,s,n,r,a){var o="";return o+=getEnumAttr("type",e,regexLayout),t!==undefined&&(o+=getUShortAttr("width",t)),i!==undefined&&(o+=getUShortAttr("height",i)),s!==undefined&&(o+=getShortAttr("margin-top",s)),n!==undefined&&(o+=getShortAttr("margin-bottom",n)),r!==undefined&&(o+=getShortAttr("offset-cut",r)),a!==undefined&&(o+=getShortAttr("offset-label",a)),this.message+="<layout"+o+"/>",this},ePOSBuilder.prototype.addRecovery=function(){return this.message+="<recovery/>",this},ePOSBuilder.prototype.addReset=function(){return this.message+="<reset/>",this},ePOSBuilder.prototype.addCommand=function(e){return this.message+="<command>"+toHexBinary(e)+"</command>",this},ePOSBuilder.prototype.toString=function(){var e="";return this.force&&(e+=getBoolAttr("force",!0)),'<epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"'+e+">"+this.message+"</epos-print>"};var regexFont=/^(font_[a-e]|special_[ab])$/,regexAlign=/^(left|center|right)$/,regexColor=/^(none|color_[1-4])$/,regexFeed=/^(peeling|cutting|current_tof|next_tof)$/,regexMode=/^(mono|gray16)$/,regexBarcode=/^(upc_[ae]|[ej]an13|[ej]an8|code(39|93|128)|itf|codabar|gs1_128|gs1_databar_(omnidirectional|truncated|limited|expanded))$/,regexHri=/^(none|above|below|both)$/,regexSymbol=/^(pdf417_(standard|truncated)|qrcode_(model_[12]|micro)|maxicode_mode_[2-6]|gs1_databar_(stacked(_omnidirectional)?|expanded_stacked)|azteccode_(fullrange|compact)|datamatrix_(square|rectangle_(8|12|16)))$/,regexLevel=/^(level_[0-8lmqh]|default)$/,regexLine=/^(thin|medium|thick)(_double)?$/,regexDirection=/^(left_to_right|bottom_to_top|right_to_left|top_to_bottom)$/,regexCut=/^(no_feed|feed|reserve)$/,regexDrawer=/^drawer_[12]$/,regexPulse=/^pulse_[1-5]00$/,regexPattern=/^(none|pattern_(10|[0-9a-e])|error|paper_end)$/,regexLayout=/^(receipt|label)(_bm)?$/;function getEnumAttr(e,t,i){if(!i.test(t))throw new Error('Parameter "'+e+'" is invalid');return" "+e+'="'+t+'"'}function getBoolAttr(e,t){return" "+e+'="'+!!t+'"'}function getIntAttr(e,t,i,s){if(isNaN(t)||t<i||t>s)throw new Error('Parameter "'+e+'" is invalid');return" "+e+'="'+t+'"'}function getUByteAttr(e,t){return getIntAttr(e,t,0,255)}function getUShortAttr(e,t){return getIntAttr(e,t,0,65535)}function getShortAttr(e,t){return getIntAttr(e,t,-32768,32767)}function getEnumIntAttr(e,t,i,s,n){if(!i.test(t)&&(isNaN(t)||t<s||t>n))throw new Error('Parameter "'+e+'" is invalid');return" "+e+'="'+t+'"'}function ePOSPrint(e){this.address=e,this.enabled=!1,this.interval=3e3,this.timeout=3e5,this.status=0,this.battery=0,this.drawerOpenLevel=0,this.onreceive=null,this.onerror=null,this.onstatuschange=null,this.ononline=null,this.onoffline=null,this.onpoweroff=null,this.oncoverok=null,this.oncoveropen=null,this.onpaperok=null,this.onpaperend=null,this.onpapernearend=null,this.ondrawerclosed=null,this.ondraweropen=null,this.onbatterylow=null,this.onbatteryok=null,this.onbatterystatuschange=null,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_BATTERY_OFFLINE=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_RECEIPT_END=524288,this.ASB_BUZZER=16777216,this.ASB_WAIT_REMOVE_LABEL=16777216,this.ASB_NO_LABEL=67108864,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.DRAWER_OPEN_LEVEL_LOW=0,this.DRAWER_OPEN_LEVEL_HIGH=1}function fireReceiveEvent(e,t,i,s,n,r){"EX_ENPC_TIMEOUT"==i&&(i="ERROR_DEVICE_BUSY"),e.onreceive&&e.onreceive({success:t,code:i,status:s,battery:n,printjobid:r})}function fireStatusEvent(e,t,i){var s,n;0!=t&&t!=e.ASB_NO_RESPONSE||(t=e.status|e.ASB_NO_RESPONSE),s=0==e.status?-1:e.status^t,n=0==e.status?-1:e.battery^i,e.status=t,e.battery=i,s&&e.onstatuschange&&e.onstatuschange(t),n&&e.onbatterystatuschange&&e.onbatterystatuschange(i),s&(e.ASB_NO_RESPONSE|e.ASB_OFF_LINE)&&(t&e.ASB_NO_RESPONSE?e.onpoweroff&&e.onpoweroff():t&e.ASB_OFF_LINE?e.onoffline&&e.onoffline():e.ononline&&e.ononline()),s&e.ASB_COVER_OPEN&&(t&e.ASB_NO_RESPONSE||(t&e.ASB_COVER_OPEN?e.oncoveropen&&e.oncoveropen():e.oncoverok&&e.oncoverok())),s&(e.ASB_RECEIPT_END|e.ASB_RECEIPT_NEAR_END)&&(t&e.ASB_NO_RESPONSE||(t&e.ASB_RECEIPT_END?e.onpaperend&&e.onpaperend():t&e.ASB_RECEIPT_NEAR_END?e.onpapernearend&&e.onpapernearend():e.onpaperok&&e.onpaperok())),s&e.ASB_DRAWER_KICK&&(t&e.ASB_NO_RESPONSE||(t&e.ASB_DRAWER_KICK?(e.drawerOpenLevel==e.DRAWER_OPEN_LEVEL_HIGH?e.ondraweropen&&e.ondraweropen():e.ondrawerclosed&&e.ondrawerclosed(),e.onbatterylow&&e.onbatterylow()):(e.drawerOpenLevel==e.DRAWER_OPEN_LEVEL_HIGH?e.ondrawerclosed&&e.ondrawerclosed():e.ondraweropen&&e.ondraweropen(),e.onbatteryok&&e.onbatteryok())))}function fireErrorEvent(e,t,i){e.onerror&&e.onerror({status:t,responseText:i})}function updateStatus(e){var t=e.interval;e.enabled&&((isNaN(t)||t<1e3)&&(t=3e3),e.intervalid=setTimeout((function(){delete e.intervalid,e.enabled&&e.send()}),t)),delete e.intervalxhr}function CanvasPrint(e){this.address=e,this.mode="mono",this.halftone=0,this.brightness=1,this.align="left",this.color="color_1",this.paper="receipt",this.feed="current_tof",this.cut=!1,this.layout=null,this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2,this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.PAPER_RECEIPT="receipt",this.PAPER_RECEIPT_BM="receipt_bm",this.PAPER_LABEL="label",this.PAPER_LABEL_BM="label_bm",this.connectionObj=null}function POSKeyboard(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function Printer(e,t,i){this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.timeout=1e4}function HybridPrinter(e,t,i){this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.connectionObj=null,this.ReceiptPrinter,this.SlipPrinter,this.EndorsePrinter,this.MICRReader,this.force=!1,this.onstatuschange,this.ononline,this.onoffline,this.onpoweroff,this.oncoveropen,this.onpaperok,this.onpapernearend,this.onpaperend,this.ondrawerclosed,this.ondraweropen,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_RECEIPT_END=524288,this.ASB_TOF_NOPAPER=2097152,this.ASB_BOF_NOPAPER=4194304,this.ASB_SLIP_NO_SELECT=16777216,this.ASB_SLIP_IMPOSSIBLE_PRINT=33554432,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.init(e)}function ReceiptPrinter(e){this.parent=e,this.methodName="",this.deviceID=this.parent.deviceID,this.ePosDev=this.parent.ePosDev,this.connectionObj=null,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="DeviceNotFound",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="EPTR_COVER_OPEN",this.ERROR_TIMEOUT="EX_TIMEOUT",this.ERROR_AUTOMATICAL="EPTR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="EPTR_UNRECOVERABLE",this.ERROR_BADPORT="EX_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="SchemaError",this.EPTR_PRINT_SYSTEM_ERROR="PrintSystemError"}function SlipPrinter(e){this.parent=e,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR"}function EndorsePrinter(e){this.parent=e,this.mode40cpl=!1,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR"}function MICRReader(e){this.parent=e,this.timeout=6e4,this.FONT_E13B="MICR_E13B",this.FONT_CMC7="MICR_CMC7",this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EMICR_ILLEGAL_LENGTH="EMICR_ILLEGAL_LENGTH",this.EMICR_NO_MICR="EMICR_NO_MICR",this.EMICR_RECOGNITION="EMICR_RECOGNITION",this.EMICR_READ="EMICR_READ",this.EMICR_NOISE_DETECTED="EMICR_NOISE_DETECTED",this.EMICR_COVER_OPENED="EMICR_COVER_OPENED",this.EMICR_PAPER_JAM="EMICR_PAPER_JAM"}function HybridPrinter2(e,t,i){this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.connectionObj=null,this.ReceiptPrinter=null,this.SlipPrinter2=null,this.ValidationPrinter=null,this.EndorsePrinter2=null,this.MICRReader2=null,this.currentPrinter=null,this.isMicrMode=!1,this.FONT_A="font_a",this.FONT_B="font_b",this.FONT_C="font_c",this.FONT_D="font_d",this.FONT_E="font_e",this.FONT_SPECIAL_A="special_a",this.FONT_SPECIAL_B="special_b",this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.BARCODE_UPC_A="upc_a",this.BARCODE_UPC_E="upc_e",this.BARCODE_EAN13="ean13",this.BARCODE_JAN13="jan13",this.BARCODE_EAN8="ean8",this.BARCODE_JAN8="jan8",this.BARCODE_CODE39="code39",this.BARCODE_ITF="itf",this.BARCODE_CODABAR="codabar",this.BARCODE_CODE93="code93",this.BARCODE_CODE128="code128",this.BARCODE_GS1_128="gs1_128",this.BARCODE_GS1_DATABAR_OMNIDIRECTIONAL="gs1_databar_omnidirectional",this.BARCODE_GS1_DATABAR_TRUNCATED="gs1_databar_truncated",this.BARCODE_GS1_DATABAR_LIMITED="gs1_databar_limited",this.BARCODE_GS1_DATABAR_EXPANDED="gs1_databar_expanded",this.HRI_NONE="none",this.HRI_ABOVE="above",this.HRI_BELOW="below",this.HRI_BOTH="both",this.SYMBOL_PDF417_STANDARD="pdf417_standard",this.SYMBOL_PDF417_TRUNCATED="pdf417_truncated",this.SYMBOL_QRCODE_MODEL_1="qrcode_model_1",this.SYMBOL_QRCODE_MODEL_2="qrcode_model_2",this.SYMBOL_QRCODE_MICRO="qrcode_micro",this.SYMBOL_MAXICODE_MODE_2="maxicode_mode_2",this.SYMBOL_MAXICODE_MODE_3="maxicode_mode_3",this.SYMBOL_MAXICODE_MODE_4="maxicode_mode_4",this.SYMBOL_MAXICODE_MODE_5="maxicode_mode_5",this.SYMBOL_MAXICODE_MODE_6="maxicode_mode_6",this.SYMBOL_GS1_DATABAR_STACKED="gs1_databar_stacked",this.SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL="gs1_databar_stacked_omnidirectional",this.SYMBOL_GS1_DATABAR_EXPANDED_STACKED="gs1_databar_expanded_stacked",this.SYMBOL_AZTECCODE_FULLRANGE="azteccode_fullrange",this.SYMBOL_AZTECCODE_COMPACT="azteccode_compact",this.SYMBOL_DATAMATRIX_SQUARE="datamatrix_square",this.SYMBOL_DATAMATRIX_RECTANGLE_8="datamatrix_rectangle_8",this.SYMBOL_DATAMATRIX_RECTANGLE_12="datamatrix_rectangle_12",this.SYMBOL_DATAMATRIX_RECTANGLE_16="datamatrix_rectangle_16",this.LEVEL_0="level_0",this.LEVEL_1="level_1",this.LEVEL_2="level_2",this.LEVEL_3="level_3",this.LEVEL_4="level_4",this.LEVEL_5="level_5",this.LEVEL_6="level_6",this.LEVEL_7="level_7",this.LEVEL_8="level_8",this.LEVEL_L="level_l",this.LEVEL_M="level_m",this.LEVEL_Q="level_q",this.LEVEL_H="level_h",this.LEVEL_DEFAULT="default",this.LINE_THIN="thin",this.LINE_MEDIUM="medium",this.LINE_THICK="thick",this.LINE_THIN_DOUBLE="thin_double",this.LINE_MEDIUM_DOUBLE="medium_double",this.LINE_THICK_DOUBLE="thick_double",this.DIRECTION_LEFT_TO_RIGHT="left_to_right",this.DIRECTION_BOTTOM_TO_TOP="bottom_to_top",this.DIRECTION_RIGHT_TO_LEFT="right_to_left",this.DIRECTION_TOP_TO_BOTTOM="top_to_bottom",this.CUT_NO_FEED="no_feed",this.CUT_FEED="feed",this.CUT_RESERVE="reserve",this.DRAWER_1="drawer_1",this.DRAWER_2="drawer_2",this.PULSE_100="pulse_100",this.PULSE_200="pulse_200",this.PULSE_300="pulse_300",this.PULSE_400="pulse_400",this.PULSE_500="pulse_500",this.PATTERN_NONE="none",this.PATTERN_0="pattern_0",this.PATTERN_1="pattern_1",this.PATTERN_2="pattern_2",this.PATTERN_3="pattern_3",this.PATTERN_4="pattern_4",this.PATTERN_5="pattern_5",this.PATTERN_6="pattern_6",this.PATTERN_7="pattern_7",this.PATTERN_8="pattern_8",this.PATTERN_9="pattern_9",this.PATTERN_10="pattern_10",this.PATTERN_A="pattern_a",this.PATTERN_B="pattern_b",this.PATTERN_C="pattern_c",this.PATTERN_D="pattern_d",this.PATTERN_E="pattern_e",this.PATTERN_ERROR="error",this.PATTERN_PAPER_END="paper_end",this.LAYOUT_RECEIPT="receipt",this.LAYOUT_RECEIPT_BM="receipt_bm",this.LAYOUT_LABEL="label",this.LAYOUT_LABEL_BM="label_bm",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_INSERTION_WAIT_PAPER=65536,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_REMOVAL_WAIT_PAPER=262144,this.ASB_RECEIPT_END=524288,this.ASB_TOF_NOPAPER=2097152,this.ASB_BOF_NOPAPER=4194304,this.ASB_SLIP_NO_SELECT=16777216,this.ASB_SLIP_IMPOSSIBLE_PRINT=33554432,this.ASB_EJD_NOPAPER=1073741824,this.ASB_VALIDATION_NO_SELECT=67108864,this.ASB_VALIDATION_IMPOSSIBLE_PRINT=134217728,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.DRAWER_OPEN_LEVEL_LOW=0,this.DRAWER_OPEN_LEVEL_HIGH=1,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_CANCEL_FAILED="ERROR_CANCEL_FAILED",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_AUTOMATICAL="EPTR_AUTOMATICAL",this.EPTR_COVER_OPEN="EPTR_COVER_OPEN",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_UNRECOVERABLE="EPTR_UNRECOVERABLE",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR",this.EPTR_PAPER_PULLED_OUT="EPTR_PAPER_PULLED_OUT",this.EMICR_ILLEGAL_LENGTH="EMICR_ILLEGAL_LENGTH",this.EMICR_NO_MICR="EMICR_NO_MICR",this.EMICR_RECOGNITION="EMICR_RECOGNITION",this.EMICR_READ="EMICR_READ",this.EMICR_NOISE_DETECTED="EMICR_NOISE_DETECTED",this.EMICR_COVER_OPENED="EMICR_COVER_OPENED",this.EMICR_PAPER_JAM="EMICR_PAPER_JAM",this.EMICR_PAPER_PULLED_OUT="EMICR_PAPER_PULLED_OUT",this.DeviceNotFound="DeviceNotFound",this.EX_TIMEOUT="EX_TIMEOUT",this.EX_BADPORT="EX_BADPORT",this.SchemaError="SchemaError",this.PrintSystemError="PrintSystemError",this.PAPERTYPE_RECEIPT=0,this.PAPERTYPE_SLIP=1,this.PAPERTYPE_ENDORSE=2,this.PAPERTYPE_VALIDATION=3,this.FONT_E13B="MICR_E13B",this.FONT_CMC7="MICR_CMC7",this.halftone=this.HALFTONE_DITHER,this.brightness=1,this.force=!1,this.drawerOpenLevel=this.DRAWER_OPEN_LEVEL_LOW,this.paperType=this.PAPERTYPE_RECEIPT,this.interval=3e3,this.waitTime=500,this.enable40cplMode=!0,this.onstatuschange=null,this.ononline=null,this.onoffline=null,this.onpoweroff=null,this.oncoveropen=null,this.onpaperok=null,this.onpapernearend=null,this.onpaperend=null,this.ondrawerclosed=null,this.ondraweropen=null,this.init(e)}function SlipPrinter2(e){this.parent=e}function EndorsePrinter2(e){this.parent=e,this.mode40cpl=!1}function MICRReader2(e){this.parent=e}function ValidationPrinter(e){this.parent=e}function Scanner(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function SimpleSerial(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function GermanyFiscalElement(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null,this.ongfereceive=null,this.onerror=null}function Ofsc(){this.SERVICE_ID="OFSC",this.callback=null,this.connectionObj=null}function CookieIO(){this.KEY="EPSON_EPOSDEVICE_CLIENTID",this.EXPIRES_MINUTES=5}function DeviceObjElement(e,t,i,s){this.deviceId=e,this.isCrypto=t,this.deviceObject=i,this.callback=s}function DeviceObjElementMap(){this.elementList=new Array}function ePOSDevice(){this.DEVICE_TYPE_SCANNER="type_scanner",this.DEVICE_TYPE_KEYBOARD="type_keyboard",this.DEVICE_TYPE_POSKEYBOARD="type_poskeyboard",this.DEVICE_TYPE_MSR="type_msr",this.DEVICE_TYPE_CAT="type_cat",this.DEVICE_TYPE_CASH_CHANGER="type_cash_changer",this.DEVICE_TYPE_PRINTER="type_printer",this.DEVICE_TYPE_DISPLAY="type_display",this.DEVICE_TYPE_SIMPLE_SERIAL="type_simple_serial",this.DEVICE_TYPE_HYBRID_PRINTER="type_hybrid_printer",this.DEVICE_TYPE_HYBRID_PRINTER2="type_hybrid_printer2",this.DEVICE_TYPE_DT="type_dt",this.DEVICE_TYPE_OTHER_PERIPHERAL="type_other_peripheral",this.DEVICE_TYPE_GFE="type_storage",this.RESULT_OK="OK",this.ERROR_SYSTEM="SYSTEM_ERROR",this.ERROR_DEVICE_IN_USE="DEVICE_IN_USE",this.ERROR_DEVICE_OPEN="DEVICE_OPEN_ERROR",this.ERROR_DEVICE_CLOSE="DEVICE_CLOSE_ERROR",this.ERROR_DEVICE_NOT_OPEN="DEVICE_NOT_OPEN",this.ERROR_DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",this.ERROR_PARAMETER="ERROR_PARAMETER",this.IFPORT_EPOSDEVICE=8008,this.IFPORT_EPOSDEVICE_S=8043,this.CONNECT_TIMEOUT=15e3,this.RECONNECT_TIMEOUT=3e3,this.MAX_RECONNECT_RETRY=5,this.socket=null,this.connectionId=null,this.reconnectTimerId=null,this.reconnectTryCount=0,this.admin="",this.location="",this.recievedDataId=0,this.connectStartTime=0,this.waitRetryConnectId=0,this.conectionObj=new Connection,this.commBoxManager=new CommBoxManager,this.commBoxManager.setConnectionObject(this.conectionObj),this.devObjSelector=new DeviceObjectSelector,this.devObjSelector.setConnectionObject(this.conectionObj),this.devObjElmMap=new DeviceObjElementMap,this.ofsc=new Ofsc,this.ofsc.setConnectionObject(this.conectionObj),this.cookieIo=new CookieIO,this.gbox=new SocketGarbageBox,this.eposprint=!1;var e=this;window.onbeforeunload=function(){e.disconnect()},window.onpagehide=function(){e.disconnect()}}function SocketGarbageBox(){this.box=new Array}function Connection(){this.OK="OK",this.SSL_CONNECT_OK="SSL_CONNECT_OK",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_PARAMETER="ERROR_PARAMETER",this.ERROR_SYSTEM="SYSTEM_ERROR",this.socket_p=null,this.address_p="",this.protocol_p="",this.port_p="",this.callback_p=null,this.usableIF_p=0,this.ws_status_p=2,this.dev_status_p=2,this.IF_EPOSDEVICE=1,this.IF_EPOSPRINT=2,this.IF_EPOSDISPLAY=4,this.IF_ALL=7,this.ACCESS_OK="OK",this.ACCESS_ERROR="ERROR",this.ACCESS_TIMEOUT="TIMEOUT",this.ACCESS_NONE="NONE",this.CONNECT=1,this.DISCONNECT=2,this.RECONNECTING=4}function ePosCrypto(){this.pubkey_c="",this.secretKey=""}function ePosDeviceMessage(){this.REQUEST={CONNECT:"connect",PUBKEY:"pubkey",ADMININFO:"admin_info",RECONNECT:"reconnect",DISCONNECT:"disconnect",OPENDEVICE:"open_device",CLOSEDEVICE:"close_device",DEVICEDATA:"device_data",SERVICEDATA:"service_data",ERROR:"error",OPENCOMMBOX:"open_commbox",CLOSECOMMBOX:"close_commbox",COMMDATA:"commbox_data"},this.request=null,this.sequence=0,this.deviceId="",this.serviceId="",this.data={},this.isCrypto="0",this.code="",this.data_id=0}ePOSPrint.prototype=new ePOSBuilder,ePOSPrint.prototype.constructor=ePOSPrint,ePOSPrint.prototype.open=function(){this.enabled||(this.enabled=!0,this.status=0,this.battery=0,this.send())},ePOSPrint.prototype.close=function(){this.enabled=!1,this.intervalid&&(clearTimeout(this.intervalid),delete this.intervalid),this.intervalxhr&&(this.intervalxhr.abort(),delete this.intervalxhr)},ePOSPrint.prototype.getPrintJobStatus=function(e){this.send(e)},ePOSPrint.prototype.send=function(e,t){var i,s,n,r,a,o,l,c,h=arguments.length,d=this,u=d.address;if(/^<epos/.test(e)||(h<2?(t=e,e=(new ePOSBuilder).toString()):(u=e,e=t,t=arguments[2])),i='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',t&&(i+='<s:Header><parameter xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"><printjobid>'+t+"</printjobid></parameter></s:Header>"),i+="<s:Body>"+e+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(s=new XMLHttpRequest))&&window.XDomainRequest?((s=new XDomainRequest).open("POST",u,!0),s.onload=function(){r=s.responseText,/response/.test(r)?(a=/success\s*=\s*"\s*(1|true)\s*"/.test(r),o=r.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",l=r.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,c=r.match(/battery\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,t=r.match(/<printjobid>\s*(\S*)\s*<\/printjobid>/)?RegExp.$1:"",h>0?fireReceiveEvent(d,a,o,l,c,t):fireStatusEvent(d,l,c)):h>0?fireErrorEvent(d,0,s.responseText):fireStatusEvent(d,d.ASB_NO_RESPONSE,0),h<1&&updateStatus(d)},s.onerror=function(){h>0?fireErrorEvent(d,0,s.responseText):(fireStatusEvent(d,d.ASB_NO_RESPONSE,0),updateStatus(d))},s.onprogress=function(){},s.ontimeout=s.onerror,s.timeout=d.timeout,s.send(i)):(s.open("POST",u,!0),s.setRequestHeader("Content-Type","text/xml; charset=utf-8"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),s.setRequestHeader("SOAPAction",'""'),s.onreadystatechange=function(){4==s.readyState&&(clearTimeout(n),200==s.status&&s.responseXML&&(r=s.responseXML.getElementsByTagName("response")).length>0?(a=/^(1|true)$/.test(r[0].getAttribute("success")),o=r[0].hasAttribute("code")?r[0].getAttribute("code"):"",l=r[0].hasAttribute("status")?parseInt(r[0].getAttribute("status")):0,c=r[0].hasAttribute("battery")?parseInt(r[0].getAttribute("battery")):0,r=s.responseXML.getElementsByTagName("printjobid"),t=r.length>0?r[0].textContent:"",h>0?fireReceiveEvent(d,a,o,l,c,t):fireStatusEvent(d,l,c)):h>0?fireErrorEvent(d,s.status,s.responseText):fireStatusEvent(d,d.ASB_NO_RESPONSE,0),h<1&&updateStatus(d))},n=setTimeout((function(){s.abort()}),d.timeout),s.send(i)),h<1&&(d.intervalxhr=s)},CanvasPrint.prototype=new ePOSPrint,CanvasPrint.prototype.constructor=CanvasPrint,CanvasPrint.prototype.setConnectionObject=function(e){this.connectionObj=e},CanvasPrint.prototype.print=function(){var e=arguments.length,t=this.address,i=this.layout,s=this.paper,n=arguments[0],r=this.cut,a=this.mode,o=undefined;switch(e){case 2:o=arguments[1];break;case 4:o=arguments[3];case 3:r=arguments[1],a=arguments[2]}if(void 0===n||null==n)throw new Error("Canvas is not supported");if(!n.getContext)throw new Error("Canvas is not supported");i&&this.addLayout(s,i.width,i.height,i.margin_top,i.margin_bottom,i.offset_cut,i.offset_label),s!=this.PAPER_RECEIPT&&(this.addFeedPosition(this.FEED_CURRENT_TOF),i&&this.addFeedPosition(this.FEED_NEXT_TOF)),this.addTextAlign(this.align),this.addImage(n.getContext("2d"),0,0,n.width,n.height,this.color,a),s!=this.PAPER_RECEIPT?(this.addFeedPosition(this.feed),r&&this.addCut(this.CUT_NO_FEED)):r&&this.addCut(this.CUT_FEED),this.send(t,this.toString(),o)},CanvasPrint.prototype.recover=function(){this.force=!0,this.addRecovery(),this.send(this.address,this.toString())},CanvasPrint.prototype.reset=function(){this.addReset(),this.send(this.address,this.toString())},window.epson||(window.epson={}),window.epson.ePOSBuilder=ePOSBuilder,window.epson.ePOSPrint=ePOSPrint,window.epson.CanvasPrint=CanvasPrint,POSKeyboard.prototype={setConnectionObject:function(e){this.connectionObj=e},client_onkeypress:function(e){try{if(null==this.onkeypress)return;this.onkeypress(e)}catch(t){}},callEvent:function(e,t){var i=t;i.type=e;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},Printer.prototype=new CanvasPrint,Printer.prototype.finalize=function(){this.stopMonitor()},Printer.prototype.toString=function(){return ePOSBuilder.prototype.toString.apply(this)},Printer.prototype.addFeedUnit=function(e){try{ePOSBuilder.prototype.addFeedUnit.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addFeedLine=function(e){try{ePOSBuilder.prototype.addFeedLine.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addFeed=function(e){try{ePOSBuilder.prototype.addFeed.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addFeedPosition=function(e){try{ePOSBuilder.prototype.addFeedPosition.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addText=function(e){try{ePOSBuilder.prototype.addText.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextLang=function(e){try{ePOSBuilder.prototype.addTextLang.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextAlign=function(e){try{ePOSBuilder.prototype.addTextAlign.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextRotate=function(e){try{ePOSBuilder.prototype.addTextRotate.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextLineSpace=function(e){try{ePOSBuilder.prototype.addTextLineSpace.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextFont=function(e){try{ePOSBuilder.prototype.addTextFont.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextSmooth=function(e){try{ePOSBuilder.prototype.addTextSmooth.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextDouble=function(e,t){try{ePOSBuilder.prototype.addTextDouble.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addTextSize=function(e,t){try{ePOSBuilder.prototype.addTextSize.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addTextStyle=function(e,t,i,s){try{ePOSBuilder.prototype.addTextStyle.apply(this,arguments)}catch(n){throw n}return this},Printer.prototype.addTextPosition=function(e){try{ePOSBuilder.prototype.addTextPosition.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextVPosition=function(e){try{ePOSBuilder.prototype.addTextVPosition.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addImage=function(e,t,i,s,n,r,a){try{ePOSBuilder.prototype.addImage.apply(this,arguments)}catch(o){throw o}return this},Printer.prototype.addLogo=function(e,t){try{ePOSBuilder.prototype.addLogo.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addBarcode=function(e,t,i,s,n,r){try{ePOSBuilder.prototype.addBarcode.apply(this,arguments)}catch(a){throw a}return this},Printer.prototype.addSymbol=function(e,t,i,s,n,r){try{ePOSBuilder.prototype.addSymbol.apply(this,arguments)}catch(a){throw a}return this},Printer.prototype.addCommand=function(e){try{ePOSBuilder.prototype.addCommand.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addHLine=function(e,t,i){try{ePOSBuilder.prototype.addHLine.apply(this,arguments)}catch(s){throw s}return this},Printer.prototype.addVLineBegin=function(e,t){try{ePOSBuilder.prototype.addVLineBegin.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addVLineEnd=function(e,t){try{ePOSBuilder.prototype.addVLineEnd.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addPageBegin=function(){try{ePOSBuilder.prototype.addPageBegin.apply(this)}catch(e){throw e}return this},Printer.prototype.addPageEnd=function(){try{ePOSBuilder.prototype.addPageEnd.apply(this)}catch(e){throw e}return this},Printer.prototype.addPageArea=function(e,t,i,s){try{ePOSBuilder.prototype.addPageArea.apply(this,arguments)}catch(n){throw n}return this},Printer.prototype.addPageDirection=function(e){try{ePOSBuilder.prototype.addPageDirection.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addPagePosition=function(e,t){try{ePOSBuilder.prototype.addPagePosition.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addPageLine=function(e,t,i,s,n){try{ePOSBuilder.prototype.addPageLine.apply(this,arguments)}catch(r){throw r}return this},Printer.prototype.addPageRectangle=function(e,t,i,s,n){try{ePOSBuilder.prototype.addPageRectangle.apply(this,arguments)}catch(r){throw r}return this},Printer.prototype.addRotateBegin=function(){try{ePOSBuilder.prototype.addRotateBegin.apply(this)}catch(e){throw e}return this},Printer.prototype.addRotateEnd=function(){try{ePOSBuilder.prototype.addRotateEnd.apply(this)}catch(e){throw e}return this},Printer.prototype.addCut=function(e){try{ePOSBuilder.prototype.addCut.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addPulse=function(e,t){try{ePOSBuilder.prototype.addPulse.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addSound=function(e,t,i){try{ePOSBuilder.prototype.addSound.apply(this,arguments)}catch(s){throw s}return this},Printer.prototype.addLayout=function(e,t,i,s,n,r,a){try{ePOSBuilder.prototype.addLayout.apply(this,arguments)}catch(o){throw o}return this},Printer.prototype.setXmlString=function(e){this.message=e},Printer.prototype.getXmlString=function(){return this.message},Printer.prototype.getPrintJobStatus=function(e){this.setXmlString(""),this.send(e)},Printer.prototype.send=function(e){var t=-1;if(!this.ePosDev.eposprint&&this.connectionObj.isUsableDeviceIF())try{var i={type:"print",timeout:this.timeout,printdata:this.toString()};switch(arguments.length){case 0:i.printdata=this.toString();break;case 1:i.printdata=this.toString(),i.printjobid=e;break;case 2:case 3:i.printdata=arguments[1],i.printjobid=arguments[2]}var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto);try{this.connectionObj.emit(s),s.sequence}catch(f){}this.force=!1,this.setXmlString("")}catch(f){t=-1}else{var n,r,a,o,l,c,h,d,u=this,p=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+this.deviceID+"&timeout="+this.timeout;if(n='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',e&&(n+='<s:Header><parameter xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"><printjobid>'+e+"</printjobid></parameter></s:Header>"),n+="<s:Body>"+this.toString()+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(r=new XMLHttpRequest))&&window.XDomainRequest?((r=new XDomainRequest).open("POST",p,!0),r.onload=function(){o=r.responseText,/response/.test(o)?(l=/success\s*=\s*"\s*(1|true)\s*"/.test(o),c=o.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",h=o.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,d=o.match(/battery\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,e=o.match(/<printjobid>\s*(\S*)\s*<\/printjobid>/)?RegExp.$1:"",u.fireReceiveEvent(l,c,h,d,e,0)):u.fireErrorEvent(0,r.responseText,0)},r.onerror=function(){u.fireErrorEvent(0,r.responseText,0)},r.onprogress=function(){},r.ontimeout=r.onerror,r.timeout=u.timeout,r.send(n)):(r.open("POST",p,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){4==r.readyState&&(clearTimeout(a),200==r.status&&r.responseXML&&(o=r.responseXML.getElementsByTagName("response")).length>0?(l=/^(1|true)$/.test(o[0].getAttribute("success")),c=o[0].hasAttribute("code")?o[0].getAttribute("code"):"",h=o[0].hasAttribute("status")?parseInt(o[0].getAttribute("status")):0,d=o[0].hasAttribute("battery")?parseInt(o[0].getAttribute("battery")):0,o=r.responseXML.getElementsByTagName("printjobid"),e=o.length>0?o[0].textContent:"",u.fireReceiveEvent(l,c,h,d,e,0)):u.fireErrorEvent(r.status,r.responseText,0))},a=setTimeout((function(){r.abort()}),this.timeout),r.send(n)),this.setXmlString(""),t=0}return t},Printer.prototype.client_onxmlresult=function(e,t){if(e){var i=e.resultdata,s=/success\s*=\s*"\s*(1|true)\s*"/.test(i);i.match(/code\s*=\s*"\s*(\S*)\s*"/);var n=RegExp.$1;i.match(/status\s*=\s*"\s*(\d+)\s*"/);var r=parseInt(RegExp.$1);i.match(/battery\s*=\s*"\s*(\d+)\s*"/);var a=parseInt(RegExp.$1);this.fireReceiveEvent(s,n,r,a,e.printjobid,t)}else this.fireErrorEvent(0,this.ASB_NO_RESPONSE,t)},Printer.prototype.startMonitor=function(){var e=!1,t=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+this.deviceID+"&timeout=10000";try{this.enabled||(this.address=t,this.enabled=!0,this.status=this.ASB_DRAWER_KICK,this.sendStartMonitorCommand()),e=!0}catch(i){throw i}return e},Printer.prototype.sendStartMonitorCommand=function(){var e=this,t=this.address,i='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>'+(new ePOSBuilder).toString()+"</s:Body></s:Envelope>",s=this;if(window.XDomainRequest){var n=new XDomainRequest;n.open("POST",t,!0),n.onload=function(){var t=n.responseText;if(/response/.test(t)){/success\s*=\s*"\s*(1|true)\s*"/.test(t);t.match(/code\s*=\s*"\s*(\S*)\s*"/);RegExp.$1;t.match(/status\s*=\s*"\s*(\d+)\s*"/);var i=parseInt(RegExp.$1);t.match(/battery\s*=\s*"\s*(\d+)\s*"/);var r=parseInt(RegExp.$1);e.fireStatusEvent(s,i,r)}else e.fireStatusEvent(s,s.ASB_NO_RESPONSE,0);e.updateStatus(s)},n.onerror=function(){e.fireStatusEvent(s,s.ASB_NO_RESPONSE),e.updateStatus(s)},n.onprogress=function(){},n.ontimeout=n.onerror,n.send(i)}else{if(!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");var r=new XMLHttpRequest;r.open("POST",t,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){if(4==r.readyState){if(200==r.status&&r.responseXML){var t=r.responseXML.getElementsByTagName("response");if(t.length>0){/^(1|true)$/.test(t[0].getAttribute("success")),t[0].getAttribute("code");var i=parseInt(t[0].getAttribute("status")),n=t[0].hasAttribute("battery")?parseInt(t[0].getAttribute("battery")):0;e.fireStatusEvent(s,i,n)}else e.fireStatusEvent(s,s.ASB_NO_RESPONSE,0)}else e.fireStatusEvent(s,s.ASB_NO_RESPONSE,0);e.updateStatus(s)}},r.send(i)}},Printer.prototype.stopMonitor=function(){var e=!1;try{this.enabled=!1,this.timeoutid&&(clearTimeout(this.timeoutid),delete this.timeoutid),e=!0}catch(t){throw t}return e},Printer.prototype.fireReceiveEvent=function(e,t,i,s,n,r){delete this.isPrint,"EX_ENPC_TIMEOUT"==t&&(t="ERROR_DEVICE_BUSY"),this.onreceive&&this.onreceive({success:e,code:t,status:i,battery:s,printjobid:n},r)},Printer.prototype.fireErrorEvent=function(e,t,i){this.onerror&&this.onerror({status:e,responseText:t},i),this.ePosDev.cleanup()},Printer.prototype.fireStatusEvent=function(e,t,i){0!=t&&t!=this.ASB_NO_RESPONSE||(t=this.status|this.ASB_NO_RESPONSE);var s=this.status==this.ASB_DRAWER_KICK?-1:this.status^t,n=0==this.status?-1:this.battery^i;this.status=t,this.battery=i,s&&this.onstatuschange&&this.onstatuschange(t),n&&this.onbatterystatuschange&&this.onbatterystatuschange(i),s&(this.ASB_NO_RESPONSE|this.ASB_OFF_LINE)&&(t&this.ASB_NO_RESPONSE?this.onpoweroff&&this.onpoweroff():t&this.ASB_OFF_LINE?this.onoffline&&this.onoffline():this.ononline&&this.ononline()),s&this.ASB_COVER_OPEN&&(t&this.ASB_NO_RESPONSE||(t&this.ASB_COVER_OPEN?this.oncoveropen&&this.oncoveropen():this.oncoverok&&this.oncoverok())),s&(this.ASB_RECEIPT_END|this.ASB_RECEIPT_NEAR_END)&&(t&this.ASB_NO_RESPONSE||(t&this.ASB_RECEIPT_END?this.onpaperend&&this.onpaperend():t&this.ASB_RECEIPT_NEAR_END?this.onpapernearend&&this.onpapernearend():this.onpaperok&&this.onpaperok())),s&this.ASB_DRAWER_KICK&&(t&this.ASB_NO_RESPONSE||(t&this.ASB_DRAWER_KICK?(this.drawerOpenLevel==this.DRAWER_OPEN_LEVEL_HIGH?this.ondraweropen&&this.ondraweropen():this.ondrawerclosed&&this.ondrawerclosed(),this.onbatterylow&&this.onbatterylow()):(this.drawerOpenLevel==this.DRAWER_OPEN_LEVEL_HIGH?this.ondrawerclosed&&this.ondrawerclosed():this.ondraweropen&&this.ondraweropen(),this.onbatteryok&&this.onbatteryok())))},Printer.prototype.updateStatus=function(){var e=this;if(this.enabled){var t=this.interval;(isNaN(t)||t<1e3)&&(t=3e3),this.timeoutid=setTimeout((function(){delete e.timeoutid,e.enabled&&e.sendStartMonitorCommand()}),t)}},Printer.prototype.print=function(e,t,i,s){try{CanvasPrint.prototype.print.apply(this,arguments)}catch(n){throw n}},Printer.prototype.reset=function(){try{CanvasPrint.prototype.reset.apply(this,arguments)}catch(e){throw e}},Printer.prototype.recover=function(){try{CanvasPrint.prototype.recover.apply(this,arguments)}catch(e){throw e}},HybridPrinter.prototype={init:function(e){var t=this;t.deviceID=e,t.ReceiptPrinter=new ReceiptPrinter(this),t.SlipPrinter=new SlipPrinter(this),t.EndorsePrinter=new EndorsePrinter(this),t.MICRReader=new MICRReader(this),t.ReceiptPrinter.onstatuschange=function(e){null!=t.onstatuschange&&t.onstatuschange(e)},t.ReceiptPrinter.ononline=function(){null!=t.ononline&&t.ononline()},t.ReceiptPrinter.onoffline=function(){null!=t.onoffline&&t.onoffline()},t.ReceiptPrinter.onpoweroff=function(){null!=t.onpoweroff&&t.onpoweroff()},t.ReceiptPrinter.oncoveropen=function(){null!=t.oncoveropen&&t.oncoveropen()},t.ReceiptPrinter.onpaperok=function(){null!=t.onpaperok&&t.onpaperok()},t.ReceiptPrinter.onpapernearend=function(){null!=t.onpapernearend&&t.onpapernearend()},t.ReceiptPrinter.onpaperend=function(){null!=t.onpaperend&&t.onpaperend()},t.ReceiptPrinter.ondrawerclosed=function(){null!=t.ondrawerclosed&&t.ondrawerclosed()},t.ReceiptPrinter.ondraweropen=function(){null!=t.ondraweropen&&t.ondraweropen()}},setConnectionObject:function(e){this.connectionObj=e,this.ReceiptPrinter.setConnectionObject(this.connectionObj)},lock:function(){return this.send({type:"lock"})},unlock:function(){return this.send({type:"unlock"})},eject:function(){return this.send({type:"eject"})},recover:function(){return this.ReceiptPrinter.recover()},reset:function(){this.ReceiptPrinter.force=this.force;var e=this.ReceiptPrinter.reset();return this.force=!1,e},startMonitor:function(){return this.ReceiptPrinter.startMonitor()},stopMonitor:function(){return this.ReceiptPrinter.stopMonitor()},client_onreceive:function(e,t){switch(e.eventtype){case"slipprint":case"slipcancel":this.SlipPrinter.fireOnReceive(e,t);break;case"endorseprint":case"endorsecancel":this.EndorsePrinter.fireOnReceive(e,t);break;case"micrread":case"micrcleaning":case"micrcancel":this.MICRReader.fireOnReceive(e,t);break;case"print":var i=e;i.eventtype=this.ReceiptPrinter.methodName,this.fireOnReceive(i,t);break;default:this.fireOnReceive(e,t)}},client_onxmlresult:function(e,t){this.ReceiptPrinter.fireOnReceive(e,t)},fireOnReceive:function(e,t){null!=this.onreceive&&null!=e&&this.onreceive({eventtype:e.eventtype,success:e.success,code:e.code,status:e.status},t)},callEvent:function(e,t){var i=t;return i.type=e,this.send(i)},send:function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(s){}return i}},ReceiptPrinter.prototype.setConnectionObject=function(e){this.connectionObj=e},ReceiptPrinter.prototype=new Printer,ReceiptPrinter.prototype.send=function(){return""==this.methodName&&(this.methodName="send"),Printer.prototype.send.apply(this,arguments)},ReceiptPrinter.prototype.print=function(e,t,i){return this.methodName="print",Printer.prototype.print.apply(this,arguments)},ReceiptPrinter.prototype.recover=function(){return this.methodName="recover",Printer.prototype.recover.apply(this,arguments)},ReceiptPrinter.prototype.reset=function(){return this.methodName="reset",Printer.prototype.reset.apply(this,arguments)},ReceiptPrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive){var i=this.methodName,s="false",n="",r=this.ASB_NO_RESPONSE;if(e){var a=e.resultdata;s=/success\s*=\s*"\s*(1|true)\s*"/.test(a),a.match(/code\s*=\s*"\s*(\S*)\s*"/),""==(n=RegExp.$1)&&(n=s?"SUCCESS":"ERROR_DEVICE_NOT_FOUND"),a.match(/status\s*=\s*"\s*(\d+)\s*"/),r=parseInt(RegExp.$1)}"EX_ENPC_TIMEOUT"==n&&(n="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:s,code:n,status:r},t),this.methodName=""}},SlipPrinter.prototype=new ePOSBuilder,SlipPrinter.prototype.timeout=6e4,SlipPrinter.prototype.send=function(){var e=arguments.length<1?this.toString():arguments[1],t={type:"slipprint",timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},SlipPrinter.prototype.setXmlString=function(e){this.message=e},SlipPrinter.prototype.getXmlString=function(){return this.message},SlipPrinter.prototype.cancel=function(){return this.parent.send({type:"slipcancel"})},SlipPrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"slipprint":i="send";break;case"slipcancel":i="cancel"}var s=e.code;"EX_ENPC_TIMEOUT"==s&&(s="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:e.success,code:s,status:e.status},t)}},EndorsePrinter.prototype=new ePOSBuilder,EndorsePrinter.prototype.timeout=6e4,EndorsePrinter.prototype.send=function(){var e=arguments.length<1?this.toString():arguments[1],t={type:"endorseprint",is40cplmode:this.mode40cpl,timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},EndorsePrinter.prototype.setXmlString=function(e){this.message=e},EndorsePrinter.prototype.getXmlString=function(){return this.message},EndorsePrinter.prototype.cancel=function(){return this.parent.send({type:"endorsecancel"})},EndorsePrinter.prototype.enable40cplmode=function(e){this.mode40cpl=e},EndorsePrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"endorseprint":i="send";break;case"endorsecancel":i="cancel"}var s=e.code;"EX_ENPC_TIMEOUT"==s&&(s="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:e.success,code:s,status:e.status},t)}},MICRReader.prototype.read=function(e,t){var i={type:"micrread",ignoreerror:e,font:t,timeout:this.timeout};return this.parent.send(i)},MICRReader.prototype.cleaning=function(){var e={type:"micrcleaning",timeout:this.timeout};return this.parent.send(e)},MICRReader.prototype.cancel=function(){return this.parent.send({type:"micrcancel"})},MICRReader.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"micrread":i="read";break;case"micrcleaning":i="cleaning";break;case"micrcancel":i="cancel"}var s=e.code;"EX_ENPC_TIMEOUT"==s&&(s="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:e.success,code:s,status:e.status,data:e.data},t)}},HybridPrinter2.prototype.init=function(e){this.deviceID=e,this.ReceiptPrinter=new ReceiptPrinter(this),this.SlipPrinter2=new SlipPrinter2(this),this.ValidationPrinter=new ValidationPrinter(this),this.EndorsePrinter2=new EndorsePrinter2(this),this.MICRReader2=new MICRReader2(this),this.currentPrinter=this.ReceiptPrinter,this.ReceiptPrinter.onstatuschange=function(e){null!=this.parent.onstatuschange&&this.parent.onstatuschange(e)},this.ReceiptPrinter.ononline=function(){null!=this.parent.ononline&&this.parent.ononline()},this.ReceiptPrinter.onoffline=function(){null!=this.parent.onoffline&&this.parent.onoffline()},this.ReceiptPrinter.onpoweroff=function(){null!=this.parent.onpoweroff&&this.parent.onpoweroff()},this.ReceiptPrinter.oncoveropen=function(){null!=this.parent.oncoveropen&&this.parent.oncoveropen()},this.ReceiptPrinter.oncoverok=function(){null!=this.parent.oncoverok&&this.parent.oncoverok()},this.ReceiptPrinter.onpaperok=function(){null!=this.parent.onpaperok&&this.parent.onpaperok()},this.ReceiptPrinter.onpapernearend=function(){null!=this.parent.onpapernearend&&this.parent.onpapernearend()},this.ReceiptPrinter.onpaperend=function(){null!=this.parent.onpaperend&&this.parent.onpaperend()},this.ReceiptPrinter.ondrawerclosed=function(){null!=this.parent.ondrawerclosed&&this.parent.ondrawerclosed()},this.ReceiptPrinter.ondraweropen=function(){this.parent.ondraweropen!=undefined&&this.parent.ondraweropen()},this.ReceiptPrinter.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.SlipPrinter2.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.EndorsePrinter2.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.ValidationPrinter.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.MICRReader2.onreceive=function(e,t){this.parent.fireOnReceive(e,t)}},HybridPrinter2.prototype.setConnectionObject=function(e){this.connectionObj=e,this.ReceiptPrinter.setConnectionObject(this.connectionObj)},HybridPrinter2.prototype.isValidFunction=function(e,t){var i=!1,s=0;if(0!=t.length)for(s=0;s<t.length;s++)if(e==t[s]){i=!0;break}return i},HybridPrinter2.prototype.addText=function(e){return this.currentPrinter.addText.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextLang=function(e){return this.currentPrinter.addTextLang.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextAlign=function(e){return this.currentPrinter.addTextAlign.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextRotate=function(e){return this.currentPrinter.addTextRotate.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextLineSpace=function(e){return this.currentPrinter.addTextLineSpace.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextFont=function(e){return this.currentPrinter.addTextFont.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextSmooth=function(e){return this.currentPrinter.addTextSmooth.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextDouble=function(e,t){return this.currentPrinter.addTextDouble.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextSize=function(e,t){return this.currentPrinter.addTextSize.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextStyle=function(e,t,i,s){return this.currentPrinter.addTextStyle.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextPosition=function(e){return this.currentPrinter.addTextPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextVPosition=function(e){return this.currentPrinter.addTextVPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedUnit=function(e){return this.currentPrinter.addFeedUnit.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedLine=function(e){return this.currentPrinter.addFeedLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeed=function(){return this.currentPrinter.addFeed.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedPosition=function(e){return this.currentPrinter.addFeedPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addImage=function(e,t,i,s,n,r,a){return this.currentPrinter.halftone=this.halftone,this.currentPrinter.brightness=this.brightness,this.currentPrinter.addImage.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addLogo=function(e,t){return this.currentPrinter.addLogo.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addBarcode=function(e,t,i,s,n,r){return this.currentPrinter.addBarcode.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addSymbol=function(e,t,i,s,n,r){return this.currentPrinter.addSymbol.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addHLine=function(e,t,i){return this.currentPrinter.addHLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addVLineBegin=function(e,t){return this.currentPrinter.addVLineBegin.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addVLineEnd=function(e,t){return this.currentPrinter.addVLineEnd.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageBegin=function(){return this.currentPrinter.addPageBegin.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageEnd=function(){return this.currentPrinter.addPageEnd.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageArea=function(e,t,i,s){return this.currentPrinter.addPageArea.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageDirection=function(e){return this.currentPrinter.addPageDirection.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPagePosition=function(e,t){return this.currentPrinter.addPagePosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageLine=function(e,t,i,s,n){return this.currentPrinter.addPageLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageRectangle=function(e,t,i,s,n){return this.currentPrinter.addPageRectangle.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addCut=function(e){return this.ReceiptPrinter.addCut.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addPulse=function(e,t){return this.currentPrinter.addPulse.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addSound=function(e,t,i){return this.currentPrinter.addSound.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addLayout=function(e,t,i,s,n,r,a){return this.ReceiptPrinter.addLayout.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addRecovery=function(){return this.ReceiptPrinter.addRecovery.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addReset=function(){return this.ReceiptPrinter.addReset.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addCommand=function(e){return this.currentPrinter.addCommand.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.recover=function(){return this.ReceiptPrinter.recover.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.reset=function(){this.ReceiptPrinter.force=this.force;var e=this.ReceiptPrinter.reset.apply(this.ReceiptPrinter,arguments);return this.force=!1,e},HybridPrinter2.prototype.setMessage=function(e){this.currentPrinter.message=e},HybridPrinter2.prototype.getMessage=function(){return this.currentPrinter.message},HybridPrinter2.prototype.startMonitor=function(){var e=this.interval;return("number"!=typeof this.interval||e<1e3||6e3<e)&&(e=3e3),this.ReceiptPrinter.interval=e,this.ReceiptPrinter.startMonitor()},HybridPrinter2.prototype.stopMonitor=function(){return this.ReceiptPrinter.stopMonitor()},HybridPrinter2.prototype.lock=function(){return this.send({type:"lock"})},HybridPrinter2.prototype.unlock=function(){return this.send({type:"unlock"})},HybridPrinter2.prototype.selectPaperType=function(e){if(1!=this.isValidFunction(e,[this.PAPERTYPE_RECEIPT,this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');switch(e){case this.PAPERTYPE_RECEIPT:this.currentPrinter=this.ReceiptPrinter;break;case this.PAPERTYPE_SLIP:this.currentPrinter=this.SlipPrinter2;break;case this.PAPERTYPE_ENDORSE:this.currentPrinter=this.EndorsePrinter2;break;case this.PAPERTYPE_VALIDATION:this.currentPrinter=this.ValidationPrinter;break;default:this.currentPrinter=this.ReceiptPrinter}return this.paperType=e,this},HybridPrinter2.prototype.waitInsertion=function(e){if(1!=this.isValidFunction(this.paperType,[this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');this.currentPrinter.waitTime=this.waitTime;var t=this.currentPrinter.waitInsertion.apply(this.currentPrinter,arguments);return t},HybridPrinter2.prototype.cancelInsertion=function(){var e=null;if(this.isMicrMode)e=this.MICRReader2.cancel.apply(this.MICRReader2,arguments);else{if(1!=this.isValidFunction(this.paperType,[this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');e=this.currentPrinter.cancel.apply(this.currentPrinter,arguments)}return e},HybridPrinter2.prototype.ejectPaper=function(){return this.send({type:"eject"})},HybridPrinter2.prototype.sendData=function(e){this.currentPrinter.isCrypto=this.isCrypto,this.currentPrinter.timeout="number"!=typeof e||e<1||e>1e6?0:e,this.EndorsePrinter2.enable40cplmode(this.enable40cplMode),this.currentPrinter.force=this.force;var t=this.currentPrinter.send();return this.force=!1,t},HybridPrinter2.prototype.print=function(e,t,i,s){return this.ReceiptPrinter.timeout="number"!=typeof s||s<1||s>1e6?0:s,this.ReceiptPrinter.print.apply(this.ReceiptPrinter,[e,t,i]),this},HybridPrinter2.prototype.readMicrData=function(e,t,i){var s=e,n=t;return void 0===e&&(s=!0),void 0===t&&(n=this.FONT_E13B),this.MICRReader2.timeout=i,this.MICRReader2.waitTime=this.waitTime,this.MICRReader2.read.apply(this.MICRReader2,[s,n]),this.isMicrMode=!0,this},HybridPrinter2.prototype.cleanMicrReader=function(e){return this.MICRReader2.timeout=e,this.MICRReader2.cleaning.apply(this.MICRReader2,[]),this.isMicrMode=!0,this},HybridPrinter2.prototype.client_onreceive=function(e,t){switch(e.eventtype){case"slipprint2":case"slipcancel":case"slipwaitinsertion":this.SlipPrinter2.fireOnReceive(e,t);break;case"endorseprint2":case"endorsecancel":case"endorsewaitinsertion":this.EndorsePrinter2.fireOnReceive(e,t);break;case"validationprint2":case"validationcancel":case"validationwaitinsertion":this.ValidationPrinter.fireOnReceive(e,t);break;case"micrread":case"micrcleaning":case"micrcancel":this.MICRReader2.fireOnReceive(e,t);break;case"print":var i=e;i.eventtype=this.ReceiptPrinter.methodName,this.fireOnReceive(i,t);break;default:this.fireOnReceive(e,t)}},HybridPrinter2.prototype.client_onxmlresult=function(e,t){this.ReceiptPrinter.fireOnReceive(e,t)},HybridPrinter2.prototype.fireOnReceive=function(e,t){if(typeof this.onreceive!=undefined&&null!=e){var i=e.eventtype,s=e.success,n=e.code,r=e.status,a=e.data;switch(e.eventtype){case"send":i="sendData",n==this.SUCCESS&&(this.isMicrMode=!1);break;case"waitinsertion":i="waitInsertion",n==this.SUCCESS&&(this.isMicrMode=!1);break;case"read":i="readMicrData",n==this.SUCCESS&&(this.isMicrMode=!0);break;case"cleaning":i="cleanMicrReader",n==this.SUCCESS&&(this.isMicrMode=!0);break;case"cancel":i="cancelInsertion";break;case"eject":i="ejectPaper",n==this.SUCCESS&&(this.isMicrMode=!1)}switch(n){case"EX_ENPC_TIMEOUT":n="ERROR_DEVICE_BUSY";break;case"CANCEL":this.isMicrMode=!1}this.onreceive({method:i,success:s,code:n,status:r,data:a},t)}},HybridPrinter2.prototype.callEvent=function(e,t){var i=t;return i.type=e,this.send(i)},HybridPrinter2.prototype.send=function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(s){}return i},SlipPrinter2.prototype=new SlipPrinter,SlipPrinter2.prototype.timeout=6e4,SlipPrinter2.prototype.waitTime=500,SlipPrinter2.prototype.send=function(){var e=null;e=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>1e6)&&(this.timeout=1e4);var t={type:"slipprint2",timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},SlipPrinter2.prototype.setXmlString=function(e){this.message=e},SlipPrinter2.prototype.getXmlString=function(){return this.message},SlipPrinter2.prototype.waitInsertion=function(e){this.timeout="number"!=typeof e||e<5e3||e>9e5?6e4:e;var t=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var i={type:"slipwaitinsertion",timeout:this.timeout,waittime:t};return this.parent.send(i)},SlipPrinter2.prototype.cancel=function(){return this.parent.send({type:"slipcancel"})},SlipPrinter2.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"slipprint2":i="send";break;case"slipcancel":i="cancel";break;case"slipwaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:e.success,code:e.code,status:e.status},t)}},EndorsePrinter2.prototype=new EndorsePrinter,EndorsePrinter2.prototype.timeout=6e4,EndorsePrinter2.prototype.waitTime=500,EndorsePrinter2.prototype.send=function(){var e=null;e=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<6e4||this.timeout>9e5)&&(this.timeout=6e4);var t={type:"endorseprint2",is40cplmode:this.mode40cpl,timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},EndorsePrinter2.prototype.setXmlString=function(e){this.message=e},EndorsePrinter2.prototype.getXmlString=function(){return this.message},EndorsePrinter2.prototype.waitInsertion=function(e){this.timeout="number"!=typeof e||e<5e3||e>9e5?6e4:e;var t=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var i={type:"endorsewaitinsertion",timeout:this.timeout,waittime:t};return this.parent.send(i)},EndorsePrinter2.prototype.cancel=function(){return this.parent.send({type:"endorsecancel"})},EndorsePrinter2.prototype.enable40cplmode=function(e){this.mode40cpl=e},EndorsePrinter2.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"endorseprint2":i="send";break;case"endorsecancel":i="cancel";break;case"endorsewaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:e.success,code:e.code,status:e.status},t)}},MICRReader2.prototype=new MICRReader,MICRReader2.prototype.waitTime=500,MICRReader2.prototype.read=function(e,t){("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>9e5)&&(this.timeout=6e4);var i=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(i=500);var s={type:"micrread",ignoreerror:e,font:t,timeout:this.timeout,waittime:i};return this.parent.send(s)},MICRReader2.prototype.cleaning=function(){var e=this.waitTime;this.timeout=6e4,("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(e=500);var t={type:"micrcleaning",timeout:this.timeout,waittime:e};return this.parent.send(t)},ValidationPrinter.prototype=new ePOSBuilder,ValidationPrinter.prototype.timeout=1e4,ValidationPrinter.prototype.waitTime=500,ValidationPrinter.prototype.send=function(){var e=null;e=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>1e6)&&(this.timeout=1e4);var t={type:"validationprint2",timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},ValidationPrinter.prototype.setXmlString=function(e){this.message=e},ValidationPrinter.prototype.getXmlString=function(){return this.message},ValidationPrinter.prototype.waitInsertion=function(e){this.timeout="number"!=typeof e||e<5e3||e>9e5?6e4:e;var t=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var i={type:"validationwaitinsertion",timeout:this.timeout,waittime:t};return this.parent.send(i)},ValidationPrinter.prototype.cancel=function(){return this.parent.send({type:"validationcancel"})},ValidationPrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"validationprint2":i="send";break;case"validationcancel":i="cancel";break;case"validationwaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:e.success,code:e.code,status:e.status},t)}},Scanner.prototype={setConnectionObject:function(e){this.connectionObj=e},client_ondata:function(e){try{if(null==this.ondata)return;this.ondata(e)}catch(t){}},client_onbinarydata:function(e){try{if(null==this.onbinarydata)return;this.onbinarydata(e)}catch(t){}},client_setbinarymode:function(e){try{if(null==this.onbinarymode)return;this.onbinarymode(e)}catch(t){}},setBinaryMode:function(e){var t={type:"setbinarymode",binarymode:1==e?"true":"false"},i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s},callEvent:function(e,t){var i=t;i.type=e;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},SimpleSerial.prototype={setConnectionObject:function(e){this.connectionObj=e},sendCommand:function(e){var t={type:"sendcommand",command:toHexBinary(e)},i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s},client_oncommandreply:function(e){try{if(null==this.oncommandreply)return;var t=e.data;t=t.replace(/[0-9a-fA-F]{2}/g,(function(e){var t=parseInt(e,16);return String.fromCharCode(t)})),e.data=t,this.oncommandreply(e)}catch(i){}}},GermanyFiscalElement.prototype={setConnectionObject:function(e){this.connectionObj=e},operate:function(e,t){var i={type:"operate",timeout:t,requestdata:e},s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){throw r}return n},client_operateresult:function(e){if(null!=this.ongfereceive){if("Base64-encoded"==e.resultformat)try{e.resultdata=window.atob(e.resultdata);for(var t=new Uint8Array(e.resultdata.length),i=0;i<e.resultdata.length;i++)t[i]=e.resultdata.charCodeAt(i);var s=new Zlib.Inflate(t).decompress();e.resultdata=[];for(var n=0;n<s.length;n++)e.resultdata=e.resultdata+String.fromCharCode(s[n])}catch(r){return void(this.onerror&&this.onerror(r))}try{this.ongfereceive(this.getResultObject(e))}catch(r){this.onerror&&this.onerror(r)}}},getResultObject:function(e){return{success:e.success,code:e.code,resultdata:e.resultdata}},callEvent:function(e,t){var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s}},Ofsc.prototype={setConnectionObject:function(e){this.connectionObj=e},send:function(e,t,i,s){this.callback=s;try{if(this.connectionObj.isUsableDeviceIF()){var n={type:"print",timeout:t,printdata:e},r=MessageFactory.getServiceMessage(this.SERVICE_ID,i,n);this.connectionObj.emit(r)}}catch(a){return}},notify:function(e){var t=null;t="1"==e.isCrypto?MessageFactory.decrypt(e.data):e.data,null!=this.callback&&this.callback(t.resultdata)},onxmlresult:function(e){null!=this.callback&&this.callback(e)}},CookieIO.prototype={writeId:function(e){var t=location.pathname;"/"==t.slice(-1)&&(t+="index.html");var i=location.hostname,s=this.getExpiredDate();document.cookie=this.KEY+"_"+i+t+"="+escape(e)+"; expires="+s},readId:function(){var e="",t=document.cookie+";",i=location.pathname;"/"==i.slice(-1)&&(i+="index.html");var s=location.hostname,n=this.KEY+"_"+s+i+"=",r=t.indexOf(n);if(-1!=r){r+=n.length;var a=t.indexOf(";",r);e=unescape(t.substring(r,a))}return e},getExpiredDate:function(){var e=new Date,t=e.getTime();return e.setTime(t+6e4*this.EXPIRE_MINUTES),e.toUTCString()}},DeviceObjElementMap.prototype={add:function(e){this.elementList.push(e)},get:function(e){for(var t=null,i=0;i<this.elementList.length;i++)if(this.elementList[i].deviceId==e){t=this.elementList[i];break}return t},getByObj:function(e){for(var t=null,i=0;i<this.elementList.length;i++)if(this.elementList[i].deviceObject==e){t=this.elementList[i];break}return t},remove:function(e){for(var t=0;t<this.elementList.length;t++)if(this.elementList[t].deviceId==e){this.elementList.splice(t,1);break}},removeAll:function(){this.elementList=[]},getElementList:function(){return this.elementList}},ePOSDevice.prototype={connect:function(e,t,i,s){this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.DISCONNECT&&this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.DISCONNECT||this.disconnect(),this.connectStartTime=(new Date).getTime();var n=t==this.IFPORT_EPOSDEVICE?"http":"https";this.conectionObj.setAddress(n,e,t),this.conectionObj.registCallback(i),arguments.length>=4?this.eposprint=s.eposprint:this.eposprint=!1;var r=this;if(this.eposprint){var a=this.conectionObj;this.conectionObj.probeWebServiceIF((function(e){var t=r.ERROR_PARAMETER;a.isUsablePrintIF()&&(t=r.RESULT_OK),i(t)}))}else this.connectBySocketIo(this.CONNECT_TIMEOUT,n)},isConnected:function(){var e=!1,t=!1;switch(this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)){case this.conectionObj.CONNECT:case this.conectionObj.RECONNECTING:e=!0;break;case this.conectionObj.DISCONNECT:}return this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.CONNECT&&(t=!0),e|t},disconnect:function(){var e=MessageFactory.getDisconnectMessage(this.connectionId);this.conectionObj.emit(e),this.cleanup()},createDevice:function(e,t,i,s){try{if(!this.isConnected())throw new Error(this.ERROR_SYSTEM);if(null!=this.devObjElmMap.get(e))throw new Error(this.ERROR_DEVICE_IN_USE);if(!this.devObjSelector.isSelectable(t))throw new Error(this.ERROR_DEVICE_NOT_FOUND);var n=!1,r=!1;"boolean"==typeof i?n=i:("boolean"==typeof i.crypto&&(n=i.crypto),"boolean"==typeof i.buffer&&(r=i.buffer)),t==this.DEVICE_TYPE_DT&&(n=!0,e="local_dt");var a=this.devObjSelector.select(e,t,i.driver,n,this);a.setConnectionObject(this.conectionObj);var o=new DeviceObjElement(e,n,a,s);if(this.devObjElmMap.add(o),this.conectionObj.isUsableDeviceIF()){var l=MessageFactory.getOpenDeviceMessage(e,t,n,r);this.conectionObj.emit(l)}else{var c=this;this.checkEposPrintService(e,t,(function(e){e==c.RESULT_OK?s(a,c.RESULT_OK):s(null,c.ERROR_DEVICE_NOT_FOUND)}))}}catch(d){var h=d.message;null!=h&&""!=h||(h=this.ERROR_DEVICE_OPEN),null!=s&&s(null,h)}},deleteDevice:function(e,t){try{var i=this.devObjElmMap.getByObj(e);if(null==i)throw new Error(this.ERROR_DEVICE_NOT_OPEN);if(this.conectionObj.isUsableDeviceIF()){i.callback=t;var s=MessageFactory.getCloseDeviceMessage(i.deviceId);this.conectionObj.emit(s)}else{try{e.finalize()}catch(r){}this.devObjElmMap.remove(i.deviceId),t(this.RESULT_OK)}}catch(r){var n=r.message;null!=n&&""!=n||(n=this.ERROR_DEVICE_CLOSE),null!=t&&t(n)}},getAdmin:function(){return this.admin},getLocation:function(){return this.location},sendOfscXml:function(e,t,i,s){this.ofsc.send(e,t,i,s)},getCommBoxManager:function(){return this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)!=this.conectionObj.CONNECT?null:this.commBoxManager},cleanup:function(){0!=this.waitRetryConnectId&&(clearTimeout(this.waitRetryConnectId),this.waitRetryConnectId=0),this.connectStartTime=0,this.gbox.stock(this.socket),this.gbox.dispose();var e=this.devObjElmMap.getElementList();e.forEach((function(e){try{e.deviceObject.finalize()}catch(t){}})),e=null,this.devObjElmMap.removeAll(),null==this.ondisconnect||this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.DISCONNECT&&this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.DISCONNECT||this.ondisconnect(),this.cookieIo.writeId(""),this.conectionObj.changeStatus(this.conectionObj.IF_ALL,this.conectionObj.DISCONNECT),this.socket=null,this.conectionObj.setSocket(null),this.connectionId=null,this.conectionObj.setAddress("","",""),null!=this.reconnectTimerId&&clearInterval(this.reconnectTimerId),this.reconnectTimerId=null,this.reconnectTryCount=0,this.admin="",this.location="",this.recievedDataId=0,this.eposprint=!1},connectBySocketIo:function(e){var t=this.conectionObj,i=t.getSocketIoURL();this.socket=io.connect(i,{reconnect:!1,"connect timeout":e,"force new connection":!0}),this.conectionObj.setSocket(this.socket);var s=this;this.socket.on("connect",(function(e){try{s.gbox.dispose()}catch(t){}})),this.socket.on("close",(function(){t.changeStatus(t.IF_EPOSDEVICE,tselfofProb.DISCONNECT)})),this.socket.on("disconnect",(function(e){try{if(t.status(t.IF_EPOSDEVICE)==t.RECONNECTING)return;""==s.cookieIo.readId()&&null==s.connectionId?s.cleanup():s.startReconnectAction()}catch(i){}})),this.socket.on("error",(function(){try{t.probeWebServiceIF((function(e){t.isUsablePrintIF()?(s.eposprint=!0,t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_NONE)):(t.changeStatus(t.IF_EPOSDEVICE,t.DISCONNECT),t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_TIMEOUT))}))}catch(e){}})),this.socket.on("connect_failed",(function(){try{t.probeWebServiceIF((function(e){t.isUsablePrintIF()?(s.eposprint=!0,t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_NONE)):(t.changeStatus(t.IF_EPOSDEVICE,t.DISCONNECT),t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_TIMEOUT))}))}catch(e){}})),this.socket.on("message",(function(e){try{var t=MessageFactory.parseRequestMessage(e);switch(""!=t.data_id&&(s.recievedDataId=t.data_id),t.request){case t.REQUEST.CONNECT:s.procConnect(t);break;case t.REQUEST.PUBKEY:s.procPubkey(t);break;case t.REQUEST.ADMININFO:s.procAdminInfo(t);break;case t.REQUEST.RECONNECT:s.procReconnect(t);break;case t.REQUEST.DISCONNECT:s.procDisconnect(t);break;case t.REQUEST.OPENDEVICE:s.procOpenDevice(t);break;case t.REQUEST.CLOSEDEVICE:s.procCloseDevice(t);break;case t.REQUEST.DEVICEDATA:s.procDeviceData(t);break;case t.REQUEST.SERVICEDATA:s.procServiceData(t);break;case t.REQUEST.OPENCOMMBOX:s.procOpenCommBox(t);break;case t.REQUEST.CLOSECOMMBOX:s.procCloseCommBox(t);break;case t.REQUEST.COMMDATA:s.procCommBoxData(t);break;case t.REQUEST.ERROR:s.procError(t);break;default:return}}catch(i){}}))},procConnect:function(e){try{null!=this.reconnectTimerId&&(clearInterval(this.reconnectTimerId),this.reconnectTimerId=null);var t=null,i=this.cookieIo.readId();e.data.protocol_version<2?(t=MessageFactory.getPubkeyMessage(e.data.prime,e.data.key),this.conectionObj.emit(t)):null!=this.connectionId?(t=MessageFactory.getReconnectMessage(this.connectionId,e.data.client_id,this.recievedDataId),this.conectionObj.emit(t)):""!=i?(t=MessageFactory.getDisconnectMessage(i),this.conectionObj.emit(t),t=MessageFactory.getPubkeyMessage(e.data.prime,e.data.key),this.conectionObj.emit(t)):(t=MessageFactory.getPubkeyMessage(e.data.prime,e.data.key),this.conectionObj.emit(t)),this.cookieIo.writeId(e.data.client_id),this.connectionId=e.data.client_id}catch(s){this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup()}},procPubkey:function(e){try{if("SHARED_KEY_MISMATCH_ERROR"==e.code){var t=(new Date).getTime(),i=0;if(0!=this.connectStartTime)if((i=t-this.connectStartTime)<this.CONNECT_TIMEOUT){var s=this;this.gbox.stock(this.socket),this.connectionId=null,this.waitRetryConnectId=setTimeout((function(){s.connectBySocketIo(s.CONNECT_TIMEOUT-i)}),100)}else this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_TIMEOUT),this.cleanup();else this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_TIMEOUT),this.cleanup()}else if("PARAM_ERROR"==e.code)this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup();else{var n=MessageFactory.getAdminInfoMessage();this.conectionObj.emit(n)}}catch(r){this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup()}},procAdminInfo:function(e){this.eposprint||(e.code==this.RESULT_OK?(this.admin=e.data.admin_name,this.location=e.data.location,this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_OK)):this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR))},procReconnect:function(e){this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.RECONNECTING&&(e.code==this.RESULT_OK?(this.conectionObj.changeStatus(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.CONNECT),null!=this.onreconnect&&this.onreconnect()):this.cleanup())},procDisconnect:function(e){},procOpenDevice:function(e){var t=e.deviceId;try{var i=this.devObjElmMap.get(t);e.code==this.RESULT_OK?null!=i.callback&&i.callback(i.deviceObject,e.code):(null!=i.callback&&i.callback(null,e.code),this.devObjElmMap.remove(t))}catch(s){null!=this.onerror&&this.onerror("0",t,this.ERROR_SYSTEM,null)}},procCloseDevice:function(e){var t=e.deviceId;try{if(e.code==this.RESULT_OK){var i=this.devObjElmMap.get(t);null!=i.callback&&i.callback(e.code);try{i.deviceObject.finalize()}catch(s){}this.devObjElmMap.remove(t)}}catch(s){null!=this.onerror&&this.onerror("0",t,this.ERROR_SYSTEM,null)}},procDeviceData:function(eposmsg){var deviceId=eposmsg.deviceId,sequence=eposmsg.sequence,data=eposmsg.data;try{var devObjElm=this.devObjElmMap.get(deviceId);devObjElm.isCrypto&&(data=MessageFactory.decrypt(data));var deviceObject=devObjElm.deviceObject,method="client_"+data.type;try{deviceObject instanceof OtherPeripheral?deviceObject.client_onreceive(data,sequence):eval("deviceObject."+method+"(data, sequence)")}catch(e){eval("deviceObject."+data.type+"(data, sequence)")}}catch(e){null!=this.onerror&&this.onerror(sequence,deviceId,this.ERROR_SYSTEM,null)}},procServiceData:function(e){try{switch(e.serviceId){case"OFSC":this.ofsc.notify(e)}}catch(t){null!=this.onerror&&this.onerror(e.sequence,e.serviceId,this.ERROR_SYSTEM,null)}},procOpenCommBox:function(e){var t=e.sequence;try{this.commBoxManager.client_opencommbox(e.data,t)}catch(i){null!=this.onerror&&this.onerror(t,"",this.ERROR_SYSTEM,null)}},procCloseCommBox:function(e){var t=e.sequence;try{this.commBoxManager.client_closecommbox(e.data,t)}catch(i){null!=this.onerror&&this.onerror(t,"",this.ERROR_SYSTEM,null)}},procCommBoxData:function(e){var t=e.sequence;try{this.commBoxManager.executeCommDataCallback(e.data,t)}catch(i){null!=this.onerror&&this.onerror(t,"",this.ERROR_SYSTEM,null)}},procError:function(e){try{null!=this.onerror&&this.onerror(e.sequence,e.deviceId,e.code,e.data)}catch(t){}},startReconnectAction:function(){if(this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)!=this.conectionObj.RECONNECTING){this.conectionObj.changeStatus(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.RECONNECTING),this.reconnectTryCount=0;var e=this;this.reconnectTimerId=setInterval((function(){if(null!=e.socket&&e.gbox.stock(e.socket),e.reconnectTryCount==e.MAX_RECONNECT_RETRY)return clearInterval(e.reconnectTimerId),void e.cleanup();e.conectionObj.status(e.conectionObj.IF_EPOSDEVICE)==e.conectionObj.RECONNECTING&&e.connectBySocketIo(e.RECONNECT_TIMEOUT),e.reconnectTryCount++}),e.RECONNECT_TIMEOUT),0==this.reconnectTryCount&&null!=this.onreconnecting&&this.onreconnecting()}},checkEposPrintService:function(e,t,i){var s,n,r=null,a=this.conectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+e+"&timeout=10000",o=this.conectionObj.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid="+e+"&timeout=10000",l=null,c=null;if(t==this.DEVICE_TYPE_DISPLAY?(r=o,l='<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display"></epos-display></s:Body></s:Envelope>'):(r=a,l='<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"></epos-print></s:Body></s:Envelope>'),window.XDomainRequest)try{(c=new XDomainRequest).open("POST",r),c.onload=function(){/response/.test(c.responseText)?(n=/success\s*=\s*"\s*(1|true)\s*"/.test(c.responseText),i(n?"OK":"ERROR_PARAMETER")):i("ERROR_PARAMETER")},c.onerror=function(){i("ERROR_PARAMETER")},c.ontimeout=function(){i("ERROR_TIMEOUT")},c.onprogress=function(){},c.send(l)}catch(h){i("ERROR_PARAMETER")}else try{(c=new XMLHttpRequest).open("POST",r,!0),c.setRequestHeader("Content-Type","text/xml; charset=utf-8"),c.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),c.setRequestHeader("SOAPAction",'""'),c.onreadystatechange=function(){if(4==c.readyState)if(clearTimeout(s),200==c.status&&c.responseXML){var e=c.responseXML.getElementsByTagName("response");n=!(e.length<=0)&&/^(1|true)$/.test(e[0].getAttribute("success")),i(n?"OK":"ERROR_PARAMETER")}else i("ERROR_PARAMETER")},s=setTimeout((function(){c.abort(),i("ERROR_TIMEOUT")}),5e3),c.timeout=1e4,c.send(l)}catch(h){i("ERROR_PARAMETER")}}},SocketGarbageBox.prototype={stock:function(e){if(null!=e){e.removeAllListeners("connect"),e.removeAllListeners("close"),e.removeAllListeners("disconnect"),e.removeAllListeners("error"),e.removeAllListeners("connect_failed"),e.removeAllListeners("message");var t=function(){};t.prototype=e,this.box.push(t)}},dispose:function(){for(;0<this.box.length;){var e=this.box.pop();try{e.disconnect(),delete e}catch(t){}}}},Connection.prototype.probe=function(e,t,i){var s,n=this,r=null;if(window.XDomainRequest)try{(r=new XDomainRequest).open("POST",e),r.onload=function(){i(n.OK)},r.onerror=function(){i(n.ERROR_PARAMETER)},r.ontimeout=function(){i(n.ERROR_TIMEOUT)},r.onprogress=function(){},r.send(t)}catch(a){i(this.ERROR_PARAMETER)}else try{(r=new XMLHttpRequest).open("POST",e,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){4==r.readyState&&(clearTimeout(s),200==r.status?i(n.OK):i(n.ERROR_PARAMETER))},s=setTimeout((function(){r.abort(),i(n.ERROR_TIMEOUT)}),5e3),r.timeout=1e4,r.send(t)}catch(a){i(this.ERROR_PARAMETER)}},Connection.prototype.probeWebServiceIF=function(e){var t=(new Date).getTime(),i=!1,s=this,n=this.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid=local_printer&timeout=10000";this.probe(n,'<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"></epos-print></s:Body></s:Envelope>',(function(n){var r=s.ACCESS_ERROR;n==s.OK&&(r=s.ACCESS_OK),s.registIFAccessResult(s.IF_EPOSPRINT,r),i&&e((new Date).getTime()-t),i=!i}));var r=this.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid=local_display&timeout=10000";this.probe(r,'<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display"></epos-display></s:Body></s:Envelope>',(function(n){var r=s.ACCESS_ERROR;n==s.OK&&(r=s.ACCESS_OK),s.registIFAccessResult(s.IF_EPOSDISPLAY,r),i&&e((new Date).getTime()-t),i=!i}))},Connection.prototype.setSocket=function(e){this.socket_p=e},Connection.prototype.emit=function(e){try{if(null==this.socket_p)return;this.socket_p.emit("message",e.toTransmissionForm())}catch(t){throw new Error(this.ERROR_SYSTEM)}},Connection.prototype.setAddress=function(e,t,i){this.protocol_p=e,this.address_p=t,this.port_p=i,this.usableIF_p=0},Connection.prototype.getAddressWithProtocol=function(){return this.protocol_p+"://"+this.address_p},Connection.prototype.getSocketIoURL=function(){return this.getAddressWithProtocol()+":"+this.port_p},Connection.prototype.registCallback=function(e){"function"==typeof e&&(this.callback_p=e)},Connection.prototype.changeStatus=function(e,t){switch(e){case this.IF_ALL:this.dev_status_p=t,this.ws_status_p=t;break;case this.IF_EPOSDEVICE:this.dev_status_p=t;break;default:this.ws_status_p=t}},Connection.prototype.status=function(e){return e==this.IF_EPOSDEVICE?this.dev_status_p:this.ws_status_p},Connection.prototype.isUsableDeviceIF=function(){return(this.usableIF_p&this.IF_EPOSDEVICE)==this.IF_EPOSDEVICE},Connection.prototype.isUsablePrintIF=function(){return!!this.isUsableDeviceIF()||(this.usableIF_p&this.IF_EPOSPRINT)==this.IF_EPOSPRINT},Connection.prototype.isUsableDisplayIF=function(){return!!this.isUsableDeviceIF()||(this.usableIF_p&this.IF_EPOSDISPLAY)==this.IF_EPOSDISPLAY},Connection.prototype.registIFAccessResult=function(e,t){if(t==this.ACCESS_OK&&(this.changeStatus(e,this.CONNECT),this.usableIF_p|=e),e==this.IF_EPOSDEVICE){var i=this.ERROR_PARAMETER;if(this.usableIF_p&this.IF_ALL&&(i="http"==this.protocol_p?this.OK:this.SSL_CONNECT_OK),t==this.ACCESS_TIMEOUT&&(i=this.ERROR_TIMEOUT),null!=this.callback_p){try{this.callback_p(i)}catch(s){}this.callback_p=null}}},ePosCrypto.prototype={genClientKeys:function(e,t){var i=str2bigInt("2",10),s=str2bigInt(e,16),n=randBigInt(64,0);this.pubkey_c=powMod(i,n,s);for(var r=bigInt2str(powMod(str2bigInt(t,16),n,s),16).toLowerCase();r.length<192;)r="0"+r;this.secretKey=md5.bin(r)},bfEncrypt:function(e){try{var t={data:e,key:this.secretKey,mode:"cbc",round:16,iv:blowfish.mkIV()},i=blowfish.encrypt(t),s=base64.encode(i)}catch(n){return""}return s},bfDecrypt:function(e){try{var t={data:base64.decode(e),key:this.secretKey,mode:"cbc"},i=blowfish.decrypt(t)}catch(s){return""}return i}},ePosDeviceMessage.prototype={toTransmissionForm:function(){var e=null;switch(this.request){case this.REQUEST.PUBKEY:case this.REQUEST.ADMININFO:case this.REQUEST.RECONNECT:case this.REQUEST.DISCONNECT:e=[this.request,this.data];break;case this.REQUEST.OPENDEVICE:case this.REQUEST.CLOSEDEVICE:e=[this.request,this.deviceId,this.data,this.data_id];break;case this.REQUEST.DEVICEDATA:e=[this.request,this.sequence,this.deviceId,this.data,this.data_id];break;case this.REQUEST.SERVICEDATA:e=[this.request,this.sequence,this.serviceId,this.isCrypto,this.data,this.data_id];break;case this.REQUEST.OPENCOMMBOX:case this.REQUEST.CLOSECOMMBOX:case this.REQUEST.COMMDATA:e=[this.request,this.sequence,this.data,this.data_id];break;default:e=null}return e}};var MessageFactory=(sequence=0,cipher=new ePosCrypto,getNextSequence=function(){return sequence++,Number.MAX_VALUE==sequence&&(sequence=1),String(sequence)},{parseRequestMessage:function(e){var t=new ePosDeviceMessage;switch(t.request=e[0],t.request){case t.REQUEST.CONNECT:t.data=e[1];break;case t.REQUEST.PUBKEY:case t.REQUEST.ADMININFO:case t.REQUEST.RECONNECT:case t.REQUEST.DISCONNECT:t.code=e[1],t.data=e[2];break;case t.REQUEST.OPENDEVICE:case t.REQUEST.CLOSEDEVICE:t.deviceId=e[1],t.code=e[2],t.data=e[3],t.data_id=e[4];break;case t.REQUEST.DEVICEDATA:t.sequence=e[1],t.deviceId=e[2],t.data=e[3],t.data_id=e[4];break;case t.REQUEST.SERVICEDATA:t.sequence=e[1],t.serviceId=e[2],t.isCrypto=e[3],t.data=e[4],t.data_id=e[5];break;case t.REQUEST.OPENCOMMBOX:case t.REQUEST.CLOSECOMMBOX:case t.REQUEST.COMMDATA:t.sequence=e[1],t.data=e[2],t.data_id=e[3];break;case t.REQUEST.ERROR:t.sequence=e[1],t.deviceId=e[2],t.code=e[3],t.data=e[4],t.data_id=e[5];break;default:t=null}return t},getPubkeyMessage:function(e,t){var i=new ePosDeviceMessage;i.request=i.REQUEST.PUBKEY,cipher.genClientKeys(e,t);for(var s=cipher.bfEncrypt("hello"),n=bigInt2str(cipher.pubkey_c,16);n.length<192;)n="0"+n;return i.data={key:n,testData:s},i},getAdminInfoMessage:function(){var e=new ePosDeviceMessage;return e.request=e.REQUEST.ADMININFO,e.data={},e},getReconnectMessage:function(e,t,i){var s=new ePosDeviceMessage;return s.request=s.REQUEST.RECONNECT,s.data={old_client_id:e,new_client_id:t,received_id:i},s},getDisconnectMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.DISCONNECT,t.data={client_id:e},t},getOpenDeviceMessage:function(e,t,i,s){var n=new ePosDeviceMessage,r=t;return"type_hybrid_printer2"==r&&(r="type_hybrid_printer"),n.request=n.REQUEST.OPENDEVICE,n.deviceId=e,n.data={type:r,crypto:i,buffer:s},n},getCloseDeviceMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.CLOSEDEVICE,t.deviceId=e,t.data={},t},getDeviceDataMessage:function(e,t,i){var s=new ePosDeviceMessage;return s.request=s.REQUEST.DEVICEDATA,s.sequence=getNextSequence(),s.deviceId=e,s.data=i?cipher.bfEncrypt(JSON.stringify(t)):t,s},getServiceMessage:function(e,t,i){var s=new ePosDeviceMessage;return s.request=s.REQUEST.SERVICEDATA,s.sequence=getNextSequence(),s.serviceId=e,s.isCrypto=t,s.data=t?cipher.bfEncrypt(JSON.stringify(i)):i,s},getOpenCommBoxMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.OPENCOMMBOX,t.sequence=getNextSequence(),t.data=e,t},getCloseCommBoxMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.CLOSECOMMBOX,t.sequence=getNextSequence(),t.data=e,t},getCommBoxDataMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.COMMDATA,t.sequence=getNextSequence(),t.data=e,t},decrypt:function(e){var t=cipher.bfDecrypt(e);return JSON.parse(t)}}),sequence,cipher,JSON;function ePOSDeviceConfiguration(e){this.DEVICE_GROUP_ALL="group_all",this.DEVICE_GROUP_PRINTER="group_printer",this.DEVICE_GROUP_DISPLAY="group_display",this.DEVICE_GROUP_HID="group_hid",this.DEVICE_GROUP_SERIAL="group_serial",this.DEVICE_GROUP_OTHER="group_other",this.DEVICE_TYPE_PRINTER="type_printer",this.DEVICE_TYPE_HYBRID_PRINTER="type_hybrid_printer",this.DEVICE_TYPE_DISPLAY="type_display",this.DEVICE_TYPE_KEYBOARD="type_keyboard",this.DEVICE_TYPE_SCANNER="type_scanner",this.DEVICE_TYPE_MSR="type_msr",this.DEVICE_TYPE_CASH_CHANGER="type_cash_changer",this.DEVICE_TYPE_SIMPLE_SERIAL="type_simple_serial",this.DEVICE_TYPE_CASH_DRAWER="type_cash_drawer",this.DEVICE_TYPE_PIN_PAD="type_pin_pad",this.DEVICE_TYPE_CAT="type_cat",this.DEVICE_TYPE_SMARTCARD_RW="type_smartcard_rw",this.CGI_PATH="/epson_eposdevice/getDeviceList.cgi",this.RESULT_OK="OK",this.UNKNOWN="unknown",this.ONLINE="online",this.OFFLINE="offline",this.INTERVAL=500,this.TIMEOUT=6e4,this.address=e,this.cb=null,this.message=null,this.WEBSOCKET_PORT=8008,this.SSLWEBSOCKET_PORT=8043}if(ePOSDeviceConfiguration.prototype.getRegisterdDevices=function(e,t){this.cb=t;var i=this,s=null,n="?group="+e,r=window.location.protocol+"//"+this.address+this.CGI_PATH+n;window.XDomainRequest?((s=new XDomainRequest).open("GET",r),s.onload=function(){i.message=i.RESULT_OK;var e=JSON.parse(s.responseText);i.checkDevice(e,(function(t){for(var s in t)for(var n=0;n<e.length;n++)e[n].deviceId==s&&(e[n].status=t[s]);null!=i.cb&&(i.cb(i,e),i.cb=null)}))},s.onerror=function(){i.message="Failed to get device list.",null!=i.cb&&(i.cb(i,null),i.cb=null)}):((s=new XMLHttpRequest).open("GET",r,!0),s.setRequestHeader("Pragma","no-cache"),s.setRequestHeader("Cache-Control","no-cache"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){i.message=i.RESULT_OK;var e=JSON.parse(s.responseText);i.checkDevice(e,(function(t){for(var s in t)for(var n=0;n<e.length;n++)e[n].deviceId==s&&(e[n].status=t[s]);null!=i.cb&&(i.cb(i,e),i.cb=null)}))}else i.message="Failed to get device list.",null!=i.cb&&(i.cb(i,null),i.cb=null)}),s.send(null)},ePOSDeviceConfiguration.prototype.checkDevice=function(e,t){for(var i,s=this,n=window.location.protocol.match(/^(https:)/)?this.SSLWEBSOCKET_PORT:this.WEBSOCKET_PORT,r=new epson.ePOSDevice,a=new Array,o=0;o<e.length;o++)a[e[o].deviceId]=s.UNKNOWN;r.onerror=function(e,t,i){""!=t&&(a[t]=s.OFFLINE)},r.connect(this.address,n,(function(t){if("OK"==t||"SSL_CONNECT_OK"==t)for(var i=0;i<e.length;i++)r.createDevice(e[i].deviceId,e[i].deviceType,{},(function(e,t){a[e.deviceID]="OK"==t?s.ONLINE:s.OFFLINE,r.deleteDevice(e,null)}))})),i=window.setInterval((function(){for(var e in a)if(a[e]==s.UNKNOWN)return;clearInterval(i),null!=t&&t(a)}),s.INTERVAL),window.setTimeout((function(){clearInterval(i),null!=t&&t(a)}),s.TIMEOUT)},"object"!=typeof JSON&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var i,s,n,r,a,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&a.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,s,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(e,t,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){var i=e;i.version="0.8.7",i.protocol=1,i.transports=[],i.j=[],i.sockets={},i.connect=function(e,s){var n,r,a=i.util.parseUri(e);t&&t.location&&(a.protocol=a.protocol||t.location.protocol.slice(0,-1),a.host=a.host||(t.document?t.document.domain:t.location.hostname),a.port=a.port||t.location.port),n=i.util.uniqueUri(a);var o={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return i.util.merge(o,s),!o["force new connection"]&&i.sockets[n]||(r=new i.Socket(o)),!o["force new connection"]&&r&&(i.sockets[n]=r),(r=r||i.sockets[n]).of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var i=e.util={},s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];i.parseUri=function(e){for(var t=s.exec(e||""),i={},r=14;r--;)i[n[r]]=t[r]||"";return i},i.uniqueUri=function(e){var i=e.protocol,s=e.host,n=e.port;return"document"in t?(s=s||document.domain,n=n||("https"==i&&"https:"!==document.location.protocol?443:document.location.port)):(s=s||"localhost",n||"https"!=i||(n=443)),(i||"http")+"://"+s+":"+(n||80)},i.query=function(e,t){var s=i.chunkQuery(e||""),n=[];for(var r in i.merge(s,i.chunkQuery(t||"")),s)s.hasOwnProperty(r)&&n.push(r+"="+s[r]);return n.length?"?"+n.join("&"):""},i.chunkQuery=function(e){for(var t,i={},s=e.split("&"),n=0,r=s.length;n<r;++n)(t=s[n].split("="))[0]&&(i[t[0]]=decodeURIComponent(t[1]));return i};var r=!1;i.load=function(e){if("document"in t&&"complete"===document.readyState||r)return e();i.on(t,"load",e,!1)},i.on=function(e,t,i,s){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener&&e.addEventListener(t,i,s)},i.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||i.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null},void 0!==window&&i.load((function(){r=!0})),i.defer=function(e){if(!i.ua.webkit||"undefined"!=typeof importScripts)return e();i.load((function(){setTimeout(e,100)}))},i.merge=function(e,t,s,n){var r,a=n||[],o=void 0===s?2:s;for(r in t)t.hasOwnProperty(r)&&i.indexOf(a,r)<0&&("object"==typeof e[r]&&o?i.merge(e[r],t[r],o-1,a):(e[r]=t[r],a.push(t[r])));return e},i.mixin=function(e,t){i.merge(e.prototype,t.prototype)},i.inherit=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.intersect=function(e,t){for(var s=[],n=e.length>t.length?e:t,r=e.length>t.length?t:e,a=0,o=r.length;a<o;a++)~i.indexOf(n,r[a])&&s.push(r[a]);return s},i.indexOf=function(e,t,i){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,i);var s=e.length;for(i=i<0?i+s<0?0:i+s:i||0;i<s&&e[i]!==t;i++);return s<=i?-1:i},i.toArray=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(e[i]);return t},i.ua={},i.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),i.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function i(){}e.EventEmitter=i,i.prototype.on=function(e,i){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(i):this.$events[e]=[this.$events[e],i]:this.$events[e]=i,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(e,t){var i=this;function s(){i.removeListener(e,s),t.apply(this,arguments)}return s.listener=t,this.on(e,s),this},i.prototype.removeListener=function(e,i){if(this.$events&&this.$events[e]){var s=this.$events[e];if(t.util.isArray(s)){for(var n=-1,r=0,a=s.length;r<a;r++)if(s[r]===i||s[r].listener&&s[r].listener===i){n=r;break}if(n<0)return this;s.splice(n,1),s.length||delete this.$events[e]}else(s===i||s.listener&&s.listener===i)&&delete this.$events[e]}return this},i.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},i.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},i.prototype.emit=function(e){if(!this.$events)return!1;var i=this.$events[e];if(!i)return!1;var s=Array.prototype.slice.call(arguments,1);if("function"==typeof i)i.apply(this,s);else{if(!t.util.isArray(i))return!1;for(var n=i.slice(),r=0,a=n.length;r<a;r++)n[r].apply(this,s)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var i,s,n,r,a,o=gap,l=t[e];switch(l instanceof Date&&(l=date(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&a.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}JSON.stringify=function(e,t,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){var j;function walk(e,t){var i,s,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(e,t,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,void 0!==JSON?JSON:undefined),function(e,t){var i=e.parser={},s=i.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],n=i.reasons=["transport not supported","client not handshaken","unauthorized"],r=i.advice=["reconnect"],a=t.JSON,o=t.util.indexOf;i.encodePacket=function(e){var t=o(s,e.type),i=e.id||"",l=e.endpoint||"",c=e.ack,h=null;switch(e.type){case"error":var d=e.reason?o(n,e.reason):"",u=e.advice?o(r,e.advice):"";""===d&&""===u||(h=d+(""!==u?"+"+u:""));break;case"message":""!==e.data&&(h=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),h=a.stringify(p);break;case"json":h=a.stringify(e.data);break;case"connect":e.qs&&(h=e.qs);break;case"ack":h=e.ackId+(e.args&&e.args.length?"+"+a.stringify(e.args):"")}var f=[t,i+("data"==c?"+":""),l];return null!==h&&h!==undefined&&f.push(h),f.join(":")},i.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var i=0,s=e.length;i<s;i++){t+=""+e[i].length+""+e[i]}return t};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;i.decodePacket=function(e){if(!(o=e.match(l)))return{};var t=o[2]||"",i=(e=o[5]||"",{type:s[o[1]],endpoint:o[4]||""});switch(t&&(i.id=t,o[3]?i.ack="data":i.ack=!0),i.type){case"error":var o=e.split("+");i.reason=n[o[0]]||"",i.advice=r[o[1]]||"";break;case"message":i.data=e||"";break;case"event":try{var c=a.parse(e);i.name=c.name,i.args=c.args}catch(h){}i.args=i.args||[];break;case"json":try{i.data=a.parse(e)}catch(h){}break;case"connect":i.qs=e||"";break;case"ack":if((o=e.match(/^([0-9]+)(\+)?(.*)/))&&(i.ackId=o[1],i.args=[],o[3]))try{i.args=o[3]?a.parse(o[3]):[]}catch(h){}}return i},i.decodePayload=function(e){if(""==e.charAt(0)){for(var t=[],s=1,n="";s<e.length;s++)""==e.charAt(s)?(t.push(i.decodePacket(e.substr(s+1).substr(0,n))),s+=Number(n)+1,n=""):n+=e.charAt(s);return t}return[i.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function i(e,t){this.socket=e,this.sessid=t}e.Transport=i,t.util.mixin(i,t.EventEmitter),i.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var i=t.parser.decodePayload(e);if(i&&i.length)for(var s=0,n=i.length;s<n;s++)this.onPacket(i[s])}return this},i.prototype.onPacket=function(e){return"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),this.socket.onPacket(e),this)},i.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout((function(){e.onDisconnect()}),this.socket.closeTimeout)}},i.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},i.prototype.onConnect=function(){return this.socket.onConnect(),this},i.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},i.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},i.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},i.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},i.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},i.prototype.onClose=function(){this.open=!1,this.socket.onClose(),this.onDisconnect()},i.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},i.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,i){function s(e){if(this.options={port:80,secure:!1,document:"document"in i&&document,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var s=this;t.util.on(i,"beforeunload",(function(){s.disconnectSync()}),!1)}this.options["auto connect"]&&this.connect()}function n(){}e.Socket=s,t.util.mixin(s,t.EventEmitter),s.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},s.prototype.publish=function(){var e;for(var t in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t)).$emit.apply(e,arguments)},s.prototype.handshake=function(e){var i=this,s=this.options;function r(t){t instanceof Error?i.onError(t.message):e.apply(null,t.split(":"))}var a=["http"+(s.secure?"s":"")+":/",s.host+":"+s.port,s.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/"),o=setTimeout((function(){if(void 0!==c)try{var e=c.src.lastIndexOf("=")+1,s=c.src.substring(e);t.j[s]=function(e){c.parentNode.removeChild(c)}}catch(n){}i.publish("connect_failed")}),this.options["connect timeout"]);if(this.isXDomain()&&!t.util.ua.hasCORS){var l=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=a+"&jsonp="+t.j.length,l.parentNode.insertBefore(c,l),t.j.push((function(e){clearTimeout(o),r(e),c.parentNode.removeChild(c)}))}else{var h=t.util.request();h.open("GET",a,!0),h.onreadystatechange=function(){4==h.readyState&&(h.onreadystatechange=n,clearTimeout(o),200==h.status?r(h.responseText):!i.reconnecting&&i.onError(h.responseText))},h.timeout=this.options["connect timeout"],h.send(null)}},s.prototype.getTransport=function(e){for(var i,s=e||this.transports,n=0;i=s[n];n++)if(t.Transport[i]&&t.Transport[i].check(this)&&(!this.isXDomain()||t.Transport[i].xdomainCheck()))return new t.Transport[i](this,this.sessionid);return null},s.prototype.connect=function(e){if(this.connecting)return this;var i=this;return this.handshake((function(s,n,r,a){i.sessionid=s,i.closeTimeout=1e3*r,i.heartbeatTimeout=1e3*n,i.transports=t.util.intersect(a.split(","),i.options.transports),function e(t){if(i.transport&&i.transport.clearTimeouts(),i.transport=i.getTransport(t),!i.transport)return i.publish("connect_failed");i.transport.ready(i,(function(){i.connecting=!0,i.publish("connecting",i.transport.name),i.transport.open(),i.options["connect timeout"]&&(i.connectTimeoutTimer=setTimeout((function(){if(!i.connected&&(i.connecting=!1,i.options["try multiple transports"])){i.remainingTransports||(i.remainingTransports=i.transports.slice(0));for(var t=i.remainingTransports;t.length>0&&t.splice(0,1)[0]!=i.transport.name;);t.length?e(t):i.publish("connect_failed")}}),i.options["connect timeout"]))}))}(),i.once("connect",(function(){clearTimeout(i.connectTimeoutTimer),e&&"function"==typeof e&&e()}))})),this},s.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},s.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},s.prototype.disconnect=function(){return this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},s.prototype.disconnectSync=function(){var e=t.util.request(),i=this.resource+"/"+t.protocol+"/"+this.sessionid;e.open("GET",i,!0),this.onDisconnect("booted")},s.prototype.isXDomain=function(){var e=i.location.port||("https:"==i.location.protocol?443:80);return this.options.host!==i.location.hostname||this.options.port!=e},s.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},s.prototype.onOpen=function(){this.open=!0},s.prototype.onClose=function(){this.open=!1},s.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},s.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&this.connected&&(this.disconnect(),this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},s.prototype.onDisconnect=function(e){var t=this.connected;this.connected=!1,this.connecting=!1,this.open=!1,t&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},s.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],i=this.options["try multiple transports"],s=this.options["reconnection limit"];function n(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}e.removeListener("connect_failed",r),e.removeListener("connect",r),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=i}function r(){if(e.reconnecting)return e.connected?n():e.connecting&&e.reconnecting?e.reconnectionTimer=setTimeout(r,1e3):void(e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),n()):(e.on("connect_failed",r),e.options["try multiple transports"]=!0,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<s&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(r,e.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(r,this.reconnectionDelay),this.on("connect",r)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function i(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new s(this,"json"),this.ackPackets=0,this.acks={}}function s(e,t){this.namespace=e,this.name=t}e.SocketNamespace=i,t.util.mixin(i,t.EventEmitter),i.prototype.$emit=t.EventEmitter.prototype.emit,i.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},i.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},i.prototype.send=function(e,t){var i={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=t),this.packet(i)},i.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),i=t[t.length-1],s={type:"event",name:e};return"function"==typeof i&&(s.id=++this.ackPackets,s.ack="data",this.acks[s.id]=i,t=t.slice(0,t.length-1)),s.args=t,this.packet(s)},i.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},i.prototype.onPacket=function(e){var i=this;function s(){i.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var n=["message",e.data];"data"==e.ack?n.push(s):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,n);break;case"event":n=[e.name].concat(e.args);"data"==e.ack&&n.push(s),this.$emit.apply(this,n);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},s.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},s.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,i){function s(e){t.Transport.apply(this,arguments)}e.websocket=s,t.util.inherit(s,t.Transport),s.prototype.name="websocket",s.prototype.open=function(){var e,s=t.util.query(this.socket.options.query),n=this;return e||(e=i.MozWebSocket||i.WebSocket),this.websocket=new e(this.prepareUrl()+s),this.websocket.onopen=function(){n.onOpen(),n.socket.setBuffer(!1)},this.websocket.onmessage=function(e){n.onData(e.data)},this.websocket.onclose=function(){n.onClose(),n.socket.setBuffer(!0)},this.websocket.onerror=function(e){n.onError(e)},this},s.prototype.send=function(e){return this.websocket.send(e),this},s.prototype.payload=function(e){for(var t=0,i=e.length;t<i;t++)this.packet(e[t]);return this},s.prototype.close=function(){return this.websocket.close(),this},s.prototype.onError=function(e){this.socket.onError(e)},s.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},s.check=function(){return"WebSocket"in i&&!("__addTask"in WebSocket)||"MozWebSocket"in i},s.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function i(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=i,t.util.inherit(i,t.Transport.websocket),i.prototype.name="flashsocket",i.prototype.open=function(){var e=this,i=arguments;return WebSocket.__addTask((function(){t.Transport.websocket.prototype.open.apply(e,i)})),this},i.prototype.send=function(){var e=this,i=arguments;return WebSocket.__addTask((function(){t.Transport.websocket.prototype.send.apply(e,i)})),this},i.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},i.prototype.ready=function(e,s){function n(){var t=e.options,n=t["flash policy port"],a=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];i.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=a.join("/")),843!==n&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+n),WebSocket.__initialize(),i.loaded=!0),s.call(r)}var r=this;if(document.body)return n();t.util.load(n)},i.check=function(){return!("undefined"==typeof WebSocket||!("__initialize"in WebSocket)||!swfobject)&&swfobject.getFlashPlayerVersion().major>=10},i.xdomainCheck=function(){return!0},void 0!==window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),void 0!==window)var swfobject=function(){var e,t,i,s,n,r,a="undefined",o="object",l="Shockwave Flash",c="application/x-shockwave-flash",h="SWFObjectExprInst",d="onreadystatechange",u=window,p=document,f=navigator,m=!1,v=[function(){m?function(){var e=p.getElementsByTagName("body")[0],t=V(o);t.setAttribute("type",c);var i=e.appendChild(t);if(i){var s=0;!function(){if(typeof i.GetVariable!=a){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),T.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(s<10)return s++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,P()}()}else P()}():P()}],E=[],g=[],_=[],y=!1,b=!1,S=!0,T=function(){var e=typeof p.getElementById!=a&&typeof p.getElementsByTagName!=a&&typeof p.createElement!=a,t=f.userAgent.toLowerCase(),i=f.platform.toLowerCase(),s=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),r=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),h=!1,d=[0,0,0],v=null;if(typeof f.plugins!=a&&typeof f.plugins[l]==o)!(v=f.plugins[l].description)||typeof f.mimeTypes!=a&&f.mimeTypes[c]&&!f.mimeTypes[c].enabledPlugin||(m=!0,h=!1,v=v.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d[0]=parseInt(v.replace(/^(.*)\..*$/,"$1"),10),d[1]=parseInt(v.replace(/^.*\.(.*)\s.*$/,"$1"),10),d[2]=/[a-zA-Z]/.test(v)?parseInt(v.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=a)try{var E=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");E&&(v=E.GetVariable("$version"))&&(h=!0,v=v.split(" ")[1].split(","),d=[parseInt(v[0],10),parseInt(v[1],10),parseInt(v[2],10)])}catch(g){}return{w3:e,pv:d,wk:r,ie:h,win:s,mac:n}}();T.w3&&((typeof p.readyState!=a&&"complete"==p.readyState||typeof p.readyState==a&&(p.getElementsByTagName("body")[0]||p.body))&&R(),y||(typeof p.addEventListener!=a&&p.addEventListener("DOMContentLoaded",R,!1),T.ie&&T.win&&(p.attachEvent(d,(function(){"complete"==p.readyState&&(p.detachEvent(d,arguments.callee),R())})),u==top&&function(){if(!y){try{p.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}R()}}()),T.wk&&function(){y||(/loaded|complete/.test(p.readyState)?R():setTimeout(arguments.callee,0))}(),C(R)));function R(){if(!y){try{var e=p.getElementsByTagName("body")[0].appendChild(V("span"));e.parentNode.removeChild(e)}catch(s){return}y=!0;for(var t=v.length,i=0;i<t;i++)v[i]()}}function O(e){y?e():v[v.length]=e}function C(e){if(typeof u.addEventListener!=a)u.addEventListener("load",e,!1);else if(typeof p.addEventListener!=a)p.addEventListener("load",e,!1);else if(typeof u.attachEvent!=a)!function(e,t,i){e.attachEvent(t,i),_[_.length]=[e,t,i]}(u,"onload",e);else if("function"==typeof u.onload){var t=u.onload;u.onload=function(){t(),e()}}else u.onload=e}function P(){var e=E.length;if(e>0)for(var t=0;t<e;t++){var i=E[t].id,s=E[t].callbackFn,n={success:!1,id:i};if(T.pv[0]>0){var r=B(i);if(r)if(!U(E[t].swfVersion)||T.wk&&T.wk<312)if(E[t].expressInstall&&A()){var o={};o.data=E[t].expressInstall,o.width=r.getAttribute("width")||"0",o.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(o.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(o.align=r.getAttribute("align"));for(var l={},c=r.getElementsByTagName("param"),h=c.length,d=0;d<h;d++)"movie"!=c[d].getAttribute("name").toLowerCase()&&(l[c[d].getAttribute("name")]=c[d].getAttribute("value"));I(o,l,i,s)}else x(r),s&&s(n);else j(i,!0),s&&(n.success=!0,n.ref=w(i),s(n))}else if(j(i,!0),s){var u=w(i);u&&typeof u.SetVariable!=a&&(n.success=!0,n.ref=u),s(n)}}}function w(e){var t=null,i=B(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=a)t=i;else{var s=i.getElementsByTagName(o)[0];s&&(t=s)}return t}function A(){return!b&&U("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function I(n,r,o,l){b=!0,i=l||null,s={success:!1,id:o};var c=B(o);if(c){"OBJECT"==c.nodeName?(e=M(c),t=null):(e=c,t=o),n.id=h,(typeof n.width==a||!/%$/.test(n.width)&&parseInt(n.width,10)<310)&&(n.width="310"),(typeof n.height==a||!/%$/.test(n.height)&&parseInt(n.height,10)<137)&&(n.height="137"),p.title=p.title.slice(0,47)+" - Flash Player Installation";var d=T.ie&&T.win?"ActiveX":"PlugIn",f="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+p.title;if(typeof r.flashvars!=a?r.flashvars+="&"+f:r.flashvars=f,T.ie&&T.win&&4!=c.readyState){var m=V("div");o+="SWFObjectNew",m.setAttribute("id",o),c.parentNode.insertBefore(m,c),c.style.display="none",function(){4==c.readyState?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()}D(n,r,o)}}function x(e){if(T.ie&&T.win&&4!=e.readyState){var t=V("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(M(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(M(e),e)}function M(e){var t=V("div");if(T.win&&T.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(o)[0];if(i){var s=i.childNodes;if(s)for(var n=s.length,r=0;r<n;r++)1==s[r].nodeType&&"PARAM"==s[r].nodeName||8==s[r].nodeType||t.appendChild(s[r].cloneNode(!0))}}return t}function D(e,t,i){var s,n=B(i);if(T.wk&&T.wk<312)return s;if(n)if(typeof e.id==a&&(e.id=i),T.ie&&T.win){var r="";for(var l in e)e[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?t.movie=e[l]:"styleclass"==l.toLowerCase()?r+=' class="'+e[l]+'"':"classid"!=l.toLowerCase()&&(r+=" "+l+'="'+e[l]+'"'));var h="";for(var d in t)t[d]!=Object.prototype[d]&&(h+='<param name="'+d+'" value="'+t[d]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+h+"</object>",g[g.length]=e.id,s=B(e.id)}else{var u=V(o);for(var p in u.setAttribute("type",c),e)e[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?u.setAttribute("class",e[p]):"classid"!=p.toLowerCase()&&u.setAttribute(p,e[p]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&N(u,f,t[f]);n.parentNode.replaceChild(u,n),s=u}return s}function N(e,t,i){var s=V("param");s.setAttribute("name",t),s.setAttribute("value",i),e.appendChild(s)}function k(e){var t=B(e);t&&"OBJECT"==t.nodeName&&(T.ie&&T.win?(t.style.display="none",function(){4==t.readyState?L(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function L(e){var t=B(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function B(e){var t=null;try{t=p.getElementById(e)}catch(i){}return t}function V(e){return p.createElement(e)}function U(e){var t=T.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function F(e,t,i,s){if(!T.ie||!T.mac){var l=p.getElementsByTagName("head")[0];if(l){var c=i&&"string"==typeof i?i:"screen";if(s&&(n=null,r=null),!n||r!=c){var h=V("style");h.setAttribute("type","text/css"),h.setAttribute("media",c),n=l.appendChild(h),T.ie&&T.win&&typeof p.styleSheets!=a&&p.styleSheets.length>0&&(n=p.styleSheets[p.styleSheets.length-1]),r=c}T.ie&&T.win?n&&typeof n.addRule==o&&n.addRule(e,t):n&&typeof p.createTextNode!=a&&n.appendChild(p.createTextNode(e+" {"+t+"}"))}}}function j(e,t){if(S){var i=t?"visible":"hidden";y&&B(e)?B(e).style.visibility=i:F("#"+e,"visibility:"+i)}}function H(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=a?encodeURIComponent(e):e}T.ie&&T.win&&window.attachEvent("onunload",(function(){for(var e=_.length,t=0;t<e;t++)_[t][0].detachEvent(_[t][1],_[t][2]);for(var i=g.length,s=0;s<i;s++)k(g[s]);for(var n in T)T[n]=null;for(var r in T=null,swfobject)swfobject[r]=null;swfobject=null}));return{registerObject:function(e,t,i,s){if(T.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=s,E[E.length]=n,j(e,!1)}else s&&s({success:!1,id:e})},getObjectById:function(e){if(T.w3)return w(e)},embedSWF:function(e,t,i,s,n,r,l,c,h,d){var u={success:!1,id:t};T.w3&&!(T.wk&&T.wk<312)&&e&&t&&i&&s&&n?(j(t,!1),O((function(){i+="",s+="";var p={};if(h&&typeof h===o)for(var f in h)p[f]=h[f];p.data=e,p.width=i,p.height=s;var m={};if(c&&typeof c===o)for(var v in c)m[v]=c[v];if(l&&typeof l===o)for(var E in l)typeof m.flashvars!=a?m.flashvars+="&"+E+"="+l[E]:m.flashvars=E+"="+l[E];if(U(n)){var g=D(p,m,t);p.id==t&&j(t,!0),u.success=!0,u.ref=g}else{if(r&&A())return p.data=r,void I(p,m,t,d);j(t,!0)}d&&d(u)}))):d&&d(u)},switchOffAutoHideShow:function(){S=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:U,createSWF:function(e,t,i){return T.w3?D(e,t,i):undefined},showExpressInstall:function(e,t,i,s){T.w3&&A()&&I(e,t,i,s)},removeSWF:function(e){T.w3&&k(e)},createCSS:function(e,t,i,s){T.w3&&F(e,t,i,s)},addDomLoadEvent:O,addLoadEvent:C,getQueryParamValue:function(e){var t=p.location.search||p.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return H(t);for(var i=t.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==e)return H(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(b){var n=B(h);n&&e&&(n.parentNode.replaceChild(e,n),t&&(j(t,!0),T.ie&&T.win&&(e.style.display="block")),i&&i(s)),b=!1}}}}();!function(){if(void 0!==window&&!window.WebSocket){var e=window.console;e&&e.log&&e.error||(e={log:function(){},error:function(){}}),swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,i,s,n){var r=this;r.__id=WebSocket.__nextId++,WebSocket.__instances[r.__id]=r,r.readyState=WebSocket.CONNECTING,r.bufferedAmount=0,r.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout((function(){WebSocket.__addTask((function(){WebSocket.__flash.create(r.__id,e,t,i||null,s||0,n||null)}))}),0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0||(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t,i){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,i){if(e in this.__events)for(var s=this.__events[e],n=s.length-1;n>=0;--n)if(s[n]===t){s.splice(n,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],i=0;i<t.length;++i)t[i](e);var s=this["on"+e.type];s&&s(e)},WebSocket.prototype.__handleEvent=function(e){var t;if("readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol),"open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var i=decodeURIComponent(e.message);t=this.__createMessageEvent("message",i)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var i=document.createEvent("MessageEvent");return i.initMessageEvent("message",!1,!1,t,null,null,window,null),i}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask((function(){WebSocket.__flash.loadManualPolicyFile(e)}))},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var i=document.createElement("div");i.id="webSocketFlash",t.appendChild(i),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,(function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")}))}else e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},WebSocket.__onFlashInitialized=function(){setTimeout((function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]}),0)},WebSocket.__onFlashEvent=function(){return setTimeout((function(){try{for(var t=WebSocket.__flash.receiveEvents(),i=0;i<t.length;++i)WebSocket.__instances[t[i].webSocketId].__handleEvent(t[i])}catch(s){e.error(s)}}),0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(e&&e.enabledPlugin&&e.enabledPlugin.filename)&&!!e.enabledPlugin.filename.match(/flashlite/i)},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",(function(){WebSocket.__initialize()}),!1):window.attachEvent("onload",(function(){WebSocket.__initialize()})))):e.error("Flash Player >= 10.0.0 is required.")}}(),function(e,t,i){function s(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function n(){}e.XHR=s,t.util.inherit(s,t.Transport),s.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},s.prototype.payload=function(e){for(var i=[],s=0,n=e.length;s<n;s++)i.push(t.parser.encodePacket(e[s]));this.send(t.parser.encodePayload(i))},s.prototype.send=function(e){return this.post(e),this},s.prototype.post=function(e){var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),i.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=n,t.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=n,t.posting=!1,200==this.status?t.socket.setBuffer(!1):t.onClose())},this.sendXHR.send(e)},s.prototype.close=function(){return this.onClose(),this},s.prototype.request=function(e){var i=t.util.request(this.socket.isXDomain()),s=t.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(e||"GET",this.prepareUrl()+s,!0),"POST"==e)try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch(n){}return i},s.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},s.check=function(e,i){try{if(t.util.request(i))return!0}catch(s){}return!1},s.xdomainCheck=function(){return s.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function i(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=i,t.util.inherit(i,t.Transport.XHR),i.prototype.name="htmlfile",i.prototype.get=function(){this.doc=new ActiveXObject("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var i=this,s=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+s,t.util.on(window,"unload",(function(){i.destroy()}))},i.prototype._=function(e,t){this.onData(e);try{var i=t.getElementsByTagName("script")[0];i.parentNode.removeChild(i)}catch(s){}},i.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},i.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},i.check=function(){if("ActiveXObject"in window)try{return new ActiveXObject("htmlfile")&&t.Transport.XHR.check()}catch(e){}return!1},i.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,i){function s(){t.Transport.XHR.apply(this,arguments)}function n(){}e["xhr-polling"]=s,t.util.inherit(s,t.Transport.XHR),t.util.merge(s,t.Transport.XHR),s.prototype.name="xhr-polling",s.prototype.open=function(){return t.Transport.XHR.prototype.open.call(this),!1},s.prototype.get=function(){if(this.open){var e=this;this.xhr=this.request(),i.XDomainRequest&&this.xhr instanceof XDomainRequest?this.xhr.onload=this.xhr.onerror=function(){this.onload=n,e.onData(this.responseText),e.get()}:this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=n,200==this.status?(e.onData(this.responseText),e.get()):e.onClose())},this.xhr.send(null)}},s.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=n;try{this.xhr.abort()}catch(e){}this.xhr=null}},s.prototype.ready=function(e,i){var s=this;t.util.defer((function(){i.call(s)}))},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,i){var s=i.document&&"MozAppearance"in i.document.documentElement.style;function n(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var i=this;t.j.push((function(e){i._(e)}))}e["jsonp-polling"]=n,t.util.inherit(n,t.Transport["xhr-polling"]),n.prototype.name="jsonp-polling",n.prototype.post=function(e){var i=this,s=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var n,r=document.createElement("form"),a=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),a.name="d",r.appendChild(a),document.body.appendChild(r),this.form=r,this.area=a}function l(){c(),i.socket.setBuffer(!1)}function c(){i.iframe&&i.form.removeChild(i.iframe);try{n=document.createElement('<iframe name="'+i.iframeId+'">')}catch(e){(n=document.createElement("iframe")).name=i.iframeId}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n}this.form.action=this.prepareUrl()+s,c(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(h){}this.iframe.attachEvent?n.onreadystatechange=function(){"complete"==i.iframe.readyState&&l()}:this.iframe.onload=l,this.socket.setBuffer(!0)},n.prototype.get=function(){var e=this,i=document.createElement("script"),n=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),i.async=!0,i.src=this.prepareUrl()+n,i.onerror=function(){e.onClose()};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r),this.script=i,s&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},n.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},n.prototype.ready=function(e,i){var n=this;if(!s)return i.call(this);t.util.load((function(){i.call(n)}))},n.check=function(){return"document"in i},n.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var i,s,n,r,a,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&a.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,s,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(e,t,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var base64=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={},s=0;s<64;)i[t.charAt(s)]=s,s++;return{encode:function(e){for(var i,s=0,n=0,r=e+"\0\0",a=r.length-2,o=new Array((a+2)/3<<2);s<a;)i=(255&r.charCodeAt(s++))<<16|(255&r.charCodeAt(s++))<<8|255&r.charCodeAt(s++),o[n++]=t.charAt(i>>18&63),o[n++]=t.charAt(i>>12&63),o[n++]=t.charAt(i>>6&63),o[n++]=t.charAt(63&i);for(;s>a;)o[--n]="=",s--;return o.join("")},decode:function(e){for(var t,s=0,n=0,r=e.replace(/[^A-Za-z0-9\+\/]/g,"")+"AAA",a=r.length-3,o=new Array(3*(a+3>>2)),l=String.fromCharCode;s<a;)t=i[r.charAt(s++)]<<18|i[r.charAt(s++)]<<12|i[r.charAt(s++)]<<6|i[r.charAt(s++)],o[n++]=l(t>>16&255),o[n++]=l(t>>8&255),o[n++]=l(255&t);return o.length=n-s+a,o.join("")}}}();for(bpe=0,mask=0,radix=mask+1,digitsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_=!@#$%^&*()[]{}|;:,.<>/?`~ \\'\"+-",bpe=0;1<<bpe+1>1<<bpe;bpe++);function findPrimes(e){var t,i,s,n;for(i=new Array(e),t=0;t<e;t++)i[t]=0;for(i[0]=2,s=0;i[s]<e;){for(t=i[s]*i[s];t<e;t+=i[s])i[t]=1;for(i[++s]=i[s-1]+1;i[s]<e&&i[i[s]];i[s]++);}for(n=new Array(s),t=0;t<s;t++)n[t]=i[t];return n}function millerRabinInt(e,t){return mr_x1.length!=e.length&&(mr_x1=dup(e),mr_r=dup(e),mr_a=dup(e)),copyInt_(mr_a,t),millerRabin(e,mr_a)}function millerRabin(e,t){var i,s,n,r;for(mr_x1.length!=e.length&&(mr_x1=dup(e),mr_r=dup(e),mr_a=dup(e)),copy_(mr_a,t),copy_(mr_r,e),copy_(mr_x1,e),addInt_(mr_r,-1),addInt_(mr_x1,-1),n=0,i=0;i<mr_r.length;i++)for(s=1;s<mask;s<<=1)e[i]&s?(r=n<mr_r.length+bpe?n:0,i=mr_r.length,s=mask):n++;if(r&&rightShift_(mr_r,r),powMod_(mr_a,mr_r,e),!equalsInt(mr_a,1)&&!equals(mr_a,mr_x1)){for(s=1;s<=r-1&&!equals(mr_a,mr_x1);){if(squareMod_(mr_a,e),equalsInt(mr_a,1))return 0;s++}if(!equals(mr_a,mr_x1))return 0}return 1}function bitSize(e){var t,i,s;for(t=e.length-1;0==e[t]&&t>0;t--);for(i=0,s=e[t];s;s>>=1,i++);return i+=bpe*t}function expand(e,t){var i=int2bigInt(0,(e.length>t?e.length:t)*bpe,0);return copy_(i,e),i}function randTruePrime(e){var t=int2bigInt(0,e,0);return randTruePrime_(t,e),trim(t,1)}function randProbPrime(e){return randProbPrimeRounds(e,e>=600?2:e>=550?4:e>=500?5:e>=400?6:e>=350?7:e>=300?9:e>=250?12:e>=200?15:e>=150?18:e>=100?27:40)}function randProbPrimeRounds(e,t){var i,s,n;for(3e4,i=int2bigInt(0,e,0),0==primes.length&&(primes=findPrimes(3e4)),rpprb.length!=i.length&&(rpprb=dup(i));;){for(randBigInt_(i,e,0),i[0]|=1,n=0,s=0;s<primes.length&&primes[s]<=3e4;s++)if(0==modInt(i,primes[s])&&!equalsInt(i,primes[s])){n=1;break}for(s=0;s<t&&!n;s++){for(randBigInt_(rpprb,e,0);!greater(i,rpprb);)randBigInt_(rpprb,e,0);millerRabin(i,rpprb)||(n=1)}if(!n)return i}}function mod(e,t){var i=dup(e);return mod_(i,t),trim(i,1)}function addInt(e,t){var i=expand(e,e.length+1);return addInt_(i,t),trim(i,1)}function mult(e,t){var i=expand(e,e.length+t.length);return mult_(i,t),trim(i,1)}function powMod(e,t,i){var s=expand(e,i.length);return powMod_(s,trim(t,2),trim(i,2),0),trim(s,1)}function sub(e,t){var i=expand(e,e.length>t.length?e.length+1:t.length+1);return sub_(i,t),trim(i,1)}function add(e,t){var i=expand(e,e.length>t.length?e.length+1:t.length+1);return add_(i,t),trim(i,1)}function inverseMod(e,t){var i=expand(e,t.length);return inverseMod_(i,t)?trim(i,1):null}function multMod(e,t,i){var s=expand(e,i.length);return multMod_(s,t,i),trim(s,1)}function randTruePrime_(e,t){var i,s,n,r,a,o,l,c,h;if(0==primes.length&&(primes=findPrimes(3e4)),0==pows.length)for(pows=new Array(512),n=0;n<512;n++)pows[n]=Math.pow(2,n/511-1);if(.1,20,recLimit=20,s_i2.length!=e.length&&(s_i2=dup(e),s_R=dup(e),s_n1=dup(e),s_r2=dup(e),s_d=dup(e),s_x1=dup(e),s_x2=dup(e),s_b=dup(e),s_n=dup(e),s_i=dup(e),s_rm=dup(e),s_q=dup(e),s_a=dup(e),s_aa=dup(e)),t<=recLimit){for(i=(1<<(t+2>>1))-1,copyInt_(e,0),s=1;s;)for(s=0,e[0]=1|1<<t-1|Math.floor(Math.random()*(1<<t)),n=1;n<primes.length&&(primes[n]&i)==primes[n];n++)if(0==e[0]%primes[n]){s=1;break}carry_(e)}else{if(a=.1*t*t,t>40)for(r=1;t-t*r<=20;)r=pows[Math.floor(512*Math.random())];else r=.5;for(h=Math.floor(r*t)+1,randTruePrime_(s_q,h),copyInt_(s_i2,0),s_i2[Math.floor((t-2)/bpe)]|=1<<(t-2)%bpe,divide_(s_i2,s_q,s_i,s_rm),l=bitSize(s_i);;){for(;randBigInt_(s_R,l,0),!greater(s_i,s_R););for(addInt_(s_R,1),add_(s_R,s_i),copy_(s_n,s_q),mult_(s_n,s_R),multInt_(s_n,2),addInt_(s_n,1),copy_(s_r2,s_R),multInt_(s_r2,2),o=0,n=0;n<primes.length&&primes[n]<a;n++)if(0==modInt(s_n,primes[n])&&!equalsInt(s_n,primes[n])){o=1;break}if(o||millerRabinInt(s_n,2)||(o=1),!o){for(addInt_(s_n,-3),n=s_n.length-1;0==s_n[n]&&n>0;n--);for(c=0,w=s_n[n];w;w>>=1,c++);for(c+=bpe*n;randBigInt_(s_a,c,0),!greater(s_n,s_a););if(addInt_(s_n,3),addInt_(s_a,2),copy_(s_b,s_a),copy_(s_n1,s_n),addInt_(s_n1,-1),powMod_(s_b,s_n1,s_n),addInt_(s_b,-1),isZero(s_b)&&(copy_(s_b,s_a),powMod_(s_b,s_r2,s_n),addInt_(s_b,-1),copy_(s_aa,s_n),copy_(s_d,s_b),GCD_(s_d,s_n),equalsInt(s_d,1)))return void copy_(e,s_aa)}}}}function randBigInt(e,t){var i;return randBigInt_(i=int2bigInt(0,0,Math.floor((e-1)/bpe)+2),e,t),i}function randBigInt_(e,t,i){var s,n;for(s=0;s<e.length;s++)e[s]=0;for(n=Math.floor((t-1)/bpe)+1,s=0;s<n;s++)e[s]=Math.floor(Math.random()*(1<<bpe-1));e[n-1]&=(2<<(t-1)%bpe)-1,1==i&&(e[n-1]|=1<<(t-1)%bpe)}function GCD(e,t){var i;return GCD_(i=dup(e),dup(t)),i}function GCD_(e,i){var s,n,r,a,o,l,c,h,d;for(T.length!=e.length&&(T=dup(e)),d=1;d;){for(d=0,s=1;s<i.length;s++)if(i[s]){d=1;break}if(!d)break;for(s=e.length;!e[s]&&s>=0;s--);for(n=e[s],r=i[s],a=1,o=0,l=0,c=1;r+l&&r+c&&(h=Math.floor((n+a)/(r+l)),qp=Math.floor((n+o)/(r+c)),h==qp);)t=a-h*l,a=l,l=t,t=o-h*c,o=c,c=t,t=n-h*r,n=r,r=t;o?(copy_(T,e),linComb_(e,i,a,o),linComb_(i,T,c,l)):(mod_(e,i),copy_(T,e),copy_(e,i),copy_(i,T))}if(0!=i[0])for(t=modInt(e,i[0]),copyInt_(e,i[0]),i[0]=t;i[0];)e[0]%=i[0],t=e[0],e[0]=i[0],i[0]=t}function inverseMod_(e,t){var i=1+2*Math.max(e.length,t.length);if(!(1&e[0]||1&t[0]))return copyInt_(e,0),0;for(eg_u.length!=i&&(eg_u=new Array(i),eg_v=new Array(i),eg_A=new Array(i),eg_B=new Array(i),eg_C=new Array(i),eg_D=new Array(i)),copy_(eg_u,e),copy_(eg_v,t),copyInt_(eg_A,1),copyInt_(eg_B,0),copyInt_(eg_C,0),copyInt_(eg_D,1);;){for(;!(1&eg_u[0]);)halve_(eg_u),1&eg_A[0]||1&eg_B[0]?(add_(eg_A,t),halve_(eg_A),sub_(eg_B,e),halve_(eg_B)):(halve_(eg_A),halve_(eg_B));for(;!(1&eg_v[0]);)halve_(eg_v),1&eg_C[0]||1&eg_D[0]?(add_(eg_C,t),halve_(eg_C),sub_(eg_D,e),halve_(eg_D)):(halve_(eg_C),halve_(eg_D));if(greater(eg_v,eg_u)?(sub_(eg_v,eg_u),sub_(eg_C,eg_A),sub_(eg_D,eg_B)):(sub_(eg_u,eg_v),sub_(eg_A,eg_C),sub_(eg_B,eg_D)),equalsInt(eg_u,0))return negative(eg_C)&&add_(eg_C,t),copy_(e,eg_C),equalsInt(eg_v,1)?1:(copyInt_(e,0),0)}}function inverseModInt(e,t){for(var i=1,s=0;;){if(1==e)return i;if(0==e)return 0;if(s-=i*Math.floor(t/e),1==(t%=e))return s;if(0==t)return 0;i-=s*Math.floor(e/t),e%=t}}function inverseModInt_(e,t){return inverseModInt(e,t)}function eGCD_(e,t,i,s,n){var r=0,a=Math.max(e.length,t.length);for(eg_u.length!=a&&(eg_u=new Array(a),eg_A=new Array(a),eg_B=new Array(a),eg_C=new Array(a),eg_D=new Array(a));!(1&e[0]||1&t[0]);)halve_(e),halve_(t),r++;for(copy_(eg_u,e),copy_(i,t),copyInt_(eg_A,1),copyInt_(eg_B,0),copyInt_(eg_C,0),copyInt_(eg_D,1);;){for(;!(1&eg_u[0]);)halve_(eg_u),1&eg_A[0]||1&eg_B[0]?(add_(eg_A,t),halve_(eg_A),sub_(eg_B,e),halve_(eg_B)):(halve_(eg_A),halve_(eg_B));for(;!(1&i[0]);)halve_(i),1&eg_C[0]||1&eg_D[0]?(add_(eg_C,t),halve_(eg_C),sub_(eg_D,e),halve_(eg_D)):(halve_(eg_C),halve_(eg_D));if(greater(i,eg_u)?(sub_(i,eg_u),sub_(eg_C,eg_A),sub_(eg_D,eg_B)):(sub_(eg_u,i),sub_(eg_A,eg_C),sub_(eg_B,eg_D)),equalsInt(eg_u,0))return negative(eg_C)&&(add_(eg_C,t),sub_(eg_D,e)),multInt_(eg_D,-1),copy_(s,eg_C),copy_(n,eg_D),void leftShift_(i,r)}}function negative(e){return e[e.length-1]>>bpe-1&1}function greaterShift(e,t,i){var s,n=e.length,r=t.length;for(k=n+i<r?n+i:r,s=r-1-i;s<n&&s>=0;s++)if(e[s]>0)return 1;for(s=n-1+i;s<r;s++)if(t[s]>0)return 0;for(s=k-1;s>=i;s--){if(e[s-i]>t[s])return 1;if(e[s-i]<t[s])return 0}return 0}function greater(e,t){var i,s=e.length<t.length?e.length:t.length;for(i=e.length;i<t.length;i++)if(t[i])return 0;for(i=t.length;i<e.length;i++)if(e[i])return 1;for(i=s-1;i>=0;i--){if(e[i]>t[i])return 1;if(e[i]<t[i])return 0}return 0}function divide_(e,t,i,s){var n,r,a,o,l,c,h,d;for(copy_(s,e),r=t.length;0==t[r-1];r--);for(d=t[r-1],h=0;d;h++)d>>=1;for(leftShift_(t,h=bpe-h),leftShift_(s,h),n=s.length;0==s[n-1]&&n>r;n--);for(copyInt_(i,0);!greaterShift(t,s,n-r);)subShift_(s,t,n-r),i[n-r]++;for(a=n-1;a>=r;a--){for(s[a]==t[r-1]?i[a-r]=mask:i[a-r]=Math.floor((s[a]*radix+s[a-1])/t[r-1]);c=(l=(r>1?t[r-2]:0)*i[a-r])>>bpe,l&=mask,c=(o=c+i[a-r]*t[r-1])>>bpe,o&=mask,c==s[a]?o==s[a-1]?l>(a>1?s[a-2]:0):o>s[a-1]:c>s[a];)i[a-r]--;linCombShift_(s,t,-i[a-r],a-r),negative(s)&&(addShift_(s,t,a-r),i[a-r]--)}rightShift_(t,h),rightShift_(s,h)}function carry_(e){var t,i,s,n;for(i=e.length,s=0,t=0;t<i;t++)n=0,(s+=e[t])<0&&(s+=(n=-(s>>bpe))*radix),e[t]=s&mask,s=(s>>bpe)-n}function modInt(e,t){var i,s=0;for(i=e.length-1;i>=0;i--)s=(s*radix+e[i])%t;return s}function int2bigInt(e,t,i){var s;return s=i>(s=Math.ceil(t/bpe)+1)?i:s,buff=new Array(s),copyInt_(buff,e),buff}function str2bigInt(e,t,i){var s,n,r,a,o,l=e.length;if(-1==t){for(r=new Array(0);;){for(a=new Array(r.length+1),n=0;n<r.length;n++)a[n+1]=r[n];if(a[0]=parseInt(e,10),r=a,(s=e.indexOf(",",0))<1)break;if(0==(e=e.substring(s+1)).length)break}return r.length<i?(copy_(a=new Array(i),r),a):r}for(r=int2bigInt(0,t*l,0),n=0;n<l&&(s=digitsStr.indexOf(e.substring(n,n+1),0),t<=36&&s>=36&&(s-=26),!(s>=t||s<0));n++)multInt_(r,t),addInt_(r,s);for(l=r.length;l>0&&!r[l-1];l--);for(l=i>l+1?i:l+1,a=new Array(l),o=l<r.length?l:r.length,n=0;n<o;n++)a[n]=r[n];for(;n<l;n++)a[n]=0;return a}function equalsInt(e,t){var i;if(e[0]!=t)return 0;for(i=1;i<e.length;i++)if(e[i])return 0;return 1}function equals(e,t){var i,s=e.length<t.length?e.length:t.length;for(i=0;i<s;i++)if(e[i]!=t[i])return 0;if(e.length>t.length){for(;i<e.length;i++)if(e[i])return 0}else for(;i<t.length;i++)if(t[i])return 0;return 1}function isZero(e){var t;for(t=0;t<e.length;t++)if(e[t])return 0;return 1}function bigInt2str(e,t){var i,s,n="";if(s6.length!=e.length?s6=dup(e):copy_(s6,e),-1==t){for(i=e.length-1;i>0;i--)n+=e[i]+",";n+=e[0]}else for(;!isZero(s6);)s=divInt_(s6,t),n=digitsStr.substring(s,s+1)+n;return 0==n.length&&(n="0"),n}function dup(e){return buff=new Array(e.length),copy_(buff,e),buff}function copy_(e,t){var i,s=e.length<t.length?e.length:t.length;for(i=0;i<s;i++)e[i]=t[i];for(i=s;i<e.length;i++)e[i]=0}function copyInt_(e,t){var i,s;for(s=t,i=0;i<e.length;i++)e[i]=s&mask,s>>=bpe}function addInt_(e,t){var i,s,n,r;for(e[0]+=t,s=e.length,n=0,i=0;i<s;i++)if(r=0,(n+=e[i])<0&&(n+=(r=-(n>>bpe))*radix),e[i]=n&mask,!(n=(n>>bpe)-r))return}function rightShift_(e,t){var i,s=Math.floor(t/bpe);if(s){for(i=0;i<e.length-s;i++)e[i]=e[i+s];for(;i<e.length;i++)e[i]=0;t%=bpe}for(i=0;i<e.length-1;i++)e[i]=mask&(e[i+1]<<bpe-t|e[i]>>t);e[i]>>=t}function halve_(e){var t;for(t=0;t<e.length-1;t++)e[t]=mask&(e[t+1]<<bpe-1|e[t]>>1);e[t]=e[t]>>1|e[t]&radix>>1}function leftShift_(e,t){var i,s=Math.floor(t/bpe);if(s){for(i=e.length;i>=s;i--)e[i]=e[i-s];for(;i>=0;i--)e[i]=0;t%=bpe}if(t){for(i=e.length-1;i>0;i--)e[i]=mask&(e[i]<<t|e[i-1]>>bpe-t);e[i]=mask&e[i]<<t}}function multInt_(e,t){var i,s,n,r;if(t)for(s=e.length,n=0,i=0;i<s;i++)r=0,(n+=e[i]*t)<0&&(n+=(r=-(n>>bpe))*radix),e[i]=n&mask,n=(n>>bpe)-r}function divInt_(e,t){var i,s,n=0;for(i=e.length-1;i>=0;i--)s=n*radix+e[i],e[i]=Math.floor(s/t),n=s%t;return n}function linComb_(e,t,i,s){var n,r,a,o;for(a=e.length<t.length?e.length:t.length,o=e.length,r=0,n=0;n<a;n++)r+=i*e[n]+s*t[n],e[n]=r&mask,r>>=bpe;for(n=a;n<o;n++)r+=i*e[n],e[n]=r&mask,r>>=bpe}function linCombShift_(e,t,i,s){var n,r,a,o;for(a=e.length<s+t.length?e.length:s+t.length,o=e.length,r=0,n=s;n<a;n++)r+=e[n]+i*t[n-s],e[n]=r&mask,r>>=bpe;for(n=a;r&&n<o;n++)r+=e[n],e[n]=r&mask,r>>=bpe}function addShift_(e,t,i){var s,n,r,a;for(r=e.length<i+t.length?e.length:i+t.length,a=e.length,n=0,s=i;s<r;s++)n+=e[s]+t[s-i],e[s]=n&mask,n>>=bpe;for(s=r;n&&s<a;s++)n+=e[s],e[s]=n&mask,n>>=bpe}function subShift_(e,t,i){var s,n,r,a;for(r=e.length<i+t.length?e.length:i+t.length,a=e.length,n=0,s=i;s<r;s++)n+=e[s]-t[s-i],e[s]=n&mask,n>>=bpe;for(s=r;n&&s<a;s++)n+=e[s],e[s]=n&mask,n>>=bpe}function sub_(e,t){var i,s,n;for(n=e.length<t.length?e.length:t.length,s=0,i=0;i<n;i++)s+=e[i]-t[i],e[i]=s&mask,s>>=bpe;for(i=n;s&&i<e.length;i++)s+=e[i],e[i]=s&mask,s>>=bpe}function add_(e,t){var i,s,n;for(n=e.length<t.length?e.length:t.length,s=0,i=0;i<n;i++)s+=e[i]+t[i],e[i]=s&mask,s>>=bpe;for(i=n;s&&i<e.length;i++)s+=e[i],e[i]=s&mask,s>>=bpe}function mult_(e,t){var i;for(ss.length!=2*e.length&&(ss=new Array(2*e.length)),copyInt_(ss,0),i=0;i<t.length;i++)t[i]&&linCombShift_(ss,e,t[i],i);copy_(e,ss)}function mod_(e,t){s4.length!=e.length?s4=dup(e):copy_(s4,e),s5.length!=e.length&&(s5=dup(e)),divide_(s4,t,s5,e)}function multMod_(e,t,i){var s;for(s0.length!=2*e.length&&(s0=new Array(2*e.length)),copyInt_(s0,0),s=0;s<t.length;s++)t[s]&&linCombShift_(s0,e,t[s],s);mod_(s0,i),copy_(e,s0)}function squareMod_(e,t){var i,s,n,r,a;for(r=e.length;r>0&&!e[r-1];r--);for(a=r>t.length?2*r:2*t.length,s0.length!=a&&(s0=new Array(a)),copyInt_(s0,0),i=0;i<r;i++){for(n=s0[2*i]+e[i]*e[i],s0[2*i]=n&mask,n>>=bpe,s=i+1;s<r;s++)n=s0[i+s]+2*e[i]*e[s]+n,s0[i+s]=n&mask,n>>=bpe;s0[i+r]=n}mod_(s0,t),copy_(e,s0)}function trim(e,t){var i,s;for(i=e.length;i>0&&!e[i-1];i--);return copy_(s=new Array(i+t),e),s}function powMod_(e,t,i){var s,n,r,a;if(s7.length!=i.length&&(s7=dup(i)),0!=(1&i[0])){for(copyInt_(s7,0),r=i.length;r>0&&!i[r-1];r--);for(a=radix-inverseModInt(modInt(i,radix),radix),s7[r]=1,multMod_(e,s7,i),s3.length!=e.length?s3=dup(e):copy_(s3,e),s=t.length-1;s>0&!t[s];s--);if(0!=t[s]){for(n=1<<bpe-1;n&&!(t[s]&n);n>>=1);for(;;){if(!(n>>=1)){if(--s<0)return void mont_(e,one,i,a);n=1<<bpe-1}mont_(e,e,i,a),n&t[s]&&mont_(e,s3,i,a)}}else copyInt_(e,1)}else for(copy_(s7,e),copyInt_(e,1);!equalsInt(t,0);)1&t[0]&&multMod_(e,s7,i),divInt_(t,2),squareMod_(s7,i)}function mont_(e,t,i,s){var n,r,a,o,l,c,h=i.length,d=t.length;for(sa.length!=h&&(sa=new Array(h)),copyInt_(sa,0);h>0&&0==i[h-1];h--);for(;d>0&&0==t[d-1];d--);for(c=sa.length-1,n=0;n<h;n++){for(a=(l=sa[0]+e[n]*t[0])+(o=(l&mask)*s&mask)*i[0]>>bpe,l=e[n],r=1;r<d-4;)a+=sa[r]+o*i[r]+l*t[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*t[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*t[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*t[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*t[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<d;)a+=sa[r]+o*i[r]+l*t[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<h-4;)a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<h;)a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<c;)a+=sa[r],sa[r-1]=a&mask,a>>=bpe,r++;sa[r-1]=a&mask}greater(i,sa)||sub_(sa,i),copy_(e,sa)}bpe>>=1,mask=(1<<bpe)-1,radix=mask+1,one=int2bigInt(1,1,1),t=new Array(0),ss=t,s0=t,s1=t,s2=t,s3=t,s4=t,s5=t,s6=t,s7=t,T=t,sa=t,mr_x1=t,mr_r=t,mr_a=t,eg_v=t,eg_u=t,eg_A=t,eg_B=t,eg_C=t,eg_D=t,md_q1=t,md_q2=t,md_q3=t,md_r=t,md_r1=t,md_r2=t,md_tt=t,primes=t,pows=t,s_i=t,s_i2=t,s_R=t,s_rm=t,s_q=t,s_n1=t,s_a=t,s_r2=t,s_n=t,s_b=t,s_d=t,s_x1=t,s_x2=t,s_aa=t,rpprb=t;var blowfish=function(e){var t,i,s,n,r,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],l=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],c=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],h=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];function d(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function u(e,t){return(255&e.charCodeAt(t++))<<24|(255&e.charCodeAt(t++))<<16|(255&e.charCodeAt(t++))<<8|255&e.charCodeAt(t++)}function p(e,t){return d(u(e,0)^u(t,0))+d(u(e,4)^u(t,4))}function f(e){return(i[e>>24&255]+s[e>>16&255]^n[e>>8&255])+r[255&e]^0}function m(e){for(var i,s=0,n=u(e,0),r=u(e,4);s<16;)i=n^=t[s++],n=r^=f(n),r=i;return n^=t[s++],d(r^=t[s])+d(n)}function v(e){for(var i,s=17,n=u(e,0),r=u(e,4);s>1;)i=n^=t[s--],n=r^=f(n),r=i;return n^=t[s--],d(r^=t[s])+d(n)}function E(e){var d,p="\0\0\0\0\0\0\0\0";for(t=a.slice(),i=o.slice(),s=l.slice(),n=c.slice(),r=h.slice();e.length<72;)e+=e;for(d=0;d<18;)t[d]^=u(e,d<<2),d++;for(d=0;d<18;)p=m(p),t[d++]=u(p,0),t[d++]=u(p,4);for(d=0;d<256;)p=m(p),i[d++]=u(p,0),i[d++]=u(p,4);for(d=0;d<256;)p=m(p),s[d++]=u(p,0),s[d++]=u(p,4);for(d=0;d<256;)p=m(p),n[d++]=u(p,0),n[d++]=u(p,4);for(d=0;d<256;)p=m(p),r[d++]=u(p,0),r[d++]=u(p,4)}return{encrypt:function(e){var t,i,s,n=[],r=e.data||"",a=e.key||"\0",o=e.mode||"ecb",l=e.pchar||"";if(E(a),r=function(e){for(var t,i=0,s=e.length,n=String.fromCharCode,r=[];i<s;)(t=e.charCodeAt(i++))<128?r.push(n(t)):t<2048?r.push(n(t>>6&31|192,63&t|128)):t<65536?r.push(n(t>>12&15|224,t>>6&63|128,63&t|128)):t<2097152&&r.push(n(t>>18&7|240,t>>12&63|128,t>>6&63|128,63&t|128));return r.join("")}(r),r+=new Array((8-r.length%8)%8+1).join(l),"cbc"==o)for(s=e.iv||"\0\0\0\0\0\0\0\0",n.push(s),t=0;t<r.length;)i=m(p(r.substr(t,8),s)),n.push(i),s=i,t+=8;else for(t=0;t<r.length;)n.push(m(r.substr(t,8))),t+=8;return n.join("")},decrypt:function(e){var t,i,s,n=[],r=e.data||"",a=e.key||"\0",o=e.mode||"ecb",l=e.pchar||"";if(E(a),r+=new Array((8-r.length%8)%8+1).join("\0"),"cbc"==o)for(s=r.substr(0,8)||"\0\0\0\0\0\0\0\0",t=8;t<r.length;)i=r.substr(t,8),n.push(p(v(i),s)),s=i,t+=8;else for(t=0;t<r.length;)n.push(v(r.substr(t,8))),t+=8;return function(e){for(var t,i=0,s=e.length,n=String.fromCharCode,r=[];i<s;)0==(128&(t=e.charCodeAt(i++)))?r.push(n(255&t)):192==(224&t)?i<s&&r.push(n(t<<6&1984|63&e.charCodeAt(i++))):224==(240&t)?i+1<s&&r.push(n(t<<12&61440|e.charCodeAt(i++)<<6&4032|63&e.charCodeAt(i++))):240==(248&t)&&i+2<s&&r.push(n(t<<18&1835008|e.charCodeAt(i++)<<12&258048|e.charCodeAt(i++)<<6&4032|63&e.charCodeAt(i++)));return r.join("")}(r=n.join("").replace(new RegExp(l+"+$"),""))},mkIV:function(){return d(4294967296*Math.random())+d(4294967296*Math.random())}}}(),md5=function(e){var t=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],i=[3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745],s=""+new Array(64).join("\0");function n(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function r(e,t){return 255&e.charCodeAt(t++)|(255&e.charCodeAt(t++))<<8|(255&e.charCodeAt(t++))<<16|e.charCodeAt(t++)<<24}return{bin:function(e){var a,o,l,c,h,d,u,p,f,m=1732584193,v=4023233417,E=2562383102,g=271733878,_=new Array(16);for(e+=s.slice(0,64-(e.length+8)%64)+n(e.length<<3)+n(0),p=0;p<e.length;p+=64){for(f=0;f<16;f++)_[f]=r(e,p+(f<<2));for(a=m,o=v,l=E,c=g,f=0;f<64;f++)f<16?(h=o&l|~o&c,d=f):f<32?(h=c&o|~c&l,d=5*f+1&15):f<48?(h=o^l^c,d=3*f+5&15):(h=l^(o|~c),d=7*f&15),u=a+h+i[f]+_[d]|0,a=c,c=l,l=o,o=(u=u<<t[f]|u>>>32-t[f])+o|0;m=m+a|0,v=v+o|0,E=E+l|0,g=g+c|0}return n(m)+n(v)+n(E)+n(g)}}}();(function(){var e=void 0,t=this;function i(i,s){var n,r=i.split("."),a=t;!(r[0]in a)&&a.execScript&&a.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||s===e?a=a[n]?a[n]:a[n]={}:a[n]=s}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function n(e){var t,i,n,r,a,o,l,c,h,d,u=e.length,p=0,f=Number.POSITIVE_INFINITY;for(c=0;c<u;++c)e[c]>p&&(p=e[c]),e[c]<f&&(f=e[c]);for(t=1<<p,i=new(s?Uint32Array:Array)(t),n=1,r=0,a=2;n<=p;){for(c=0;c<u;++c)if(e[c]===n){for(o=0,l=r,h=0;h<n;++h)o=o<<1|1&l,l>>=1;for(d=n<<16|c,h=o;h<t;h+=a)i[h]=d;++r}++n,r<<=1,a<<=1}return[i,p,f]}function r(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(e):e,this.m=!1,this.i=o,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case a:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case o:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var a=0,o=1,l={t:a,s:o};r.prototype.k=function(){for(;!this.m;){var t=P(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var i=this.input,r=this.a,l=this.c,c=this.b,h=i.length,d=e,p=l.length,f=e;if(this.d=this.f=0,r+1>=h)throw Error("invalid uncompressed block header: LEN");if(d=i[r++]|i[r++]<<8,r+1>=h)throw Error("invalid uncompressed block header: NLEN");if(d===~(i[r++]|i[r++]<<8))throw Error("invalid uncompressed block header: length verify");if(r+d>i.length)throw Error("input buffer is broken");switch(this.i){case a:for(;c+d>l.length;){if(d-=f=p-c,s)l.set(i.subarray(r,r+f),c),c+=f,r+=f;else for(;f--;)l[c++]=i[r++];this.b=c,l=this.e(),c=this.b}break;case o:for(;c+d>l.length;)l=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)l.set(i.subarray(r,r+d),c),c+=d,r+=d;else for(;d--;)l[c++]=i[r++];this.a=r,this.b=c,this.c=l;break;case 1:this.j(R,C);break;case 2:var m,v,E,g,_=P(this,5)+257,y=P(this,5)+1,b=P(this,4)+4,S=new(s?Uint8Array:Array)(u.length),T=e,O=e,A=e,I=e,x=e;for(x=0;x<b;++x)S[u[x]]=P(this,3);if(!s)for(x=b,b=S.length;x<b;++x)S[u[x]]=0;for(m=n(S),T=new(s?Uint8Array:Array)(_+y),x=0,g=_+y;x<g;)switch(O=w(this,m)){case 16:for(I=3+P(this,2);I--;)T[x++]=A;break;case 17:for(I=3+P(this,3);I--;)T[x++]=0;A=0;break;case 18:for(I=11+P(this,7);I--;)T[x++]=0;A=0;break;default:A=T[x++]=O}v=n(s?T.subarray(0,_):T.slice(0,_)),E=n(s?T.subarray(_):T.slice(_)),this.j(v,E);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var c,h,d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=s?new Uint16Array(d):d,p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],f=s?new Uint16Array(p):p,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=s?new Uint8Array(m):m,E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],g=s?new Uint16Array(E):E,_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=s?new Uint8Array(_):_,b=new(s?Uint8Array:Array)(288);for(c=0,h=b.length;c<h;++c)b[c]=143>=c?8:255>=c?9:279>=c?7:8;var S,T,R=n(b),O=new(s?Uint8Array:Array)(30);for(S=0,T=O.length;S<T;++S)O[S]=5;var C=n(O);function P(e,t){for(var i,s=e.f,n=e.d,r=e.input,a=e.a,o=r.length;n<t;){if(a>=o)throw Error("input buffer is broken");s|=r[a++]<<n,n+=8}return i=s&(1<<t)-1,e.f=s>>>t,e.d=n-t,e.a=a,i}function w(e,t){for(var i,s,n=e.f,r=e.d,a=e.input,o=e.a,l=a.length,c=t[0],h=t[1];r<h&&!(o>=l);)n|=a[o++]<<r,r+=8;if((s=(i=c[n&(1<<h)-1])>>>16)>r)throw Error("invalid code length: "+s);return e.f=n>>s,e.d=r-s,e.a=o,65535&i}function A(e,t){var i,s;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),i=e[this.a++],s=e[this.a++],15&i){case I:this.method=I;break;default:throw Error("unsupported compression method")}if(0!=((i<<8)+s)%31)throw Error("invalid fcheck flag:"+((i<<8)+s)%31);if(32&s)throw Error("fdict flag is not supported");this.q=new r(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}r.prototype.j=function(e,t){var i=this.c,s=this.b;this.o=e;for(var n,r,a,o,l=i.length-258;256!==(n=w(this,e));)if(256>n)s>=l&&(this.b=s,i=this.e(),s=this.b),i[s++]=n;else for(o=f[r=n-257],0<v[r]&&(o+=P(this,v[r])),n=w(this,t),a=g[n],0<y[n]&&(a+=P(this,y[n])),s>=l&&(this.b=s,i=this.e(),s=this.b);o--;)i[s]=i[s++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=s},r.prototype.w=function(e,t){var i=this.c,s=this.b;this.o=e;for(var n,r,a,o,l=i.length;256!==(n=w(this,e));)if(256>n)s>=l&&(l=(i=this.e()).length),i[s++]=n;else for(o=f[r=n-257],0<v[r]&&(o+=P(this,v[r])),n=w(this,t),a=g[n],0<y[n]&&(a+=P(this,y[n])),s+o>l&&(l=(i=this.e()).length);o--;)i[s]=i[s++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=s},r.prototype.e=function(){var e,t,i=new(s?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.c;if(s)i.set(r.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=r[e+32768];if(this.g.push(i),this.l+=i.length,s)r.set(r.subarray(n,n+32768));else for(e=0;32768>e;++e)r[e]=r[n+e];return this.b=32768,r},r.prototype.z=function(e){var t,i,n,r=this.input.length/this.a+1|0,a=this.input,o=this.c;return e&&("number"==typeof e.p&&(r=e.p),"number"==typeof e.u&&(r+=e.u)),2>r?i=(n=(a.length-this.a)/this.o[2]/2*258|0)<o.length?o.length+n:o.length<<1:i=o.length*r,s?(t=new Uint8Array(i)).set(o):t=o,this.c=t},r.prototype.n=function(){var e,t,i,n,r,a=0,o=this.c,l=this.g,c=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,i=l.length;t<i;++t)for(n=0,r=(e=l[t]).length;n<r;++n)c[a++]=e[n];for(t=32768,i=this.b;t<i;++t)c[a++]=o[t];return this.g=[],this.buffer=c},r.prototype.v=function(){var e,t=this.b;return s?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},A.prototype.k=function(){var e,t,i=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var s=e;if("string"==typeof s){var n,r,a=s.split("");for(n=0,r=a.length;n<r;n++)a[n]=(255&a[n].charCodeAt(0))>>>0;s=a}for(var o,l=1,c=0,h=s.length,d=0;0<h;){h-=o=1024<h?1024:h;do{c+=l+=s[d++]}while(--o);l%=65521,c%=65521}if(t!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var I=8;i("Zlib.Inflate",A),i("Zlib.Inflate.prototype.decompress",A.prototype.k);var x,M,D,N,k={ADAPTIVE:l.s,BLOCK:l.t};if(Object.keys)x=Object.keys(k);else for(M in x=[],D=0,k)x[D++]=M;for(D=0,N=x.length;D<N;++D)i("Zlib.Inflate.BufferType."+(M=x[D]),k[M])}).call(this),window.epson||(window.epson={}),window.epson.ePOSDevice=ePOSDevice,window.epson.ePOSDeviceConfiguration=ePOSDeviceConfiguration}(window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,(function(){"use strict";var e="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,t="undefined"==typeof window?{document:e,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,i=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function s(s,n){var r=[],a=0;if(s&&!n&&s instanceof i)return s;if(s)if("string"==typeof s){var o,l,c=s.trim();if(c.indexOf("<")>=0&&c.indexOf(">")>=0){var h="div";for(0===c.indexOf("<li")&&(h="ul"),0===c.indexOf("<tr")&&(h="tbody"),0!==c.indexOf("<td")&&0!==c.indexOf("<th")||(h="tr"),0===c.indexOf("<tbody")&&(h="table"),0===c.indexOf("<option")&&(h="select"),(l=e.createElement(h)).innerHTML=c,a=0;a<l.childNodes.length;a+=1)r.push(l.childNodes[a])}else for(o=n||"#"!==s[0]||s.match(/[ .<>:~]/)?(n||e).querySelectorAll(s.trim()):[e.getElementById(s.trim().split("#")[1])],a=0;a<o.length;a+=1)o[a]&&r.push(o[a])}else if(s.nodeType||s===t||s===e)r.push(s);else if(s.length>0&&s[0].nodeType)for(a=0;a<s.length;a+=1)r.push(s[a]);return new i(r)}function n(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}s.fn=i.prototype,s.Class=i,s.Dom7=i;var r={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var s=0;s<this.length;s+=1)if(2===i.length)this[s].setAttribute(e,t);else for(var n in e)this[s][n]=e[n],this[s].setAttribute(n,e[n]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var s=0;s<this.length;s+=1)(i=this[s]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];var n=i.getAttribute("data-"+e);return n||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=t[0],r=t[1],a=t[2],o=t[3];function l(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),s(t).is(r))a.apply(t,i);else for(var n=s(t).parents(),o=0;o<n.length;o+=1)s(n[o]).is(r)&&a.apply(n[o],i)}}function c(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"==typeof t[1]&&(n=(e=t)[0],a=e[1],o=e[2],r=void 0),o||(o=!1);for(var h,d=n.split(" "),u=0;u<this.length;u+=1){var p=this[u];if(r)for(h=0;h<d.length;h+=1){var f=d[h];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[f]||(p.dom7LiveListeners[f]=[]),p.dom7LiveListeners[f].push({listener:a,proxyListener:l}),p.addEventListener(f,l,o)}else for(h=0;h<d.length;h+=1){var m=d[h];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[m]||(p.dom7Listeners[m]=[]),p.dom7Listeners[m].push({listener:a,proxyListener:c}),p.addEventListener(m,c,o)}}return this},off:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var s=t[0],n=t[1],r=t[2],a=t[3];"function"==typeof t[1]&&(s=(e=t)[0],r=e[1],a=e[2],n=void 0),a||(a=!1);for(var o=s.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],h=0;h<this.length;h+=1){var d=this[h],u=void 0;if(!n&&d.dom7Listeners?u=d.dom7Listeners[c]:n&&d.dom7LiveListeners&&(u=d.dom7LiveListeners[c]),u&&u.length)for(var p=u.length-1;p>=0;p-=1){var f=u[p];r&&f.listener===r||r&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===r?(d.removeEventListener(c,f.proxyListener,a),u.splice(p,1)):r||(d.removeEventListener(c,f.proxyListener,a),u.splice(p,1))}}return this},trigger:function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];for(var n=i[0].split(" "),r=i[1],a=0;a<n.length;a+=1)for(var o=n[a],l=0;l<this.length;l+=1){var c=this[l],h=void 0;try{h=new t.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0})}catch(d){(h=e.createEvent("Event")).initEvent(o,!0,!0),h.detail=r}c.dom7EventData=i.filter((function(e,t){return t>0})),c.dispatchEvent(h),c.dom7EventData=[],delete c.dom7EventData}return this},transitionEnd:function(e){var t,i=["webkitTransitionEnd","transitionend"],s=this;function n(r){if(r.target===this)for(e.call(this,r),t=0;t<i.length;t+=1)s.off(i[t],n)}if(e)for(t=0;t<i.length;t+=1)s.on(i[t],n);return this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var i=this[0],s=i.getBoundingClientRect(),n=e.body,r=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,o=i===t?t.scrollY:i.scrollTop,l=i===t?t.scrollX:i.scrollLeft;return{top:s.top+o-r,left:s.left+l-a}}return null},css:function(e,i){var s;if(1===arguments.length){if("string"!=typeof e){for(s=0;s<this.length;s+=1)for(var n in e)this[s].style[n]=e[n];return this}if(this[0])return t.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(s=0;s<this.length;s+=1)this[s].style[e]=i;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(n){var r,a,o=this[0];if(!o||void 0===n)return!1;if("string"==typeof n){if(o.matches)return o.matches(n);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(n);if(o.msMatchesSelector)return o.msMatchesSelector(n);for(r=s(n),a=0;a<r.length;a+=1)if(r[a]===o)return!0;return!1}if(n===e)return o===e;if(n===t)return o===t;if(n.nodeType||n instanceof i){for(r=n.nodeType?[n]:n,a=0;a<r.length;a+=1)if(r[a]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,s=this.length;return new i(e>s-1?[]:e<0?(t=s+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var t,s=[],n=arguments.length;n--;)s[n]=arguments[n];for(var r=0;r<s.length;r+=1){t=s[r];for(var a=0;a<this.length;a+=1)if("string"==typeof t){var o=e.createElement("div");for(o.innerHTML=t;o.firstChild;)this[a].appendChild(o.firstChild)}else if(t instanceof i)for(var l=0;l<t.length;l+=1)this[a].appendChild(t[l]);else this[a].appendChild(t)}return this},prepend:function(t){var s,n;for(s=0;s<this.length;s+=1)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t,n=r.childNodes.length-1;n>=0;n-=1)this[s].insertBefore(r.childNodes[n],this[s].childNodes[0])}else if(t instanceof i)for(n=0;n<t.length;n+=1)this[s].insertBefore(t[n],this[s].childNodes[0]);else this[s].insertBefore(t,this[s].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&s(this[0].nextElementSibling).is(e)?new i([this[0].nextElementSibling]):new i([]):this[0].nextElementSibling?new i([this[0].nextElementSibling]):new i([]):new i([])},nextAll:function(e){var t=[],n=this[0];if(!n)return new i([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?s(r).is(e)&&t.push(r):t.push(r),n=r}return new i(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&s(t.previousElementSibling).is(e)?new i([t.previousElementSibling]):new i([]):t.previousElementSibling?new i([t.previousElementSibling]):new i([])}return new i([])},prevAll:function(e){var t=[],n=this[0];if(!n)return new i([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?s(r).is(e)&&t.push(r):t.push(r),n=r}return new i(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?s(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return s(n(t))},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var r=this[i].parentNode;r;)e?s(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return s(n(t))},closest:function(e){var t=this;return void 0===e?new i([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var n=this[s].querySelectorAll(e),r=0;r<n.length;r+=1)t.push(n[r]);return new i(t)},children:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var a=this[r].childNodes,o=0;o<a.length;o+=1)e?1===a[o].nodeType&&s(a[o]).is(e)&&t.push(a[o]):1===a[o].nodeType&&t.push(a[o]);return new i(n(t))},filter:function(e){for(var t=[],s=0;s<this.length;s+=1)e.call(this[s],s,this[s])&&t.push(this[s]);return new i(t)},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r=this;for(i=0;i<e.length;i+=1){var a=s(e[i]);for(n=0;n<a.length;n+=1)r[r.length]=a[n],r.length+=1}return r},styles:function(){return this[0]?t.getComputedStyle(this[0],null):{}}};Object.keys(r).forEach((function(e){s.fn[e]=s.fn[e]||r[e]}));var a={deleteProps:function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(i){}try{delete t[e]}catch(i){}}))},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,i){var s,n,r;void 0===i&&(i="x");var a=t.getComputedStyle(e,null);return t.WebKitCSSMatrix?((n=a.transform||a.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new t.WebKitCSSMatrix("none"===n?"":n)):s=(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(n=t.WebKitCSSMatrix?r.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===i&&(n=t.WebKitCSSMatrix?r.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),n||0},parseUrlQuery:function(e){var i,s,n,r,a={},o=e||t.location.href;if("string"==typeof o&&o.length)for(r=(s=(o=o.indexOf("?")>-1?o.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,i=0;i<r;i+=1)n=s[i].replace(/#\S+/g,"").split("="),a[decodeURIComponent(n[0])]=void 0===n[1]?void 0:decodeURIComponent(n[1])||"";return a},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),s=1;s<e.length;s+=1){var n=e[s];if(null!=n)for(var r=Object.keys(Object(n)),o=0,l=r.length;o<l;o+=1){var c=r[o],h=Object.getOwnPropertyDescriptor(n,c);void 0!==h&&h.enumerable&&(a.isObject(i[c])&&a.isObject(n[c])?a.extend(i[c],n[c]):!a.isObject(i[c])&&a.isObject(n[c])?(i[c]={},a.extend(i[c],n[c])):i[c]=n[c])}}return i}},o={touch:t.Modernizr&&!0===t.Modernizr.touch||!!(t.navigator.maxTouchPoints>0||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,i)}catch(s){}return e}(),gestures:"ongesturestart"in t},l=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach((function(e){t.on(e,t.params.on[e])}))},c={components:{configurable:!0}};l.prototype.on=function(e,t,i){var s=this;if("function"!=typeof t)return s;var n=i?"unshift":"push";return e.split(" ").forEach((function(e){s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][n](t)})),s},l.prototype.once=function(e,t,i){var s=this;if("function"!=typeof t)return s;function n(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];s.off(e,n),n.f7proxy&&delete n.f7proxy,t.apply(s,i)}return n.f7proxy=t,s.on(e,n,i)},l.prototype.off=function(e,t){var i=this;return i.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].length&&i.eventsListeners[e].forEach((function(s,n){(s===t||s.f7proxy&&s.f7proxy===t)&&i.eventsListeners[e].splice(n,1)}))})),i):i},l.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,s,n,r=this;if(!r.eventsListeners)return r;"string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],s=e.slice(1,e.length),n=r):(i=e[0].events,s=e[0].data,n=e[0].context||r);var a=Array.isArray(i)?i:i.split(" ");return a.forEach((function(e){if(r.eventsListeners&&r.eventsListeners[e]){var t=[];r.eventsListeners[e].forEach((function(e){t.push(e)})),t.forEach((function(e){e.apply(n,s)}))}})),r},l.prototype.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var s=t.modules[i];s.params&&a.extend(e,s.params)}))},l.prototype.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var s=t.modules[i],n=e[i]||{};s.instance&&Object.keys(s.instance).forEach((function(e){var i=s.instance[e];t[e]="function"==typeof i?i.bind(t):i})),s.on&&t.on&&Object.keys(s.on).forEach((function(e){t.on(e,s.on[e])})),s.create&&s.create.bind(t)(n)}))},c.components.set=function(e){this.use&&this.use(e)},l.installModule=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;s.prototype.modules||(s.prototype.modules={});var n=e.name||Object.keys(s.prototype.modules).length+"_"+a.now();return s.prototype.modules[n]=e,e.proto&&Object.keys(e.proto).forEach((function(t){s.prototype[t]=e.proto[t]})),e.static&&Object.keys(e.static).forEach((function(t){s[t]=e.static[t]})),e.install&&e.install.apply(s,t),s},l.use=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;return Array.isArray(e)?(e.forEach((function(e){return s.installModule(e)})),s):s.installModule.apply(s,[e].concat(t))},Object.defineProperties(l,c);var h={updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),a.extend(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this.params,i=this.$wrapperEl,s=this.size,n=this.rtlTranslate,r=this.wrongRTL,o=this.virtual&&e.virtual.enabled,l=o?this.virtual.slides.length:this.slides.length,c=i.children("."+this.params.slideClass),h=o?this.virtual.slides.length:c.length,d=[],u=[],p=[];function f(t){return!e.cssMode||t!==c.length-1}var m=e.slidesOffsetBefore;"function"==typeof m&&(m=e.slidesOffsetBefore.call(this));var v=e.slidesOffsetAfter;"function"==typeof v&&(v=e.slidesOffsetAfter.call(this));var E=this.snapGrid.length,g=this.snapGrid.length,_=e.spaceBetween,y=-m,b=0,S=0;if(void 0!==s){var T,R;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*s),this.virtualSize=-_,n?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(T=Math.floor(h/e.slidesPerColumn)===h/this.params.slidesPerColumn?h:Math.ceil(h/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(T=Math.max(T,e.slidesPerView*e.slidesPerColumn)));for(var O,C=e.slidesPerColumn,P=T/C,w=Math.floor(h/e.slidesPerColumn),A=0;A<h;A+=1){R=0;var I=c.eq(A);if(e.slidesPerColumn>1){var x=void 0,M=void 0,D=void 0;if("row"===e.slidesPerColumnFill&&e.slidesPerGroup>1){var N=Math.floor(A/(e.slidesPerGroup*e.slidesPerColumn)),k=A-e.slidesPerColumn*e.slidesPerGroup*N,L=0===N?e.slidesPerGroup:Math.min(Math.ceil((h-N*C*e.slidesPerGroup)/C),e.slidesPerGroup);x=(M=k-(D=Math.floor(k/L))*L+N*e.slidesPerGroup)+D*T/C,I.css({"-webkit-box-ordinal-group":x,"-moz-box-ordinal-group":x,"-ms-flex-order":x,"-webkit-order":x,order:x})}else"column"===e.slidesPerColumnFill?(D=A-(M=Math.floor(A/C))*C,(M>w||M===w&&D===C-1)&&(D+=1)>=C&&(D=0,M+=1)):M=A-(D=Math.floor(A/P))*P;I.css("margin-"+(this.isHorizontal()?"top":"left"),0!==D&&e.spaceBetween&&e.spaceBetween+"px")}if("none"!==I.css("display")){if("auto"===e.slidesPerView){var B=t.getComputedStyle(I[0],null),V=I[0].style.transform,U=I[0].style.webkitTransform;if(V&&(I[0].style.transform="none"),U&&(I[0].style.webkitTransform="none"),e.roundLengths)R=this.isHorizontal()?I.outerWidth(!0):I.outerHeight(!0);else if(this.isHorizontal()){var F=parseFloat(B.getPropertyValue("width")),j=parseFloat(B.getPropertyValue("padding-left")),H=parseFloat(B.getPropertyValue("padding-right")),$=parseFloat(B.getPropertyValue("margin-left")),z=parseFloat(B.getPropertyValue("margin-right")),q=B.getPropertyValue("box-sizing");R=q&&"border-box"===q?F+$+z:F+j+H+$+z}else{var Y=parseFloat(B.getPropertyValue("height")),W=parseFloat(B.getPropertyValue("padding-top")),X=parseFloat(B.getPropertyValue("padding-bottom")),G=parseFloat(B.getPropertyValue("margin-top")),K=parseFloat(B.getPropertyValue("margin-bottom")),J=B.getPropertyValue("box-sizing");R=J&&"border-box"===J?Y+G+K:Y+W+X+G+K}V&&(I[0].style.transform=V),U&&(I[0].style.webkitTransform=U),e.roundLengths&&(R=Math.floor(R))}else R=(s-(e.slidesPerView-1)*_)/e.slidesPerView,e.roundLengths&&(R=Math.floor(R)),c[A]&&(this.isHorizontal()?c[A].style.width=R+"px":c[A].style.height=R+"px");c[A]&&(c[A].swiperSlideSize=R),p.push(R),e.centeredSlides?(y=y+R/2+b/2+_,0===b&&0!==A&&(y=y-s/2-_),0===A&&(y=y-s/2-_),Math.abs(y)<.001&&(y=0),e.roundLengths&&(y=Math.floor(y)),S%e.slidesPerGroup==0&&d.push(y),u.push(y)):(e.roundLengths&&(y=Math.floor(y)),(S-Math.min(this.params.slidesPerGroupSkip,S))%this.params.slidesPerGroup==0&&d.push(y),u.push(y),y=y+R+_),this.virtualSize+=R+_,b=R,S+=1}}if(this.virtualSize=Math.max(this.virtualSize,s)+v,n&&r&&("slide"===e.effect||"coverflow"===e.effect)&&i.css({width:this.virtualSize+e.spaceBetween+"px"}),e.setWrapperSize&&(this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"})),e.slidesPerColumn>1&&(this.virtualSize=(R+e.spaceBetween)*T,this.virtualSize=Math.ceil(this.virtualSize/e.slidesPerColumn)-e.spaceBetween,this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){O=[];for(var Q=0;Q<d.length;Q+=1){var Z=d[Q];e.roundLengths&&(Z=Math.floor(Z)),d[Q]<this.virtualSize+d[0]&&O.push(Z)}d=O}if(!e.centeredSlides){O=[];for(var ee=0;ee<d.length;ee+=1){var te=d[ee];e.roundLengths&&(te=Math.floor(te)),d[ee]<=this.virtualSize-s&&O.push(te)}d=O,Math.floor(this.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(this.virtualSize-s)}if(0===d.length&&(d=[0]),0!==e.spaceBetween&&(this.isHorizontal()?n?c.filter(f).css({marginLeft:_+"px"}):c.filter(f).css({marginRight:_+"px"}):c.filter(f).css({marginBottom:_+"px"})),e.centeredSlides&&e.centeredSlidesBounds){var ie=0;p.forEach((function(t){ie+=t+(e.spaceBetween?e.spaceBetween:0)}));var se=(ie-=e.spaceBetween)-s;d=d.map((function(e){return e<0?-m:e>se?se+v:e}))}if(e.centerInsufficientSlides){var ne=0;if(p.forEach((function(t){ne+=t+(e.spaceBetween?e.spaceBetween:0)})),(ne-=e.spaceBetween)<s){var re=(s-ne)/2;d.forEach((function(e,t){d[t]=e-re})),u.forEach((function(e,t){u[t]=e+re}))}}a.extend(this,{slides:c,snapGrid:d,slidesGrid:u,slidesSizesGrid:p}),h!==l&&this.emit("slidesLengthChange"),d.length!==E&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),u.length!==g&&this.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&this.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=[],s=0;if("number"==typeof e?this.setTransition(e):!0===e&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)if(this.params.centeredSlides)this.visibleSlides.each((function(e,t){i.push(t)}));else for(t=0;t<Math.ceil(this.params.slidesPerView);t+=1){var n=this.activeIndex+t;if(n>this.slides.length)break;i.push(this.slides.eq(n)[0])}else i.push(this.slides.eq(this.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var r=i[t].offsetHeight;s=r>s?r:s}s&&this.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this.params,i=this.slides,n=this.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var r=-e;n&&(r=e),i.removeClass(t.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var a=0;a<i.length;a+=1){var o=i[a],l=(r+(t.centeredSlides?this.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility||t.centeredSlides&&t.autoHeight){var c=-(r-o.swiperSlideOffset),h=c+this.slidesSizesGrid[a];(c>=0&&c<this.size-1||h>1&&h<=this.size||c<=0&&h>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(a),i.eq(a).addClass(t.slideVisibleClass))}o.progress=n?-l:l}this.visibleSlides=s(this.visibleSlides)}},updateProgress:function(e){if(void 0===e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var i=this.params,s=this.maxTranslate()-this.minTranslate(),n=this.progress,r=this.isBeginning,o=this.isEnd,l=r,c=o;0===s?(n=0,r=!0,o=!0):(r=(n=(e-this.minTranslate())/s)<=0,o=n>=1),a.extend(this,{progress:n,isBeginning:r,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&this.updateSlidesProgress(e),r&&!l&&this.emit("reachBeginning toEdge"),o&&!c&&this.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&this.emit("fromEdge"),this.emit("progress",n)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,s=this.$wrapperEl,n=this.activeIndex,r=this.realIndex,a=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=a?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+n+'"]'):t.eq(n)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this.rtlTranslate?this.translate:-this.translate,s=this.slidesGrid,n=this.snapGrid,r=this.params,o=this.activeIndex,l=this.realIndex,c=this.snapIndex,h=e;if(void 0===h){for(var d=0;d<s.length;d+=1)void 0!==s[d+1]?i>=s[d]&&i<s[d+1]-(s[d+1]-s[d])/2?h=d:i>=s[d]&&i<s[d+1]&&(h=d+1):i>=s[d]&&(h=d);r.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if(n.indexOf(i)>=0)t=n.indexOf(i);else{var u=Math.min(r.slidesPerGroupSkip,h);t=u+Math.floor((h-u)/r.slidesPerGroup)}if(t>=n.length&&(t=n.length-1),h!==o){var p=parseInt(this.slides.eq(h).attr("data-swiper-slide-index")||h,10);a.extend(this,{snapIndex:t,realIndex:p,previousIndex:o,activeIndex:h}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),l!==p&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")}else t!==c&&(this.snapIndex=t,this.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this.params,i=s(e.target).closest("."+t.slideClass)[0],n=!1;if(i)for(var r=0;r<this.slides.length;r+=1)this.slides[r]===i&&(n=!0);if(!i||!n)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=i,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(s(i).attr("data-swiper-slide-index"),10):this.clickedIndex=s(i).index(),t.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}};var d={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtlTranslate,s=this.translate,n=this.$wrapperEl;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;var r=a.getTranslate(n[0],e);return i&&(r=-r),r||0},setTranslate:function(e,t){var i=this.rtlTranslate,s=this.params,n=this.$wrapperEl,r=this.wrapperEl,a=this.progress,o=0,l=0;this.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.cssMode?r[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-o:-l:s.virtualTranslate||n.transform("translate3d("+o+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?o:l;var c=this.maxTranslate()-this.minTranslate();(0===c?0:(e-this.minTranslate())/c)!==a&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,s,n){var r;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);var a=this,o=a.params,l=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var c,h=a.minTranslate(),d=a.maxTranslate();if(c=s&&e>h?h:s&&e<d?d:e,a.updateProgress(c),o.cssMode){var u=a.isHorizontal();return 0===t?l[u?"scrollLeft":"scrollTop"]=-c:l.scrollTo?l.scrollTo(((r={})[u?"left":"top"]=-c,r.behavior="smooth",r)):l[u?"scrollLeft":"scrollTop"]=-c,!0}return 0===t?(a.setTransition(0),a.setTranslate(c),i&&(a.emit("beforeTransitionStart",t,n),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(c),i&&(a.emit("beforeTransitionStart",t,n),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,i&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}};var u={setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,s=this.params,n=this.previousIndex;if(!s.cssMode){s.autoHeight&&this.updateAutoHeight();var r=t;if(r||(r=i>n?"next":i<n?"prev":"reset"),this.emit("transitionStart"),e&&i!==n){if("reset"===r)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===r?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,s=this.previousIndex,n=this.params;if(this.animating=!1,!n.cssMode){this.setTransition(0);var r=t;if(r||(r=i>s?"next":i<s?"prev":"reset"),this.emit("transitionEnd"),e&&i!==s){if("reset"===r)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===r?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}};var p={slideTo:function(e,t,i,s){var n;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=this,a=e;a<0&&(a=0);var o=r.params,l=r.snapGrid,c=r.slidesGrid,h=r.previousIndex,d=r.activeIndex,u=r.rtlTranslate,p=r.wrapperEl;if(r.animating&&o.preventInteractionOnTransition)return!1;var f=Math.min(r.params.slidesPerGroupSkip,a),m=f+Math.floor((a-f)/r.params.slidesPerGroup);m>=l.length&&(m=l.length-1),(d||o.initialSlide||0)===(h||0)&&i&&r.emit("beforeSlideChangeStart");var v,E=-l[m];if(r.updateProgress(E),o.normalizeSlideIndex)for(var g=0;g<c.length;g+=1)-Math.floor(100*E)>=Math.floor(100*c[g])&&(a=g);if(r.initialized&&a!==d){if(!r.allowSlideNext&&E<r.translate&&E<r.minTranslate())return!1;if(!r.allowSlidePrev&&E>r.translate&&E>r.maxTranslate()&&(d||0)!==a)return!1}if(v=a>d?"next":a<d?"prev":"reset",u&&-E===r.translate||!u&&E===r.translate)return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==o.effect&&r.setTranslate(E),"reset"!==v&&(r.transitionStart(i,v),r.transitionEnd(i,v)),!1;if(o.cssMode){var _=r.isHorizontal(),y=-E;return u&&(y=p.scrollWidth-p.offsetWidth-y),0===t?p[_?"scrollLeft":"scrollTop"]=y:p.scrollTo?p.scrollTo(((n={})[_?"left":"top"]=y,n.behavior="smooth",n)):p[_?"scrollLeft":"scrollTop"]=y,!0}return 0===t?(r.setTransition(0),r.setTranslate(E),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,v),r.transitionEnd(i,v)):(r.setTransition(t),r.setTranslate(E),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,v),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,v))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var n=e;return this.params.loop&&(n+=this.loopedSlides),this.slideTo(n,t,i,s)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,n=this.animating,r=this.activeIndex<s.slidesPerGroupSkip?1:s.slidesPerGroup;if(s.loop){if(n)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+r,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,n=this.animating,r=this.snapGrid,a=this.slidesGrid,o=this.rtlTranslate;if(s.loop){if(n)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,h=l(o?this.translate:-this.translate),d=r.map((function(e){return l(e)})),u=(a.map((function(e){return l(e)})),r[d.indexOf(h)],r[d.indexOf(h)-1]);return void 0===u&&s.cssMode&&r.forEach((function(e){!u&&h>=e&&(u=e)})),void 0!==u&&(c=a.indexOf(u))<0&&(c=this.activeIndex-1),this.slideTo(c,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i,s){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===s&&(s=.5);var n=this.activeIndex,r=Math.min(this.params.slidesPerGroupSkip,n),a=r+Math.floor((n-r)/this.params.slidesPerGroup),o=this.rtlTranslate?this.translate:-this.translate;if(o>=this.snapGrid[a]){var l=this.snapGrid[a];o-l>(this.snapGrid[a+1]-l)*s&&(n+=this.params.slidesPerGroup)}else{var c=this.snapGrid[a-1];o-c<=(this.snapGrid[a]-c)*s&&(n-=this.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,this.slidesGrid.length-1),this.slideTo(n,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,n=t.$wrapperEl,r="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,o=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(s(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?o<t.loopedSlides-r/2||o>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),o=n.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),a.nextTick((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-r?(t.loopFix(),o=n.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),a.nextTick((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}};var f={loopCreate:function(){var t=this,i=t.params,n=t.$wrapperEl;n.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var r=n.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var a=i.slidesPerGroup-r.length%i.slidesPerGroup;if(a!==i.slidesPerGroup){for(var o=0;o<a;o+=1){var l=s(e.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);n.append(l)}r=n.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var c=[],h=[];r.each((function(e,i){var n=s(i);e<t.loopedSlides&&h.push(i),e<r.length&&e>=r.length-t.loopedSlides&&c.push(i),n.attr("data-swiper-slide-index",e)}));for(var d=0;d<h.length;d+=1)n.append(s(h[d].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var u=c.length-1;u>=0;u-=1)n.prepend(s(c[u].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var e,t=this.activeIndex,i=this.slides,s=this.loopedSlides,n=this.allowSlidePrev,r=this.allowSlideNext,a=this.snapGrid,o=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-a[t]-this.getTranslate();if(t<s)e=i.length-3*s+t,e+=s,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l);else if(t>=i.length-s){e=-i.length+t+s,e+=s,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l)}this.allowSlidePrev=n,this.allowSlideNext=r,this.emit("loopFix")},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}};var m={setGrabCursor:function(e){if(!(o.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){o.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}};var v,E,g,_,y,b,S,T,R,O,C,P,w,A,I,x={appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&t.append(e[s]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&o.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&this.loopDestroy();var n=s+1;if("object"==typeof e&&"length"in e){for(var r=0;r<e.length;r+=1)e[r]&&i.prepend(e[r]);n=s+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&o.observer||this.update(),this.slideTo(n,0,!1)},addSlide:function(e,t){var i=this.$wrapperEl,s=this.params,n=this.activeIndex;s.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+s.slideClass));var r=this.slides.length;if(e<=0)this.prependSlide(t);else if(e>=r)this.appendSlide(t);else{for(var a=n>e?n+1:n,l=[],c=r-1;c>=e;c-=1){var h=this.slides.eq(c);h.remove(),l.unshift(h)}if("object"==typeof t&&"length"in t){for(var d=0;d<t.length;d+=1)t[d]&&i.append(t[d]);a=n>e?n+t.length:n}else i.append(t);for(var u=0;u<l.length;u+=1)i.append(l[u]);s.loop&&this.loopCreate(),s.observer&&o.observer||this.update(),s.loop?this.slideTo(a+this.loopedSlides,0,!1):this.slideTo(a,0,!1)}},removeSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&(s-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+t.slideClass));var n,r=s;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)n=e[a],this.slides[n]&&this.slides.eq(n).remove(),n<r&&(r-=1);r=Math.max(r,0)}else n=e,this.slides[n]&&this.slides.eq(n).remove(),n<r&&(r-=1),r=Math.max(r,0);t.loop&&this.loopCreate(),t.observer&&o.observer||this.update(),t.loop?this.slideTo(r+this.loopedSlides,0,!1):this.slideTo(r,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},M=(v=t.navigator.platform,E=t.navigator.userAgent,g={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!t.cordova&&!t.phonegap),phonegap:!(!t.cordova&&!t.phonegap),electron:!1},_=t.screen.width,y=t.screen.height,b=E.match(/(Android);?[\s\/]+([\d.]+)?/),S=E.match(/(iPad).*OS\s([\d_]+)/),T=E.match(/(iPod)(.*OS\s([\d_]+))?/),R=!S&&E.match(/(iPhone\sOS|iOS)\s([\d_]+)/),O=E.indexOf("MSIE ")>=0||E.indexOf("Trident/")>=0,C=E.indexOf("Edge/")>=0,P=E.indexOf("Gecko/")>=0&&E.indexOf("Firefox/")>=0,w="Win32"===v,A=E.toLowerCase().indexOf("electron")>=0,I="MacIntel"===v,!S&&I&&o.touch&&(1024===_&&1366===y||834===_&&1194===y||834===_&&1112===y||768===_&&1024===y)&&(S=E.match(/(Version)\/([\d.]+)/),I=!1),g.ie=O,g.edge=C,g.firefox=P,b&&!w&&(g.os="android",g.osVersion=b[2],g.android=!0,g.androidChrome=E.toLowerCase().indexOf("chrome")>=0),(S||R||T)&&(g.os="ios",g.ios=!0),R&&!T&&(g.osVersion=R[2].replace(/_/g,"."),g.iphone=!0),S&&(g.osVersion=S[2].replace(/_/g,"."),g.ipad=!0),T&&(g.osVersion=T[3]?T[3].replace(/_/g,"."):null,g.ipod=!0),g.ios&&g.osVersion&&E.indexOf("Version/")>=0&&"10"===g.osVersion.split(".")[0]&&(g.osVersion=E.toLowerCase().split("version/")[1].split(" ")[0]),g.webView=!(!(R||S||T)||!E.match(/.*AppleWebKit(?!.*Safari)/i)&&!t.navigator.standalone)||t.matchMedia&&t.matchMedia("(display-mode: standalone)").matches,g.webview=g.webView,g.standalone=g.webView,g.desktop=!(g.ios||g.android)||A,g.desktop&&(g.electron=A,g.macos=I,g.windows=w,g.macos&&(g.os="macos"),g.windows&&(g.os="windows")),g.pixelRatio=t.devicePixelRatio||1,g);function D(i){var n=this.touchEventsData,r=this.params,o=this.touches;if(!this.animating||!r.preventInteractionOnTransition){var l=i;l.originalEvent&&(l=l.originalEvent);var c=s(l.target);if(("wrapper"!==r.touchEventsTarget||c.closest(this.wrapperEl).length)&&(n.isTouchEvent="touchstart"===l.type,(n.isTouchEvent||!("which"in l)||3!==l.which)&&!(!n.isTouchEvent&&"button"in l&&l.button>0||n.isTouched&&n.isMoved)))if(r.noSwiping&&c.closest(r.noSwipingSelector?r.noSwipingSelector:"."+r.noSwipingClass)[0])this.allowClick=!0;else if(!r.swipeHandler||c.closest(r.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var h=o.currentX,d=o.currentY,u=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,p=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(!u||!(h<=p||h>=t.screen.width-p)){if(a.extend(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=d,n.touchStartTime=a.now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==l.type){var f=!0;c.is(n.formElements)&&(f=!1),e.activeElement&&s(e.activeElement).is(n.formElements)&&e.activeElement!==c[0]&&e.activeElement.blur();var m=f&&this.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||m)&&l.preventDefault()}this.emit("touchStart",l)}}}}function N(t){var i=this.touchEventsData,n=this.params,r=this.touches,o=this.rtlTranslate,l=t;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"mousemove"!==l.type){var c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h="touchmove"===l.type?c.pageX:l.pageX,d="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return r.startX=h,void(r.startY=d);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(a.extend(r,{startX:h,startY:d,currentX:h,currentY:d}),i.touchStartTime=a.now()));if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(this.isVertical()){if(d<r.startY&&this.translate<=this.maxTranslate()||d>r.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(h<r.startX&&this.translate<=this.maxTranslate()||h>r.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&s(l.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){r.currentX=h,r.currentY=d;var u=r.currentX-r.startX,p=r.currentY-r.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(p,2))<this.params.threshold)){var f;if(void 0===i.isScrolling)this.isHorizontal()&&r.currentY===r.startY||this.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:u*u+p*p>=25&&(f=180*Math.atan2(Math.abs(p),Math.abs(u))/Math.PI,i.isScrolling=this.isHorizontal()?f>n.touchAngle:90-f>n.touchAngle);if(i.isScrolling&&this.emit("touchMoveOpposite",l),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,n.cssMode||l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation(),i.isMoved||(n.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!n.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",l)),this.emit("sliderMove",l),i.isMoved=!0;var m=this.isHorizontal()?u:p;r.diff=m,m*=n.touchRatio,o&&(m=-m),this.swipeDirection=m>0?"prev":"next",i.currentTranslate=m+i.startTranslate;var v=!0,E=n.resistanceRatio;if(n.touchReleaseOnEdges&&(E=0),m>0&&i.currentTranslate>this.minTranslate()?(v=!1,n.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+m,E))):m<0&&i.currentTranslate<this.maxTranslate()&&(v=!1,n.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-m,E))),v&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.threshold>0){if(!(Math.abs(m)>n.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=this.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),n.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[this.isHorizontal()?"currentX":"currentY"],time:a.now()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&this.emit("touchMoveOpposite",l)}function k(e){var t=this,i=t.touchEventsData,s=t.params,n=t.touches,r=t.rtlTranslate,o=t.$wrapperEl,l=t.slidesGrid,c=t.snapGrid,h=e;if(h.originalEvent&&(h=h.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",h),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);s.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var d,u=a.now(),p=u-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(h),t.emit("tap click",h),p<300&&u-i.lastClickTime<300&&t.emit("doubleTap doubleClick",h)),i.lastClickTime=a.now(),a.nextTick((function(){t.destroyed||(t.allowClick=!0)})),!i.isTouched||!i.isMoved||!t.swipeDirection||0===n.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,d=s.followFinger?r?t.translate:-t.translate:-i.currentTranslate,!s.cssMode)if(s.freeMode){if(d<-t.minTranslate())return void t.slideTo(t.activeIndex);if(d>-t.maxTranslate())return void(t.slides.length<c.length?t.slideTo(c.length-1):t.slideTo(t.slides.length-1));if(s.freeModeMomentum){if(i.velocities.length>1){var f=i.velocities.pop(),m=i.velocities.pop(),v=f.position-m.position,E=f.time-m.time;t.velocity=v/E,t.velocity/=2,Math.abs(t.velocity)<s.freeModeMinimumVelocity&&(t.velocity=0),(E>150||a.now()-f.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeModeMomentumVelocityRatio,i.velocities.length=0;var g=1e3*s.freeModeMomentumRatio,_=t.velocity*g,y=t.translate+_;r&&(y=-y);var b,S,T=!1,R=20*Math.abs(t.velocity)*s.freeModeMomentumBounceRatio;if(y<t.maxTranslate())s.freeModeMomentumBounce?(y+t.maxTranslate()<-R&&(y=t.maxTranslate()-R),b=t.maxTranslate(),T=!0,i.allowMomentumBounce=!0):y=t.maxTranslate(),s.loop&&s.centeredSlides&&(S=!0);else if(y>t.minTranslate())s.freeModeMomentumBounce?(y-t.minTranslate()>R&&(y=t.minTranslate()+R),b=t.minTranslate(),T=!0,i.allowMomentumBounce=!0):y=t.minTranslate(),s.loop&&s.centeredSlides&&(S=!0);else if(s.freeModeSticky){for(var O,C=0;C<c.length;C+=1)if(c[C]>-y){O=C;break}y=-(y=Math.abs(c[O]-y)<Math.abs(c[O-1]-y)||"next"===t.swipeDirection?c[O]:c[O-1])}if(S&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(g=r?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),s.freeModeSticky){var P=Math.abs((r?-y:y)-t.translate),w=t.slidesSizesGrid[t.activeIndex];g=P<w?s.speed:P<2*w?1.5*s.speed:2.5*s.speed}}else if(s.freeModeSticky)return void t.slideToClosest();s.freeModeMomentumBounce&&T?(t.updateProgress(b),t.setTransition(g),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(s.speed),setTimeout((function(){t.setTranslate(b),o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(y),t.setTransition(g),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):t.updateProgress(y),t.updateActiveIndex(),t.updateSlidesClasses()}else if(s.freeModeSticky)return void t.slideToClosest();(!s.freeModeMomentum||p>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var A=0,I=t.slidesSizesGrid[0],x=0;x<l.length;x+=x<s.slidesPerGroupSkip?1:s.slidesPerGroup){var M=x<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;void 0!==l[x+M]?d>=l[x]&&d<l[x+M]&&(A=x,I=l[x+M]-l[x]):d>=l[x]&&(A=x,I=l[l.length-1]-l[l.length-2])}var D=(d-l[A])/I,N=A<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(p>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(D>=s.longSwipesRatio?t.slideTo(A+N):t.slideTo(A)),"prev"===t.swipeDirection&&(D>1-s.longSwipesRatio?t.slideTo(A+N):t.slideTo(A))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(h.target===t.navigation.nextEl||h.target===t.navigation.prevEl)?h.target===t.navigation.nextEl?t.slideTo(A+N):t.slideTo(A):("next"===t.swipeDirection&&t.slideTo(A+N),"prev"===t.swipeDirection&&t.slideTo(A))}}}function L(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,s=this.allowSlidePrev,n=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=s,this.allowSlideNext=i,this.params.watchOverflow&&n!==this.snapGrid&&this.checkOverflow()}}function B(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function V(){var e=this.wrapperEl,t=this.rtlTranslate;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=t?e.scrollWidth-e.offsetWidth-e.scrollLeft:-e.scrollLeft:this.translate=-e.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var i=this.maxTranslate()-this.minTranslate();(0===i?0:(this.translate-this.minTranslate())/i)!==this.progress&&this.updateProgress(t?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}var U=!1;function F(){}var j={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},H={update:h,translate:d,transition:u,slide:p,loop:f,grabCursor:m,manipulation:x,events:{attachEvents:function(){var t=this.params,i=this.touchEvents,s=this.el,n=this.wrapperEl;this.onTouchStart=D.bind(this),this.onTouchMove=N.bind(this),this.onTouchEnd=k.bind(this),t.cssMode&&(this.onScroll=V.bind(this)),this.onClick=B.bind(this);var r=!!t.nested;if(!o.touch&&o.pointerEvents)s.addEventListener(i.start,this.onTouchStart,!1),e.addEventListener(i.move,this.onTouchMove,r),e.addEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var a=!("touchstart"!==i.start||!o.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};s.addEventListener(i.start,this.onTouchStart,a),s.addEventListener(i.move,this.onTouchMove,o.passiveListener?{passive:!1,capture:r}:r),s.addEventListener(i.end,this.onTouchEnd,a),i.cancel&&s.addEventListener(i.cancel,this.onTouchEnd,a),U||(e.addEventListener("touchstart",F),U=!0)}(t.simulateTouch&&!M.ios&&!M.android||t.simulateTouch&&!o.touch&&M.ios)&&(s.addEventListener("mousedown",this.onTouchStart,!1),e.addEventListener("mousemove",this.onTouchMove,r),e.addEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.addEventListener("click",this.onClick,!0),t.cssMode&&n.addEventListener("scroll",this.onScroll),t.updateOnWindowResize?this.on(M.ios||M.android?"resize orientationchange observerUpdate":"resize observerUpdate",L,!0):this.on("observerUpdate",L,!0)},detachEvents:function(){var t=this.params,i=this.touchEvents,s=this.el,n=this.wrapperEl,r=!!t.nested;if(!o.touch&&o.pointerEvents)s.removeEventListener(i.start,this.onTouchStart,!1),e.removeEventListener(i.move,this.onTouchMove,r),e.removeEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var a=!("onTouchStart"!==i.start||!o.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};s.removeEventListener(i.start,this.onTouchStart,a),s.removeEventListener(i.move,this.onTouchMove,r),s.removeEventListener(i.end,this.onTouchEnd,a),i.cancel&&s.removeEventListener(i.cancel,this.onTouchEnd,a)}(t.simulateTouch&&!M.ios&&!M.android||t.simulateTouch&&!o.touch&&M.ios)&&(s.removeEventListener("mousedown",this.onTouchStart,!1),e.removeEventListener("mousemove",this.onTouchMove,r),e.removeEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.removeEventListener("click",this.onClick,!0),t.cssMode&&n.removeEventListener("scroll",this.onScroll),this.off(M.ios||M.android?"resize orientationchange observerUpdate":"resize observerUpdate",L)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.initialized,i=this.loopedSlides;void 0===i&&(i=0);var s=this.params,n=this.$el,r=s.breakpoints;if(r&&(!r||0!==Object.keys(r).length)){var o=this.getBreakpoint(r);if(o&&this.currentBreakpoint!==o){var l=o in r?r[o]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var c=l||this.originalParams,h=s.slidesPerColumn>1,d=c.slidesPerColumn>1;h&&!d?n.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"):!h&&d&&(n.addClass(s.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&n.addClass(s.containerModifierClass+"multirow-column"));var u=c.direction&&c.direction!==s.direction,p=s.loop&&(c.slidesPerView!==s.slidesPerView||u);u&&t&&this.changeDirection(),a.extend(this.params,c),a.extend(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=o,p&&t&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-i+this.loopedSlides,0,!1)),this.emit("breakpoint",c)}}},getBreakpoint:function(e){if(e){var i=!1,s=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var i=parseFloat(e.substr(1));return{value:t.innerHeight*i,point:e}}return{value:e,point:e}}));s.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var n=0;n<s.length;n+=1){var r=s[n],a=r.point;r.value<=t.innerWidth&&(i=a)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.params,t=this.isLocked,i=this.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?this.isLocked=i<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,t!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),t&&t!==this.isLocked&&(this.isEnd=!1,this.navigation.update())}},classes:{addClasses:function(){var e=this.classNames,t=this.params,i=this.rtl,s=this.$el,n=[];n.push("initialized"),n.push(t.direction),t.freeMode&&n.push("free-mode"),t.autoHeight&&n.push("autoheight"),i&&n.push("rtl"),t.slidesPerColumn>1&&(n.push("multirow"),"column"===t.slidesPerColumnFill&&n.push("multirow-column")),M.android&&n.push("android"),M.ios&&n.push("ios"),t.cssMode&&n.push("css-mode"),n.forEach((function(i){e.push(t.containerModifierClass+i)})),s.addClass(e.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,i,s,n,r,a){var o;function l(){a&&a()}e.complete&&r?l():i?((o=new t.Image).onload=l,o.onerror=l,n&&(o.sizes=n),s&&(o.srcset=s),i&&(o.src=i)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var s=e.imagesToLoad[i];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}}},$={},z=function(e){function t(){for(var i,n,r,l=[],c=arguments.length;c--;)l[c]=arguments[c];1===l.length&&l[0].constructor&&l[0].constructor===Object?r=l[0]:(n=(i=l)[0],r=i[1]),r||(r={}),r=a.extend({},r),n&&!r.el&&(r.el=n),e.call(this,r),Object.keys(H).forEach((function(e){Object.keys(H[e]).forEach((function(i){t.prototype[i]||(t.prototype[i]=H[e][i])}))}));var h=this;void 0===h.modules&&(h.modules={}),Object.keys(h.modules).forEach((function(e){var t=h.modules[e];if(t.params){var i=Object.keys(t.params)[0],s=t.params[i];if("object"!=typeof s||null===s)return;if(!(i in r)||!("enabled"in s))return;!0===r[i]&&(r[i]={enabled:!0}),"object"!=typeof r[i]||"enabled"in r[i]||(r[i].enabled=!0),r[i]||(r[i]={enabled:!1})}}));var d=a.extend({},j);h.useModulesParams(d),h.params=a.extend({},d,$,r),h.originalParams=a.extend({},h.params),h.passedParams=a.extend({},r),h.$=s;var u=s(h.params.el);if(n=u[0]){if(u.length>1){var p=[];return u.each((function(e,i){var s=a.extend({},r,{el:i});p.push(new t(s))})),p}var f,m,v;return n.swiper=h,u.data("swiper",h),n&&n.shadowRoot&&n.shadowRoot.querySelector?(f=s(n.shadowRoot.querySelector("."+h.params.wrapperClass))).children=function(e){return u.children(e)}:f=u.children("."+h.params.wrapperClass),a.extend(h,{$el:u,el:n,$wrapperEl:f,wrapperEl:f[0],classNames:[],slides:s(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===h.params.direction},isVertical:function(){return"vertical"===h.params.direction},rtl:"rtl"===n.dir.toLowerCase()||"rtl"===u.css("direction"),rtlTranslate:"horizontal"===h.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===u.css("direction")),wrongRTL:"-webkit-box"===f.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEvents:(m=["touchstart","touchmove","touchend","touchcancel"],v=["mousedown","mousemove","mouseup"],o.pointerEvents&&(v=["pointerdown","pointermove","pointerup"]),h.touchEventsTouch={start:m[0],move:m[1],end:m[2],cancel:m[3]},h.touchEventsDesktop={start:v[0],move:v[1],end:v[2]},o.touch||!h.params.simulateTouch?h.touchEventsTouch:h.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:a.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.useModules(),h.params.init&&h.init(),h}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return t.prototype.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,s=this.size,n=this.activeIndex,r=1;if(e.centeredSlides){for(var a,o=t[n].swiperSlideSize,l=n+1;l<t.length;l+=1)t[l]&&!a&&(r+=1,(o+=t[l].swiperSlideSize)>s&&(a=!0));for(var c=n-1;c>=0;c-=1)t[c]&&!a&&(r+=1,(o+=t[c].swiperSlideSize)>s&&(a=!0))}else for(var h=n+1;h<t.length;h+=1)i[h]-i[n]<s&&(r+=1);return r},t.prototype.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(s(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||s(),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function s(){var t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},t.prototype.changeDirection=function(e,t){void 0===t&&(t=!0);var i=this.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(this.$el.removeClass(""+this.params.containerModifierClass+i).addClass(""+this.params.containerModifierClass+e),this.params.direction=e,this.slides.each((function(t,i){"vertical"===e?i.style.width="":i.style.height=""})),this.emit("changeDirection"),t&&this.update()),this},t.prototype.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"))},t.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,s=i.params,n=i.$el,r=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),n.removeAttr("style"),r.removeAttr("style"),o&&o.length&&o.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(e){i.off(e)})),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),a.deleteProps(i)),i.destroyed=!0),null},t.extendDefaults=function(e){a.extend($,e)},i.extendedDefaults.get=function(){return $},i.defaults.get=function(){return j},i.Class.get=function(){return e},i.$.get=function(){return s},Object.defineProperties(t,i),t}(l),q={name:"device",proto:{device:M},static:{device:M}},Y={name:"support",proto:{support:o},static:{support:o}},W={isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:function(){var e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)},X={name:"browser",proto:{browser:W},static:{browser:W}},G={name:"resize",create:function(){var e=this;a.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){t.addEventListener("resize",this.resize.resizeHandler),t.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){t.removeEventListener("resize",this.resize.resizeHandler),t.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},K={func:t.MutationObserver||t.WebkitMutationObserver,attach:function(e,i){void 0===i&&(i={});var s=this,n=new(0,K.func)((function(e){if(1!==e.length){var i=function(){s.emit("observerUpdate",e[0])};t.requestAnimationFrame?t.requestAnimationFrame(i):t.setTimeout(i,0)}else s.emit("observerUpdate",e[0])}));n.observe(e,{attributes:void 0===i.attributes||i.attributes,childList:void 0===i.childList||i.childList,characterData:void 0===i.characterData||i.characterData}),s.observer.observers.push(n)},init:function(){if(o.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},J={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){a.extend(this,{observer:{init:K.init.bind(this),attach:K.attach.bind(this),destroy:K.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},Q={update:function(e){var t=this,i=t.params,s=i.slidesPerView,n=i.slidesPerGroup,r=i.centeredSlides,o=t.params.virtual,l=o.addSlidesBefore,c=o.addSlidesAfter,h=t.virtual,d=h.from,u=h.to,p=h.slides,f=h.slidesGrid,m=h.renderSlide,v=h.offset;t.updateActiveIndex();var E,g,_,y=t.activeIndex||0;E=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",r?(g=Math.floor(s/2)+n+l,_=Math.floor(s/2)+n+c):(g=s+(n-1)+l,_=n+c);var b=Math.max((y||0)-_,0),S=Math.min((y||0)+g,p.length-1),T=(t.slidesGrid[b]||0)-(t.slidesGrid[0]||0);function R(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(a.extend(t.virtual,{from:b,to:S,offset:T,slidesGrid:t.slidesGrid}),d===b&&u===S&&!e)return t.slidesGrid!==f&&T!==v&&t.slides.css(E,T+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:T,from:b,to:S,slides:function(){for(var e=[],t=b;t<=S;t+=1)e.push(p[t]);return e}()}),void R();var O=[],C=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var P=d;P<=u;P+=1)(P<b||P>S)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+P+'"]').remove();for(var w=0;w<p.length;w+=1)w>=b&&w<=S&&(void 0===u||e?C.push(w):(w>u&&C.push(w),w<d&&O.push(w)));C.forEach((function(e){t.$wrapperEl.append(m(p[e],e))})),O.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(m(p[e],e))})),t.$wrapperEl.children(".swiper-slide").css(E,T+"px"),R()},renderSlide:function(e,t){var i=this.params.virtual;if(i.cache&&this.virtual.cache[t])return this.virtual.cache[t];var n=i.renderSlide?s(i.renderSlide.call(this,e,t)):s('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return n.attr("data-swiper-slide-index")||n.attr("data-swiper-slide-index",t),i.cache&&(this.virtual.cache[t]=n),n},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t=this.activeIndex,i=t+1,s=1;if(Array.isArray(e)){for(var n=0;n<e.length;n+=1)e[n]&&this.virtual.slides.unshift(e[n]);i=t+e.length,s=e.length}else this.virtual.slides.unshift(e);if(this.params.virtual.cache){var r=this.virtual.cache,a={};Object.keys(r).forEach((function(e){var t=r[e],i=t.attr("data-swiper-slide-index");i&&t.attr("data-swiper-slide-index",parseInt(i,10)+1),a[parseInt(e,10)+s]=t})),this.virtual.cache=a}this.virtual.update(!0),this.slideTo(i,0)},removeSlide:function(e){if(null!=e){var t=this.activeIndex;if(Array.isArray(e))for(var i=e.length-1;i>=0;i-=1)this.virtual.slides.splice(e[i],1),this.params.virtual.cache&&delete this.virtual.cache[e[i]],e[i]<t&&(t-=1),t=Math.max(t,0);else this.virtual.slides.splice(e,1),this.params.virtual.cache&&delete this.virtual.cache[e],e<t&&(t-=1),t=Math.max(t,0);this.virtual.update(!0),this.slideTo(t,0)}},removeAllSlides:function(){this.virtual.slides=[],this.params.virtual.cache&&(this.virtual.cache={}),this.virtual.update(!0),this.slideTo(0,0)}},Z={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){a.extend(this,{virtual:{update:Q.update.bind(this),appendSlide:Q.appendSlide.bind(this),prependSlide:Q.prependSlide.bind(this),removeSlide:Q.removeSlide.bind(this),removeAllSlides:Q.removeAllSlides.bind(this),renderSlide:Q.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};a.extend(this.params,e),a.extend(this.originalParams,e),this.params.initialSlide||this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},ee={handle:function(i){var s=this.rtlTranslate,n=i;n.originalEvent&&(n=n.originalEvent);var r=n.keyCode||n.charCode;if(!this.allowSlideNext&&(this.isHorizontal()&&39===r||this.isVertical()&&40===r||34===r))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&37===r||this.isVertical()&&38===r||33===r))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||e.activeElement&&e.activeElement.nodeName&&("input"===e.activeElement.nodeName.toLowerCase()||"textarea"===e.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(33===r||34===r||37===r||39===r||38===r||40===r)){var a=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var o=t.innerWidth,l=t.innerHeight,c=this.$el.offset();s&&(c.left-=this.$el[0].scrollLeft);for(var h=[[c.left,c.top],[c.left+this.width,c.top],[c.left,c.top+this.height],[c.left+this.width,c.top+this.height]],d=0;d<h.length;d+=1){var u=h[d];u[0]>=0&&u[0]<=o&&u[1]>=0&&u[1]<=l&&(a=!0)}if(!a)return}this.isHorizontal()?(33!==r&&34!==r&&37!==r&&39!==r||(n.preventDefault?n.preventDefault():n.returnValue=!1),(34!==r&&39!==r||s)&&(33!==r&&37!==r||!s)||this.slideNext(),(33!==r&&37!==r||s)&&(34!==r&&39!==r||!s)||this.slidePrev()):(33!==r&&34!==r&&38!==r&&40!==r||(n.preventDefault?n.preventDefault():n.returnValue=!1),34!==r&&40!==r||this.slideNext(),33!==r&&38!==r||this.slidePrev()),this.emit("keyPress",r)}},enable:function(){this.keyboard.enabled||(s(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(s(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},te={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){a.extend(this,{keyboard:{enabled:!1,enable:ee.enable.bind(this),disable:ee.disable.bind(this),handle:ee.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var ie={lastScrollTime:a.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return t.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t="onwheel"in e;if(!t){var i=e.createElement("div");i.setAttribute("onwheel","return;"),t="function"==typeof i.onwheel}return!t&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(t=e.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel"},normalize:function(e){var t=0,i=0,s=0,n=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),s=10*t,n=10*i,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(s=e.deltaX),e.shiftKey&&!s&&(s=n,n=0),(s||n)&&e.deltaMode&&(1===e.deltaMode?(s*=40,n*=40):(s*=800,n*=800)),s&&!t&&(t=s<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:t,spinY:i,pixelX:s,pixelY:n}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,i=this,n=i.params.mousewheel;i.params.cssMode&&t.preventDefault();var r=i.$el;if("container"!==i.params.mousewheel.eventsTarged&&(r=s(i.params.mousewheel.eventsTarged)),!i.mouseEntered&&!r[0].contains(t.target)&&!n.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var o=0,l=i.rtlTranslate?-1:1,c=ie.normalize(t);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(c.pixelX)>Math.abs(c.pixelY)))return!0;o=c.pixelX*l}else{if(!(Math.abs(c.pixelY)>Math.abs(c.pixelX)))return!0;o=c.pixelY}else o=Math.abs(c.pixelX)>Math.abs(c.pixelY)?-c.pixelX*l:-c.pixelY;if(0===o)return!0;if(n.invert&&(o=-o),i.params.freeMode){var h={time:a.now(),delta:Math.abs(o),direction:Math.sign(o)},d=i.mousewheel.lastEventBeforeSnap,u=d&&h.time<d.time+500&&h.delta<=d.delta&&h.direction===d.direction;if(!u){i.mousewheel.lastEventBeforeSnap=void 0,i.params.loop&&i.loopFix();var p=i.getTranslate()+o*n.sensitivity,f=i.isBeginning,m=i.isEnd;if(p>=i.minTranslate()&&(p=i.minTranslate()),p<=i.maxTranslate()&&(p=i.maxTranslate()),i.setTransition(0),i.setTranslate(p),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!f&&i.isBeginning||!m&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky){clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=void 0;var v=i.mousewheel.recentWheelEvents;v.length>=15&&v.shift();var E=v.length?v[v.length-1]:void 0,g=v[0];if(v.push(h),E&&(h.delta>E.delta||h.direction!==E.direction))v.splice(0);else if(v.length>=15&&h.time-g.time<500&&g.delta-h.delta>=1&&h.delta<=6){var _=o>0?.8:.2;i.mousewheel.lastEventBeforeSnap=h,v.splice(0),i.mousewheel.timeout=a.nextTick((function(){i.slideToClosest(i.params.speed,!0,void 0,_)}),0)}i.mousewheel.timeout||(i.mousewheel.timeout=a.nextTick((function(){i.mousewheel.lastEventBeforeSnap=h,v.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)}),500))}if(u||i.emit("scroll",t),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),p===i.minTranslate()||p===i.maxTranslate())return!0}}else{var y={time:a.now(),delta:Math.abs(o),direction:Math.sign(o),raw:e},b=i.mousewheel.recentWheelEvents;b.length>=2&&b.shift();var S=b.length?b[b.length-1]:void 0;if(b.push(y),S?(y.direction!==S.direction||y.delta>S.delta)&&i.mousewheel.animateSlider(y):i.mousewheel.animateSlider(y),i.mousewheel.releaseScroll(y))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},animateSlider:function(e){return e.delta>=6&&a.now()-this.mousewheel.lastScrollTime<60||(e.direction<0?this.isEnd&&!this.params.loop||this.animating||(this.slideNext(),this.emit("scroll",e.raw)):this.isBeginning&&!this.params.loop||this.animating||(this.slidePrev(),this.emit("scroll",e.raw)),this.mousewheel.lastScrollTime=(new t.Date).getTime(),!1)},releaseScroll:function(e){var t=this.params.mousewheel;if(e.direction<0){if(this.isEnd&&!this.params.loop&&t.releaseOnEdges)return!0}else if(this.isBeginning&&!this.params.loop&&t.releaseOnEdges)return!0;return!1},enable:function(){var e=ie.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(t=s(this.params.mousewheel.eventsTarged)),t.on("mouseenter",this.mousewheel.handleMouseEnter),t.on("mouseleave",this.mousewheel.handleMouseLeave),t.on(e,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var e=ie.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(!this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(t=s(this.params.mousewheel.eventsTarged)),t.off(e,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}},se={update:function(){var e=this.params.navigation;if(!this.params.loop){var t=this.navigation,i=t.$nextEl,s=t.$prevEl;s&&s.length>0&&(this.isBeginning?s.addClass(e.disabledClass):s.removeClass(e.disabledClass),s[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),i&&i.length>0&&(this.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,i=this.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=s(i.nextEl),this.params.uniqueNavElements&&"string"==typeof i.nextEl&&e.length>1&&1===this.$el.find(i.nextEl).length&&(e=this.$el.find(i.nextEl))),i.prevEl&&(t=s(i.prevEl),this.params.uniqueNavElements&&"string"==typeof i.prevEl&&t.length>1&&1===this.$el.find(i.prevEl).length&&(t=this.$el.find(i.prevEl))),e&&e.length>0&&e.on("click",this.navigation.onNextClick),t&&t.length>0&&t.on("click",this.navigation.onPrevClick),a.extend(this.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click",this.navigation.onNextClick),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click",this.navigation.onPrevClick),i.removeClass(this.params.navigation.disabledClass))}},ne={update:function(){var e=this.rtl,t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var i,n=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,a=this.params.loop?Math.ceil((n-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((i=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>n-1-2*this.loopedSlides&&(i-=n-2*this.loopedSlides),i>a-1&&(i-=a),i<0&&"bullets"!==this.params.paginationType&&(i=a+i)):i=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===t.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var o,l,c,h=this.pagination.bullets;if(t.dynamicBullets&&(this.pagination.bulletSize=h.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(t.dynamicMainBullets+4)+"px"),t.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=i-this.previousIndex,this.pagination.dynamicBulletIndex>t.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=t.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=i-this.pagination.dynamicBulletIndex,c=((l=o+(Math.min(h.length,t.dynamicMainBullets)-1))+o)/2),h.removeClass(t.bulletActiveClass+" "+t.bulletActiveClass+"-next "+t.bulletActiveClass+"-next-next "+t.bulletActiveClass+"-prev "+t.bulletActiveClass+"-prev-prev "+t.bulletActiveClass+"-main"),r.length>1)h.each((function(e,n){var r=s(n),a=r.index();a===i&&r.addClass(t.bulletActiveClass),t.dynamicBullets&&(a>=o&&a<=l&&r.addClass(t.bulletActiveClass+"-main"),a===o&&r.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),a===l&&r.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next"))}));else{var d=h.eq(i),u=d.index();if(d.addClass(t.bulletActiveClass),t.dynamicBullets){for(var p=h.eq(o),f=h.eq(l),m=o;m<=l;m+=1)h.eq(m).addClass(t.bulletActiveClass+"-main");if(this.params.loop)if(u>=h.length-t.dynamicMainBullets){for(var v=t.dynamicMainBullets;v>=0;v-=1)h.eq(h.length-v).addClass(t.bulletActiveClass+"-main");h.eq(h.length-t.dynamicMainBullets-1).addClass(t.bulletActiveClass+"-prev")}else p.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),f.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next");else p.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),f.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}}if(t.dynamicBullets){var E=Math.min(h.length,t.dynamicMainBullets+4),g=(this.pagination.bulletSize*E-this.pagination.bulletSize)/2-c*this.pagination.bulletSize,_=e?"right":"left";h.css(this.isHorizontal()?_:"top",g+"px")}}if("fraction"===t.type&&(r.find("."+t.currentClass).text(t.formatFractionCurrent(i+1)),r.find("."+t.totalClass).text(t.formatFractionTotal(a))),"progressbar"===t.type){var y;y=t.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var b=(i+1)/a,S=1,T=1;"horizontal"===y?S=b:T=b,r.find("."+t.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+S+") scaleY("+T+")").transition(this.params.speed)}"custom"===t.type&&t.renderCustom?(r.html(t.renderCustom(this,i+1,a)),this.emit("paginationRender",this,r[0])):this.emit("paginationUpdate",this,r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,s="";if("bullets"===e.type){for(var n=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length,r=0;r<n;r+=1)e.renderBullet?s+=e.renderBullet.call(this,r,e.bulletClass):s+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(s),this.pagination.bullets=i.find("."+e.bulletClass)}"fraction"===e.type&&(s=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(s)),"progressbar"===e.type&&(s=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(s)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var i=s(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&1===e.$el.find(t.el).length&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass,(function(t){t.preventDefault();var i=s(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)})),a.extend(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}}},re={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtlTranslate,i=this.progress,s=e.dragSize,n=e.trackSize,r=e.$dragEl,a=e.$el,o=this.params.scrollbar,l=s,c=(n-s)*i;t?(c=-c)>0?(l=s-c,c=0):-c+s>n&&(l=n+c):c<0?(l=s+c,c=0):c+s>n&&(l=n-c),this.isHorizontal()?(r.transform("translate3d("+c+"px, 0, 0)"),r[0].style.width=l+"px"):(r.transform("translate3d(0px, "+c+"px, 0)"),r[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),a[0].style.opacity=1,this.scrollbar.timeout=setTimeout((function(){a[0].style.opacity=0,a.transition(400)}),1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=e.$dragEl,i=e.$el;t[0].style.width="",t[0].style.height="";var s,n=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,r=this.size/this.virtualSize,o=r*(n/this.size);s="auto"===this.params.scrollbar.dragSize?n*r:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?t[0].style.width=s+"px":t[0].style.height=s+"px",i[0].style.display=r>=1?"none":"",this.params.scrollbar.hide&&(i[0].style.opacity=0),a.extend(e,{trackSize:n,divider:r,moveDivider:o,dragSize:s}),e.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,i=this.scrollbar,s=this.rtlTranslate,n=i.$el,r=i.dragSize,a=i.trackSize,o=i.dragStartPos;t=(i.getPointerPosition(e)-n.offset()[this.isHorizontal()?"left":"top"]-(null!==o?o:r/2))/(a-r),t=Math.max(Math.min(t,1),0),s&&(t=1-t);var l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*t;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,n=i.$el,r=i.$dragEl;this.scrollbar.isTouched=!0,this.scrollbar.dragStartPos=e.target===r[0]||e.target===r?i.getPointerPosition(e)-e.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),s.transition(100),r.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),n.transition(0),t.hide&&n.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,s=t.$el,n=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),s.transition(0),n.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,n=i.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&(this.$wrapperEl.css("scroll-snap-type",""),s.transition("")),t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=a.nextTick((function(){n.css("opacity",0),n.transition(400)}),1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){if(this.params.scrollbar.el){var t=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,n=this.params,r=t.$el[0],a=!(!o.passiveListener||!n.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.addEventListener(i.start,this.scrollbar.onDragStart,a),r.addEventListener(i.move,this.scrollbar.onDragMove,a),r.addEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.addEventListener(s.start,this.scrollbar.onDragStart,a),e.addEventListener(s.move,this.scrollbar.onDragMove,a),e.addEventListener(s.end,this.scrollbar.onDragEnd,l))}},disableDraggable:function(){if(this.params.scrollbar.el){var t=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,n=this.params,r=t.$el[0],a=!(!o.passiveListener||!n.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.removeEventListener(i.start,this.scrollbar.onDragStart,a),r.removeEventListener(i.move,this.scrollbar.onDragMove,a),r.removeEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.removeEventListener(s.start,this.scrollbar.onDragStart,a),e.removeEventListener(s.move,this.scrollbar.onDragMove,a),e.removeEventListener(s.end,this.scrollbar.onDragEnd,l))}},init:function(){if(this.params.scrollbar.el){var e=this.scrollbar,t=this.$el,i=this.params.scrollbar,n=s(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&n.length>1&&1===t.find(i.el).length&&(n=t.find(i.el));var r=n.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=s('<div class="'+this.params.scrollbar.dragClass+'"></div>'),n.append(r)),a.extend(e,{$el:n,el:n[0],$dragEl:r,dragEl:r[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},ae={setTransform:function(e,t){var i=this.rtl,n=s(e),r=i?-1:1,a=n.attr("data-swiper-parallax")||"0",o=n.attr("data-swiper-parallax-x"),l=n.attr("data-swiper-parallax-y"),c=n.attr("data-swiper-parallax-scale"),h=n.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=a,l="0"):(l=a,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*r+"%":o*t*r+"px",l=l.indexOf("%")>=0?parseInt(l,10)*t+"%":l*t+"px",null!=h){var d=h-(h-1)*(1-Math.abs(t));n[0].style.opacity=d}if(null==c)n.transform("translate3d("+o+", "+l+", 0px)");else{var u=c-(c-1)*(1-Math.abs(t));n.transform("translate3d("+o+", "+l+", 0px) scale("+u+")")}},setTranslate:function(){var e=this,t=e.$el,i=e.slides,n=e.progress,r=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){e.parallax.setTransform(i,n)})),i.each((function(t,i){var a=i.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(a+=Math.ceil(t/2)-n*(r.length-1)),a=Math.min(Math.max(a,-1),1),s(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){e.parallax.setTransform(i,a)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t,i){var n=s(i),r=parseInt(n.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),n.transition(r)}))}},oe={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,s=e.targetTouches[1].pageX,n=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(s-t,2)+Math.pow(n-i,2))},onGestureStart:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!o.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,n.scaleStart=oe.getDistanceBetweenTouches(e)}n.$slideEl&&n.$slideEl.length||(n.$slideEl=s(e.target).closest("."+this.params.slideClass),0===n.$slideEl.length&&(n.$slideEl=this.slides.eq(this.activeIndex)),n.$imageEl=n.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),n.$imageWrapEl=n.$imageEl.parent("."+t.containerClass),n.maxRatio=n.$imageWrapEl.attr("data-swiper-zoom")||t.maxRatio,0!==n.$imageWrapEl.length)?(n.$imageEl&&n.$imageEl.transition(0),this.zoom.isScaling=!0):n.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,s.scaleMove=oe.getDistanceBetweenTouches(e)}s.$imageEl&&0!==s.$imageEl.length&&(o.gestures?i.scale=e.scale*i.currentScale:i.scale=s.scaleMove/s.scaleStart*i.currentScale,i.scale>s.maxRatio&&(i.scale=s.maxRatio-1+Math.pow(i.scale-s.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!M.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,s.maxRatio),t.minRatio),s.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(s.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,s=t.image;i.$imageEl&&0!==i.$imageEl.length&&(s.isTouched||(M.android&&e.preventDefault(),s.isTouched=!0,s.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,s=t.image,n=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=a.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=a.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var r=s.width*t.scale,o=s.height*t.scale;if(!(r<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-r/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),n.prevPositionX||(n.prevPositionX=s.touchesCurrent.x),n.prevPositionY||(n.prevPositionY=s.touchesCurrent.y),n.prevTime||(n.prevTime=Date.now()),n.x=(s.touchesCurrent.x-n.prevPositionX)/(Date.now()-n.prevTime)/2,n.y=(s.touchesCurrent.y-n.prevPositionY)/(Date.now()-n.prevTime)/2,Math.abs(s.touchesCurrent.x-n.prevPositionX)<2&&(n.x=0),Math.abs(s.touchesCurrent.y-n.prevPositionY)<2&&(n.y=0),n.prevPositionX=s.touchesCurrent.x,n.prevPositionY=s.touchesCurrent.y,n.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,s=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var n=300,r=300,a=s.x*n,o=i.currentX+a,l=s.y*r,c=i.currentY+l;0!==s.x&&(n=Math.abs((o-i.currentX)/s.x)),0!==s.y&&(r=Math.abs((c-i.currentY)/s.y));var h=Math.max(n,r);i.currentX=o,i.currentY=c;var d=i.width*e.scale,u=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-d/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-u/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl&&t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl&&t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,s,n,r,a,o,l,c,h,d,u,p,f,m,v,E=this.zoom,g=this.params.zoom,_=E.gesture,y=E.image;(_.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?_.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):_.$slideEl=this.slides.eq(this.activeIndex),_.$imageEl=_.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),_.$imageWrapEl=_.$imageEl.parent("."+g.containerClass)),_.$imageEl&&0!==_.$imageEl.length)&&(_.$slideEl.addClass(""+g.zoomedSlideClass),void 0===y.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,i="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=y.touchesStart.x,i=y.touchesStart.y),E.scale=_.$imageWrapEl.attr("data-swiper-zoom")||g.maxRatio,E.currentScale=_.$imageWrapEl.attr("data-swiper-zoom")||g.maxRatio,e?(m=_.$slideEl[0].offsetWidth,v=_.$slideEl[0].offsetHeight,s=_.$slideEl.offset().left+m/2-t,n=_.$slideEl.offset().top+v/2-i,o=_.$imageEl[0].offsetWidth,l=_.$imageEl[0].offsetHeight,c=o*E.scale,h=l*E.scale,p=-(d=Math.min(m/2-c/2,0)),f=-(u=Math.min(v/2-h/2,0)),(r=s*E.scale)<d&&(r=d),r>p&&(r=p),(a=n*E.scale)<u&&(a=u),a>f&&(a=f)):(r=0,a=0),_.$imageWrapEl.transition(300).transform("translate3d("+r+"px, "+a+"px,0)"),_.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+E.scale+")"))},out:function(){var e=this.zoom,t=this.params.zoom,i=e.gesture;i.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?i.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):i.$slideEl=this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+t.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+t.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this.zoom;if(!e.enabled){e.enabled=!0;var t=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0},s="."+this.params.slideClass;o.gestures?(this.$wrapperEl.on("gesturestart",s,e.onGestureStart,t),this.$wrapperEl.on("gesturechange",s,e.onGestureChange,t),this.$wrapperEl.on("gestureend",s,e.onGestureEnd,t)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.on(this.touchEvents.start,s,e.onGestureStart,t),this.$wrapperEl.on(this.touchEvents.move,s,e.onGestureChange,i),this.$wrapperEl.on(this.touchEvents.end,s,e.onGestureEnd,t),this.touchEvents.cancel&&this.$wrapperEl.on(this.touchEvents.cancel,s,e.onGestureEnd,t)),this.$wrapperEl.on(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,i)}},disable:function(){var e=this.zoom;if(e.enabled){this.zoom.enabled=!1;var t=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0},s="."+this.params.slideClass;o.gestures?(this.$wrapperEl.off("gesturestart",s,e.onGestureStart,t),this.$wrapperEl.off("gesturechange",s,e.onGestureChange,t),this.$wrapperEl.off("gestureend",s,e.onGestureEnd,t)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.off(this.touchEvents.start,s,e.onGestureStart,t),this.$wrapperEl.off(this.touchEvents.move,s,e.onGestureChange,i),this.$wrapperEl.off(this.touchEvents.end,s,e.onGestureEnd,t),this.touchEvents.cancel&&this.$wrapperEl.off(this.touchEvents.cancel,s,e.onGestureEnd,t)),this.$wrapperEl.off(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,i)}}},le={loadInSlide:function(e,t){void 0===t&&(t=!0);var i=this,n=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),a=r.find("."+n.elementClass+":not(."+n.loadedClass+"):not(."+n.loadingClass+")");!r.hasClass(n.elementClass)||r.hasClass(n.loadedClass)||r.hasClass(n.loadingClass)||(a=a.add(r[0])),0!==a.length&&a.each((function(e,a){var o=s(a);o.addClass(n.loadingClass);var l=o.attr("data-background"),c=o.attr("data-src"),h=o.attr("data-srcset"),d=o.attr("data-sizes");i.loadImage(o[0],c||l,h,d,!1,(function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(h&&(o.attr("srcset",h),o.removeAttr("data-srcset")),d&&(o.attr("sizes",d),o.removeAttr("data-sizes")),c&&(o.attr("src",c),o.removeAttr("data-src"))),o.addClass(n.loadedClass).removeClass(n.loadingClass),r.find("."+n.preloaderClass).remove(),i.params.loop&&t){var e=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){var s=i.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(s.index(),!1)}else{var a=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');i.lazy.loadInSlide(a.index(),!1)}}i.emit("lazyImageReady",r[0],o[0]),i.params.autoHeight&&i.updateAutoHeight()}})),i.emit("lazyImageLoad",r[0],o[0])}))}},load:function(){var e=this,t=e.$wrapperEl,i=e.params,n=e.slides,r=e.activeIndex,a=e.virtual&&i.virtual.enabled,o=i.lazy,l=i.slidesPerView;function c(e){if(a){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(n[e])return!0;return!1}function h(e){return a?s(e).attr("data-swiper-slide-index"):s(e).index()}if("auto"===l&&(l=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each((function(t,i){var n=a?s(i).attr("data-swiper-slide-index"):s(i).index();e.lazy.loadInSlide(n)}));else if(l>1)for(var d=r;d<r+l;d+=1)c(d)&&e.lazy.loadInSlide(d);else e.lazy.loadInSlide(r);if(o.loadPrevNext)if(l>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var u=o.loadPrevNextAmount,p=l,f=Math.min(r+p+Math.max(u,p),n.length),m=Math.max(r-Math.max(p,u),0),v=r+l;v<f;v+=1)c(v)&&e.lazy.loadInSlide(v);for(var E=m;E<r;E+=1)c(E)&&e.lazy.loadInSlide(E)}else{var g=t.children("."+i.slideNextClass);g.length>0&&e.lazy.loadInSlide(h(g));var _=t.children("."+i.slidePrevClass);_.length>0&&e.lazy.loadInSlide(h(_))}}},ce={LinearSpline:function(e,t){var i,s,n,r,a,o=function(e,t){for(s=-1,i=e.length;i-s>1;)e[n=i+s>>1]<=t?s=n:i=n;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(a=o(this.x,e),r=a-1,(e-this.x[r])*(this.y[a]-this.y[r])/(this.x[a]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new ce.LinearSpline(this.slidesGrid,e.slidesGrid):new ce.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,s,n=this,r=n.controller.control;function a(e){var t=n.rtlTranslate?-n.translate:n.translate;"slide"===n.params.controller.by&&(n.controller.getInterpolateFunction(e),s=-n.controller.spline.interpolate(-t)),s&&"container"!==n.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(n.maxTranslate()-n.minTranslate()),s=(t-n.minTranslate())*i+e.minTranslate()),n.params.controller.inverse&&(s=e.maxTranslate()-s),e.updateProgress(s),e.setTranslate(s,n),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof z&&a(r[o]);else r instanceof z&&t!==r&&a(r)},setTransition:function(e,t){var i,s=this,n=s.controller.control;function r(t){t.setTransition(e,s),0!==e&&(t.transitionStart(),t.params.autoHeight&&a.nextTick((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){n&&(t.params.loop&&"slide"===s.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(n))for(i=0;i<n.length;i+=1)n[i]!==t&&n[i]instanceof z&&r(n[i]);else n instanceof z&&t!==n&&r(n)}},he={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this.params.a11y;if(13===e.keyCode){var i=s(e.target);this.navigation&&this.navigation.$nextEl&&i.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(t.lastSlideMessage):this.a11y.notify(t.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&i.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(t.firstSlideMessage):this.a11y.notify(t.prevSlideMessage)),this.pagination&&i.is("."+this.params.pagination.bulletClass)&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop&&this.navigation){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),t&&t.length>0&&(this.isEnd?this.a11y.disableEl(t):this.a11y.enableEl(t))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(i,n){var r=s(n);e.a11y.makeElFocusable(r),e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,t.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1))}))},init:function(){this.$el.append(this.a11y.liveRegion);var e,t,i=this.params.a11y;this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&(this.a11y.makeElFocusable(e),this.a11y.addElRole(e,"button"),this.a11y.addElLabel(e,i.nextSlideMessage),e.on("keydown",this.a11y.onEnterKey)),t&&(this.a11y.makeElFocusable(t),this.a11y.addElRole(t,"button"),this.a11y.addElLabel(t,i.prevSlideMessage),t.on("keydown",this.a11y.onEnterKey)),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.on("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)},destroy:function(){var e,t;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&e.off("keydown",this.a11y.onEnterKey),t&&t.off("keydown",this.a11y.onEnterKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)}},de={init:function(){if(this.params.history){if(!t.history||!t.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=de.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||t.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=de.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=t.location.pathname.slice(1).split("/").filter((function(e){return""!==e})),i=e.length;return{key:e[i-2],value:e[i-1]}},setHistory:function(e,i){if(this.history.initialized&&this.params.history.enabled){var s=this.slides.eq(i),n=de.slugify(s.attr("data-history"));t.location.pathname.includes(e)||(n=e+"/"+n);var r=t.history.state;r&&r.value===n||(this.params.history.replaceState?t.history.replaceState({value:n},null,n):t.history.pushState({value:n},null,n))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var s=0,n=this.slides.length;s<n;s+=1){var r=this.slides.eq(s);if(de.slugify(r.attr("data-history"))===t&&!r.hasClass(this.params.slideDuplicateClass)){var a=r.index();this.slideTo(a,e,i)}}else this.slideTo(0,e,i)}},ue={onHashCange:function(){var t=e.location.hash.replace("#","");if(t!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var i=this.slides.eq(this.activeIndex),s=i.attr("data-hash")||i.attr("data-history");e.location.hash=s||""}},init:function(){if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var i=e.location.hash.replace("#","");if(i)for(var n=0,r=this.slides.length;n<r;n+=1){var a=this.slides.eq(n);if((a.attr("data-hash")||a.attr("data-history"))===i&&!a.hasClass(this.params.slideDuplicateClass)){var o=a.index();this.slideTo(o,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&s(t).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&s(t).off("hashchange",this.hashNavigation.onHashCange)}},pe={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=a.nextTick((function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running&&e.autoplay.run()}),i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(e){this.autoplay.running&&(this.autoplay.paused||(this.autoplay.timeout&&clearTimeout(this.autoplay.timeout),this.autoplay.paused=!0,0!==e&&this.params.autoplay.waitForTransition?(this.$wrapperEl[0].addEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].addEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd)):(this.autoplay.paused=!1,this.autoplay.run())))}},fe={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),s=-i[0].swiperSlideOffset;this.params.virtualTranslate||(s-=this.translate);var n=0;this.isHorizontal()||(n=s,s=0);var r=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:r}).transform("translate3d("+s+"px, "+n+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,s=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var n=!1;i.transitionEnd((function(){if(!n&&t&&!t.destroyed){n=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)s.trigger(e[i])}}))}}},me={setTranslate:function(){var e,t=this.$el,i=this.$wrapperEl,n=this.slides,r=this.width,a=this.height,o=this.rtlTranslate,l=this.size,c=this.params.cubeEffect,h=this.isHorizontal(),d=this.virtual&&this.params.virtual.enabled,u=0;c.shadow&&(h?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=s('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=t.find(".swiper-cube-shadow")).length&&(e=s('<div class="swiper-cube-shadow"></div>'),t.append(e)));for(var p=0;p<n.length;p+=1){var f=n.eq(p),m=p;d&&(m=parseInt(f.attr("data-swiper-slide-index"),10));var v=90*m,E=Math.floor(v/360);o&&(v=-v,E=Math.floor(-v/360));var g=Math.max(Math.min(f[0].progress,1),-1),_=0,y=0,b=0;m%4==0?(_=4*-E*l,b=0):(m-1)%4==0?(_=0,b=4*-E*l):(m-2)%4==0?(_=l+4*E*l,b=l):(m-3)%4==0&&(_=-l,b=3*l+4*l*E),o&&(_=-_),h||(y=_,_=0);var S="rotateX("+(h?0:-v)+"deg) rotateY("+(h?v:0)+"deg) translate3d("+_+"px, "+y+"px, "+b+"px)";if(g<=1&&g>-1&&(u=90*m+90*g,o&&(u=90*-m-90*g)),f.transform(S),c.slideShadows){var T=h?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),R=h?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===T.length&&(T=s('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),f.append(T)),0===R.length&&(R=s('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),f.append(R)),T.length&&(T[0].style.opacity=Math.max(-g,0)),R.length&&(R[0].style.opacity=Math.max(g,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),c.shadow)if(h)e.transform("translate3d(0px, "+(r/2+c.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var O=Math.abs(u)-90*Math.floor(Math.abs(u)/90),C=1.5-(Math.sin(2*O*Math.PI/360)/2+Math.cos(2*O*Math.PI/360)/2),P=c.shadowScale,w=c.shadowScale/C,A=c.shadowOffset;e.transform("scale3d("+P+", 1, "+w+") translate3d(0px, "+(a/2+A)+"px, "+-a/2/w+"px) rotateX(-90deg)")}var I=W.isSafari||W.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+I+"px) rotateX("+(this.isHorizontal()?0:u)+"deg) rotateY("+(this.isHorizontal()?-u:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},ve={setTranslate:function(){for(var e=this.slides,t=this.rtlTranslate,i=0;i<e.length;i+=1){var n=e.eq(i),r=n[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));var a=-180*r,o=0,l=-n[0].swiperSlideOffset,c=0;if(this.isHorizontal()?t&&(a=-a):(c=l,l=0,o=-a,a=0),n[0].style.zIndex=-Math.abs(Math.round(r))+e.length,this.params.flipEffect.slideShadows){var h=this.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),d=this.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===h.length&&(h=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),n.append(h)),0===d.length&&(d=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),n.append(d)),h.length&&(h[0].style.opacity=Math.max(-r,0)),d.length&&(d[0].style.opacity=Math.max(r,0))}n.transform("translate3d("+l+"px, "+c+"px, 0px) rotateX("+o+"deg) rotateY("+a+"deg)")}},setTransition:function(e){var t=this,i=t.slides,s=t.activeIndex,n=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.eq(s).transitionEnd((function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)n.trigger(e[i])}}))}}},Ee={setTranslate:function(){for(var e=this.width,t=this.height,i=this.slides,n=this.$wrapperEl,r=this.slidesSizesGrid,a=this.params.coverflowEffect,l=this.isHorizontal(),c=this.translate,h=l?e/2-c:t/2-c,d=l?a.rotate:-a.rotate,u=a.depth,p=0,f=i.length;p<f;p+=1){var m=i.eq(p),v=r[p],E=(h-m[0].swiperSlideOffset-v/2)/v*a.modifier,g=l?d*E:0,_=l?0:d*E,y=-u*Math.abs(E),b=a.stretch;"string"==typeof b&&-1!==b.indexOf("%")&&(b=parseFloat(a.stretch)/100*v);var S=l?0:b*E,T=l?b*E:0;Math.abs(T)<.001&&(T=0),Math.abs(S)<.001&&(S=0),Math.abs(y)<.001&&(y=0),Math.abs(g)<.001&&(g=0),Math.abs(_)<.001&&(_=0);var R="translate3d("+T+"px,"+S+"px,"+y+"px)  rotateX("+_+"deg) rotateY("+g+"deg)";if(m.transform(R),m[0].style.zIndex=1-Math.abs(Math.round(E)),a.slideShadows){var O=l?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),C=l?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===O.length&&(O=s('<div class="swiper-slide-shadow-'+(l?"left":"top")+'"></div>'),m.append(O)),0===C.length&&(C=s('<div class="swiper-slide-shadow-'+(l?"right":"bottom")+'"></div>'),m.append(C)),O.length&&(O[0].style.opacity=E>0?E:0),C.length&&(C[0].style.opacity=-E>0?-E:0)}}(o.pointerEvents||o.prefixedPointerEvents)&&(n[0].style.perspectiveOrigin=h+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},ge={init:function(){var e=this.params.thumbs,t=this.constructor;e.swiper instanceof t?(this.thumbs.swiper=e.swiper,a.extend(this.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),a.extend(this.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):a.isObject(e.swiper)&&(this.thumbs.swiper=new t(a.extend({},e.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),this.thumbs.swiperCreated=!0),this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),this.thumbs.swiper.on("tap",this.thumbs.onThumbClick)},onThumbClick:function(){var e=this.thumbs.swiper;if(e){var t=e.clickedIndex,i=e.clickedSlide;if(!(i&&s(i).hasClass(this.params.thumbs.slideThumbActiveClass)||null==t)){var n;if(n=e.params.loop?parseInt(s(e.clickedSlide).attr("data-swiper-slide-index"),10):t,this.params.loop){var r=this.activeIndex;this.slides.eq(r).hasClass(this.params.slideDuplicateClass)&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,r=this.activeIndex);var a=this.slides.eq(r).prevAll('[data-swiper-slide-index="'+n+'"]').eq(0).index(),o=this.slides.eq(r).nextAll('[data-swiper-slide-index="'+n+'"]').eq(0).index();n=void 0===a?o:void 0===o?a:o-r<r-a?o:a}this.slideTo(n)}}},update:function(e){var t=this.thumbs.swiper;if(t){var i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():t.params.slidesPerView,s=this.params.thumbs.autoScrollOffset,n=s&&!t.params.loop;if(this.realIndex!==t.realIndex||n){var r,a,o=t.activeIndex;if(t.params.loop){t.slides.eq(o).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,o=t.activeIndex);var l=t.slides.eq(o).prevAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index(),c=t.slides.eq(o).nextAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index();r=void 0===l?c:void 0===c?l:c-o==o-l?o:c-o<o-l?c:l,a=this.activeIndex>this.previousIndex?"next":"prev"}else a=(r=this.realIndex)>this.previousIndex?"next":"prev";n&&(r+="next"===a?s:-1*s),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(r)<0&&(t.params.centeredSlides?r=r>o?r-Math.floor(i/2)+1:r+Math.floor(i/2)-1:r>o&&(r=r-i+1),t.slideTo(r,e?0:void 0))}var h=1,d=this.params.thumbs.slideThumbActiveClass;if(this.params.slidesPerView>1&&!this.params.centeredSlides&&(h=this.params.slidesPerView),this.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),t.slides.removeClass(d),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(var u=0;u<h;u+=1)t.$wrapperEl.children('[data-swiper-slide-index="'+(this.realIndex+u)+'"]').addClass(d);else for(var p=0;p<h;p+=1)t.slides.eq(this.realIndex+p).addClass(d)}}},_e=[q,Y,X,G,J,Z,te,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){a.extend(this,{mousewheel:{enabled:!1,enable:ie.enable.bind(this),disable:ie.disable.bind(this),handle:ie.handle.bind(this),handleMouseEnter:ie.handleMouseEnter.bind(this),handleMouseLeave:ie.handleMouseLeave.bind(this),animateSlider:ie.animateSlider.bind(this),releaseScroll:ie.releaseScroll.bind(this),lastScrollTime:a.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init:function(){!this.params.mousewheel.enabled&&this.params.cssMode&&this.mousewheel.disable(),this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.params.cssMode&&this.mousewheel.enable(),this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){a.extend(this,{navigation:{init:se.init.bind(this),update:se.update.bind(this),destroy:se.destroy.bind(this),onNextClick:se.onNextClick.bind(this),onPrevClick:se.onPrevClick.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,i=this.navigation,n=i.$nextEl,r=i.$prevEl;!this.params.navigation.hideOnClick||s(e.target).is(r)||s(e.target).is(n)||(n?t=n.hasClass(this.params.navigation.hiddenClass):r&&(t=r.hasClass(this.params.navigation.hiddenClass)),!0===t?this.emit("navigationShow",this):this.emit("navigationHide",this),n&&n.toggleClass(this.params.navigation.hiddenClass),r&&r.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){a.extend(this,{pagination:{init:ne.init.bind(this),render:ne.render.bind(this),update:ne.update.bind(this),destroy:ne.destroy.bind(this),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){(this.params.loop||void 0===this.snapIndex)&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){this.params.pagination.el&&this.params.pagination.hideOnClick&&this.pagination.$el.length>0&&!s(e.target).hasClass(this.params.pagination.bulletClass)&&(!0===this.pagination.$el.hasClass(this.params.pagination.hiddenClass)?this.emit("paginationShow",this):this.emit("paginationHide",this),this.pagination.$el.toggleClass(this.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){a.extend(this,{scrollbar:{init:re.init.bind(this),destroy:re.destroy.bind(this),updateSize:re.updateSize.bind(this),setTranslate:re.setTranslate.bind(this),setTransition:re.setTransition.bind(this),enableDraggable:re.enableDraggable.bind(this),disableDraggable:re.disableDraggable.bind(this),setDragPosition:re.setDragPosition.bind(this),getPointerPosition:re.getPointerPosition.bind(this),onDragStart:re.onDragStart.bind(this),onDragMove:re.onDragMove.bind(this),onDragEnd:re.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){a.extend(this,{parallax:{setTransform:ae.setTransform.bind(this),setTranslate:ae.setTranslate.bind(this),setTransition:ae.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function(i){t[i]=oe[i].bind(e)})),a.extend(e,{zoom:t});var i=1;Object.defineProperty(e.zoom,"scale",{get:function(){return i},set:function(t){if(i!==t){var s=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,n=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",t,s,n)}i=t}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()},slideChange:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.params.cssMode&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){a.extend(this,{lazy:{initialImageLoaded:!1,load:le.load.bind(this),loadInSlide:le.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()},slideChange:function(){this.params.lazy.enabled&&this.params.cssMode&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){a.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:ce.getInterpolateFunction.bind(this),setTranslate:ce.setTranslate.bind(this),setTransition:ce.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;a.extend(e,{a11y:{liveRegion:s('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(he).forEach((function(t){e.a11y[t]=he[t].bind(e)}))},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){a.extend(this,{history:{init:de.init.bind(this),setHistory:de.setHistory.bind(this),setHistoryPopState:de.setHistoryPopState.bind(this),scrollToSlide:de.scrollToSlide.bind(this),destroy:de.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)},slideChange:function(){this.history.initialized&&this.params.cssMode&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){a.extend(this,{hashNavigation:{initialized:!1,init:ue.init.bind(this),destroy:ue.destroy.bind(this),setHash:ue.setHash.bind(this),onHashCange:ue.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()},slideChange:function(){this.hashNavigation.initialized&&this.params.cssMode&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var e=this;a.extend(e,{autoplay:{running:!1,paused:!1,run:pe.run.bind(e),start:pe.start.bind(e),stop:pe.stop.bind(e),pause:pe.pause.bind(e),onVisibilityChange:function(){"hidden"===document.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===document.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(t){e&&!e.destroyed&&e.$wrapperEl&&t.target===this&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&(this.autoplay.start(),document.addEventListener("visibilitychange",this.autoplay.onVisibilityChange))},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},touchEnd:function(){this.params.cssMode&&this.autoplay.paused&&!this.params.autoplay.disableOnInteraction&&this.autoplay.run()},destroy:function(){this.autoplay.running&&this.autoplay.stop(),document.removeEventListener("visibilitychange",this.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){a.extend(this,{fadeEffect:{setTranslate:fe.setTranslate.bind(this),setTransition:fe.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};a.extend(this.params,e),a.extend(this.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){a.extend(this,{cubeEffect:{setTranslate:me.setTranslate.bind(this),setTransition:me.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};a.extend(this.params,e),a.extend(this.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){a.extend(this,{flipEffect:{setTranslate:ve.setTranslate.bind(this),setTransition:ve.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};a.extend(this.params,e),a.extend(this.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){a.extend(this,{coverflowEffect:{setTranslate:Ee.setTranslate.bind(this),setTransition:Ee.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){a.extend(this,{thumbs:{swiper:null,init:ge.init.bind(this),update:ge.update.bind(this),onThumbClick:ge.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===z.use&&(z.use=z.Class.use,z.installModule=z.Class.installModule),z.use(_e),z})),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ejs=e()}}((function(){return function e(t,i,s){function n(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[a]={exports:{}};t[a][0].call(h.exports,(function(e){var i=t[a][1][e];return n(i||e)}),h,h.exports,e,t,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(e,t,i){"use strict";var s=e("fs"),n=e("path"),r=e("./utils"),a=!1,o=e("../package.json").version,l=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],c=l.concat("cache"),h=/^\uFEFF/;function d(e,t){var n,r,a=t.views,o=/^[A-Za-z]+:\\|^\//.exec(e);if(o&&o.length)n=i.resolveInclude(e.replace(/^\/*/,""),t.root||"/",!0);else if(t.filename&&(r=i.resolveInclude(e,t.filename),s.existsSync(r)&&(n=r)),n||Array.isArray(a)&&a.some((function(t){return r=i.resolveInclude(e,t,!0),s.existsSync(r)}))&&(n=r),!n)throw new Error('Could not find the include file "'+t.escapeFunction(e)+'"');return n}function u(e,t){var s,n=e.filename,r=arguments.length>1;if(e.cache){if(!n)throw new Error("cache option requires a filename");if(s=i.cache.get(n))return s;r||(t=f(n).toString().replace(h,""))}else if(!r){if(!n)throw new Error("Internal EJS error: no file name or template provided");t=f(n).toString().replace(h,"")}return s=i.compile(t,e),e.cache&&i.cache.set(n,s),s}function p(e,t,s){var n;if(!s){if("function"==typeof i.promiseImpl)return new i.promiseImpl((function(i,s){try{i(n=u(e)(t))}catch(r){s(r)}}));throw new Error("Please provide a callback function")}try{n=u(e)(t)}catch(r){return s(r)}s(null,n)}function f(e){return i.fileLoader(e)}function m(e,t,i,s,n){var r=t.split("\n"),a=Math.max(s-3,0),o=Math.min(r.length,s+3),l=n(i),c=r.slice(a,o).map((function(e,t){var i=t+a+1;return(i==s?" >> ":"    ")+i+"| "+e})).join("\n");throw e.path=l,e.message=(l||"ejs")+":"+s+"\n"+c+"\n\n"+e.message,e}function v(e){return e.replace(/;(\s*$)/,"$1")}function E(e,t){t=t||{};var s={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],s.client=t.client||!1,s.escapeFunction=t.escape||t.escapeFunction||r.escapeXML,s.compileDebug=!1!==t.compileDebug,s.debug=!!t.debug,s.filename=t.filename,s.openDelimiter=t.openDelimiter||i.openDelimiter||"<",s.closeDelimiter=t.closeDelimiter||i.closeDelimiter||">",s.delimiter=t.delimiter||i.delimiter||"%",s.strict=t.strict||!1,s.context=t.context,s.cache=t.cache||!1,s.rmWhitespace=t.rmWhitespace,s.root=t.root,s.outputFunctionName=t.outputFunctionName,s.localsName=t.localsName||i.localsName||"locals",s.views=t.views,s.async=t.async,s.strict?s._with=!1:s._with=void 0===t._with||t._with,this.opts=s,this.regex=this.createRegex()}i.cache=r.cache,i.fileLoader=s.readFileSync,i.localsName="locals",i.promiseImpl=new Function("return this;")().Promise,i.resolveInclude=function(e,t,i){var s=n.dirname,r=n.extname,a=(0,n.resolve)(i?t:s(t),e);return r(e)||(a+=".ejs"),a},i.compile=function(e,t){return t&&t.scope&&(a||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),a=!0),t.context||(t.context=t.scope),delete t.scope),new E(e,t).compile()},i.render=function(e,t,i){var s=t||{},n=i||{};return 2==arguments.length&&r.shallowCopyFromList(n,s,l),u(n,e)(s)},i.renderFile=function(){var e,t,i,s=Array.prototype.slice.call(arguments),n=s.shift(),a={filename:n};return"function"==typeof arguments[arguments.length-1]&&(e=s.pop()),s.length?(t=s.shift(),s.length?r.shallowCopy(a,s.pop()):(t.settings&&(t.settings.views&&(a.views=t.settings.views),t.settings["view cache"]&&(a.cache=!0),(i=t.settings["view options"])&&r.shallowCopy(a,i)),r.shallowCopyFromList(a,t,c)),a.filename=n):t={},p(a,t,e)},i.Template=E,i.clearCache=function(){i.cache.reset()},E.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},E.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",t=r.escapeRegExpChars(this.opts.delimiter),i=r.escapeRegExpChars(this.opts.openDelimiter),s=r.escapeRegExpChars(this.opts.closeDelimiter);return e=e.replace(/%/g,t).replace(/</g,i).replace(/>/g,s),new RegExp(e)},compile:function(){var e,t,i,s=this.opts,n="",a="",o=s.escapeFunction;this.source||(this.generateSource(),n+="  var __output = [], __append = __output.push.bind(__output);\n",s.outputFunctionName&&(n+="  var "+s.outputFunctionName+" = __append;\n"),!1!==s._with&&(n+="  with ("+s.localsName+" || {}) {\n",a+="  }\n"),a+='  return __output.join("");\n',this.source=n+this.source+a),e=s.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(s.filename?JSON.stringify(s.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,s.client&&(e="escapeFn = escapeFn || "+o.toString()+";\n"+e,s.compileDebug&&(e="rethrow = rethrow || "+m.toString()+";\n"+e)),s.strict&&(e='"use strict";\n'+e),s.debug&&console.log(e);try{if(s.async)try{i=new Function("return (async function(){}).constructor;")()}catch(c){throw c instanceof SyntaxError?new Error("This environment does not support async/await"):c}else i=Function;t=new i(s.localsName+", escapeFn, include, rethrow",e)}catch(c){throw c instanceof SyntaxError&&(s.filename&&(c.message+=" in "+s.filename),c.message+=" while compiling ejs\n\n",c.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",c.message+="https://github.com/RyanZim/EJS-Lint",c.async||(c.message+="\n",c.message+="Or, if you meant to create an async function, pass async: true as an option.")),c}if(s.client)return t.dependencies=this.dependencies,t;var l=function(e){return t.apply(s.context,[e||{},o,function(t,i){var n=r.shallowCopy({},e);return i&&(n=r.shallowCopy(n,i)),function(e,t){var i=r.shallowCopy({},t);return i.filename=d(e,i),u(i)}(t,s)(n)},m])};return l.dependencies=this.dependencies,l},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var e=this,t=this.parseTemplateText(),s=this.opts.delimiter,n=this.opts.openDelimiter,a=this.opts.closeDelimiter;t&&t.length&&t.forEach((function(o,l){var c,u,p,m,v,g;if(0===o.indexOf(n+s)&&0!==o.indexOf(n+s+s)&&(u=t[l+2])!=s+a&&u!="-"+s+a&&u!="_"+s+a)throw new Error('Could not find matching close tag for "'+o+'".');if((p=o.match(/^\s*include\s+(\S+)/))&&(c=t[l-1])&&(c==n+s||c==n+s+"-"||c==n+s+"_"))return m=r.shallowCopy({},e.opts),v=function(e,t){var i,s,n=r.shallowCopy({},t);s=f(i=d(e,n)).toString().replace(h,""),n.filename=i;var a=new E(s,n);return a.generateSource(),{source:a.source,filename:i,template:s}}(p[1],m),g=e.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(v.template)+"\n      , __filename = "+JSON.stringify(v.filename)+";\n      try {\n"+v.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+v.source+"    ; }).call(this)\n",e.source+=g,void e.dependencies.push(i.resolveInclude(p[1],m.filename));e.scanLine(o)}))},parseTemplateText:function(){for(var e,t=this.templateText,i=this.regex,s=i.exec(t),n=[];s;)0!==(e=s.index)&&(n.push(t.substring(0,e)),t=t.slice(e)),n.push(s[0]),t=t.slice(s[0].length),s=i.exec(t);return t&&n.push(t),n},_addOutput:function(e){if(this.truncate&&(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!e)return e;e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+e+'")\n'},scanLine:function(e){var t,i=this.opts.delimiter,s=this.opts.openDelimiter,n=this.opts.closeDelimiter;switch(t=e.split("\n").length-1,e){case s+i:case s+i+"_":this.mode=E.modes.EVAL;break;case s+i+"=":this.mode=E.modes.ESCAPED;break;case s+i+"-":this.mode=E.modes.RAW;break;case s+i+"#":this.mode=E.modes.COMMENT;break;case s+i+i:this.mode=E.modes.LITERAL,this.source+='    ; __append("'+e.replace(s+i+i,s+i)+'")\n';break;case i+i+n:this.mode=E.modes.LITERAL,this.source+='    ; __append("'+e.replace(i+i+n,i+n)+'")\n';break;case i+n:case"-"+i+n:case"_"+i+n:this.mode==E.modes.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case E.modes.EVAL:case E.modes.ESCAPED:case E.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case E.modes.EVAL:this.source+="    ; "+e+"\n";break;case E.modes.ESCAPED:this.source+="    ; __append(escapeFn("+v(e)+"))\n";break;case E.modes.RAW:this.source+="    ; __append("+v(e)+")\n";break;case E.modes.COMMENT:break;case E.modes.LITERAL:this._addOutput(e)}}else this._addOutput(e)}this.opts.compileDebug&&t&&(this.currentLine+=t,this.source+="    ; __line = "+this.currentLine+"\n")}},i.escapeXML=r.escapeXML,i.__express=i.renderFile,e.extensions&&(e.extensions[".ejs"]=function(e,t){var s=t||e.filename,n={filename:s,client:!0},r=f(s).toString(),a=i.compile(r,n);e._compile("module.exports = "+a.toString()+";",s)}),i.VERSION=o,i.name="ejs","undefined"!=typeof window&&(window.ejs=i)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(e,t,i){"use strict";var s=/[|\\{}()[\]^$+*?.]/g;i.escapeRegExpChars=function(e){return e?String(e).replace(s,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g;function a(e){return n[e]||e}i.escapeXML=function(e){return null==e?"":String(e).replace(r,a)},i.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},i.shallowCopy=function(e,t){for(var i in t=t||{})e[i]=t[i];return e},i.shallowCopyFromList=function(e,t,i){for(var s=0;s<i.length;s++){var n=i[s];void 0!==t[n]&&(e[n]=t[n])}return e},i.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},remove:function(e){delete this._data[e]},reset:function(){this._data={}}}},{}],3:[function(e,t,i){},{}],4:[function(e,t,i){(function(e){function t(e,t){for(var i=0,s=e.length-1;s>=0;s--){var n=e[s];"."===n?e.splice(s,1):".."===n?(e.splice(s,1),i++):i&&(e.splice(s,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(e){return s.exec(e).slice(1)};function r(e,t){if(e.filter)return e.filter(t);for(var i=[],s=0;s<e.length;s++)t(e[s],s,e)&&i.push(e[s]);return i}i.resolve=function(){for(var i="",s=!1,n=arguments.length-1;n>=-1&&!s;n--){var a=n>=0?arguments[n]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,s="/"===a.charAt(0))}return(s?"/":"")+(i=t(r(i.split("/"),(function(e){return!!e})),!s).join("/"))||"."},i.normalize=function(e){var s=i.isAbsolute(e),n="/"===a(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&n&&(e+="/"),(s?"/":"")+e},i.isAbsolute=function(e){return"/"===e.charAt(0)},i.join=function(){var e=Array.prototype.slice.call(arguments,0);return i.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},i.relative=function(e,t){function s(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=i.resolve(e).substr(1),t=i.resolve(t).substr(1);for(var n=s(e.split("/")),r=s(t.split("/")),a=Math.min(n.length,r.length),o=a,l=0;l<a;l++)if(n[l]!==r[l]){o=l;break}var c=[];for(l=o;l<n.length;l++)c.push("..");return(c=c.concat(r.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(e){var t=n(e),i=t[0],s=t[1];return i||s?(s&&(s=s.substr(0,s.length-1)),i+s):"."},i.basename=function(e,t){var i=n(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},i.extname=function(e){return n(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,e("_process"))},{_process:5}],5:[function(e,t,i){var s,n,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(s===setTimeout)return setTimeout(e,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:a}catch(e){s=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,h=[],d=!1,u=-1;function p(){d&&c&&(d=!1,c.length?h=c.concat(h):u=-1,h.length&&f())}function f(){if(!d){var e=l(p);d=!0;for(var t=h.length;t;){for(c=h,h=[];++u<t;)c&&c[u].run();u=-1,t=h.length}c=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new m(e,t)),1!==h.length||d||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],6:[function(e,t,i){t.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.6.1",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.1.1",eslint:"^4.14.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.16",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^5.0.5","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"jake test",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)}));