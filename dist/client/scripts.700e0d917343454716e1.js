var StarWebPrintTrader=function(e){this.papertype=this.checkedblock=this.url=null,this.timeout=9e4,this.onTimeout=this.onError=this.onReceive=null,this.holdprint_timeout=void 0,this._json=this._url=null,null!=e&&(null!=e.url&&(this.url=e.url),null!=e.checkedblock&&(this.checkedblock=e.checkedblock),null!=e.papertype&&(this.papertype=e.papertype),null!=e.timeout&&(this.timeout=e.timeout),null!=e.holdprint_timeout&&(this.holdprint_timeout=e.holdprint_timeout))},_handlerCallback={};function _onFinish(e){var t=_handlerCallback[e.url],i=e.response;_handlerCallback[e.url]=null,200==e.htmlCode?t.onReceive({traderSuccess:i.slice(i.indexOf("&lt;success&gt;")+15,i.indexOf("&lt;/success&gt;")),traderCode:i.slice(i.indexOf("&lt;code&gt;")+12,i.indexOf("&lt;/code&gt;")),traderStatus:i.slice(i.indexOf("&lt;status&gt;")+14,i.indexOf("&lt;/status&gt;")),status:e.htmlCode,responseText:i}):t.onError({status:e.htmlCode,responseText:i})}StarWebPrintTrader.prototype._callMessageHandler=function(){var e=this;null==_handlerCallback[e._url]?(_handlerCallback[e._url]=e,webkit.messageHandlers.sendMessageHandler.postMessage(e._json)):setTimeout(function(){e._callMessageHandler()},500)},StarWebPrintTrader.prototype.sendMessage=function(e){var t="<root";null!=e.checkedblock?0==e.checkedblock&&(t+=' checkedblock="false"'):0==this.checkedblock&&(t+=' checkedblock="false"'),null!=e.papertype?"normal"==e.papertype?t+=' papertype="normal"':"black_mark"==e.papertype?t+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==e.papertype&&(t+=' papertype="black_mark_and_detect_at_power_on"'):"normal"==this.papertype?t+=' papertype="normal"':"black_mark"==this.papertype?t+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==this.papertype&&(t+=' papertype="black_mark_and_detect_at_power_on"'),null!=e.holdprint_timeout?t+=' holdprint_timeout="'+e.holdprint_timeout+'"':null!=this.holdprint_timeout&&(t+=' holdprint_timeout="'+this.holdprint_timeout+'"');var i;t=t+">"+e.request+"</root>";if(i='<StarWebPrint xmlns="http://www.star-m.jp" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Request>',i+=this._encodeEscapeSequence(t),i+="</Request>",i+="</StarWebPrint>",t="",t=null!=e.url?e.url:this.url,/^https?:\/\/(localhost|127\.0\.0\.1):8001\//.test(t.toLowerCase())&&-1!=navigator.userAgent.indexOf("webPRNTSupportMessageHandler"))this._json=JSON.stringify({url:t,body:i}),this._url=t,this._callMessageHandler();else{var n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest;else{if(!window.ActiveXObject)return void(this.onError&&this.onError({status:10001,responseText:"XMLHttpRequest is not supported."}));n=new ActiveXObject("Microsoft.XMLHTTP")}-1==navigator.userAgent.indexOf("iPad;")&&-1==navigator.userAgent.indexOf("iPhone;")&&-1==navigator.userAgent.indexOf("iPod touch;")&&-1==navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("WebPRNTSupportHTTPS")||0!=t.toLowerCase().indexOf("https://localhost")&&0!=t.toLowerCase().indexOf("https://127.0.0.1")||(t="http://"+t.substring(8));try{n.open("POST",t,!0)}catch(s){return void(this.onError&&this.onError({status:10002,responseText:s.message}))}try{null!=e.timeout?n.timeout=e.timeout:this.timeout&&(n.timeout=this.timeout)}catch(a){}n.setRequestHeader("Content-Type","text/xml; charset=UTF-8");var r=this;n.onreadystatechange=function(){if(4==n.readyState)try{if(200==n.status){var e=n.responseXML.getElementsByTagName("Response");if(0<e.length){if(r.onReceive){var t=e[0].childNodes[0].nodeValue;r.onReceive({traderSuccess:t.slice(t.indexOf("<success>")+9,t.indexOf("</success>")),traderCode:t.slice(t.indexOf("<code>")+6,t.indexOf("</code>")),traderStatus:t.slice(t.indexOf("<status>")+8,t.indexOf("</status>")),status:n.status,responseText:n.responseText})}}else r.onError&&r.onError({status:n.status,responseText:n.responseText})}else r.onError&&r.onError({status:n.status,responseText:n.responseText})}catch(i){r.onError&&r.onError({status:0,responseText:"Connection timeout occurred."})}};try{n.ontimeout=function(){r.onTimeout&&r.onTimeout()}}catch(k){}try{n.send(i)}catch(o){this.onError&&this.onError({status:10003,responseText:o.message})}}},StarWebPrintTrader.prototype._onHandlerSuccess=function(e){trader.onReceive&&trader.onReceive(e)},StarWebPrintTrader.prototype._onHandlerError=function(e){trader.onError&&trader.onError(e)},StarWebPrintTrader.prototype.isCoverOpen=function(e){return!!(32&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isOffLine=function(e){return!!(8&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isCompulsionSwitchClose=function(e){return!!(4&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isEtbCommandExecute=function(e){return!!(2&parseInt(e.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isHighTemperatureStop=function(e){return!!(64&parseInt(e.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isNonRecoverableError=function(e){return!!(32&parseInt(e.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isAutoCutterError=function(e){return!!(8&parseInt(e.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isBlackMarkError=function(e){return!!(8&parseInt(e.traderStatus.substr(8,2),16))},StarWebPrintTrader.prototype.isPaperEnd=function(e){return!!(8&parseInt(e.traderStatus.substr(10,2),16))},StarWebPrintTrader.prototype.isPaperNearEnd=function(e){return!!(4&parseInt(e.traderStatus.substr(10,2),16))},StarWebPrintTrader.prototype.isPaperPresent=function(e){return!!(2&parseInt(e.traderStatus.substr(12,2),16))},StarWebPrintTrader.prototype.extractionEtbCounter=function(e){var t=0;return 64&parseInt(e.traderStatus.substr(14,2),16)&&(t|=16),32&parseInt(e.traderStatus.substr(14,2),16)&&(t|=8),8&parseInt(e.traderStatus.substr(14,2),16)&&(t|=4),4&parseInt(e.traderStatus.substr(14,2),16)&&(t|=2),2&parseInt(e.traderStatus.substr(14,2),16)&&(t|=1),t},StarWebPrintTrader.prototype._encodeEscapeSequence=function(e){var t=/[<>&]/g;return t.test(e)&&(e=e.replace(t,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;"}return"&amp;"})),e};var StarWebPrintBuilder=function(){};StarWebPrintBuilder.prototype.createAlignmentElement=function(e){var t="<alignment";return null!=e&&(t+=this._analysisEnumAttribute("position",e.position,/^(left|center|right)$/)),t+"/>"},StarWebPrintBuilder.prototype.createBarcodeElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(t="<barcode"+this._analysisEnumAttribute("symbology",e.symbology,/^(UPCE|UPCA|JAN8|JAN13|Code39|ITF|Code128|Code93|NW7)$/),t+=this._analysisEnumAttribute("width",e.width,/^(width[2-4]|width_mode[1-9])$/),t+=this._analysisEnumAttribute("hri",e.hri,/^(false|true)$/),t+=this._analysisValueAttribute("height",e.height,1,255),null==e.data)throw Error('Argument "data" is undefined.');return(t=t+">"+this._encodeEscapeSequenceBinary(e.data))+"</barcode>"},StarWebPrintBuilder.prototype.createBitImageElement=function(e){var t="<bitimage";if(null==e)throw Error("Argument is undefined.");var i=0,n=0,r=0,s=0;if(null!=e.x&&(i=e.x),null!=e.y&&(n=e.y),null!=e.width&&(r=e.width),null!=e.height&&(s=e.height),this._analysisValueAttribute("x",i,0,65535),this._analysisValueAttribute("y",n,0,65535),t+=this._analysisValueAttribute("width",r,0,65535),t+=this._analysisValueAttribute("height",s,0,65535),null==e.context)throw Error('Argument "context" is undefined.');return(t=t+">"+this._encodeRasterImage(e.context.getImageData(i,n,r,s).data,r,s))+"</bitimage>"},StarWebPrintBuilder.prototype.createCutPaperElement=function(e){var t="<cutpaper";return null!=e&&(t+=this._analysisEnumAttribute("feed",e.feed,/^(false|true)$/),t+=this._analysisEnumAttribute("type",e.type,/^(full|partial)$/)),t+"/>"},StarWebPrintBuilder.prototype.createFeedElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(null==e.line&&null==e.unit)throw Error('Argument "line / unit" is undefined.');return t="<feed"+this._analysisValueAttribute("line",e.line,1,255),(t+=this._analysisValueAttribute("unit",e.unit,1,255))+"/>"},StarWebPrintBuilder.prototype.createInitializationElement=function(e){var t="<initialization";return null!=e&&(t+=this._analysisEnumAttribute("reset",e.reset,/^(false|true)$/),t+=this._analysisEnumAttribute("print",e.print,/^(false|true)$/)),t+"/>"},StarWebPrintBuilder.prototype.createLogoElement=function(e){var t="<logo";return null!=e&&(t+=this._analysisEnumAttribute("width",e.width,/^(single|double)$/),t+=this._analysisEnumAttribute("height",e.height,/^(single|double)$/),t+=this._analysisValueAttribute("number",e.number,1,255)),t+"/>"},StarWebPrintBuilder.prototype.createPdf417Element=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(t="<pdf417"+this._analysisEnumAttribute("level",e.level,/^(level[0-8])$/),null!=e.line&&(t=0!=e.line?t+this._analysisValueAttribute("line",e.line,3,90):t+' line="0"'),t+=this._analysisValueAttribute("column",e.column,0,30),t+=this._analysisValueAttribute("module",e.module,1,8),t+=this._analysisValueAttribute("aspect",e.aspect,1,8),null==e.data)throw Error('Argument "data" is undefined.');return(t=t+">"+this._encodeEscapeSequenceBinary(e.data))+"</pdf417>"},StarWebPrintBuilder.prototype.createPeripheralElement=function(e){var t="<peripheral";return null!=e&&(t+=this._analysisValueAttribute("channel",e.channel,1,2),t+=this._analysisValueAttribute("on",e.on,1,65535),t+=this._analysisValueAttribute("off",e.off,1,65535)),t+"/>"},StarWebPrintBuilder.prototype.createQrCodeElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");if(t="<qrcode"+this._analysisEnumAttribute("model",e.model,/^(model[12])$/),t+=this._analysisEnumAttribute("level",e.level,/^(level_[lmqh])$/),t+=this._analysisValueAttribute("cell",e.cell,1,8),null==e.data)throw Error('Argument "data" is undefined.');return(t=t+">"+this._encodeEscapeSequenceBinary(e.data))+"</qrcode>"},StarWebPrintBuilder.prototype.createRawDataElement=function(e){if(null==e)throw Error("Argument is undefined.");if(null==e.data)throw Error('Argument "data" is undefined.');return(e="<rawdata>"+this._encodeBase64Binary(e.data))+"</rawdata>"},StarWebPrintBuilder.prototype.createRuledLineElement=function(e){var t="<ruledline";return null!=e&&(t+=this._analysisEnumAttribute("thickness",e.thickness,/^(thin|medium|thick|double_(thin|medium|thick))$/),t+=this._analysisValueAttribute("width",e.width,1,65535)),t+"/>"},StarWebPrintBuilder.prototype.createSoundElement=function(e){var t="<sound";return null!=e&&(t+=this._analysisValueAttribute("channel",e.channel,1,2),t+=this._analysisValueAttribute("repeat",e.repeat,1,20)),t+"/>"},StarWebPrintBuilder.prototype.createTextElement=function(e){var t;if(null==e)throw Error("Argument is undefined.");return t="<text"+this._analysisEnumAttribute("emphasis",e.emphasis,/^(false|true)$/),t+=this._analysisEnumAttribute("invert",e.invert,/^(false|true)$/),t+=this._analysisEnumAttribute("linespace",e.linespace,/^(24|32)$/),t+=this._analysisEnumAttribute("font",e.font,/^(font_[ab])$/),t+=this._analysisEnumAttribute("underline",e.underline,/^(false|true)$/),t+=this._analysisValueAttribute("characterspace",e.characterspace,0,7),t+=this._analysisValueAttribute("width",e.width,1,6),t+=this._analysisValueAttribute("height",e.height,1,6),t+=this._analysisEnumAttribute("codepage",e.codepage,/^(cp(437|737|772|774|851|852|855|857|858|860|861|862|863|864|865|866|869|874|928|932|998|999|1001|1250|1251|1252|2001|3001|3002|3011|3012|3021|3041|3840|3841|3843|3844|3845|3846|3847|3848)|utf8|blank|utf8|shift_jis|gb18030|gb2312|big5|korea)$/),t+=this._analysisEnumAttribute("international",e.international,/^(usa|france|germany|uk|denmark|sweden|italy|spain|japan|norway|denmark2|spain2|latin_america|korea|ireland|legal)$/),null!=e.data?(t+=">",t=1==e.binary?t+this._encodeEscapeSequenceBinary(e.data):t+this._encodeEscapeSequence(e.data),t+="</text>"):t+="/>",t},StarWebPrintBuilder.prototype.createHoldPrintElement=function(e){var t="<holdprint";return null!=e&&(t+=this._analysisEnumAttribute("type",e.type,/^(valid|invalid|default)$/)),t+"/>"},StarWebPrintBuilder.prototype._analysisEnumAttribute=function(e,t,i){if(null!=t){if(!i.test(t))throw Error('Argument "'+e+'" is invalid.');return" "+e+'="'+t+'"'}return""},StarWebPrintBuilder.prototype._analysisValueAttribute=function(e,t,i,n){if(null!=t){if(t<i||t>n)throw Error('Argument "'+e+'" is invalid.');return" "+e+'="'+t+'"'}return""},StarWebPrintBuilder.prototype._encodeEscapeSequence=function(e){var t=/[\\\x00-\x20\x26\x3c\x3e\x7f]/g;return t.test(e)&&(e=e.replace(t,function(e){return"\\"==e?"\\\\":"\\x"+("0"+e.charCodeAt(0).toString(16)).slice(-2)})),e},StarWebPrintBuilder.prototype._encodeEscapeSequenceBinary=function(e){var t=/[\\\x00-\x20\x26\x3c\x3e\x7f-\xff]/g;return t.test(e)&&(e=e.replace(t,function(e){return"\\"==e?"\\\\":"\\x"+("0"+e.charCodeAt(0).toString(16)).slice(-2)})),e},StarWebPrintBuilder.prototype._encodeBase64Binary=function(e){var t="",i=e.length;e+="\0\0";for(var n=0;n<i;n+=3){var r=e.charCodeAt(n)<<16|e.charCodeAt(n+1)<<8|e.charCodeAt(n+2);t=t+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&r))}switch(i%3){case 1:return t.slice(0,-2)+"==";case 2:return t.slice(0,-1)+"="}return t},StarWebPrintBuilder.prototype._encodeRasterImage=function(e,t,i){for(var n=[[-254,-126,-222,-94,-246,-118,-214,-86],[-62,-190,-30,-158,-54,-182,-22,-150],[-206,-78,-238,-110,-198,-70,-230,-102],[-14,-142,-46,-174,-6,-134,-38,-166],[-242,-114,-210,-82,-250,-122,-218,-90],[-50,-178,-18,-146,-58,-186,-26,-154],[-194,-66,-226,-98,-202,-74,-234,-106],[-2,-130,-34,-162,-10,-138,-42,-170]],r="",s=0,a=0;a<i;a++){for(var o=0,l=128,c=0;c<t;c++)((30*e[s]+59*e[s+1]+11*e[s+2])*e[s+3]+12800)/25500-e[s+3]<n[7&a][7&c]&&(o|=l),s+=4,0==(l>>=1)&&(r+=String.fromCharCode(o),o=0,l=128);128!=l&&(r+=String.fromCharCode(o))}for(e=r,r="",t=e.length,e+="\0\0",a=0;a<t;a+=3)i=e.charCodeAt(a)<<16|e.charCodeAt(a+1)<<8|e.charCodeAt(a+2),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);switch(t%3){case 1:return r.slice(0,-2)+"==";case 2:return r.slice(0,-1)+"="}return r},function(window,undefined){function callbackInfo(){this.callbackInfoList=new Object}function CommBox(e,t,i){this.ERROR_OK="OK",this.ERROR_NOT_OPENED="NOT_OPENED",this.ERROR_MEMBER_NOT_FOUND="MEMBER_NOT_FOUND",this.ERROR_SYSTEM_ERROR="SYSTEM_ERROR",this.boxID=e,this.commBoxManager=t,this.callbackInfo=i,this.onreceive=null,this.connectionObj=this.commBoxManager.connectionObj}function CommBoxManager(){this.ERROR_OK="OK",this.ERROR_BOX_COUNT_OVER="BOX_COUNT_OVER",this.ERROR_BOX_CLIENT_OVER="BOX_CLIENT_OVER",this.ERROR_MEMBERID_ALREADY_USED="MEMBERID_ALREADY_USED",this.ERROR_ALREADY_OPENED="ALREADY_OPENED",this.ERROR_NOT_OPENED="NOT_OPENED",this.ERROR_PARAMETER_ERROR="PARAMETER_ERROR",this.ERROR_SYSTEM_ERROR="SYSTEM_ERROR",this.callbackInfo=new callbackInfo,this.commBoxList=new Array,this.connectionObj=null}function DeviceObjectSelector(){this.type2objectMap={type_scanner:"Scanner",type_keyboard:"Keyboard",type_poskeyboard:"POSKeyboard",type_msr:"MSR",type_cat:"CAT",type_cash_changer:"CashChanger",type_printer:"Printer",type_display:"Display",type_simple_serial:"SimpleSerial",type_hybrid_printer:"HybridPrinter",type_hybrid_printer2:"HybridPrinter2",type_dt:"DeviceTerminal",type_other_peripheral:"OtherPeripheral",type_storage:"GermanyFiscalElement"},this.connectionObj=null}function CashChanger(e,t){this.CONFIG_LEFT_CASH="CONFIG_LEFT_CASH",this.CONFIG_COUNT_MODE="CONFIG_COUNT_MODE",this.MODE_MANUAL_INPUT="MODE_MANUAL_INPUT",this.MODE_AUTOCOUNT="MODE_AUTO_COUNT",this.DEPOSIT_CHANGE="DEPOSIT_CHANGE",this.DEPOSIT_NOCHANGE="DEPOSIT_NOCHANGE",this.DEPOSIT_REPAY="DEPOSIT_REPAY",this.COLLECT_ALL_CASH="ALL_CASH",this.COLLECT_PART_OF_CASH="PART_OF_CASH",this.SUE_POWER_ONLINE=2001,this.SUE_POWER_OFF=2002,this.SUE_POWER_OFFLINE=2003,this.SUE_POWER_OFF_OFFLINE=2004,this.SUE_STATUS_EMPTY=11,this.SUE_STATUS_NEAREMPTY=12,this.SUE_STATUS_EMPTYOK=13,this.SUE_STATUS_FULL=21,this.SUE_STATUS_NEARFULL=22,this.SUE_STATUS_FULLOK=23,this.SUE_STATUS_JAM=31,this.SUE_STATUS_JAMOK=32,this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function CAT(e,t){this.SUE_LOGSTATUS_OK=0,this.SUE_LOGSTATUS_NEARFULL=1,this.SUE_LOGSTATUS_FULL=2,this.SUE_POWER_ONLINE=2001,this.SUE_POWER_OFF_OFFLINE=2004,this.deviceID=e,this.isCrypto=t,this.timeout=0,this.trainingMode=!1,this.connectionObj=null}function DeviceTerminal(e,t){this.deviceID=e,this.isCrypto=t,this.onshutdown=null,this.onrestart=null,this.connectionObj=null}function Display(e,t,i){this.message="",this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.timeout=1e4,this.onreceive=null,this.onerror=null,this.ASB_NO_RESPONSE=1,this.ASB_DISPLAY_SUCCESS=2,this.SCROLL_OVERWRITE="overwrite",this.SCROLL_VERTICAL="v_scroll",this.SCROLL_HORIZONTAL="h_scroll",this.MOVE_TOP_LEFT="top_left",this.MOVE_TOP_RIGHT="top_right",this.MOVE_BOTTOM_LEFT="bottom_left",this.MOVE_BOTTOM_RIGHT="bottom_right",this.CURSOR_NONE="none",this.CURSOR_UNDERLINE="underline",this.BRIGHTNESS_20=20,this.BRIGHTNESS_40=40,this.BRIGHTNESS_60=60,this.BRIGHTNESS_100=100,this.MARQUEE_WALK="walk",this.MARQUEE_PLACE="place",this.connectionObj=null}callbackInfo.prototype={addCallback:function(e,t){this.callbackInfoList[t]=e},removeCallback:function(e){for(var t in this.callbackInfoList)if(t==e)return void delete this.callbackInfoList[t]},getCallback:function(e){return null!=this.callbackInfoList[e]?this.callbackInfoList[e]:null}},CommBox.prototype={getCommHistory:function(e,t){var i="function"==typeof e?null:e,n="function"==typeof e?e:t,r=null!=i&&null!=i.allHistory&&e.allHistory,s={type:"getcommhistory",box_id:this.boxID,all_history:r},a=MessageFactory.getCommBoxDataMessage(s);return this.commBoxManager.isOpened(this.getBoxId())?(this.callbackInfo.addCallback(n,a.sequence),this.connectionObj.emit(a),a.sequence):(null!=n&&n(this.ERROR_NOT_OPENED,null,a.sequence),a.sequence)},send:function(e,t,i){var n={type:"send",box_id:this.boxID,message:e,member_id:t},r=MessageFactory.getCommBoxDataMessage(n);return this.commBoxManager.isOpened(this.getBoxId())?(this.callbackInfo.addCallback(i,r.sequence),this.connectionObj.emit(r),r.sequence):(null!=i&&i(this.ERROR_NOT_OPENED,0,r.sequence),r.sequence)},client_getcommhistory:function(e,t){var i=e.code,n=e.history_list,r=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=r&&r(i,n,t)},client_send:function(e,t){var i=e.code,n=e.count,r=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=r&&r(i,n,t)},client_onreceive:function(e,t){var i=new Object;i.senderId=e.sender_id,i.receiverId=e.receiver_id,i.message=e.message,null!=this.onreceive&&this.onreceive(i)},getBoxId:function(){return this.boxID}},CommBoxManager.prototype={setConnectionObject:function(e){this.connectionObj=e},openCommBox:function(e,t,i){var n="";null!=t&&null!=t.memberID&&(n=t.memberID);var r={box_id:e,member_id:n},s=MessageFactory.getOpenCommBoxMessage(r);return this.connectionObj.isUsableDeviceIF()?(this.connectionObj.emit(s),this.callbackInfo.addCallback(i,s.sequence),s.sequence):(i(null,this.ERROR_SYSTEM_ERROR,s.sequence),s.sequence)},closeCommBox:function(e,t){var i={box_id:r},n=MessageFactory.getCloseCommBoxMessage(i);try{var r=e.getBoxId();if(i.box_id=r,n=MessageFactory.getCloseCommBoxMessage(i),!this.isOpened(r))return null!=t&&t(this.ERROR_NOT_OPENED,n.sequence),n.sequence;this.connectionObj.emit(n)}catch(s){null!=t&&t(this.ERROR_PARAMETER_ERROR,n.sequence)}return this.callbackInfo.addCallback(t,n.sequence),n.sequence},client_opencommbox:function(e,t){var i=e.box_id,n=e.code,r=null;n==this.ERROR_OK&&null==this.getCommBox(i)&&(r=new CommBox(i,this,this.callbackInfo)),null!=r&&this.commBoxList.push(r);var s=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=s&&s(r,n,t)},client_closecommbox:function(e,t){var i=e.box_id,n=e.code;this.removeCommBox(i);var r=this.callbackInfo.getCallback(t);this.callbackInfo.removeCallback(t),null!=r&&r(n,t)},executeCommDataCallback:function(data,sq){var boxID=data.box_id,commBoxObj=this.getCommBox(boxID),method="client_"+data.type;try{eval("commBoxObj."+method+"(data, sq)")}catch(e){throw new Error("")}},getCommBox:function(e){for(var t=null,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==e){t=this.commBoxList[i];break}return t},removeCommBox:function(e){for(var t=!1,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==e){this.commBoxList.splice(i,1),t=!0;break}return t},isOpened:function(e){for(var t=!1,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==e){t=!0;break}return t}},DeviceObjectSelector.prototype={setConnectionObject:function(e){this.connectionObj=e},isSelectable:function(e){return!!this.connectionObj.isUsableDeviceIF()||(!("type_printer"!=e||!this.connectionObj.isUsablePrintIF())||!("type_display"!=e||!this.connectionObj.isUsableDisplayIF()))},select:function(deviceId,deviceType,specificDevice,isCrypto,ePOSDeviceContext){var deviceObjectName="";deviceObjectName="string"==typeof specificDevice?specificDevice:this.type2objectMap[deviceType];var templateObject=null;try{templateObject=eval(deviceObjectName)}catch(e){throw new Error("ERROR_PARAMETER")}if("function"!=typeof templateObject)throw new Error("ERROR_PARAMETER");return"Printer"==deviceObjectName||"Display"==deviceObjectName||"HybridPrinter"==deviceObjectName||"HybridPrinter2"==deviceObjectName?new templateObject(deviceId,isCrypto,ePOSDeviceContext):new templateObject(deviceId,isCrypto)}},CashChanger.prototype={setConnectionObject:function(e){this.connectionObj=e},client_oncashcounts:function(e){try{if(null==this.oncashcounts)return;this.oncashcounts(e)}catch(t){}},client_onstatuschange:function(e){try{if(null==this.onstatuschange)return;this.onstatuschange(e)}catch(t){}},client_ondeposit:function(e){try{if(null==this.ondeposit)return;this.ondeposit(e)}catch(t){}},client_ondispense:function(e){try{if(null==this.ondispense)return;this.ondispense(e)}catch(t){}},client_oncollect:function(e){try{if(null==this.oncollect)return;this.oncollect(e)}catch(t){}},client_onconfigchange:function(e){try{if(null==this.onconfigchange)return;this.onconfigchange(e)}catch(t){}},client_oncommandreply:function(e){try{if(null==this.oncommandreply)return;if(""!=typeof e.command);else{var t=e.data;t=t.replace(/[0-9a-fA-F]{2}/g,function(e){var t=parseInt(e,16);return String.fromCharCode(t)}),e.data=t}this.oncommandreply(e)}catch(i){}},client_ondirectio:function(e){try{if(null==this.ondirectio)return;this.ondirectio(e)}catch(t){}},client_onstatusupdate:function(e){try{if(null==this.onstatusupdate)return;this.onstatusupdate(e)}catch(t){}},readCashCounts:function(){return this.send({type:"readcashcounts"})},beginDeposit:function(){return this.send({type:"begindeposit"})},pauseDeposit:function(){return this.send({type:"pausedeposit"})},restartDeposit:function(){return this.send({type:"restartdeposit"})},endDeposit:function(e){var t={type:"enddeposit",cmd:e};return this.send(t)},dispenseCash:function(e){var t;return"object"==typeof e?(t=e).type="dispensecash":t={type:"dispensecash",cash:e},this.send(t)},dispenseChange:function(e){var t;return"object"==typeof e?(t=e).type="dispensechange":t={type:"dispensechange",cash:e},this.send(t)},openDrawer:function(){return this.send({type:"opendrawer"})},collectCash:function(e){var t={type:"collectcash",collectmode:e};return this.send(t)},setConfig:function(e,t){var i=null;switch(e){case this.CONFIG_COUNT_MODE:i={type:"setconfig",config:e,mode:t.mode};break;case this.CONFIG_LEFT_CASH:null!=t.bills&&""!=t.bills||(t.bills="0"),null!=t.coins&&""!=t.coins||(t.coins="0"),i={type:"setconfig",config:e,bills:t.bills,coins:t.coins}}var n=-1;return null!=i&&(n=this.send(i)),n},sendCommand:function(e){var t;return"object"==typeof e?(t=e).type="sendcommand":t={type:"sendcommand",command:toHexBinary(e)},this.send(t)},callEvent:function(e,t){var i=t;return i.type=e,this.send(i)},send:function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(n){}return i}},CAT.prototype={setConnectionObject:function(e){this.connectionObj=e},authorizeSales:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizesales"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},authorizeVoid:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizevoid"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},authorizeRefund:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizerefund"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},authorizeCompletion:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"authorizecompletion"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},accessDailyLog:function(e){var t={service:e.service,total_amount:e.totalAmount,sequence:e.sequence,type:"accessdailylog"};return t.training=this.trainingMode,t.timeout=this.timeout,this.send(t)},sendCommand:function(e){var t={service:e.service,command:e.command,data:e.data,string:e.string,type:"sendcommand"};return t.training=this.trainingMode,this.send(t)},send:function(e){this.deviceID;var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(n){}return i},client_onauthorizesales:function(e){try{if(null==this.onauthorizesales)return;this.onauthorizesales(this.getResultObject(e))}catch(t){}},client_onauthorizevoid:function(e){try{if(null==this.onauthorizevoid)return;this.onauthorizevoid(this.getResultObject(e))}catch(t){}},client_onauthorizerefund:function(e){try{if(null==this.onauthorizerefund)return;this.onauthorizerefund(this.getResultObject(e))}catch(t){}},client_onauthorizecompletion:function(e){try{if(null==this.onauthorizecompletion)return;this.onauthorizecompletion(this.getResultObject(e))}catch(t){}},client_onaccessdailylog:function(e){try{if(null==this.onaccessdailylog)return;this.onaccessdailylog(this.getDailyLogObject(e))}catch(t){}},client_oncommandreply:function(e){try{if(null==this.oncommandreply)return;this.oncommandreply(this.getCommandReplyObject(e))}catch(t){}},client_onstatusupdate:function(e){try{if(null==this.onstatusupdate)return;this.onstatusupdate(e)}catch(t){}},getResultObject:function(e){return{status:e.status,sequence:e.sequence,service:e.service,accountNumber:e.account_number,settledAmount:e.settled_amount,slipNumber:e.slip_number,kid:e.kid,approvalCode:e.approval_code,transactionNumber:e.transaction_number,paymentCondition:e.payment_condition,voidSlipNumber:e.void_slip_number,balance:e.balance}},getDailyLogObject:function(e){var t={};t.status=e.status,t.service=e.service,t.sequence=e.sequence;var i=[];try{e.daily_log.forEach(function(e){var t={};if(0===e)throw i;t.kid=e.kid,t.salesCount=e.sales_count,t.salesAmount=e.sales_amount,t.voidCount=e.void_count,t.voidAmount=e.void_amount,i.push(t)})}catch(n){}return t.dailyLog=i,t},getCommandReplyObject:function(e){return{status:e.status,command:e.command,data:e.data,string:e.string,service:e.service,sequence:e.sequence,accountNumber:e.account_number,settledAmount:e.settled_amount,slipNumber:e.slip_number,transactionNumber:e.transaction_number,paymentCondition:e.payment_condition,balance:e.balance,additionalSecurityInformation:e.additional_security_information}},callEvent:function(e,t){var i=t;return i.type=e,this.send(i)}},DeviceTerminal.prototype={setConnectionObject:function(e){this.connectionObj=e},shutdown:function(e,t){this.onshutdown=t;var i={type:"shutdown",password:e};return this.send(i)},client_onshutdown:function(e){try{if("function"!=typeof this.onshutdown)return;this.onshutdown(e)}catch(t){}},restart:function(e,t){this.onrestart=t;var i={type:"restart",password:e};return this.send(i)},client_onrestart:function(e){try{if("function"!=typeof this.onrestart)return;this.onrestart(e)}catch(t){}},send:function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(n){}return i}},Display.prototype.setConnectionObject=function(e){this.connectionObj=e},Display.prototype.reset=function(){try{this.message+="<reset />"}catch(e){throw e}return this},Display.prototype.createWindow=function(e,t,i,n,r,s){try{var a="";a+=getIntAttr("number",e,1,4),a+=getIntAttr("x",t,1,20),a+=getIntAttr("y",i,1,2),a+=getIntAttr("width",n,1,21-t),a+=getIntAttr("height",r,1,3-i),a+=getEnumAttr("scrollmode",s,regexScrollMode),this.message+="<window"+a+"/>"}catch(o){throw o}return this},Display.prototype.destroyWindow=function(e){try{var t="";t+=getIntAttr("number",e,1,4),this.message+="<window"+t+' destroy="true"/>'}catch(i){throw i}return this},Display.prototype.setCurrentWindow=function(e){try{var t="";t+=getIntAttr("number",e,1,4),this.message+="<window"+t+"/>"}catch(i){throw i}return this},Display.prototype.setCursorPosition=function(){try{var e="";e+=getIntAttr("x",arguments[0],1,20),e+=getIntAttr("y",arguments[1],1,2),this.message+="<cursor"+e+"/>"}catch(t){throw t}return this},Display.prototype.moveCursorPosition=function(){try{var e="";e+=getEnumAttr("moveto",arguments[0],regexMoveto),this.message+="<cursor"+e+"/>"}catch(t){throw t}return this},Display.prototype.setCursorType=function(e){try{var t="";t+=getEnumAttr("type",e,regexUnderline),this.message+="<cursor"+t+"/>"}catch(i){throw i}return this},Display.prototype.addText=function(){try{var e="";switch(arguments.length){case 1:break;case 2:e+=' lang="'+arguments[1]+'"';break;case 3:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2);break;case 4:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2),e+=' lang="'+arguments[3]+'"';break;default:throw new Error("Parameters are invalid")}this.message+="<text"+e+">"+escapeMarkup(arguments[0])+"</text>"}catch(t){throw t}return this},Display.prototype.addReverseText=function(){try{var e="";switch(arguments.length){case 1:e+=getBoolAttr("reverse",!0);break;case 2:e+=' lang="'+arguments[1]+'"',e+=getBoolAttr("reverse",!0);break;case 3:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2),e+=getBoolAttr("reverse",!0);break;case 4:e+=getIntAttr("x",arguments[1],1,20),e+=getIntAttr("y",arguments[2],1,2),e+=' lang="'+arguments[3]+'"',e+=getBoolAttr("reverse",!0);break;default:throw new Error("Parameters are invalid")}this.message+="<text"+e+">"+escapeMarkup(arguments[0])+"</text>"}catch(t){throw t}return this},Display.prototype.clearWindow=function(){try{this.message+="<clear/>"}catch(e){throw e}return this},Display.prototype.setBlink=function(e){try{var t="";t+=getUShortAttr("interval",e),this.message+="<blink"+t+"/>"}catch(i){throw i}return this},Display.prototype.setBrightness=function(e){try{var t="";t+=getEnumAttr("value",e,regexBrightness),this.message+="<brightness"+t+"/>"}catch(i){throw i}return this},Display.prototype.addMarquee=function(e,t,i,n,r,s){try{var a="";a+=getEnumAttr("format",t,regexMarquee),a+=getIntAttr("uwait",i,0,2e3),a+=getIntAttr("rwait",n,100,2e3),a+=getIntAttr("repeat",r,0,127),void 0!==s&&(a+=' lang="'+s+'"'),this.message+="<marquee"+a+">"+escapeMarkup(e)+"</marquee>"}catch(o){throw o}return this},Display.prototype.showClock=function(){try{this.message+="<clock/>"}catch(e){throw e}return this},Display.prototype.addCommand=function(e){try{this.message+="<command>"+toHexBinary(e)+"</command>"}catch(t){throw t}return this},Display.prototype.send=function(){var e=-1;if(!this.ePosDev.eposprint&&this.connectionObj.isUsableDeviceIF())try{var t=this.toString(),i={type:"display",timeout:this.timeout,displaydata:t},n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto);this.connectionObj.emit(n),e=n.sequence,this.message=""}catch(p){e=-1}else{var r,s,a,o,l,c,d,u=this,h=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid="+this.deviceID+"&timeout="+this.timeout;if(o={},r='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',r+="<s:Body>"+this.toString()+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(s=new XMLHttpRequest))&&window.XDomainRequest?((s=new XDomainRequest).open("POST",h,!0),s.onload=function(){o=s.responseText,/response/.test(o)?(l=/success\s*=\s*"\s*(1|true)\s*"/.test(o),c=o.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",d=o.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,u.fireReceiveEvent(l,c,d,0)):u.fireErrorEvent(0,s.responseText,0)},s.onerror=function(){u.fireErrorEvent(0,s.responseText,0)},s.onprogress=function(){},s.ontimeout=s.onerror,s.timeout=u.timeout,s.send(r)):(s.open("POST",h,!0),s.setRequestHeader("Content-Type","text/xml; charset=utf-8"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),s.setRequestHeader("SOAPAction",'""'),s.onreadystatechange=function(){4==s.readyState&&(clearTimeout(a),200==s.status&&s.responseXML&&(o=s.responseXML.getElementsByTagName("response")).length>0?(l=/^(1|true)$/.test(o[0].getAttribute("success")),c=o[0].hasAttribute("code")?o[0].getAttribute("code"):"",d=o[0].hasAttribute("status")?parseInt(o[0].getAttribute("status")):0,u.fireReceiveEvent(l,c,d,0)):u.fireErrorEvent(s.status,s.responseText,0))},a=setTimeout(function(){s.abort()},this.timeout),s.send(r)),this.message="",e=0}return e},Display.prototype.fireReceiveEvent=function(e,t,i,n){"EX_ENPC_TIMEOUT"==t&&(t="ERROR_DEVICE_BUSY"),this.onreceive&&this.onreceive({success:e,code:t,status:i},n)},Display.prototype.fireErrorEvent=function(e,t,i){this.onerror&&this.onerror({status:0,responseText:this.ASB_NO_RESPONSE},i),this.ePosDev.cleanup()},Display.prototype.client_onxmlresult=function(e,t){if(e){var i=e.resultdata,n=/success\s*=\s*"\s*(1|true)\s*"/.test(i);i.match(/code\s*=\s*"\s*(\S*)\s*"/);var r=RegExp.$1;i.match(/status\s*=\s*"\s*(\d+)\s*"/);var s=parseInt(RegExp.$1);this.onreceive&&this.onreceive({success:n,code:r,status:s},t)}else this.onerror&&this.onerror({status:0,responseText:this.ASB_NO_RESPONSE},t),this.ePosDev.cleanup()},Display.prototype.toString=function(){return'<epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display">'+this.message+"</epos-display>"},Display.prototype.setXmlString=function(e){this.message=e},Display.prototype.getXmlString=function(){return this.message},Display.prototype.callEvent=function(e,t){var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),n=-1;try{this.connectionObj.emit(i),n=i.sequence}catch(r){}return n};var regexBrightness=/^(20|40|60|100)$/,regexScrollMode=/^(overwrite|v_scroll|h_scroll)$/,regexMoveto=/^(top_left|top_right|bottom_left|bottom_right)$/,regexUnderline=/^(none|underline)$/,regexMarquee=/^(walk|place)$/;function OtherPeripheral(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function Keyboard(e,t){this.VK_CANCEL=3,this.VK_BACK=8,this.VK_TAB=9,this.VK_RETURN=13,this.VK_SHIFT=16,this.VK_CONTROL=17,this.VK_MENU=18,this.VK_PAUSE=19,this.VK_CAPITAL=20,this.VK_KANA=21,this.VK_ESCAPE=27,this.VK_CONVERT=28,this.VK_NONCONVERT=29,this.VK_SPACE=32,this.VK_PRIOR=33,this.VK_NEXT=34,this.VK_END=35,this.VK_HOME=36,this.VK_LEFT=37,this.VK_UP=38,this.VK_RIGHT=39,this.VK_DOWN=40,this.VK_INSERT=45,this.VK_DELETE=46,this.VK_0=48,this.VK_1=49,this.VK_2=50,this.VK_3=51,this.VK_4=52,this.VK_5=53,this.VK_6=54,this.VK_7=55,this.VK_8=56,this.VK_9=57,this.VK_A=65,this.VK_B=66,this.VK_C=67,this.VK_D=68,this.VK_E=69,this.VK_F=70,this.VK_G=71,this.VK_H=72,this.VK_I=73,this.VK_J=74,this.VK_K=75,this.VK_L=76,this.VK_M=77,this.VK_N=78,this.VK_O=79,this.VK_P=80,this.VK_Q=81,this.VK_R=82,this.VK_S=83,this.VK_T=84,this.VK_U=85,this.VK_V=86,this.VK_W=87,this.VK_X=88,this.VK_Y=89,this.VK_Z=90,this.VK_LWIN=91,this.VK_RWIN=92,this.VK_APPS=93,this.VK_NUMPAD0=96,this.VK_NUMPAD1=97,this.VK_NUMPAD2=98,this.VK_NUMPAD3=99,this.VK_NUMPAD4=100,this.VK_NUMPAD5=101,this.VK_NUMPAD6=102,this.VK_NUMPAD7=103,this.VK_NUMPAD8=104,this.VK_NUMPAD9=105,this.VK_MULTIPLY=106,this.VK_ADD=107,this.VK_SEPARATOR=108,this.VK_SUBTRACT=109,this.VK_DECIMAL=110,this.VK_DIVIDE=111,this.VK_F1=112,this.VK_F2=113,this.VK_F3=114,this.VK_F4=115,this.VK_F5=116,this.VK_F6=117,this.VK_F7=118,this.VK_F8=119,this.VK_F9=120,this.VK_F10=121,this.VK_F11=122,this.VK_F12=123,this.VK_NUMLOCK=144,this.VK_SCROLL=145,this.VK_LSHIFT=160,this.VK_RSHIFT=161,this.VK_LCONTROL=162,this.VK_RCONTROL=163,this.VK_LMENU=164,this.VK_RMENU=165,this.VK_OEM_1=186,this.VK_OEM_PLUS=187,this.VK_OEM_COMMA=188,this.VK_OEM_MINUS=189,this.VK_OEM_PERIOD=190,this.VK_OEM_2=191,this.VK_OEM_3=192,this.VK_OEM_4=219,this.VK_OEM_5=220,this.VK_OEM_6=221,this.VK_OEM_7=222,this.VK_OEM_102=226,this.VK_OEM_ATTN=240,this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function MSR(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function ePOSBuilder(){this.message="",this.halftone=0,this.brightness=1,this.force=!1,this.FONT_A="font_a",this.FONT_B="font_b",this.FONT_C="font_c",this.FONT_D="font_d",this.FONT_E="font_e",this.FONT_SPECIAL_A="special_a",this.FONT_SPECIAL_B="special_b",this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.BARCODE_UPC_A="upc_a",this.BARCODE_UPC_E="upc_e",this.BARCODE_EAN13="ean13",this.BARCODE_JAN13="jan13",this.BARCODE_EAN8="ean8",this.BARCODE_JAN8="jan8",this.BARCODE_CODE39="code39",this.BARCODE_ITF="itf",this.BARCODE_CODABAR="codabar",this.BARCODE_CODE93="code93",this.BARCODE_CODE128="code128",this.BARCODE_GS1_128="gs1_128",this.BARCODE_GS1_DATABAR_OMNIDIRECTIONAL="gs1_databar_omnidirectional",this.BARCODE_GS1_DATABAR_TRUNCATED="gs1_databar_truncated",this.BARCODE_GS1_DATABAR_LIMITED="gs1_databar_limited",this.BARCODE_GS1_DATABAR_EXPANDED="gs1_databar_expanded",this.HRI_NONE="none",this.HRI_ABOVE="above",this.HRI_BELOW="below",this.HRI_BOTH="both",this.SYMBOL_PDF417_STANDARD="pdf417_standard",this.SYMBOL_PDF417_TRUNCATED="pdf417_truncated",this.SYMBOL_QRCODE_MODEL_1="qrcode_model_1",this.SYMBOL_QRCODE_MODEL_2="qrcode_model_2",this.SYMBOL_QRCODE_MICRO="qrcode_micro",this.SYMBOL_MAXICODE_MODE_2="maxicode_mode_2",this.SYMBOL_MAXICODE_MODE_3="maxicode_mode_3",this.SYMBOL_MAXICODE_MODE_4="maxicode_mode_4",this.SYMBOL_MAXICODE_MODE_5="maxicode_mode_5",this.SYMBOL_MAXICODE_MODE_6="maxicode_mode_6",this.SYMBOL_GS1_DATABAR_STACKED="gs1_databar_stacked",this.SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL="gs1_databar_stacked_omnidirectional",this.SYMBOL_GS1_DATABAR_EXPANDED_STACKED="gs1_databar_expanded_stacked",this.SYMBOL_AZTECCODE_FULLRANGE="azteccode_fullrange",this.SYMBOL_AZTECCODE_COMPACT="azteccode_compact",this.SYMBOL_DATAMATRIX_SQUARE="datamatrix_square",this.SYMBOL_DATAMATRIX_RECTANGLE_8="datamatrix_rectangle_8",this.SYMBOL_DATAMATRIX_RECTANGLE_12="datamatrix_rectangle_12",this.SYMBOL_DATAMATRIX_RECTANGLE_16="datamatrix_rectangle_16",this.LEVEL_0="level_0",this.LEVEL_1="level_1",this.LEVEL_2="level_2",this.LEVEL_3="level_3",this.LEVEL_4="level_4",this.LEVEL_5="level_5",this.LEVEL_6="level_6",this.LEVEL_7="level_7",this.LEVEL_8="level_8",this.LEVEL_L="level_l",this.LEVEL_M="level_m",this.LEVEL_Q="level_q",this.LEVEL_H="level_h",this.LEVEL_DEFAULT="default",this.LINE_THIN="thin",this.LINE_MEDIUM="medium",this.LINE_THICK="thick",this.LINE_THIN_DOUBLE="thin_double",this.LINE_MEDIUM_DOUBLE="medium_double",this.LINE_THICK_DOUBLE="thick_double",this.DIRECTION_LEFT_TO_RIGHT="left_to_right",this.DIRECTION_BOTTOM_TO_TOP="bottom_to_top",this.DIRECTION_RIGHT_TO_LEFT="right_to_left",this.DIRECTION_TOP_TO_BOTTOM="top_to_bottom",this.CUT_NO_FEED="no_feed",this.CUT_FEED="feed",this.CUT_RESERVE="reserve",this.DRAWER_1="drawer_1",this.DRAWER_2="drawer_2",this.PULSE_100="pulse_100",this.PULSE_200="pulse_200",this.PULSE_300="pulse_300",this.PULSE_400="pulse_400",this.PULSE_500="pulse_500",this.PATTERN_NONE="none",this.PATTERN_0="pattern_0",this.PATTERN_1="pattern_1",this.PATTERN_2="pattern_2",this.PATTERN_3="pattern_3",this.PATTERN_4="pattern_4",this.PATTERN_5="pattern_5",this.PATTERN_6="pattern_6",this.PATTERN_7="pattern_7",this.PATTERN_8="pattern_8",this.PATTERN_9="pattern_9",this.PATTERN_10="pattern_10",this.PATTERN_A="pattern_a",this.PATTERN_B="pattern_b",this.PATTERN_C="pattern_c",this.PATTERN_D="pattern_d",this.PATTERN_E="pattern_e",this.PATTERN_ERROR="error",this.PATTERN_PAPER_END="paper_end",this.LAYOUT_RECEIPT="receipt",this.LAYOUT_RECEIPT_BM="receipt_bm",this.LAYOUT_LABEL="label",this.LAYOUT_LABEL_BM="label_bm",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2}function toHexBinary(e){var t,i=e.length,n=new Array(i);for(t=0;t<i;t++)n[t]=("0"+e.charCodeAt(t).toString(16)).slice(-2);return n.join("")}function toBase64Binary(e){var t,i=e.length,n=new Array((i+2)/3<<2),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=(3-i%3)%3,a=0,o=0;for(e+="\0\0";o<i;)t=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++),n[a++]=r.charAt(t>>18&63),n[a++]=r.charAt(t>>12&63),n[a++]=r.charAt(t>>6&63),n[a++]=r.charAt(63&t);for(;s--;)n[--a]="=";return n.join("")}function toMonoImage(e,t,i){var n,r,s,a,o,l,c,d=String.fromCharCode,u=[[2,130,34,162,10,138,42,170],[194,66,226,98,202,74,234,106],[50,178,18,146,58,186,26,154],[242,114,210,82,250,122,218,90],[14,142,46,174,6,134,38,166],[206,78,238,110,198,70,230,102],[62,190,30,158,54,182,22,150],[254,126,222,94,246,118,214,86]],h=e.data,p=e.width,f=e.height,m=new Array((p+7>>3)*f),v=0,E=0,g=0,_=128,y=new Array;if(1==t)for(l=p;l--;)y.push(0);for(c=0;c<f;c++)for(n=0,r=0,l=0;l<p;)s=7&l,0==t&&(_=u[7&c][s]),a=255*Math.pow(((.29891*h[E++]+.58661*h[E++]+.11448*h[E++])*h[E]/255+255-h[E++])/255,1/i)|0,1==t&&(o=(a+=y[l]+n>>4)-(a<_?0:255),l>0&&(y[l-1]+=o),y[l]=7*o+r,n=5*o,r=3*o),a<_&&(v|=128>>s),l++,7!=s&&l!=p||(m[g++]=d(16==v?32:v),v=0);return m.join("")}function toGrayImage(e,t){var i,n,r,s,a,o=String.fromCharCode,l=[[0,9,2,11],[13,4,15,6],[3,12,1,10],[16,7,14,5]],c=[0,7,13,19,23,27,31,35,40,44,49,52,54,55,57,59,61,62,64,66,67,69,70,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,86,87,88,88,89,90,90,91,91,92,93,93,94,94,95,96,96,97,98,98,99,99,100,101,101,102,102,103,103,104,104,105,105,106,106,107,107,108,108,109,109,110,110,111,111,112,112,112,113,113,114,114,115,115,116,116,117,117,118,118,119,119,120,120,120,121,121,122,122,123,123,123,124,124,125,125,125,126,126,127,127,127,128,128,129,129,130,130,130,131,131,132,132,132,133,133,134,134,135,135,135,136,136,137,137,137,138,138,139,139,139,140,140,141,141,141,142,142,143,143,143,144,144,145,145,146,146,146,147,147,148,148,148,149,149,150,150,150,151,151,152,152,152,153,153,154,154,155,155,155,156,156,157,157,158,158,159,159,160,160,161,161,161,162,162,163,163,164,164,165,165,166,166,166,167,167,168,168,169,169,170,170,171,171,172,173,173,174,175,175,176,177,178,178,179,180,180,181,182,182,183,184,184,185,186,186,187,189,191,193,195,198,200,202,255],d=e.data,u=e.width,h=e.height,p=new Array((u+1>>1)*h),f=0,m=0,v=0;for(a=0;a<h;a++)for(s=0;s<u;)i=1&s,r=(n=c[255*Math.pow(((.29891*d[m++]+.58661*d[m++]+.11448*d[m++])*d[m]/255+255-d[m++])/255,1/t)|0])/17|0,l[3&a][3&s]<n%17&&r++,f|=r<<(1-i<<2),s++,1!=i&&s!=u||(p[v++]=o(f),f=0);return p.join("")}function escapeMarkup(e){var t=/[<>&'"\t\n\r]/g;return t.test(e)&&(e=e.replace(t,function(e){var t="";switch(e){case"<":t="&lt;";break;case">":t="&gt;";break;case"&":t="&amp;";break;case"'":t="&apos;";break;case'"':t="&quot;";break;case"\t":t="&#9;";break;case"\n":t="&#10;";break;case"\r":t="&#13;"}return t})),e}function escapeControl(e){var t=/[\\\x00-\x1f\x7f-\xff]/g;return t.test(e)&&(e=e.replace(t,function(e){return"\\"==e?"\\\\":"\\x"+("0"+e.charCodeAt(0).toString(16)).slice(-2)})),e}OtherPeripheral.prototype={setConnectionObject:function(e){this.connectionObj=e},send:function(e,t){var i={};for(var n in t)i[n]=t[n];i.type=e;var r=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),s=-1;try{this.connectionObj.emit(r),s=r.sequence}catch(a){}return s},client_onreceive:function(e){try{var t=e;delete t.type,this.onreceive(e.type,t)}catch(i){}},callEvent:function(e,t){var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),n=-1;try{this.connectionObj.emit(i),n=i.sequence}catch(r){}return n}},Keyboard.prototype={setConnectionObject:function(e){this.connectionObj=e},client_onkeypress:function(e){try{if(null==this.onkeypress)return;this.onkeypress(e)}catch(t){}},client_onstring:function(e){try{if(null==this.onstring)return;this.onstring(e)}catch(t){}},setPrefix:function(e){var t={type:"setprefix"};if("object"==typeof e){if(0==e.length)return-1;t.keycodes=e}else{if(null==e||""==e)return-1;t.keycodes=[e]}var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),n=-1;try{this.connectionObj.emit(i),n=i.sequence}catch(r){}return n},callEvent:function(e,t){var i=t;i.type=e;var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(s){}return r}},MSR.prototype={setConnectionObject:function(e){this.connectionObj=e},client_ondata:function(e){try{if(null==this.ondata)return;this.ondata(e)}catch(t){}},callEvent:function(e,t){var i=t;i.type=e;var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(s){}return r}},ePOSBuilder.prototype.addText=function(e){return this.message+="<text>"+escapeMarkup(e)+"</text>",this},ePOSBuilder.prototype.addTextLang=function(e){return this.message+='<text lang="'+e+'"/>',this},ePOSBuilder.prototype.addTextAlign=function(e){var t="";return t+=getEnumAttr("align",e,regexAlign),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextRotate=function(e){var t="";return t+=getBoolAttr("rotate",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextLineSpace=function(e){var t="";return t+=getUByteAttr("linespc",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextFont=function(e){var t="";return t+=getEnumAttr("font",e,regexFont),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextSmooth=function(e){var t="";return t+=getBoolAttr("smooth",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextDouble=function(e,t){var i="";return e!==undefined&&(i+=getBoolAttr("dw",e)),t!==undefined&&(i+=getBoolAttr("dh",t)),this.message+="<text"+i+"/>",this},ePOSBuilder.prototype.addTextSize=function(e,t){var i="";return e!==undefined&&(i+=getIntAttr("width",e,1,8)),t!==undefined&&(i+=getIntAttr("height",t,1,8)),this.message+="<text"+i+"/>",this},ePOSBuilder.prototype.addTextStyle=function(e,t,i,n){var r="";return e!==undefined&&(r+=getBoolAttr("reverse",e)),t!==undefined&&(r+=getBoolAttr("ul",t)),i!==undefined&&(r+=getBoolAttr("em",i)),n!==undefined&&(r+=getEnumAttr("color",n,regexColor)),this.message+="<text"+r+"/>",this},ePOSBuilder.prototype.addTextPosition=function(e){var t="";return t+=getUShortAttr("x",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addTextVPosition=function(e){var t="";return t+=getUShortAttr("y",e),this.message+="<text"+t+"/>",this},ePOSBuilder.prototype.addFeedUnit=function(e){var t="";return t+=getUByteAttr("unit",e),this.message+="<feed"+t+"/>",this},ePOSBuilder.prototype.addFeedLine=function(e){var t="";return t+=getUByteAttr("line",e),this.message+="<feed"+t+"/>",this},ePOSBuilder.prototype.addFeed=function(){return this.message+="<feed/>",this},ePOSBuilder.prototype.addFeedPosition=function(e){var t="";return t+=getEnumAttr("pos",e,regexFeed),this.message+="<feed"+t+"/>",this},ePOSBuilder.prototype.addImage=function(e,t,i,n,r,s,a){var o,l,c="",d=this.halftone,u=this.brightness;if(getUShortAttr("x",t),getUShortAttr("y",i),c+=getUShortAttr("width",n),c+=getUShortAttr("height",r),s!==undefined&&(c+=getEnumAttr("color",s,regexColor)),a!==undefined&&(c+=getEnumAttr("mode",a,regexMode)),isNaN(d)||d<0||d>2)throw new Error('Property "halftone" is invalid');if(isNaN(u)||u<.1||u>10)throw new Error('Property "brightness" is invalid');return o=e.getImageData(t,i,n,r),l=a==this.MODE_GRAY16?toGrayImage(o,u):toMonoImage(o,d,u),this.message+="<image"+c+">"+toBase64Binary(l)+"</image>",this},ePOSBuilder.prototype.addLogo=function(e,t){var i="";return i+=getUByteAttr("key1",e),i+=getUByteAttr("key2",t),this.message+="<logo"+i+"/>",this},ePOSBuilder.prototype.addBarcode=function(e,t,i,n,r,s){var a="";return a+=getEnumAttr("type",t,regexBarcode),i!==undefined&&(a+=getEnumAttr("hri",i,regexHri)),n!==undefined&&(a+=getEnumAttr("font",n,regexFont)),r!==undefined&&(a+=getUByteAttr("width",r)),s!==undefined&&(a+=getUByteAttr("height",s)),this.message+="<barcode"+a+">"+escapeControl(escapeMarkup(e))+"</barcode>",this},ePOSBuilder.prototype.addSymbol=function(e,t,i,n,r,s){var a="";return a+=getEnumAttr("type",t,regexSymbol),i!==undefined&&(a+=getEnumIntAttr("level",i,regexLevel,0,255)),n!==undefined&&(a+=getUByteAttr("width",n)),r!==undefined&&(a+=getUByteAttr("height",r)),s!==undefined&&(a+=getUShortAttr("size",s)),this.message+="<symbol"+a+">"+escapeControl(escapeMarkup(e))+"</symbol>",this},ePOSBuilder.prototype.addHLine=function(e,t,i){var n="";return n+=getUShortAttr("x1",e),n+=getUShortAttr("x2",t),i!==undefined&&(n+=getEnumAttr("style",i,regexLine)),this.message+="<hline"+n+"/>",this},ePOSBuilder.prototype.addVLineBegin=function(e,t){var i="";return i+=getUShortAttr("x",e),t!==undefined&&(i+=getEnumAttr("style",t,regexLine)),this.message+="<vline-begin"+i+"/>",this},ePOSBuilder.prototype.addVLineEnd=function(e,t){var i="";return i+=getUShortAttr("x",e),t!==undefined&&(i+=getEnumAttr("style",t,regexLine)),this.message+="<vline-end"+i+"/>",this},ePOSBuilder.prototype.addPageBegin=function(){return this.message+="<page>",this},ePOSBuilder.prototype.addPageEnd=function(){return this.message+="</page>",this},ePOSBuilder.prototype.addPageArea=function(e,t,i,n){var r="";return r+=getUShortAttr("x",e),r+=getUShortAttr("y",t),r+=getUShortAttr("width",i),r+=getUShortAttr("height",n),this.message+="<area"+r+"/>",this},ePOSBuilder.prototype.addPageDirection=function(e){var t="";return t+=getEnumAttr("dir",e,regexDirection),this.message+="<direction"+t+"/>",this},ePOSBuilder.prototype.addPagePosition=function(e,t){var i="";return i+=getUShortAttr("x",e),i+=getUShortAttr("y",t),this.message+="<position"+i+"/>",this},ePOSBuilder.prototype.addPageLine=function(e,t,i,n,r){var s="";return s+=getUShortAttr("x1",e),s+=getUShortAttr("y1",t),s+=getUShortAttr("x2",i),s+=getUShortAttr("y2",n),r!==undefined&&(s+=getEnumAttr("style",r,regexLine)),this.message+="<line"+s+"/>",this},ePOSBuilder.prototype.addPageRectangle=function(e,t,i,n,r){var s="";return s+=getUShortAttr("x1",e),s+=getUShortAttr("y1",t),s+=getUShortAttr("x2",i),s+=getUShortAttr("y2",n),r!==undefined&&(s+=getEnumAttr("style",r,regexLine)),this.message+="<rectangle"+s+"/>",this},ePOSBuilder.prototype.addRotateBegin=function(){return this.message+="<rotate-begin/>",this},ePOSBuilder.prototype.addRotateEnd=function(){return this.message+="<rotate-end/>",this},ePOSBuilder.prototype.addCut=function(e){var t="";return e!==undefined&&(t+=getEnumAttr("type",e,regexCut)),this.message+="<cut"+t+"/>",this},ePOSBuilder.prototype.addPulse=function(e,t){var i="";return e!==undefined&&(i+=getEnumAttr("drawer",e,regexDrawer)),t!==undefined&&(i+=getEnumAttr("time",t,regexPulse)),this.message+="<pulse"+i+"/>",this},ePOSBuilder.prototype.addSound=function(e,t,i){var n="";return e!==undefined&&(n+=getEnumAttr("pattern",e,regexPattern)),t!==undefined&&(n+=getUByteAttr("repeat",t)),i!==undefined&&(n+=getUShortAttr("cycle",i)),this.message+="<sound"+n+"/>",this},ePOSBuilder.prototype.addLayout=function(e,t,i,n,r,s,a){var o="";return o+=getEnumAttr("type",e,regexLayout),t!==undefined&&(o+=getUShortAttr("width",t)),i!==undefined&&(o+=getUShortAttr("height",i)),n!==undefined&&(o+=getShortAttr("margin-top",n)),r!==undefined&&(o+=getShortAttr("margin-bottom",r)),s!==undefined&&(o+=getShortAttr("offset-cut",s)),a!==undefined&&(o+=getShortAttr("offset-label",a)),this.message+="<layout"+o+"/>",this},ePOSBuilder.prototype.addRecovery=function(){return this.message+="<recovery/>",this},ePOSBuilder.prototype.addReset=function(){return this.message+="<reset/>",this},ePOSBuilder.prototype.addCommand=function(e){return this.message+="<command>"+toHexBinary(e)+"</command>",this},ePOSBuilder.prototype.toString=function(){var e="";return this.force&&(e+=getBoolAttr("force",!0)),'<epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"'+e+">"+this.message+"</epos-print>"};var regexFont=/^(font_[a-e]|special_[ab])$/,regexAlign=/^(left|center|right)$/,regexColor=/^(none|color_[1-4])$/,regexFeed=/^(peeling|cutting|current_tof|next_tof)$/,regexMode=/^(mono|gray16)$/,regexBarcode=/^(upc_[ae]|[ej]an13|[ej]an8|code(39|93|128)|itf|codabar|gs1_128|gs1_databar_(omnidirectional|truncated|limited|expanded))$/,regexHri=/^(none|above|below|both)$/,regexSymbol=/^(pdf417_(standard|truncated)|qrcode_(model_[12]|micro)|maxicode_mode_[2-6]|gs1_databar_(stacked(_omnidirectional)?|expanded_stacked)|azteccode_(fullrange|compact)|datamatrix_(square|rectangle_(8|12|16)))$/,regexLevel=/^(level_[0-8lmqh]|default)$/,regexLine=/^(thin|medium|thick)(_double)?$/,regexDirection=/^(left_to_right|bottom_to_top|right_to_left|top_to_bottom)$/,regexCut=/^(no_feed|feed|reserve)$/,regexDrawer=/^drawer_[12]$/,regexPulse=/^pulse_[1-5]00$/,regexPattern=/^(none|pattern_(10|[0-9a-e])|error|paper_end)$/,regexLayout=/^(receipt|label)(_bm)?$/;function getEnumAttr(e,t,i){if(!i.test(t))throw new Error('Parameter "'+e+'" is invalid');return" "+e+'="'+t+'"'}function getBoolAttr(e,t){return" "+e+'="'+!!t+'"'}function getIntAttr(e,t,i,n){if(isNaN(t)||t<i||t>n)throw new Error('Parameter "'+e+'" is invalid');return" "+e+'="'+t+'"'}function getUByteAttr(e,t){return getIntAttr(e,t,0,255)}function getUShortAttr(e,t){return getIntAttr(e,t,0,65535)}function getShortAttr(e,t){return getIntAttr(e,t,-32768,32767)}function getEnumIntAttr(e,t,i,n,r){if(!i.test(t)&&(isNaN(t)||t<n||t>r))throw new Error('Parameter "'+e+'" is invalid');return" "+e+'="'+t+'"'}function ePOSPrint(e){this.address=e,this.enabled=!1,this.interval=3e3,this.timeout=3e5,this.status=0,this.battery=0,this.drawerOpenLevel=0,this.onreceive=null,this.onerror=null,this.onstatuschange=null,this.ononline=null,this.onoffline=null,this.onpoweroff=null,this.oncoverok=null,this.oncoveropen=null,this.onpaperok=null,this.onpaperend=null,this.onpapernearend=null,this.ondrawerclosed=null,this.ondraweropen=null,this.onbatterylow=null,this.onbatteryok=null,this.onbatterystatuschange=null,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_BATTERY_OFFLINE=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_RECEIPT_END=524288,this.ASB_BUZZER=16777216,this.ASB_WAIT_REMOVE_LABEL=16777216,this.ASB_NO_LABEL=67108864,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.DRAWER_OPEN_LEVEL_LOW=0,this.DRAWER_OPEN_LEVEL_HIGH=1}function fireReceiveEvent(e,t,i,n,r,s){"EX_ENPC_TIMEOUT"==i&&(i="ERROR_DEVICE_BUSY"),e.onreceive&&e.onreceive({success:t,code:i,status:n,battery:r,printjobid:s})}function fireStatusEvent(e,t,i){var n,r;0!=t&&t!=e.ASB_NO_RESPONSE||(t=e.status|e.ASB_NO_RESPONSE),n=0==e.status?-1:e.status^t,r=0==e.status?-1:e.battery^i,e.status=t,e.battery=i,n&&e.onstatuschange&&e.onstatuschange(t),r&&e.onbatterystatuschange&&e.onbatterystatuschange(i),n&(e.ASB_NO_RESPONSE|e.ASB_OFF_LINE)&&(t&e.ASB_NO_RESPONSE?e.onpoweroff&&e.onpoweroff():t&e.ASB_OFF_LINE?e.onoffline&&e.onoffline():e.ononline&&e.ononline()),n&e.ASB_COVER_OPEN&&(t&e.ASB_NO_RESPONSE||(t&e.ASB_COVER_OPEN?e.oncoveropen&&e.oncoveropen():e.oncoverok&&e.oncoverok())),n&(e.ASB_RECEIPT_END|e.ASB_RECEIPT_NEAR_END)&&(t&e.ASB_NO_RESPONSE||(t&e.ASB_RECEIPT_END?e.onpaperend&&e.onpaperend():t&e.ASB_RECEIPT_NEAR_END?e.onpapernearend&&e.onpapernearend():e.onpaperok&&e.onpaperok())),n&e.ASB_DRAWER_KICK&&(t&e.ASB_NO_RESPONSE||(t&e.ASB_DRAWER_KICK?(e.drawerOpenLevel==e.DRAWER_OPEN_LEVEL_HIGH?e.ondraweropen&&e.ondraweropen():e.ondrawerclosed&&e.ondrawerclosed(),e.onbatterylow&&e.onbatterylow()):(e.drawerOpenLevel==e.DRAWER_OPEN_LEVEL_HIGH?e.ondrawerclosed&&e.ondrawerclosed():e.ondraweropen&&e.ondraweropen(),e.onbatteryok&&e.onbatteryok())))}function fireErrorEvent(e,t,i){e.onerror&&e.onerror({status:t,responseText:i})}function updateStatus(e){var t=e.interval;e.enabled&&((isNaN(t)||t<1e3)&&(t=3e3),e.intervalid=setTimeout(function(){delete e.intervalid,e.enabled&&e.send()},t)),delete e.intervalxhr}function CanvasPrint(e){this.address=e,this.mode="mono",this.halftone=0,this.brightness=1,this.align="left",this.color="color_1",this.paper="receipt",this.feed="current_tof",this.cut=!1,this.layout=null,this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2,this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.PAPER_RECEIPT="receipt",this.PAPER_RECEIPT_BM="receipt_bm",this.PAPER_LABEL="label",this.PAPER_LABEL_BM="label_bm",this.connectionObj=null}function POSKeyboard(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function Printer(e,t,i){this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.timeout=1e4}function HybridPrinter(e,t,i){this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.connectionObj=null,this.ReceiptPrinter,this.SlipPrinter,this.EndorsePrinter,this.MICRReader,this.force=!1,this.onstatuschange,this.ononline,this.onoffline,this.onpoweroff,this.oncoveropen,this.onpaperok,this.onpapernearend,this.onpaperend,this.ondrawerclosed,this.ondraweropen,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_RECEIPT_END=524288,this.ASB_TOF_NOPAPER=2097152,this.ASB_BOF_NOPAPER=4194304,this.ASB_SLIP_NO_SELECT=16777216,this.ASB_SLIP_IMPOSSIBLE_PRINT=33554432,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.init(e)}function ReceiptPrinter(e){this.parent=e,this.methodName="",this.deviceID=this.parent.deviceID,this.ePosDev=this.parent.ePosDev,this.connectionObj=null,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="DeviceNotFound",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="EPTR_COVER_OPEN",this.ERROR_TIMEOUT="EX_TIMEOUT",this.ERROR_AUTOMATICAL="EPTR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="EPTR_UNRECOVERABLE",this.ERROR_BADPORT="EX_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="SchemaError",this.EPTR_PRINT_SYSTEM_ERROR="PrintSystemError"}function SlipPrinter(e){this.parent=e,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR"}function EndorsePrinter(e){this.parent=e,this.mode40cpl=!1,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR"}function MICRReader(e){this.parent=e,this.timeout=6e4,this.FONT_E13B="MICR_E13B",this.FONT_CMC7="MICR_CMC7",this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EMICR_ILLEGAL_LENGTH="EMICR_ILLEGAL_LENGTH",this.EMICR_NO_MICR="EMICR_NO_MICR",this.EMICR_RECOGNITION="EMICR_RECOGNITION",this.EMICR_READ="EMICR_READ",this.EMICR_NOISE_DETECTED="EMICR_NOISE_DETECTED",this.EMICR_COVER_OPENED="EMICR_COVER_OPENED",this.EMICR_PAPER_JAM="EMICR_PAPER_JAM"}function HybridPrinter2(e,t,i){this.deviceID=e,this.isCrypto=t,this.ePosDev=i,this.connectionObj=null,this.ReceiptPrinter=null,this.SlipPrinter2=null,this.ValidationPrinter=null,this.EndorsePrinter2=null,this.MICRReader2=null,this.currentPrinter=null,this.isMicrMode=!1,this.FONT_A="font_a",this.FONT_B="font_b",this.FONT_C="font_c",this.FONT_D="font_d",this.FONT_E="font_e",this.FONT_SPECIAL_A="special_a",this.FONT_SPECIAL_B="special_b",this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.BARCODE_UPC_A="upc_a",this.BARCODE_UPC_E="upc_e",this.BARCODE_EAN13="ean13",this.BARCODE_JAN13="jan13",this.BARCODE_EAN8="ean8",this.BARCODE_JAN8="jan8",this.BARCODE_CODE39="code39",this.BARCODE_ITF="itf",this.BARCODE_CODABAR="codabar",this.BARCODE_CODE93="code93",this.BARCODE_CODE128="code128",this.BARCODE_GS1_128="gs1_128",this.BARCODE_GS1_DATABAR_OMNIDIRECTIONAL="gs1_databar_omnidirectional",this.BARCODE_GS1_DATABAR_TRUNCATED="gs1_databar_truncated",this.BARCODE_GS1_DATABAR_LIMITED="gs1_databar_limited",this.BARCODE_GS1_DATABAR_EXPANDED="gs1_databar_expanded",this.HRI_NONE="none",this.HRI_ABOVE="above",this.HRI_BELOW="below",this.HRI_BOTH="both",this.SYMBOL_PDF417_STANDARD="pdf417_standard",this.SYMBOL_PDF417_TRUNCATED="pdf417_truncated",this.SYMBOL_QRCODE_MODEL_1="qrcode_model_1",this.SYMBOL_QRCODE_MODEL_2="qrcode_model_2",this.SYMBOL_QRCODE_MICRO="qrcode_micro",this.SYMBOL_MAXICODE_MODE_2="maxicode_mode_2",this.SYMBOL_MAXICODE_MODE_3="maxicode_mode_3",this.SYMBOL_MAXICODE_MODE_4="maxicode_mode_4",this.SYMBOL_MAXICODE_MODE_5="maxicode_mode_5",this.SYMBOL_MAXICODE_MODE_6="maxicode_mode_6",this.SYMBOL_GS1_DATABAR_STACKED="gs1_databar_stacked",this.SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL="gs1_databar_stacked_omnidirectional",this.SYMBOL_GS1_DATABAR_EXPANDED_STACKED="gs1_databar_expanded_stacked",this.SYMBOL_AZTECCODE_FULLRANGE="azteccode_fullrange",this.SYMBOL_AZTECCODE_COMPACT="azteccode_compact",this.SYMBOL_DATAMATRIX_SQUARE="datamatrix_square",this.SYMBOL_DATAMATRIX_RECTANGLE_8="datamatrix_rectangle_8",this.SYMBOL_DATAMATRIX_RECTANGLE_12="datamatrix_rectangle_12",this.SYMBOL_DATAMATRIX_RECTANGLE_16="datamatrix_rectangle_16",this.LEVEL_0="level_0",this.LEVEL_1="level_1",this.LEVEL_2="level_2",this.LEVEL_3="level_3",this.LEVEL_4="level_4",this.LEVEL_5="level_5",this.LEVEL_6="level_6",this.LEVEL_7="level_7",this.LEVEL_8="level_8",this.LEVEL_L="level_l",this.LEVEL_M="level_m",this.LEVEL_Q="level_q",this.LEVEL_H="level_h",this.LEVEL_DEFAULT="default",this.LINE_THIN="thin",this.LINE_MEDIUM="medium",this.LINE_THICK="thick",this.LINE_THIN_DOUBLE="thin_double",this.LINE_MEDIUM_DOUBLE="medium_double",this.LINE_THICK_DOUBLE="thick_double",this.DIRECTION_LEFT_TO_RIGHT="left_to_right",this.DIRECTION_BOTTOM_TO_TOP="bottom_to_top",this.DIRECTION_RIGHT_TO_LEFT="right_to_left",this.DIRECTION_TOP_TO_BOTTOM="top_to_bottom",this.CUT_NO_FEED="no_feed",this.CUT_FEED="feed",this.CUT_RESERVE="reserve",this.DRAWER_1="drawer_1",this.DRAWER_2="drawer_2",this.PULSE_100="pulse_100",this.PULSE_200="pulse_200",this.PULSE_300="pulse_300",this.PULSE_400="pulse_400",this.PULSE_500="pulse_500",this.PATTERN_NONE="none",this.PATTERN_0="pattern_0",this.PATTERN_1="pattern_1",this.PATTERN_2="pattern_2",this.PATTERN_3="pattern_3",this.PATTERN_4="pattern_4",this.PATTERN_5="pattern_5",this.PATTERN_6="pattern_6",this.PATTERN_7="pattern_7",this.PATTERN_8="pattern_8",this.PATTERN_9="pattern_9",this.PATTERN_10="pattern_10",this.PATTERN_A="pattern_a",this.PATTERN_B="pattern_b",this.PATTERN_C="pattern_c",this.PATTERN_D="pattern_d",this.PATTERN_E="pattern_e",this.PATTERN_ERROR="error",this.PATTERN_PAPER_END="paper_end",this.LAYOUT_RECEIPT="receipt",this.LAYOUT_RECEIPT_BM="receipt_bm",this.LAYOUT_LABEL="label",this.LAYOUT_LABEL_BM="label_bm",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_INSERTION_WAIT_PAPER=65536,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_REMOVAL_WAIT_PAPER=262144,this.ASB_RECEIPT_END=524288,this.ASB_TOF_NOPAPER=2097152,this.ASB_BOF_NOPAPER=4194304,this.ASB_SLIP_NO_SELECT=16777216,this.ASB_SLIP_IMPOSSIBLE_PRINT=33554432,this.ASB_EJD_NOPAPER=1073741824,this.ASB_VALIDATION_NO_SELECT=67108864,this.ASB_VALIDATION_IMPOSSIBLE_PRINT=134217728,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.DRAWER_OPEN_LEVEL_LOW=0,this.DRAWER_OPEN_LEVEL_HIGH=1,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_CANCEL_FAILED="ERROR_CANCEL_FAILED",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_AUTOMATICAL="EPTR_AUTOMATICAL",this.EPTR_COVER_OPEN="EPTR_COVER_OPEN",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_UNRECOVERABLE="EPTR_UNRECOVERABLE",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR",this.EPTR_PAPER_PULLED_OUT="EPTR_PAPER_PULLED_OUT",this.EMICR_ILLEGAL_LENGTH="EMICR_ILLEGAL_LENGTH",this.EMICR_NO_MICR="EMICR_NO_MICR",this.EMICR_RECOGNITION="EMICR_RECOGNITION",this.EMICR_READ="EMICR_READ",this.EMICR_NOISE_DETECTED="EMICR_NOISE_DETECTED",this.EMICR_COVER_OPENED="EMICR_COVER_OPENED",this.EMICR_PAPER_JAM="EMICR_PAPER_JAM",this.EMICR_PAPER_PULLED_OUT="EMICR_PAPER_PULLED_OUT",this.DeviceNotFound="DeviceNotFound",this.EX_TIMEOUT="EX_TIMEOUT",this.EX_BADPORT="EX_BADPORT",this.SchemaError="SchemaError",this.PrintSystemError="PrintSystemError",this.PAPERTYPE_RECEIPT=0,this.PAPERTYPE_SLIP=1,this.PAPERTYPE_ENDORSE=2,this.PAPERTYPE_VALIDATION=3,this.FONT_E13B="MICR_E13B",this.FONT_CMC7="MICR_CMC7",this.halftone=this.HALFTONE_DITHER,this.brightness=1,this.force=!1,this.drawerOpenLevel=this.DRAWER_OPEN_LEVEL_LOW,this.paperType=this.PAPERTYPE_RECEIPT,this.interval=3e3,this.waitTime=500,this.enable40cplMode=!0,this.onstatuschange=null,this.ononline=null,this.onoffline=null,this.onpoweroff=null,this.oncoveropen=null,this.onpaperok=null,this.onpapernearend=null,this.onpaperend=null,this.ondrawerclosed=null,this.ondraweropen=null,this.init(e)}function SlipPrinter2(e){this.parent=e}function EndorsePrinter2(e){this.parent=e,this.mode40cpl=!1}function MICRReader2(e){this.parent=e}function ValidationPrinter(e){this.parent=e}function Scanner(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function SimpleSerial(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null}function GermanyFiscalElement(e,t){this.deviceID=e,this.isCrypto=t,this.connectionObj=null,this.ongfereceive=null,this.onerror=null}function Ofsc(){this.SERVICE_ID="OFSC",this.callback=null,this.connectionObj=null}function CookieIO(){this.KEY="EPSON_EPOSDEVICE_CLIENTID",this.EXPIRES_MINUTES=5}function DeviceObjElement(e,t,i,n){this.deviceId=e,this.isCrypto=t,this.deviceObject=i,this.callback=n}function DeviceObjElementMap(){this.elementList=new Array}function ePOSDevice(){this.DEVICE_TYPE_SCANNER="type_scanner",this.DEVICE_TYPE_KEYBOARD="type_keyboard",this.DEVICE_TYPE_POSKEYBOARD="type_poskeyboard",this.DEVICE_TYPE_MSR="type_msr",this.DEVICE_TYPE_CAT="type_cat",this.DEVICE_TYPE_CASH_CHANGER="type_cash_changer",this.DEVICE_TYPE_PRINTER="type_printer",this.DEVICE_TYPE_DISPLAY="type_display",this.DEVICE_TYPE_SIMPLE_SERIAL="type_simple_serial",this.DEVICE_TYPE_HYBRID_PRINTER="type_hybrid_printer",this.DEVICE_TYPE_HYBRID_PRINTER2="type_hybrid_printer2",this.DEVICE_TYPE_DT="type_dt",this.DEVICE_TYPE_OTHER_PERIPHERAL="type_other_peripheral",this.DEVICE_TYPE_GFE="type_storage",this.RESULT_OK="OK",this.ERROR_SYSTEM="SYSTEM_ERROR",this.ERROR_DEVICE_IN_USE="DEVICE_IN_USE",this.ERROR_DEVICE_OPEN="DEVICE_OPEN_ERROR",this.ERROR_DEVICE_CLOSE="DEVICE_CLOSE_ERROR",this.ERROR_DEVICE_NOT_OPEN="DEVICE_NOT_OPEN",this.ERROR_DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",this.ERROR_PARAMETER="ERROR_PARAMETER",this.IFPORT_EPOSDEVICE=8008,this.IFPORT_EPOSDEVICE_S=8043,this.CONNECT_TIMEOUT=15e3,this.RECONNECT_TIMEOUT=3e3,this.MAX_RECONNECT_RETRY=5,this.socket=null,this.connectionId=null,this.reconnectTimerId=null,this.reconnectTryCount=0,this.admin="",this.location="",this.recievedDataId=0,this.connectStartTime=0,this.waitRetryConnectId=0,this.conectionObj=new Connection,this.commBoxManager=new CommBoxManager,this.commBoxManager.setConnectionObject(this.conectionObj),this.devObjSelector=new DeviceObjectSelector,this.devObjSelector.setConnectionObject(this.conectionObj),this.devObjElmMap=new DeviceObjElementMap,this.ofsc=new Ofsc,this.ofsc.setConnectionObject(this.conectionObj),this.cookieIo=new CookieIO,this.gbox=new SocketGarbageBox,this.eposprint=!1;var e=this;window.onbeforeunload=function(){e.disconnect()},window.onpagehide=function(){e.disconnect()}}function SocketGarbageBox(){this.box=new Array}function Connection(){this.OK="OK",this.SSL_CONNECT_OK="SSL_CONNECT_OK",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_PARAMETER="ERROR_PARAMETER",this.ERROR_SYSTEM="SYSTEM_ERROR",this.socket_p=null,this.address_p="",this.protocol_p="",this.port_p="",this.callback_p=null,this.usableIF_p=0,this.ws_status_p=2,this.dev_status_p=2,this.IF_EPOSDEVICE=1,this.IF_EPOSPRINT=2,this.IF_EPOSDISPLAY=4,this.IF_ALL=7,this.ACCESS_OK="OK",this.ACCESS_ERROR="ERROR",this.ACCESS_TIMEOUT="TIMEOUT",this.ACCESS_NONE="NONE",this.CONNECT=1,this.DISCONNECT=2,this.RECONNECTING=4}function ePosCrypto(){this.pubkey_c="",this.secretKey=""}function ePosDeviceMessage(){this.REQUEST={CONNECT:"connect",PUBKEY:"pubkey",ADMININFO:"admin_info",RECONNECT:"reconnect",DISCONNECT:"disconnect",OPENDEVICE:"open_device",CLOSEDEVICE:"close_device",DEVICEDATA:"device_data",SERVICEDATA:"service_data",ERROR:"error",OPENCOMMBOX:"open_commbox",CLOSECOMMBOX:"close_commbox",COMMDATA:"commbox_data"},this.request=null,this.sequence=0,this.deviceId="",this.serviceId="",this.data={},this.isCrypto="0",this.code="",this.data_id=0}ePOSPrint.prototype=new ePOSBuilder,ePOSPrint.prototype.constructor=ePOSPrint,ePOSPrint.prototype.open=function(){this.enabled||(this.enabled=!0,this.status=0,this.battery=0,this.send())},ePOSPrint.prototype.close=function(){this.enabled=!1,this.intervalid&&(clearTimeout(this.intervalid),delete this.intervalid),this.intervalxhr&&(this.intervalxhr.abort(),delete this.intervalxhr)},ePOSPrint.prototype.getPrintJobStatus=function(e){this.send(e)},ePOSPrint.prototype.send=function(e,t){var i,n,r,s,a,o,l,c,d=arguments.length,u=this,h=u.address;if(/^<epos/.test(e)||(d<2?(t=e,e=(new ePOSBuilder).toString()):(h=e,e=t,t=arguments[2])),i='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',t&&(i+='<s:Header><parameter xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"><printjobid>'+t+"</printjobid></parameter></s:Header>"),i+="<s:Body>"+e+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(n=new XMLHttpRequest))&&window.XDomainRequest?((n=new XDomainRequest).open("POST",h,!0),n.onload=function(){s=n.responseText,/response/.test(s)?(a=/success\s*=\s*"\s*(1|true)\s*"/.test(s),o=s.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",l=s.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,c=s.match(/battery\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,t=s.match(/<printjobid>\s*(\S*)\s*<\/printjobid>/)?RegExp.$1:"",d>0?fireReceiveEvent(u,a,o,l,c,t):fireStatusEvent(u,l,c)):d>0?fireErrorEvent(u,0,n.responseText):fireStatusEvent(u,u.ASB_NO_RESPONSE,0),d<1&&updateStatus(u)},n.onerror=function(){d>0?fireErrorEvent(u,0,n.responseText):(fireStatusEvent(u,u.ASB_NO_RESPONSE,0),updateStatus(u))},n.onprogress=function(){},n.ontimeout=n.onerror,n.timeout=u.timeout,n.send(i)):(n.open("POST",h,!0),n.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),n.setRequestHeader("SOAPAction",'""'),n.onreadystatechange=function(){4==n.readyState&&(clearTimeout(r),200==n.status&&n.responseXML&&(s=n.responseXML.getElementsByTagName("response")).length>0?(a=/^(1|true)$/.test(s[0].getAttribute("success")),o=s[0].hasAttribute("code")?s[0].getAttribute("code"):"",l=s[0].hasAttribute("status")?parseInt(s[0].getAttribute("status")):0,c=s[0].hasAttribute("battery")?parseInt(s[0].getAttribute("battery")):0,s=n.responseXML.getElementsByTagName("printjobid"),t=s.length>0?s[0].textContent:"",d>0?fireReceiveEvent(u,a,o,l,c,t):fireStatusEvent(u,l,c)):d>0?fireErrorEvent(u,n.status,n.responseText):fireStatusEvent(u,u.ASB_NO_RESPONSE,0),d<1&&updateStatus(u))},r=setTimeout(function(){n.abort()},u.timeout),n.send(i)),d<1&&(u.intervalxhr=n)},CanvasPrint.prototype=new ePOSPrint,CanvasPrint.prototype.constructor=CanvasPrint,CanvasPrint.prototype.setConnectionObject=function(e){this.connectionObj=e},CanvasPrint.prototype.print=function(){var e=arguments.length,t=this.address,i=this.layout,n=this.paper,r=arguments[0],s=this.cut,a=this.mode,o=undefined;switch(e){case 2:o=arguments[1];break;case 4:o=arguments[3];case 3:s=arguments[1],a=arguments[2]}if(void 0===r||null==r)throw new Error("Canvas is not supported");if(!r.getContext)throw new Error("Canvas is not supported");i&&this.addLayout(n,i.width,i.height,i.margin_top,i.margin_bottom,i.offset_cut,i.offset_label),n!=this.PAPER_RECEIPT&&(this.addFeedPosition(this.FEED_CURRENT_TOF),i&&this.addFeedPosition(this.FEED_NEXT_TOF)),this.addTextAlign(this.align),this.addImage(r.getContext("2d"),0,0,r.width,r.height,this.color,a),n!=this.PAPER_RECEIPT?(this.addFeedPosition(this.feed),s&&this.addCut(this.CUT_NO_FEED)):s&&this.addCut(this.CUT_FEED),this.send(t,this.toString(),o)},CanvasPrint.prototype.recover=function(){this.force=!0,this.addRecovery(),this.send(this.address,this.toString())},CanvasPrint.prototype.reset=function(){this.addReset(),this.send(this.address,this.toString())},window.epson||(window.epson={}),window.epson.ePOSBuilder=ePOSBuilder,window.epson.ePOSPrint=ePOSPrint,window.epson.CanvasPrint=CanvasPrint,POSKeyboard.prototype={setConnectionObject:function(e){this.connectionObj=e},client_onkeypress:function(e){try{if(null==this.onkeypress)return;this.onkeypress(e)}catch(t){}},callEvent:function(e,t){var i=t;i.type=e;var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(s){}return r}},Printer.prototype=new CanvasPrint,Printer.prototype.finalize=function(){this.stopMonitor()},Printer.prototype.toString=function(){return ePOSBuilder.prototype.toString.apply(this)},Printer.prototype.addFeedUnit=function(e){try{ePOSBuilder.prototype.addFeedUnit.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addFeedLine=function(e){try{ePOSBuilder.prototype.addFeedLine.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addFeed=function(e){try{ePOSBuilder.prototype.addFeed.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addFeedPosition=function(e){try{ePOSBuilder.prototype.addFeedPosition.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addText=function(e){try{ePOSBuilder.prototype.addText.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextLang=function(e){try{ePOSBuilder.prototype.addTextLang.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextAlign=function(e){try{ePOSBuilder.prototype.addTextAlign.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextRotate=function(e){try{ePOSBuilder.prototype.addTextRotate.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextLineSpace=function(e){try{ePOSBuilder.prototype.addTextLineSpace.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextFont=function(e){try{ePOSBuilder.prototype.addTextFont.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextSmooth=function(e){try{ePOSBuilder.prototype.addTextSmooth.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextDouble=function(e,t){try{ePOSBuilder.prototype.addTextDouble.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addTextSize=function(e,t){try{ePOSBuilder.prototype.addTextSize.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addTextStyle=function(e,t,i,n){try{ePOSBuilder.prototype.addTextStyle.apply(this,arguments)}catch(r){throw r}return this},Printer.prototype.addTextPosition=function(e){try{ePOSBuilder.prototype.addTextPosition.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addTextVPosition=function(e){try{ePOSBuilder.prototype.addTextVPosition.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addImage=function(e,t,i,n,r,s,a){try{ePOSBuilder.prototype.addImage.apply(this,arguments)}catch(o){throw o}return this},Printer.prototype.addLogo=function(e,t){try{ePOSBuilder.prototype.addLogo.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addBarcode=function(e,t,i,n,r,s){try{ePOSBuilder.prototype.addBarcode.apply(this,arguments)}catch(a){throw a}return this},Printer.prototype.addSymbol=function(e,t,i,n,r,s){try{ePOSBuilder.prototype.addSymbol.apply(this,arguments)}catch(a){throw a}return this},Printer.prototype.addCommand=function(e){try{ePOSBuilder.prototype.addCommand.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addHLine=function(e,t,i){try{ePOSBuilder.prototype.addHLine.apply(this,arguments)}catch(n){throw n}return this},Printer.prototype.addVLineBegin=function(e,t){try{ePOSBuilder.prototype.addVLineBegin.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addVLineEnd=function(e,t){try{ePOSBuilder.prototype.addVLineEnd.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addPageBegin=function(){try{ePOSBuilder.prototype.addPageBegin.apply(this)}catch(e){throw e}return this},Printer.prototype.addPageEnd=function(){try{ePOSBuilder.prototype.addPageEnd.apply(this)}catch(e){throw e}return this},Printer.prototype.addPageArea=function(e,t,i,n){try{ePOSBuilder.prototype.addPageArea.apply(this,arguments)}catch(r){throw r}return this},Printer.prototype.addPageDirection=function(e){try{ePOSBuilder.prototype.addPageDirection.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addPagePosition=function(e,t){try{ePOSBuilder.prototype.addPagePosition.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addPageLine=function(e,t,i,n,r){try{ePOSBuilder.prototype.addPageLine.apply(this,arguments)}catch(s){throw s}return this},Printer.prototype.addPageRectangle=function(e,t,i,n,r){try{ePOSBuilder.prototype.addPageRectangle.apply(this,arguments)}catch(s){throw s}return this},Printer.prototype.addRotateBegin=function(){try{ePOSBuilder.prototype.addRotateBegin.apply(this)}catch(e){throw e}return this},Printer.prototype.addRotateEnd=function(){try{ePOSBuilder.prototype.addRotateEnd.apply(this)}catch(e){throw e}return this},Printer.prototype.addCut=function(e){try{ePOSBuilder.prototype.addCut.apply(this,arguments)}catch(t){throw t}return this},Printer.prototype.addPulse=function(e,t){try{ePOSBuilder.prototype.addPulse.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addSound=function(e,t,i){try{ePOSBuilder.prototype.addSound.apply(this,arguments)}catch(n){throw n}return this},Printer.prototype.addLayout=function(e,t,i,n,r,s,a){try{ePOSBuilder.prototype.addLayout.apply(this,arguments)}catch(o){throw o}return this},Printer.prototype.setXmlString=function(e){this.message=e},Printer.prototype.getXmlString=function(){return this.message},Printer.prototype.getPrintJobStatus=function(e){this.setXmlString(""),this.send(e)},Printer.prototype.send=function(e){var t=-1;if(!this.ePosDev.eposprint&&this.connectionObj.isUsableDeviceIF())try{var i={type:"print",timeout:this.timeout,printdata:this.toString()};switch(arguments.length){case 0:i.printdata=this.toString();break;case 1:i.printdata=this.toString(),i.printjobid=e;break;case 2:case 3:i.printdata=arguments[1],i.printjobid=arguments[2]}var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto);try{this.connectionObj.emit(n),n.sequence}catch(f){}this.force=!1,this.setXmlString("")}catch(f){t=-1}else{var r,s,a,o,l,c,d,u,h=this,p=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+this.deviceID+"&timeout="+this.timeout;if(r='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',e&&(r+='<s:Header><parameter xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"><printjobid>'+e+"</printjobid></parameter></s:Header>"),r+="<s:Body>"+this.toString()+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(s=new XMLHttpRequest))&&window.XDomainRequest?((s=new XDomainRequest).open("POST",p,!0),s.onload=function(){o=s.responseText,/response/.test(o)?(l=/success\s*=\s*"\s*(1|true)\s*"/.test(o),c=o.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",d=o.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,u=o.match(/battery\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,e=o.match(/<printjobid>\s*(\S*)\s*<\/printjobid>/)?RegExp.$1:"",h.fireReceiveEvent(l,c,d,u,e,0)):h.fireErrorEvent(0,s.responseText,0)},s.onerror=function(){h.fireErrorEvent(0,s.responseText,0)},s.onprogress=function(){},s.ontimeout=s.onerror,s.timeout=h.timeout,s.send(r)):(s.open("POST",p,!0),s.setRequestHeader("Content-Type","text/xml; charset=utf-8"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),s.setRequestHeader("SOAPAction",'""'),s.onreadystatechange=function(){4==s.readyState&&(clearTimeout(a),200==s.status&&s.responseXML&&(o=s.responseXML.getElementsByTagName("response")).length>0?(l=/^(1|true)$/.test(o[0].getAttribute("success")),c=o[0].hasAttribute("code")?o[0].getAttribute("code"):"",d=o[0].hasAttribute("status")?parseInt(o[0].getAttribute("status")):0,u=o[0].hasAttribute("battery")?parseInt(o[0].getAttribute("battery")):0,o=s.responseXML.getElementsByTagName("printjobid"),e=o.length>0?o[0].textContent:"",h.fireReceiveEvent(l,c,d,u,e,0)):h.fireErrorEvent(s.status,s.responseText,0))},a=setTimeout(function(){s.abort()},this.timeout),s.send(r)),this.setXmlString(""),t=0}return t},Printer.prototype.client_onxmlresult=function(e,t){if(e){var i=e.resultdata,n=/success\s*=\s*"\s*(1|true)\s*"/.test(i);i.match(/code\s*=\s*"\s*(\S*)\s*"/);var r=RegExp.$1;i.match(/status\s*=\s*"\s*(\d+)\s*"/);var s=parseInt(RegExp.$1);i.match(/battery\s*=\s*"\s*(\d+)\s*"/);var a=parseInt(RegExp.$1);this.fireReceiveEvent(n,r,s,a,e.printjobid,t)}else this.fireErrorEvent(0,this.ASB_NO_RESPONSE,t)},Printer.prototype.startMonitor=function(){var e=!1,t=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+this.deviceID+"&timeout=10000";try{this.enabled||(this.address=t,this.enabled=!0,this.status=this.ASB_DRAWER_KICK,this.sendStartMonitorCommand()),e=!0}catch(i){throw i}return e},Printer.prototype.sendStartMonitorCommand=function(){var e=this,t=this.address,i='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>'+(new ePOSBuilder).toString()+"</s:Body></s:Envelope>",n=this;if(window.XDomainRequest){var r=new XDomainRequest;r.open("POST",t,!0),r.onload=function(){var t=r.responseText;if(/response/.test(t)){/success\s*=\s*"\s*(1|true)\s*"/.test(t);t.match(/code\s*=\s*"\s*(\S*)\s*"/);RegExp.$1;t.match(/status\s*=\s*"\s*(\d+)\s*"/);var i=parseInt(RegExp.$1);t.match(/battery\s*=\s*"\s*(\d+)\s*"/);var s=parseInt(RegExp.$1);e.fireStatusEvent(n,i,s)}else e.fireStatusEvent(n,n.ASB_NO_RESPONSE,0);e.updateStatus(n)},r.onerror=function(){e.fireStatusEvent(n,n.ASB_NO_RESPONSE),e.updateStatus(n)},r.onprogress=function(){},r.ontimeout=r.onerror,r.send(i)}else{if(!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");var s=new XMLHttpRequest;s.open("POST",t,!0),s.setRequestHeader("Content-Type","text/xml; charset=utf-8"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),s.setRequestHeader("SOAPAction",'""'),s.onreadystatechange=function(){if(4==s.readyState){if(200==s.status&&s.responseXML){var t=s.responseXML.getElementsByTagName("response");if(t.length>0){/^(1|true)$/.test(t[0].getAttribute("success")),t[0].getAttribute("code");var i=parseInt(t[0].getAttribute("status")),r=t[0].hasAttribute("battery")?parseInt(t[0].getAttribute("battery")):0;e.fireStatusEvent(n,i,r)}else e.fireStatusEvent(n,n.ASB_NO_RESPONSE,0)}else e.fireStatusEvent(n,n.ASB_NO_RESPONSE,0);e.updateStatus(n)}},s.send(i)}},Printer.prototype.stopMonitor=function(){var e=!1;try{this.enabled=!1,this.timeoutid&&(clearTimeout(this.timeoutid),delete this.timeoutid),e=!0}catch(t){throw t}return e},Printer.prototype.fireReceiveEvent=function(e,t,i,n,r,s){delete this.isPrint,"EX_ENPC_TIMEOUT"==t&&(t="ERROR_DEVICE_BUSY"),this.onreceive&&this.onreceive({success:e,code:t,status:i,battery:n,printjobid:r},s)},Printer.prototype.fireErrorEvent=function(e,t,i){this.onerror&&this.onerror({status:e,responseText:t},i),this.ePosDev.cleanup()},Printer.prototype.fireStatusEvent=function(e,t,i){0!=t&&t!=this.ASB_NO_RESPONSE||(t=this.status|this.ASB_NO_RESPONSE);var n=this.status==this.ASB_DRAWER_KICK?-1:this.status^t,r=0==this.status?-1:this.battery^i;this.status=t,this.battery=i,n&&this.onstatuschange&&this.onstatuschange(t),r&&this.onbatterystatuschange&&this.onbatterystatuschange(i),n&(this.ASB_NO_RESPONSE|this.ASB_OFF_LINE)&&(t&this.ASB_NO_RESPONSE?this.onpoweroff&&this.onpoweroff():t&this.ASB_OFF_LINE?this.onoffline&&this.onoffline():this.ononline&&this.ononline()),n&this.ASB_COVER_OPEN&&(t&this.ASB_NO_RESPONSE||(t&this.ASB_COVER_OPEN?this.oncoveropen&&this.oncoveropen():this.oncoverok&&this.oncoverok())),n&(this.ASB_RECEIPT_END|this.ASB_RECEIPT_NEAR_END)&&(t&this.ASB_NO_RESPONSE||(t&this.ASB_RECEIPT_END?this.onpaperend&&this.onpaperend():t&this.ASB_RECEIPT_NEAR_END?this.onpapernearend&&this.onpapernearend():this.onpaperok&&this.onpaperok())),n&this.ASB_DRAWER_KICK&&(t&this.ASB_NO_RESPONSE||(t&this.ASB_DRAWER_KICK?(this.drawerOpenLevel==this.DRAWER_OPEN_LEVEL_HIGH?this.ondraweropen&&this.ondraweropen():this.ondrawerclosed&&this.ondrawerclosed(),this.onbatterylow&&this.onbatterylow()):(this.drawerOpenLevel==this.DRAWER_OPEN_LEVEL_HIGH?this.ondrawerclosed&&this.ondrawerclosed():this.ondraweropen&&this.ondraweropen(),this.onbatteryok&&this.onbatteryok())))},Printer.prototype.updateStatus=function(){var e=this;if(this.enabled){var t=this.interval;(isNaN(t)||t<1e3)&&(t=3e3),this.timeoutid=setTimeout(function(){delete e.timeoutid,e.enabled&&e.sendStartMonitorCommand()},t)}},Printer.prototype.print=function(e,t,i,n){try{CanvasPrint.prototype.print.apply(this,arguments)}catch(r){throw r}},Printer.prototype.reset=function(){try{CanvasPrint.prototype.reset.apply(this,arguments)}catch(e){throw e}},Printer.prototype.recover=function(){try{CanvasPrint.prototype.recover.apply(this,arguments)}catch(e){throw e}},HybridPrinter.prototype={init:function(e){var t=this;t.deviceID=e,t.ReceiptPrinter=new ReceiptPrinter(this),t.SlipPrinter=new SlipPrinter(this),t.EndorsePrinter=new EndorsePrinter(this),t.MICRReader=new MICRReader(this),t.ReceiptPrinter.onstatuschange=function(e){null!=t.onstatuschange&&t.onstatuschange(e)},t.ReceiptPrinter.ononline=function(){null!=t.ononline&&t.ononline()},t.ReceiptPrinter.onoffline=function(){null!=t.onoffline&&t.onoffline()},t.ReceiptPrinter.onpoweroff=function(){null!=t.onpoweroff&&t.onpoweroff()},t.ReceiptPrinter.oncoveropen=function(){null!=t.oncoveropen&&t.oncoveropen()},t.ReceiptPrinter.onpaperok=function(){null!=t.onpaperok&&t.onpaperok()},t.ReceiptPrinter.onpapernearend=function(){null!=t.onpapernearend&&t.onpapernearend()},t.ReceiptPrinter.onpaperend=function(){null!=t.onpaperend&&t.onpaperend()},t.ReceiptPrinter.ondrawerclosed=function(){null!=t.ondrawerclosed&&t.ondrawerclosed()},t.ReceiptPrinter.ondraweropen=function(){null!=t.ondraweropen&&t.ondraweropen()}},setConnectionObject:function(e){this.connectionObj=e,this.ReceiptPrinter.setConnectionObject(this.connectionObj)},lock:function(){return this.send({type:"lock"})},unlock:function(){return this.send({type:"unlock"})},eject:function(){return this.send({type:"eject"})},recover:function(){return this.ReceiptPrinter.recover()},reset:function(){this.ReceiptPrinter.force=this.force;var e=this.ReceiptPrinter.reset();return this.force=!1,e},startMonitor:function(){return this.ReceiptPrinter.startMonitor()},stopMonitor:function(){return this.ReceiptPrinter.stopMonitor()},client_onreceive:function(e,t){switch(e.eventtype){case"slipprint":case"slipcancel":this.SlipPrinter.fireOnReceive(e,t);break;case"endorseprint":case"endorsecancel":this.EndorsePrinter.fireOnReceive(e,t);break;case"micrread":case"micrcleaning":case"micrcancel":this.MICRReader.fireOnReceive(e,t);break;case"print":var i=e;i.eventtype=this.ReceiptPrinter.methodName,this.fireOnReceive(i,t);break;default:this.fireOnReceive(e,t)}},client_onxmlresult:function(e,t){this.ReceiptPrinter.fireOnReceive(e,t)},fireOnReceive:function(e,t){null!=this.onreceive&&null!=e&&this.onreceive({eventtype:e.eventtype,success:e.success,code:e.code,status:e.status},t)},callEvent:function(e,t){var i=t;return i.type=e,this.send(i)},send:function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(n){}return i}},ReceiptPrinter.prototype.setConnectionObject=function(e){this.connectionObj=e},ReceiptPrinter.prototype=new Printer,ReceiptPrinter.prototype.send=function(){return""==this.methodName&&(this.methodName="send"),Printer.prototype.send.apply(this,arguments)},ReceiptPrinter.prototype.print=function(e,t,i){return this.methodName="print",Printer.prototype.print.apply(this,arguments)},ReceiptPrinter.prototype.recover=function(){return this.methodName="recover",Printer.prototype.recover.apply(this,arguments)},ReceiptPrinter.prototype.reset=function(){return this.methodName="reset",Printer.prototype.reset.apply(this,arguments)},ReceiptPrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive){var i=this.methodName,n="false",r="",s=this.ASB_NO_RESPONSE;if(e){var a=e.resultdata;n=/success\s*=\s*"\s*(1|true)\s*"/.test(a),a.match(/code\s*=\s*"\s*(\S*)\s*"/),""==(r=RegExp.$1)&&(r=n?"SUCCESS":"ERROR_DEVICE_NOT_FOUND"),a.match(/status\s*=\s*"\s*(\d+)\s*"/),s=parseInt(RegExp.$1)}"EX_ENPC_TIMEOUT"==r&&(r="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:n,code:r,status:s},t),this.methodName=""}},SlipPrinter.prototype=new ePOSBuilder,SlipPrinter.prototype.timeout=6e4,SlipPrinter.prototype.send=function(){var e=arguments.length<1?this.toString():arguments[1],t={type:"slipprint",timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},SlipPrinter.prototype.setXmlString=function(e){this.message=e},SlipPrinter.prototype.getXmlString=function(){return this.message},SlipPrinter.prototype.cancel=function(){return this.parent.send({type:"slipcancel"})},SlipPrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"slipprint":i="send";break;case"slipcancel":i="cancel"}var n=e.code;"EX_ENPC_TIMEOUT"==n&&(n="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:e.success,code:n,status:e.status},t)}},EndorsePrinter.prototype=new ePOSBuilder,EndorsePrinter.prototype.timeout=6e4,EndorsePrinter.prototype.send=function(){var e=arguments.length<1?this.toString():arguments[1],t={type:"endorseprint",is40cplmode:this.mode40cpl,timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},EndorsePrinter.prototype.setXmlString=function(e){this.message=e},EndorsePrinter.prototype.getXmlString=function(){return this.message},EndorsePrinter.prototype.cancel=function(){return this.parent.send({type:"endorsecancel"})},EndorsePrinter.prototype.enable40cplmode=function(e){this.mode40cpl=e},EndorsePrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"endorseprint":i="send";break;case"endorsecancel":i="cancel"}var n=e.code;"EX_ENPC_TIMEOUT"==n&&(n="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:e.success,code:n,status:e.status},t)}},MICRReader.prototype.read=function(e,t){var i={type:"micrread",ignoreerror:e,font:t,timeout:this.timeout};return this.parent.send(i)},MICRReader.prototype.cleaning=function(){var e={type:"micrcleaning",timeout:this.timeout};return this.parent.send(e)},MICRReader.prototype.cancel=function(){return this.parent.send({type:"micrcancel"})},MICRReader.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"micrread":i="read";break;case"micrcleaning":i="cleaning";break;case"micrcancel":i="cancel"}var n=e.code;"EX_ENPC_TIMEOUT"==n&&(n="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:e.success,code:n,status:e.status,data:e.data},t)}},HybridPrinter2.prototype.init=function(e){this.deviceID=e,this.ReceiptPrinter=new ReceiptPrinter(this),this.SlipPrinter2=new SlipPrinter2(this),this.ValidationPrinter=new ValidationPrinter(this),this.EndorsePrinter2=new EndorsePrinter2(this),this.MICRReader2=new MICRReader2(this),this.currentPrinter=this.ReceiptPrinter,this.ReceiptPrinter.onstatuschange=function(e){null!=this.parent.onstatuschange&&this.parent.onstatuschange(e)},this.ReceiptPrinter.ononline=function(){null!=this.parent.ononline&&this.parent.ononline()},this.ReceiptPrinter.onoffline=function(){null!=this.parent.onoffline&&this.parent.onoffline()},this.ReceiptPrinter.onpoweroff=function(){null!=this.parent.onpoweroff&&this.parent.onpoweroff()},this.ReceiptPrinter.oncoveropen=function(){null!=this.parent.oncoveropen&&this.parent.oncoveropen()},this.ReceiptPrinter.oncoverok=function(){null!=this.parent.oncoverok&&this.parent.oncoverok()},this.ReceiptPrinter.onpaperok=function(){null!=this.parent.onpaperok&&this.parent.onpaperok()},this.ReceiptPrinter.onpapernearend=function(){null!=this.parent.onpapernearend&&this.parent.onpapernearend()},this.ReceiptPrinter.onpaperend=function(){null!=this.parent.onpaperend&&this.parent.onpaperend()},this.ReceiptPrinter.ondrawerclosed=function(){null!=this.parent.ondrawerclosed&&this.parent.ondrawerclosed()},this.ReceiptPrinter.ondraweropen=function(){this.parent.ondraweropen!=undefined&&this.parent.ondraweropen()},this.ReceiptPrinter.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.SlipPrinter2.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.EndorsePrinter2.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.ValidationPrinter.onreceive=function(e,t){this.parent.fireOnReceive(e,t)},this.MICRReader2.onreceive=function(e,t){this.parent.fireOnReceive(e,t)}},HybridPrinter2.prototype.setConnectionObject=function(e){this.connectionObj=e,this.ReceiptPrinter.setConnectionObject(this.connectionObj)},HybridPrinter2.prototype.isValidFunction=function(e,t){var i=!1,n=0;if(0!=t.length)for(n=0;n<t.length;n++)if(e==t[n]){i=!0;break}return i},HybridPrinter2.prototype.addText=function(e){return this.currentPrinter.addText.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextLang=function(e){return this.currentPrinter.addTextLang.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextAlign=function(e){return this.currentPrinter.addTextAlign.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextRotate=function(e){return this.currentPrinter.addTextRotate.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextLineSpace=function(e){return this.currentPrinter.addTextLineSpace.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextFont=function(e){return this.currentPrinter.addTextFont.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextSmooth=function(e){return this.currentPrinter.addTextSmooth.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextDouble=function(e,t){return this.currentPrinter.addTextDouble.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextSize=function(e,t){return this.currentPrinter.addTextSize.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextStyle=function(e,t,i,n){return this.currentPrinter.addTextStyle.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextPosition=function(e){return this.currentPrinter.addTextPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextVPosition=function(e){return this.currentPrinter.addTextVPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedUnit=function(e){return this.currentPrinter.addFeedUnit.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedLine=function(e){return this.currentPrinter.addFeedLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeed=function(){return this.currentPrinter.addFeed.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedPosition=function(e){return this.currentPrinter.addFeedPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addImage=function(e,t,i,n,r,s,a){return this.currentPrinter.halftone=this.halftone,this.currentPrinter.brightness=this.brightness,this.currentPrinter.addImage.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addLogo=function(e,t){return this.currentPrinter.addLogo.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addBarcode=function(e,t,i,n,r,s){return this.currentPrinter.addBarcode.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addSymbol=function(e,t,i,n,r,s){return this.currentPrinter.addSymbol.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addHLine=function(e,t,i){return this.currentPrinter.addHLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addVLineBegin=function(e,t){return this.currentPrinter.addVLineBegin.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addVLineEnd=function(e,t){return this.currentPrinter.addVLineEnd.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageBegin=function(){return this.currentPrinter.addPageBegin.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageEnd=function(){return this.currentPrinter.addPageEnd.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageArea=function(e,t,i,n){return this.currentPrinter.addPageArea.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageDirection=function(e){return this.currentPrinter.addPageDirection.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPagePosition=function(e,t){return this.currentPrinter.addPagePosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageLine=function(e,t,i,n,r){return this.currentPrinter.addPageLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageRectangle=function(e,t,i,n,r){return this.currentPrinter.addPageRectangle.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addCut=function(e){return this.ReceiptPrinter.addCut.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addPulse=function(e,t){return this.currentPrinter.addPulse.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addSound=function(e,t,i){return this.currentPrinter.addSound.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addLayout=function(e,t,i,n,r,s,a){return this.ReceiptPrinter.addLayout.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addRecovery=function(){return this.ReceiptPrinter.addRecovery.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addReset=function(){return this.ReceiptPrinter.addReset.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addCommand=function(e){return this.currentPrinter.addCommand.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.recover=function(){return this.ReceiptPrinter.recover.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.reset=function(){this.ReceiptPrinter.force=this.force;var e=this.ReceiptPrinter.reset.apply(this.ReceiptPrinter,arguments);return this.force=!1,e},HybridPrinter2.prototype.setMessage=function(e){this.currentPrinter.message=e},HybridPrinter2.prototype.getMessage=function(){return this.currentPrinter.message},HybridPrinter2.prototype.startMonitor=function(){var e=this.interval;return("number"!=typeof this.interval||e<1e3||6e3<e)&&(e=3e3),this.ReceiptPrinter.interval=e,this.ReceiptPrinter.startMonitor()},HybridPrinter2.prototype.stopMonitor=function(){return this.ReceiptPrinter.stopMonitor()},HybridPrinter2.prototype.lock=function(){return this.send({type:"lock"})},HybridPrinter2.prototype.unlock=function(){return this.send({type:"unlock"})},HybridPrinter2.prototype.selectPaperType=function(e){if(1!=this.isValidFunction(e,[this.PAPERTYPE_RECEIPT,this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');switch(e){case this.PAPERTYPE_RECEIPT:this.currentPrinter=this.ReceiptPrinter;break;case this.PAPERTYPE_SLIP:this.currentPrinter=this.SlipPrinter2;break;case this.PAPERTYPE_ENDORSE:this.currentPrinter=this.EndorsePrinter2;break;case this.PAPERTYPE_VALIDATION:this.currentPrinter=this.ValidationPrinter;break;default:this.currentPrinter=this.ReceiptPrinter}return this.paperType=e,this},HybridPrinter2.prototype.waitInsertion=function(e){if(1!=this.isValidFunction(this.paperType,[this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');this.currentPrinter.waitTime=this.waitTime;var t=this.currentPrinter.waitInsertion.apply(this.currentPrinter,arguments);return t},HybridPrinter2.prototype.cancelInsertion=function(){var e=null;if(this.isMicrMode)e=this.MICRReader2.cancel.apply(this.MICRReader2,arguments);else{if(1!=this.isValidFunction(this.paperType,[this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');e=this.currentPrinter.cancel.apply(this.currentPrinter,arguments)}return e},HybridPrinter2.prototype.ejectPaper=function(){return this.send({type:"eject"})},HybridPrinter2.prototype.sendData=function(e){this.currentPrinter.isCrypto=this.isCrypto,this.currentPrinter.timeout="number"!=typeof e||e<1||e>1e6?0:e,this.EndorsePrinter2.enable40cplmode(this.enable40cplMode),this.currentPrinter.force=this.force;var t=this.currentPrinter.send();return this.force=!1,t},HybridPrinter2.prototype.print=function(e,t,i,n){return this.ReceiptPrinter.timeout="number"!=typeof n||n<1||n>1e6?0:n,this.ReceiptPrinter.print.apply(this.ReceiptPrinter,[e,t,i]),this},HybridPrinter2.prototype.readMicrData=function(e,t,i){var n=e,r=t;return void 0===e&&(n=!0),void 0===t&&(r=this.FONT_E13B),this.MICRReader2.timeout=i,this.MICRReader2.waitTime=this.waitTime,this.MICRReader2.read.apply(this.MICRReader2,[n,r]),this.isMicrMode=!0,this},HybridPrinter2.prototype.cleanMicrReader=function(e){return this.MICRReader2.timeout=e,this.MICRReader2.cleaning.apply(this.MICRReader2,[]),this.isMicrMode=!0,this},HybridPrinter2.prototype.client_onreceive=function(e,t){switch(e.eventtype){case"slipprint2":case"slipcancel":case"slipwaitinsertion":this.SlipPrinter2.fireOnReceive(e,t);break;case"endorseprint2":case"endorsecancel":case"endorsewaitinsertion":this.EndorsePrinter2.fireOnReceive(e,t);break;case"validationprint2":case"validationcancel":case"validationwaitinsertion":this.ValidationPrinter.fireOnReceive(e,t);break;case"micrread":case"micrcleaning":case"micrcancel":this.MICRReader2.fireOnReceive(e,t);break;case"print":var i=e;i.eventtype=this.ReceiptPrinter.methodName,this.fireOnReceive(i,t);break;default:this.fireOnReceive(e,t)}},HybridPrinter2.prototype.client_onxmlresult=function(e,t){this.ReceiptPrinter.fireOnReceive(e,t)},HybridPrinter2.prototype.fireOnReceive=function(e,t){if(typeof this.onreceive!=undefined&&null!=e){var i=e.eventtype,n=e.success,r=e.code,s=e.status,a=e.data;switch(e.eventtype){case"send":i="sendData",r==this.SUCCESS&&(this.isMicrMode=!1);break;case"waitinsertion":i="waitInsertion",r==this.SUCCESS&&(this.isMicrMode=!1);break;case"read":i="readMicrData",r==this.SUCCESS&&(this.isMicrMode=!0);break;case"cleaning":i="cleanMicrReader",r==this.SUCCESS&&(this.isMicrMode=!0);break;case"cancel":i="cancelInsertion";break;case"eject":i="ejectPaper",r==this.SUCCESS&&(this.isMicrMode=!1)}switch(r){case"EX_ENPC_TIMEOUT":r="ERROR_DEVICE_BUSY";break;case"CANCEL":this.isMicrMode=!1}this.onreceive({method:i,success:n,code:r,status:s,data:a},t)}},HybridPrinter2.prototype.callEvent=function(e,t){var i=t;return i.type=e,this.send(i)},HybridPrinter2.prototype.send=function(e){var t=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),i=-1;try{this.connectionObj.emit(t),i=t.sequence}catch(n){}return i},SlipPrinter2.prototype=new SlipPrinter,SlipPrinter2.prototype.timeout=6e4,SlipPrinter2.prototype.waitTime=500,SlipPrinter2.prototype.send=function(){var e=null;e=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>1e6)&&(this.timeout=1e4);var t={type:"slipprint2",timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},SlipPrinter2.prototype.setXmlString=function(e){this.message=e},SlipPrinter2.prototype.getXmlString=function(){return this.message},SlipPrinter2.prototype.waitInsertion=function(e){this.timeout="number"!=typeof e||e<5e3||e>9e5?6e4:e;var t=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var i={type:"slipwaitinsertion",timeout:this.timeout,waittime:t};return this.parent.send(i)},SlipPrinter2.prototype.cancel=function(){return this.parent.send({type:"slipcancel"})},SlipPrinter2.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"slipprint2":i="send";break;case"slipcancel":i="cancel";break;case"slipwaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:e.success,code:e.code,status:e.status},t)}},EndorsePrinter2.prototype=new EndorsePrinter,EndorsePrinter2.prototype.timeout=6e4,EndorsePrinter2.prototype.waitTime=500,EndorsePrinter2.prototype.send=function(){var e=null;e=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<6e4||this.timeout>9e5)&&(this.timeout=6e4);var t={type:"endorseprint2",is40cplmode:this.mode40cpl,timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},EndorsePrinter2.prototype.setXmlString=function(e){this.message=e},EndorsePrinter2.prototype.getXmlString=function(){return this.message},EndorsePrinter2.prototype.waitInsertion=function(e){this.timeout="number"!=typeof e||e<5e3||e>9e5?6e4:e;var t=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var i={type:"endorsewaitinsertion",timeout:this.timeout,waittime:t};return this.parent.send(i)},EndorsePrinter2.prototype.cancel=function(){return this.parent.send({type:"endorsecancel"})},EndorsePrinter2.prototype.enable40cplmode=function(e){this.mode40cpl=e},EndorsePrinter2.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"endorseprint2":i="send";break;case"endorsecancel":i="cancel";break;case"endorsewaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:e.success,code:e.code,status:e.status},t)}},MICRReader2.prototype=new MICRReader,MICRReader2.prototype.waitTime=500,MICRReader2.prototype.read=function(e,t){("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>9e5)&&(this.timeout=6e4);var i=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(i=500);var n={type:"micrread",ignoreerror:e,font:t,timeout:this.timeout,waittime:i};return this.parent.send(n)},MICRReader2.prototype.cleaning=function(){var e=this.waitTime;this.timeout=6e4,("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(e=500);var t={type:"micrcleaning",timeout:this.timeout,waittime:e};return this.parent.send(t)},ValidationPrinter.prototype=new ePOSBuilder,ValidationPrinter.prototype.timeout=1e4,ValidationPrinter.prototype.waitTime=500,ValidationPrinter.prototype.send=function(){var e=null;e=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>1e6)&&(this.timeout=1e4);var t={type:"validationprint2",timeout:this.timeout,printdata:e},i=this.parent.send(t);return this.setXmlString(""),i},ValidationPrinter.prototype.setXmlString=function(e){this.message=e},ValidationPrinter.prototype.getXmlString=function(){return this.message},ValidationPrinter.prototype.waitInsertion=function(e){this.timeout="number"!=typeof e||e<5e3||e>9e5?6e4:e;var t=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var i={type:"validationwaitinsertion",timeout:this.timeout,waittime:t};return this.parent.send(i)},ValidationPrinter.prototype.cancel=function(){return this.parent.send({type:"validationcancel"})},ValidationPrinter.prototype.fireOnReceive=function(e,t){if(null!=this.onreceive&&null!=e){var i="";switch(e.eventtype){case"validationprint2":i="send";break;case"validationcancel":i="cancel";break;case"validationwaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:e.success,code:e.code,status:e.status},t)}},Scanner.prototype={setConnectionObject:function(e){this.connectionObj=e},client_ondata:function(e){try{if(null==this.ondata)return;this.ondata(e)}catch(t){}},client_onbinarydata:function(e){try{if(null==this.onbinarydata)return;this.onbinarydata(e)}catch(t){}},client_setbinarymode:function(e){try{if(null==this.onbinarymode)return;this.onbinarymode(e)}catch(t){}},setBinaryMode:function(e){var t={type:"setbinarymode",binarymode:1==e?"true":"false"},i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),n=-1;try{this.connectionObj.emit(i),n=i.sequence}catch(r){}return n},callEvent:function(e,t){var i=t;i.type=e;var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(s){}return r}},SimpleSerial.prototype={setConnectionObject:function(e){this.connectionObj=e},sendCommand:function(e){var t={type:"sendcommand",command:toHexBinary(e)},i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),n=-1;try{this.connectionObj.emit(i),n=i.sequence}catch(r){}return n},client_oncommandreply:function(e){try{if(null==this.oncommandreply)return;var t=e.data;t=t.replace(/[0-9a-fA-F]{2}/g,function(e){var t=parseInt(e,16);return String.fromCharCode(t)}),e.data=t,this.oncommandreply(e)}catch(i){}}},GermanyFiscalElement.prototype={setConnectionObject:function(e){this.connectionObj=e},operate:function(e,t){var i={type:"operate",timeout:t,requestdata:e},n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(s){throw s}return r},client_operateresult:function(e){if(null!=this.ongfereceive){if("Base64-encoded"==e.resultformat)try{e.resultdata=window.atob(e.resultdata);for(var t=new Uint8Array(e.resultdata.length),i=0;i<e.resultdata.length;i++)t[i]=e.resultdata.charCodeAt(i);var n=new Zlib.Inflate(t).decompress();e.resultdata=[];for(var r=0;r<n.length;r++)e.resultdata=e.resultdata+String.fromCharCode(n[r])}catch(s){return void(this.onerror&&this.onerror(s))}try{this.ongfereceive(this.getResultObject(e))}catch(s){this.onerror&&this.onerror(s)}}},getResultObject:function(e){return{success:e.success,code:e.code,resultdata:e.resultdata}},callEvent:function(e,t){var i=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),n=-1;try{this.connectionObj.emit(i),n=i.sequence}catch(r){}return n}},Ofsc.prototype={setConnectionObject:function(e){this.connectionObj=e},send:function(e,t,i,n){this.callback=n;try{if(this.connectionObj.isUsableDeviceIF()){var r={type:"print",timeout:t,printdata:e},s=MessageFactory.getServiceMessage(this.SERVICE_ID,i,r);this.connectionObj.emit(s)}}catch(a){return}},notify:function(e){var t=null;t="1"==e.isCrypto?MessageFactory.decrypt(e.data):e.data,null!=this.callback&&this.callback(t.resultdata)},onxmlresult:function(e){null!=this.callback&&this.callback(e)}},CookieIO.prototype={writeId:function(e){var t=location.pathname;"/"==t.slice(-1)&&(t+="index.html");var i=location.hostname,n=this.getExpiredDate();document.cookie=this.KEY+"_"+i+t+"="+escape(e)+"; expires="+n},readId:function(){var e="",t=document.cookie+";",i=location.pathname;"/"==i.slice(-1)&&(i+="index.html");var n=location.hostname,r=this.KEY+"_"+n+i+"=",s=t.indexOf(r);if(-1!=s){s+=r.length;var a=t.indexOf(";",s);e=unescape(t.substring(s,a))}return e},getExpiredDate:function(){var e=new Date,t=e.getTime();return e.setTime(t+6e4*this.EXPIRE_MINUTES),e.toUTCString()}},DeviceObjElementMap.prototype={add:function(e){this.elementList.push(e)},get:function(e){for(var t=null,i=0;i<this.elementList.length;i++)if(this.elementList[i].deviceId==e){t=this.elementList[i];break}return t},getByObj:function(e){for(var t=null,i=0;i<this.elementList.length;i++)if(this.elementList[i].deviceObject==e){t=this.elementList[i];break}return t},remove:function(e){for(var t=0;t<this.elementList.length;t++)if(this.elementList[t].deviceId==e){this.elementList.splice(t,1);break}},removeAll:function(){this.elementList=[]},getElementList:function(){return this.elementList}},ePOSDevice.prototype={connect:function(e,t,i,n){this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.DISCONNECT&&this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.DISCONNECT||this.disconnect(),this.connectStartTime=(new Date).getTime();var r=t==this.IFPORT_EPOSDEVICE?"http":"https";this.conectionObj.setAddress(r,e,t),this.conectionObj.registCallback(i),arguments.length>=4?this.eposprint=n.eposprint:this.eposprint=!1;var s=this;if(this.eposprint){var a=this.conectionObj;this.conectionObj.probeWebServiceIF(function(e){var t=s.ERROR_PARAMETER;a.isUsablePrintIF()&&(t=s.RESULT_OK),i(t)})}else this.connectBySocketIo(this.CONNECT_TIMEOUT,r)},isConnected:function(){var e=!1,t=!1;switch(this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)){case this.conectionObj.CONNECT:case this.conectionObj.RECONNECTING:e=!0;break;case this.conectionObj.DISCONNECT:}return this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.CONNECT&&(t=!0),e|t},disconnect:function(){var e=MessageFactory.getDisconnectMessage(this.connectionId);this.conectionObj.emit(e),this.cleanup()},createDevice:function(e,t,i,n){try{if(!this.isConnected())throw new Error(this.ERROR_SYSTEM);if(null!=this.devObjElmMap.get(e))throw new Error(this.ERROR_DEVICE_IN_USE);if(!this.devObjSelector.isSelectable(t))throw new Error(this.ERROR_DEVICE_NOT_FOUND);var r=!1,s=!1;"boolean"==typeof i?r=i:("boolean"==typeof i.crypto&&(r=i.crypto),"boolean"==typeof i.buffer&&(s=i.buffer)),t==this.DEVICE_TYPE_DT&&(r=!0,e="local_dt");var a=this.devObjSelector.select(e,t,i.driver,r,this);a.setConnectionObject(this.conectionObj);var o=new DeviceObjElement(e,r,a,n);if(this.devObjElmMap.add(o),this.conectionObj.isUsableDeviceIF()){var l=MessageFactory.getOpenDeviceMessage(e,t,r,s);this.conectionObj.emit(l)}else{var c=this;this.checkEposPrintService(e,t,function(e){e==c.RESULT_OK?n(a,c.RESULT_OK):n(null,c.ERROR_DEVICE_NOT_FOUND)})}}catch(u){var d=u.message;null!=d&&""!=d||(d=this.ERROR_DEVICE_OPEN),null!=n&&n(null,d)}},deleteDevice:function(e,t){try{var i=this.devObjElmMap.getByObj(e);if(null==i)throw new Error(this.ERROR_DEVICE_NOT_OPEN);if(this.conectionObj.isUsableDeviceIF()){i.callback=t;var n=MessageFactory.getCloseDeviceMessage(i.deviceId);this.conectionObj.emit(n)}else{try{e.finalize()}catch(s){}this.devObjElmMap.remove(i.deviceId),t(this.RESULT_OK)}}catch(s){var r=s.message;null!=r&&""!=r||(r=this.ERROR_DEVICE_CLOSE),null!=t&&t(r)}},getAdmin:function(){return this.admin},getLocation:function(){return this.location},sendOfscXml:function(e,t,i,n){this.ofsc.send(e,t,i,n)},getCommBoxManager:function(){return this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)!=this.conectionObj.CONNECT?null:this.commBoxManager},cleanup:function(){0!=this.waitRetryConnectId&&(clearTimeout(this.waitRetryConnectId),this.waitRetryConnectId=0),this.connectStartTime=0,this.gbox.stock(this.socket),this.gbox.dispose();var e=this.devObjElmMap.getElementList();e.forEach(function(e){try{e.deviceObject.finalize()}catch(t){}}),e=null,this.devObjElmMap.removeAll(),null==this.ondisconnect||this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.DISCONNECT&&this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.DISCONNECT||this.ondisconnect(),this.cookieIo.writeId(""),this.conectionObj.changeStatus(this.conectionObj.IF_ALL,this.conectionObj.DISCONNECT),this.socket=null,this.conectionObj.setSocket(null),this.connectionId=null,this.conectionObj.setAddress("","",""),null!=this.reconnectTimerId&&clearInterval(this.reconnectTimerId),this.reconnectTimerId=null,this.reconnectTryCount=0,this.admin="",this.location="",this.recievedDataId=0,this.eposprint=!1},connectBySocketIo:function(e){var t=this.conectionObj,i=t.getSocketIoURL();this.socket=io.connect(i,{reconnect:!1,"connect timeout":e,"force new connection":!0}),this.conectionObj.setSocket(this.socket);var n=this;this.socket.on("connect",function(e){try{n.gbox.dispose()}catch(t){}}),this.socket.on("close",function(){t.changeStatus(t.IF_EPOSDEVICE,tselfofProb.DISCONNECT)}),this.socket.on("disconnect",function(e){try{if(t.status(t.IF_EPOSDEVICE)==t.RECONNECTING)return;""==n.cookieIo.readId()&&null==n.connectionId?n.cleanup():n.startReconnectAction()}catch(i){}}),this.socket.on("error",function(){try{t.probeWebServiceIF(function(e){t.isUsablePrintIF()?(n.eposprint=!0,t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_NONE)):(t.changeStatus(t.IF_EPOSDEVICE,t.DISCONNECT),t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_TIMEOUT))})}catch(e){}}),this.socket.on("connect_failed",function(){try{t.probeWebServiceIF(function(e){t.isUsablePrintIF()?(n.eposprint=!0,t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_NONE)):(t.changeStatus(t.IF_EPOSDEVICE,t.DISCONNECT),t.registIFAccessResult(t.IF_EPOSDEVICE,t.ACCESS_TIMEOUT))})}catch(e){}}),this.socket.on("message",function(e){try{var t=MessageFactory.parseRequestMessage(e);switch(""!=t.data_id&&(n.recievedDataId=t.data_id),t.request){case t.REQUEST.CONNECT:n.procConnect(t);break;case t.REQUEST.PUBKEY:n.procPubkey(t);break;case t.REQUEST.ADMININFO:n.procAdminInfo(t);break;case t.REQUEST.RECONNECT:n.procReconnect(t);break;case t.REQUEST.DISCONNECT:n.procDisconnect(t);break;case t.REQUEST.OPENDEVICE:n.procOpenDevice(t);break;case t.REQUEST.CLOSEDEVICE:n.procCloseDevice(t);break;case t.REQUEST.DEVICEDATA:n.procDeviceData(t);break;case t.REQUEST.SERVICEDATA:n.procServiceData(t);break;case t.REQUEST.OPENCOMMBOX:n.procOpenCommBox(t);break;case t.REQUEST.CLOSECOMMBOX:n.procCloseCommBox(t);break;case t.REQUEST.COMMDATA:n.procCommBoxData(t);break;case t.REQUEST.ERROR:n.procError(t);break;default:return}}catch(i){}})},procConnect:function(e){try{null!=this.reconnectTimerId&&(clearInterval(this.reconnectTimerId),this.reconnectTimerId=null);var t=null,i=this.cookieIo.readId();e.data.protocol_version<2?(t=MessageFactory.getPubkeyMessage(e.data.prime,e.data.key),this.conectionObj.emit(t)):null!=this.connectionId?(t=MessageFactory.getReconnectMessage(this.connectionId,e.data.client_id,this.recievedDataId),this.conectionObj.emit(t)):""!=i?(t=MessageFactory.getDisconnectMessage(i),this.conectionObj.emit(t),t=MessageFactory.getPubkeyMessage(e.data.prime,e.data.key),this.conectionObj.emit(t)):(t=MessageFactory.getPubkeyMessage(e.data.prime,e.data.key),this.conectionObj.emit(t)),this.cookieIo.writeId(e.data.client_id),this.connectionId=e.data.client_id}catch(n){this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup()}},procPubkey:function(e){try{if("SHARED_KEY_MISMATCH_ERROR"==e.code){var t=(new Date).getTime(),i=0;if(0!=this.connectStartTime)if((i=t-this.connectStartTime)<this.CONNECT_TIMEOUT){var n=this;this.gbox.stock(this.socket),this.connectionId=null,this.waitRetryConnectId=setTimeout(function(){n.connectBySocketIo(n.CONNECT_TIMEOUT-i)},100)}else this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_TIMEOUT),this.cleanup();else this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_TIMEOUT),this.cleanup()}else if("PARAM_ERROR"==e.code)this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup();else{var r=MessageFactory.getAdminInfoMessage();this.conectionObj.emit(r)}}catch(s){this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup()}},procAdminInfo:function(e){this.eposprint||(e.code==this.RESULT_OK?(this.admin=e.data.admin_name,this.location=e.data.location,this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_OK)):this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR))},procReconnect:function(e){this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.RECONNECTING&&(e.code==this.RESULT_OK?(this.conectionObj.changeStatus(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.CONNECT),null!=this.onreconnect&&this.onreconnect()):this.cleanup())},procDisconnect:function(e){},procOpenDevice:function(e){var t=e.deviceId;try{var i=this.devObjElmMap.get(t);e.code==this.RESULT_OK?null!=i.callback&&i.callback(i.deviceObject,e.code):(null!=i.callback&&i.callback(null,e.code),this.devObjElmMap.remove(t))}catch(n){null!=this.onerror&&this.onerror("0",t,this.ERROR_SYSTEM,null)}},procCloseDevice:function(e){var t=e.deviceId;try{if(e.code==this.RESULT_OK){var i=this.devObjElmMap.get(t);null!=i.callback&&i.callback(e.code);try{i.deviceObject.finalize()}catch(n){}this.devObjElmMap.remove(t)}}catch(n){null!=this.onerror&&this.onerror("0",t,this.ERROR_SYSTEM,null)}},procDeviceData:function(eposmsg){var deviceId=eposmsg.deviceId,sequence=eposmsg.sequence,data=eposmsg.data;try{var devObjElm=this.devObjElmMap.get(deviceId);devObjElm.isCrypto&&(data=MessageFactory.decrypt(data));var deviceObject=devObjElm.deviceObject,method="client_"+data.type;try{deviceObject instanceof OtherPeripheral?deviceObject.client_onreceive(data,sequence):eval("deviceObject."+method+"(data, sequence)")}catch(e){eval("deviceObject."+data.type+"(data, sequence)")}}catch(e){null!=this.onerror&&this.onerror(sequence,deviceId,this.ERROR_SYSTEM,null)}},procServiceData:function(e){try{switch(e.serviceId){case"OFSC":this.ofsc.notify(e)}}catch(t){null!=this.onerror&&this.onerror(e.sequence,e.serviceId,this.ERROR_SYSTEM,null)}},procOpenCommBox:function(e){var t=e.sequence;try{this.commBoxManager.client_opencommbox(e.data,t)}catch(i){null!=this.onerror&&this.onerror(t,"",this.ERROR_SYSTEM,null)}},procCloseCommBox:function(e){var t=e.sequence;try{this.commBoxManager.client_closecommbox(e.data,t)}catch(i){null!=this.onerror&&this.onerror(t,"",this.ERROR_SYSTEM,null)}},procCommBoxData:function(e){var t=e.sequence;try{this.commBoxManager.executeCommDataCallback(e.data,t)}catch(i){null!=this.onerror&&this.onerror(t,"",this.ERROR_SYSTEM,null)}},procError:function(e){try{null!=this.onerror&&this.onerror(e.sequence,e.deviceId,e.code,e.data)}catch(t){}},startReconnectAction:function(){if(this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)!=this.conectionObj.RECONNECTING){this.conectionObj.changeStatus(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.RECONNECTING),this.reconnectTryCount=0;var e=this;this.reconnectTimerId=setInterval(function(){if(null!=e.socket&&e.gbox.stock(e.socket),e.reconnectTryCount==e.MAX_RECONNECT_RETRY)return clearInterval(e.reconnectTimerId),void e.cleanup();e.conectionObj.status(e.conectionObj.IF_EPOSDEVICE)==e.conectionObj.RECONNECTING&&e.connectBySocketIo(e.RECONNECT_TIMEOUT),e.reconnectTryCount++},e.RECONNECT_TIMEOUT),0==this.reconnectTryCount&&null!=this.onreconnecting&&this.onreconnecting()}},checkEposPrintService:function(e,t,i){var n,r,s="ERROR_TIMEOUT",a="ERROR_PARAMETER",o=null,l=this.conectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+e+"&timeout=10000",c=this.conectionObj.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid="+e+"&timeout=10000",d=null,u=null;if(t==this.DEVICE_TYPE_DISPLAY?(o=c,d='<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display"></epos-display></s:Body></s:Envelope>'):(o=l,d='<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"></epos-print></s:Body></s:Envelope>'),window.XDomainRequest)try{(u=new XDomainRequest).open("POST",o),u.onload=function(){/response/.test(u.responseText)?(r=/success\s*=\s*"\s*(1|true)\s*"/.test(u.responseText),i(r?"OK":a)):i(a)},u.onerror=function(){i(a)},u.ontimeout=function(){i(s)},u.onprogress=function(){},u.send(d)}catch(h){i(a)}else try{(u=new XMLHttpRequest).open("POST",o,!0),u.setRequestHeader("Content-Type","text/xml; charset=utf-8"),u.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),u.setRequestHeader("SOAPAction",'""'),u.onreadystatechange=function(){if(4==u.readyState)if(clearTimeout(n),200==u.status&&u.responseXML){var e=u.responseXML.getElementsByTagName("response");r=!(e.length<=0)&&/^(1|true)$/.test(e[0].getAttribute("success")),i(r?"OK":a)}else i(a)},n=setTimeout(function(){u.abort(),i(s)},5e3),u.timeout=1e4,u.send(d)}catch(h){i(a)}}},SocketGarbageBox.prototype={stock:function(e){if(null!=e){e.removeAllListeners("connect"),e.removeAllListeners("close"),e.removeAllListeners("disconnect"),e.removeAllListeners("error"),e.removeAllListeners("connect_failed"),e.removeAllListeners("message");var t=function(){};t.prototype=e,this.box.push(t)}},dispose:function(){for(;0<this.box.length;){var e=this.box.pop();try{e.disconnect(),delete e}catch(t){}}}},Connection.prototype.probe=function(e,t,i){var n,r=this,s=null;if(window.XDomainRequest)try{(s=new XDomainRequest).open("POST",e),s.onload=function(){i(r.OK)},s.onerror=function(){i(r.ERROR_PARAMETER)},s.ontimeout=function(){i(r.ERROR_TIMEOUT)},s.onprogress=function(){},s.send(t)}catch(a){i(this.ERROR_PARAMETER)}else try{(s=new XMLHttpRequest).open("POST",e,!0),s.setRequestHeader("Content-Type","text/xml; charset=utf-8"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),s.setRequestHeader("SOAPAction",'""'),s.onreadystatechange=function(){4==s.readyState&&(clearTimeout(n),200==s.status?i(r.OK):i(r.ERROR_PARAMETER))},n=setTimeout(function(){s.abort(),i(r.ERROR_TIMEOUT)},5e3),s.timeout=1e4,s.send(t)}catch(a){i(this.ERROR_PARAMETER)}},Connection.prototype.probeWebServiceIF=function(e){var t=(new Date).getTime(),i=!1,n=this,r=this.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid=local_printer&timeout=10000";this.probe(r,'<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"></epos-print></s:Body></s:Envelope>',function(r){var s=n.ACCESS_ERROR;r==n.OK&&(s=n.ACCESS_OK),n.registIFAccessResult(n.IF_EPOSPRINT,s),i&&e((new Date).getTime()-t),i=!i});var s=this.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid=local_display&timeout=10000";this.probe(s,'<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display"></epos-display></s:Body></s:Envelope>',function(r){var s=n.ACCESS_ERROR;r==n.OK&&(s=n.ACCESS_OK),n.registIFAccessResult(n.IF_EPOSDISPLAY,s),i&&e((new Date).getTime()-t),i=!i})},Connection.prototype.setSocket=function(e){this.socket_p=e},Connection.prototype.emit=function(e){try{if(null==this.socket_p)return;this.socket_p.emit("message",e.toTransmissionForm())}catch(t){throw new Error(this.ERROR_SYSTEM)}},Connection.prototype.setAddress=function(e,t,i){this.protocol_p=e,this.address_p=t,this.port_p=i,this.usableIF_p=0},Connection.prototype.getAddressWithProtocol=function(){return this.protocol_p+"://"+this.address_p},Connection.prototype.getSocketIoURL=function(){return this.getAddressWithProtocol()+":"+this.port_p},Connection.prototype.registCallback=function(e){"function"==typeof e&&(this.callback_p=e)},Connection.prototype.changeStatus=function(e,t){switch(e){case this.IF_ALL:this.dev_status_p=t,this.ws_status_p=t;break;case this.IF_EPOSDEVICE:this.dev_status_p=t;break;default:this.ws_status_p=t}},Connection.prototype.status=function(e){return e==this.IF_EPOSDEVICE?this.dev_status_p:this.ws_status_p},Connection.prototype.isUsableDeviceIF=function(){return(this.usableIF_p&this.IF_EPOSDEVICE)==this.IF_EPOSDEVICE},Connection.prototype.isUsablePrintIF=function(){return!!this.isUsableDeviceIF()||(this.usableIF_p&this.IF_EPOSPRINT)==this.IF_EPOSPRINT},Connection.prototype.isUsableDisplayIF=function(){return!!this.isUsableDeviceIF()||(this.usableIF_p&this.IF_EPOSDISPLAY)==this.IF_EPOSDISPLAY},Connection.prototype.registIFAccessResult=function(e,t){if(t==this.ACCESS_OK&&(this.changeStatus(e,this.CONNECT),this.usableIF_p|=e),e==this.IF_EPOSDEVICE){var i=this.ERROR_PARAMETER;if(this.usableIF_p&this.IF_ALL&&(i="http"==this.protocol_p?this.OK:this.SSL_CONNECT_OK),t==this.ACCESS_TIMEOUT&&(i=this.ERROR_TIMEOUT),null!=this.callback_p){try{this.callback_p(i)}catch(n){}this.callback_p=null}}},ePosCrypto.prototype={genClientKeys:function(e,t){var i=str2bigInt("2",10),n=str2bigInt(e,16),r=randBigInt(64,0);this.pubkey_c=powMod(i,r,n);for(var s=bigInt2str(powMod(str2bigInt(t,16),r,n),16).toLowerCase();s.length<192;)s="0"+s;this.secretKey=md5.bin(s)},bfEncrypt:function(e){try{var t={data:e,key:this.secretKey,mode:"cbc",round:16,iv:blowfish.mkIV()},i=blowfish.encrypt(t),n=base64.encode(i)}catch(r){return""}return n},bfDecrypt:function(e){try{var t={data:base64.decode(e),key:this.secretKey,mode:"cbc"},i=blowfish.decrypt(t)}catch(n){return""}return i}},ePosDeviceMessage.prototype={toTransmissionForm:function(){var e=null;switch(this.request){case this.REQUEST.PUBKEY:case this.REQUEST.ADMININFO:case this.REQUEST.RECONNECT:case this.REQUEST.DISCONNECT:e=[this.request,this.data];break;case this.REQUEST.OPENDEVICE:case this.REQUEST.CLOSEDEVICE:e=[this.request,this.deviceId,this.data,this.data_id];break;case this.REQUEST.DEVICEDATA:e=[this.request,this.sequence,this.deviceId,this.data,this.data_id];break;case this.REQUEST.SERVICEDATA:e=[this.request,this.sequence,this.serviceId,this.isCrypto,this.data,this.data_id];break;case this.REQUEST.OPENCOMMBOX:case this.REQUEST.CLOSECOMMBOX:case this.REQUEST.COMMDATA:e=[this.request,this.sequence,this.data,this.data_id];break;default:e=null}return e}};var MessageFactory=(sequence=0,cipher=new ePosCrypto,getNextSequence=function(){return sequence++,Number.MAX_VALUE==sequence&&(sequence=1),String(sequence)},{parseRequestMessage:function(e){var t=new ePosDeviceMessage;switch(t.request=e[0],t.request){case t.REQUEST.CONNECT:t.data=e[1];break;case t.REQUEST.PUBKEY:case t.REQUEST.ADMININFO:case t.REQUEST.RECONNECT:case t.REQUEST.DISCONNECT:t.code=e[1],t.data=e[2];break;case t.REQUEST.OPENDEVICE:case t.REQUEST.CLOSEDEVICE:t.deviceId=e[1],t.code=e[2],t.data=e[3],t.data_id=e[4];break;case t.REQUEST.DEVICEDATA:t.sequence=e[1],t.deviceId=e[2],t.data=e[3],t.data_id=e[4];break;case t.REQUEST.SERVICEDATA:t.sequence=e[1],t.serviceId=e[2],t.isCrypto=e[3],t.data=e[4],t.data_id=e[5];break;case t.REQUEST.OPENCOMMBOX:case t.REQUEST.CLOSECOMMBOX:case t.REQUEST.COMMDATA:t.sequence=e[1],t.data=e[2],t.data_id=e[3];break;case t.REQUEST.ERROR:t.sequence=e[1],t.deviceId=e[2],t.code=e[3],t.data=e[4],t.data_id=e[5];break;default:t=null}return t},getPubkeyMessage:function(e,t){var i=new ePosDeviceMessage;i.request=i.REQUEST.PUBKEY,cipher.genClientKeys(e,t);for(var n=cipher.bfEncrypt("hello"),r=bigInt2str(cipher.pubkey_c,16);r.length<192;)r="0"+r;return i.data={key:r,testData:n},i},getAdminInfoMessage:function(){var e=new ePosDeviceMessage;return e.request=e.REQUEST.ADMININFO,e.data={},e},getReconnectMessage:function(e,t,i){var n=new ePosDeviceMessage;return n.request=n.REQUEST.RECONNECT,n.data={old_client_id:e,new_client_id:t,received_id:i},n},getDisconnectMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.DISCONNECT,t.data={client_id:e},t},getOpenDeviceMessage:function(e,t,i,n){var r=new ePosDeviceMessage,s=t;return"type_hybrid_printer2"==s&&(s="type_hybrid_printer"),r.request=r.REQUEST.OPENDEVICE,r.deviceId=e,r.data={type:s,crypto:i,buffer:n},r},getCloseDeviceMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.CLOSEDEVICE,t.deviceId=e,t.data={},t},getDeviceDataMessage:function(e,t,i){var n=new ePosDeviceMessage;return n.request=n.REQUEST.DEVICEDATA,n.sequence=getNextSequence(),n.deviceId=e,n.data=i?cipher.bfEncrypt(JSON.stringify(t)):t,n},getServiceMessage:function(e,t,i){var n=new ePosDeviceMessage;return n.request=n.REQUEST.SERVICEDATA,n.sequence=getNextSequence(),n.serviceId=e,n.isCrypto=t,n.data=t?cipher.bfEncrypt(JSON.stringify(i)):i,n},getOpenCommBoxMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.OPENCOMMBOX,t.sequence=getNextSequence(),t.data=e,t},getCloseCommBoxMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.CLOSECOMMBOX,t.sequence=getNextSequence(),t.data=e,t},getCommBoxDataMessage:function(e){var t=new ePosDeviceMessage;return t.request=t.REQUEST.COMMDATA,t.sequence=getNextSequence(),t.data=e,t},decrypt:function(e){var t=cipher.bfDecrypt(e);return JSON.parse(t)}}),sequence,cipher,JSON;function ePOSDeviceConfiguration(e){this.DEVICE_GROUP_ALL="group_all",this.DEVICE_GROUP_PRINTER="group_printer",this.DEVICE_GROUP_DISPLAY="group_display",this.DEVICE_GROUP_HID="group_hid",this.DEVICE_GROUP_SERIAL="group_serial",this.DEVICE_GROUP_OTHER="group_other",this.DEVICE_TYPE_PRINTER="type_printer",this.DEVICE_TYPE_HYBRID_PRINTER="type_hybrid_printer",this.DEVICE_TYPE_DISPLAY="type_display",this.DEVICE_TYPE_KEYBOARD="type_keyboard",this.DEVICE_TYPE_SCANNER="type_scanner",this.DEVICE_TYPE_MSR="type_msr",this.DEVICE_TYPE_CASH_CHANGER="type_cash_changer",this.DEVICE_TYPE_SIMPLE_SERIAL="type_simple_serial",this.DEVICE_TYPE_CASH_DRAWER="type_cash_drawer",this.DEVICE_TYPE_PIN_PAD="type_pin_pad",this.DEVICE_TYPE_CAT="type_cat",this.DEVICE_TYPE_SMARTCARD_RW="type_smartcard_rw",this.CGI_PATH="/epson_eposdevice/getDeviceList.cgi",this.RESULT_OK="OK",this.UNKNOWN="unknown",this.ONLINE="online",this.OFFLINE="offline",this.INTERVAL=500,this.TIMEOUT=6e4,this.address=e,this.cb=null,this.message=null,this.WEBSOCKET_PORT=8008,this.SSLWEBSOCKET_PORT=8043}if(ePOSDeviceConfiguration.prototype.getRegisterdDevices=function(e,t){this.cb=t;var i=this,n=null,r="?group="+e,s=window.location.protocol+"//"+this.address+this.CGI_PATH+r;window.XDomainRequest?((n=new XDomainRequest).open("GET",s),n.onload=function(){i.message=i.RESULT_OK;var e=JSON.parse(n.responseText);i.checkDevice(e,function(t){for(var n in t)for(var r=0;r<e.length;r++)e[r].deviceId==n&&(e[r].status=t[n]);null!=i.cb&&(i.cb(i,e),i.cb=null)})},n.onerror=function(){i.message="Failed to get device list.",null!=i.cb&&(i.cb(i,null),i.cb=null)}):((n=new XMLHttpRequest).open("GET",s,!0),n.setRequestHeader("Pragma","no-cache"),n.setRequestHeader("Cache-Control","no-cache"),n.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){i.message=i.RESULT_OK;var e=JSON.parse(n.responseText);i.checkDevice(e,function(t){for(var n in t)for(var r=0;r<e.length;r++)e[r].deviceId==n&&(e[r].status=t[n]);null!=i.cb&&(i.cb(i,e),i.cb=null)})}else i.message="Failed to get device list.",null!=i.cb&&(i.cb(i,null),i.cb=null)}),n.send(null)},ePOSDeviceConfiguration.prototype.checkDevice=function(e,t){for(var i,n=this,r=window.location.protocol.match(/^(https:)/)?this.SSLWEBSOCKET_PORT:this.WEBSOCKET_PORT,s=new epson.ePOSDevice,a=new Array,o=0;o<e.length;o++)a[e[o].deviceId]=n.UNKNOWN;s.onerror=function(e,t,i){""!=t&&(a[t]=n.OFFLINE)},s.connect(this.address,r,function(t){if("OK"==t||"SSL_CONNECT_OK"==t)for(var i=0;i<e.length;i++)s.createDevice(e[i].deviceId,e[i].deviceType,{},function(e,t){a[e.deviceID]="OK"==t?n.ONLINE:n.OFFLINE,s.deleteDevice(e,null)})}),i=window.setInterval(function(){for(var e in a)if(a[e]==n.UNKNOWN)return;clearInterval(i),null!=t&&t(a)},n.INTERVAL),window.setTimeout(function(){clearInterval(i),null!=t&&t(a)},n.TIMEOUT)},"object"!=typeof JSON&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,r,s,a,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;i<s;i+=1)a[i]=str(i,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(r=str(n=rep[i],l))&&a.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&a.push(quote(n)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,n,r=e[t];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&((n=walk(r,i))!==undefined?r[i]=n:delete r[i]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){var i=e;i.version="0.8.7",i.protocol=1,i.transports=[],i.j=[],i.sockets={},i.connect=function(e,n){var r,s,a=i.util.parseUri(e);t&&t.location&&(a.protocol=a.protocol||t.location.protocol.slice(0,-1),a.host=a.host||(t.document?t.document.domain:t.location.hostname),a.port=a.port||t.location.port),r=i.util.uniqueUri(a);var o={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return i.util.merge(o,n),!o["force new connection"]&&i.sockets[r]||(s=new i.Socket(o)),!o["force new connection"]&&s&&(i.sockets[r]=s),(s=s||i.sockets[r]).of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var i=e.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];i.parseUri=function(e){for(var t=n.exec(e||""),i={},s=14;s--;)i[r[s]]=t[s]||"";return i},i.uniqueUri=function(e){var i=e.protocol,n=e.host,r=e.port;return"document"in t?(n=n||document.domain,r=r||("https"==i&&"https:"!==document.location.protocol?443:document.location.port)):(n=n||"localhost",r||"https"!=i||(r=443)),(i||"http")+"://"+n+":"+(r||80)},i.query=function(e,t){var n=i.chunkQuery(e||""),r=[];for(var s in i.merge(n,i.chunkQuery(t||"")),n)n.hasOwnProperty(s)&&r.push(s+"="+n[s]);return r.length?"?"+r.join("&"):""},i.chunkQuery=function(e){for(var t,i={},n=e.split("&"),r=0,s=n.length;r<s;++r)(t=n[r].split("="))[0]&&(i[t[0]]=decodeURIComponent(t[1]));return i};var s=!1;i.load=function(e){if("document"in t&&"complete"===document.readyState||s)return e();i.on(t,"load",e,!1)},i.on=function(e,t,i,n){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener&&e.addEventListener(t,i,n)},i.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||i.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null},void 0!==window&&i.load(function(){s=!0}),i.defer=function(e){if(!i.ua.webkit||"undefined"!=typeof importScripts)return e();i.load(function(){setTimeout(e,100)})},i.merge=function(e,t,n,r){var s,a=r||[],o=void 0===n?2:n;for(s in t)t.hasOwnProperty(s)&&i.indexOf(a,s)<0&&("object"==typeof e[s]&&o?i.merge(e[s],t[s],o-1,a):(e[s]=t[s],a.push(t[s])));return e},i.mixin=function(e,t){i.merge(e.prototype,t.prototype)},i.inherit=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.intersect=function(e,t){for(var n=[],r=e.length>t.length?e:t,s=e.length>t.length?t:e,a=0,o=s.length;a<o;a++)~i.indexOf(r,s[a])&&n.push(s[a]);return n},i.indexOf=function(e,t,i){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,i);var n=e.length;for(i=i<0?i+n<0?0:i+n:i||0;i<n&&e[i]!==t;i++);return n<=i?-1:i},i.toArray=function(e){for(var t=[],i=0,n=e.length;i<n;i++)t.push(e[i]);return t},i.ua={},i.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),i.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function i(){}e.EventEmitter=i,i.prototype.on=function(e,i){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(i):this.$events[e]=[this.$events[e],i]:this.$events[e]=i,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(e,t){var i=this;function n(){i.removeListener(e,n),t.apply(this,arguments)}return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,i){if(this.$events&&this.$events[e]){var n=this.$events[e];if(t.util.isArray(n)){for(var r=-1,s=0,a=n.length;s<a;s++)if(n[s]===i||n[s].listener&&n[s].listener===i){r=s;break}if(r<0)return this;n.splice(r,1),n.length||delete this.$events[e]}else(n===i||n.listener&&n.listener===i)&&delete this.$events[e]}return this},i.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},i.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},i.prototype.emit=function(e){if(!this.$events)return!1;var i=this.$events[e];if(!i)return!1;var n=Array.prototype.slice.call(arguments,1);if("function"==typeof i)i.apply(this,n);else{if(!t.util.isArray(i))return!1;for(var r=i.slice(),s=0,a=r.length;s<a;s++)r[s].apply(this,n)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,r,s,a,o=gap,l=t[e];switch(l instanceof Date&&(l=date(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;i<s;i+=1)a[i]=str(i,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(r=str(n=rep[i],l))&&a.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&a.push(quote(n)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,r}}JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){var j;function walk(e,t){var i,n,r=e[t];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&((n=walk(r,i))!==undefined?r[i]=n:delete r[i]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,void 0!==JSON?JSON:undefined),function(e,t){var i=e.parser={},n=i.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],r=i.reasons=["transport not supported","client not handshaken","unauthorized"],s=i.advice=["reconnect"],a=t.JSON,o=t.util.indexOf;i.encodePacket=function(e){var t=o(n,e.type),i=e.id||"",l=e.endpoint||"",c=e.ack,d=null;switch(e.type){case"error":var u=e.reason?o(r,e.reason):"",h=e.advice?o(s,e.advice):"";""===u&&""===h||(d=u+(""!==h?"+"+h:""));break;case"message":""!==e.data&&(d=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),d=a.stringify(p);break;case"json":d=a.stringify(e.data);break;case"connect":e.qs&&(d=e.qs);break;case"ack":d=e.ackId+(e.args&&e.args.length?"+"+a.stringify(e.args):"")}var f=[t,i+("data"==c?"+":""),l];return null!==d&&d!==undefined&&f.push(d),f.join(":")},i.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var i=0,n=e.length;i<n;i++){t+=""+e[i].length+""+e[i]}return t};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;i.decodePacket=function(e){if(!(o=e.match(l)))return{};var t=o[2]||"",i=(e=o[5]||"",{type:n[o[1]],endpoint:o[4]||""});switch(t&&(i.id=t,o[3]?i.ack="data":i.ack=!0),i.type){case"error":var o=e.split("+");i.reason=r[o[0]]||"",i.advice=s[o[1]]||"";break;case"message":i.data=e||"";break;case"event":try{var c=a.parse(e);i.name=c.name,i.args=c.args}catch(d){}i.args=i.args||[];break;case"json":try{i.data=a.parse(e)}catch(d){}break;case"connect":i.qs=e||"";break;case"ack":if((o=e.match(/^([0-9]+)(\+)?(.*)/))&&(i.ackId=o[1],i.args=[],o[3]))try{i.args=o[3]?a.parse(o[3]):[]}catch(d){}}return i},i.decodePayload=function(e){if(""==e.charAt(0)){for(var t=[],n=1,r="";n<e.length;n++)""==e.charAt(n)?(t.push(i.decodePacket(e.substr(n+1).substr(0,r))),n+=Number(r)+1,r=""):r+=e.charAt(n);return t}return[i.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function i(e,t){this.socket=e,this.sessid=t}e.Transport=i,t.util.mixin(i,t.EventEmitter),i.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var i=t.parser.decodePayload(e);if(i&&i.length)for(var n=0,r=i.length;n<r;n++)this.onPacket(i[n])}return this},i.prototype.onPacket=function(e){return"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),this.socket.onPacket(e),this)},i.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},i.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},i.prototype.onConnect=function(){return this.socket.onConnect(),this},i.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},i.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},i.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},i.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},i.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},i.prototype.onClose=function(){this.open=!1,this.socket.onClose(),this.onDisconnect()},i.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},i.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,i){function n(e){if(this.options={port:80,secure:!1,document:"document"in i&&document,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var n=this;t.util.on(i,"beforeunload",function(){n.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function r(){}e.Socket=n,t.util.mixin(n,t.EventEmitter),n.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},n.prototype.publish=function(){var e;for(var t in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t)).$emit.apply(e,arguments)},n.prototype.handshake=function(e){var i=this,n=this.options;function s(t){t instanceof Error?i.onError(t.message):e.apply(null,t.split(":"))}var a=["http"+(n.secure?"s":"")+":/",n.host+":"+n.port,n.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/"),o=setTimeout(function(){if(void 0!==c)try{var e=c.src.lastIndexOf("=")+1,n=c.src.substring(e);t.j[n]=function(e){c.parentNode.removeChild(c)}}catch(r){}i.publish("connect_failed")},this.options["connect timeout"]);if(this.isXDomain()&&!t.util.ua.hasCORS){var l=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=a+"&jsonp="+t.j.length,l.parentNode.insertBefore(c,l),t.j.push(function(e){clearTimeout(o),s(e),c.parentNode.removeChild(c)})}else{var d=t.util.request();d.open("GET",a,!0),d.onreadystatechange=function(){4==d.readyState&&(d.onreadystatechange=r,clearTimeout(o),200==d.status?s(d.responseText):!i.reconnecting&&i.onError(d.responseText))},d.timeout=this.options["connect timeout"],d.send(null)}},n.prototype.getTransport=function(e){for(var i,n=e||this.transports,r=0;i=n[r];r++)if(t.Transport[i]&&t.Transport[i].check(this)&&(!this.isXDomain()||t.Transport[i].xdomainCheck()))return new t.Transport[i](this,this.sessionid);return null},n.prototype.connect=function(e){if(this.connecting)return this;var i=this;return this.handshake(function(n,r,s,a){i.sessionid=n,i.closeTimeout=1e3*s,i.heartbeatTimeout=1e3*r,i.transports=t.util.intersect(a.split(","),i.options.transports),function e(t){if(i.transport&&i.transport.clearTimeouts(),i.transport=i.getTransport(t),!i.transport)return i.publish("connect_failed");i.transport.ready(i,function(){i.connecting=!0,i.publish("connecting",i.transport.name),i.transport.open(),i.options["connect timeout"]&&(i.connectTimeoutTimer=setTimeout(function(){if(!i.connected&&(i.connecting=!1,i.options["try multiple transports"])){i.remainingTransports||(i.remainingTransports=i.transports.slice(0));for(var t=i.remainingTransports;t.length>0&&t.splice(0,1)[0]!=i.transport.name;);t.length?e(t):i.publish("connect_failed")}},i.options["connect timeout"]))})}(),i.once("connect",function(){clearTimeout(i.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},n.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},n.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},n.prototype.disconnect=function(){return this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var e=t.util.request(),i=this.resource+"/"+t.protocol+"/"+this.sessionid;e.open("GET",i,!0),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var e=i.location.port||("https:"==i.location.protocol?443:80);return this.options.host!==i.location.hostname||this.options.port!=e},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.open=!0},n.prototype.onClose=function(){this.open=!1},n.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},n.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&this.connected&&(this.disconnect(),this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},n.prototype.onDisconnect=function(e){var t=this.connected;this.connected=!1,this.connecting=!1,this.open=!1,t&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},n.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],i=this.options["try multiple transports"],n=this.options["reconnection limit"];function r(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}e.removeListener("connect_failed",s),e.removeListener("connect",s),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=i}function s(){if(e.reconnecting)return e.connected?r():e.connecting&&e.reconnecting?e.reconnectionTimer=setTimeout(s,1e3):void(e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),r()):(e.on("connect_failed",s),e.options["try multiple transports"]=!0,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<n&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(s,e.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(s,this.reconnectionDelay),this.on("connect",s)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function i(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(e,t){this.namespace=e,this.name=t}e.SocketNamespace=i,t.util.mixin(i,t.EventEmitter),i.prototype.$emit=t.EventEmitter.prototype.emit,i.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},i.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},i.prototype.send=function(e,t){var i={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=t),this.packet(i)},i.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),i=t[t.length-1],n={type:"event",name:e};return"function"==typeof i&&(n.id=++this.ackPackets,n.ack="data",this.acks[n.id]=i,t=t.slice(0,t.length-1)),n.args=t,this.packet(n)},i.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},i.prototype.onPacket=function(e){var i=this;function n(){i.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var r=["message",e.data];"data"==e.ack?r.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,r);break;case"event":r=[e.name].concat(e.args);"data"==e.ack&&r.push(n),this.$emit.apply(this,r);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,i){function n(e){t.Transport.apply(this,arguments)}e.websocket=n,t.util.inherit(n,t.Transport),n.prototype.name="websocket",n.prototype.open=function(){var e,n=t.util.query(this.socket.options.query),r=this;return e||(e=i.MozWebSocket||i.WebSocket),this.websocket=new e(this.prepareUrl()+n),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},n.prototype.send=function(e){return this.websocket.send(e),this},n.prototype.payload=function(e){for(var t=0,i=e.length;t<i;t++)this.packet(e[t]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(e){this.socket.onError(e)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in i&&!("__addTask"in WebSocket)||"MozWebSocket"in i},n.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function i(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=i,t.util.inherit(i,t.Transport.websocket),i.prototype.name="flashsocket",i.prototype.open=function(){var e=this,i=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,i)}),this},i.prototype.send=function(){var e=this,i=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,i)}),this},i.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},i.prototype.ready=function(e,n){function r(){var t=e.options,r=t["flash policy port"],a=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];i.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=a.join("/")),843!==r&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+r),WebSocket.__initialize(),i.loaded=!0),n.call(s)}var s=this;if(document.body)return r();t.util.load(r)},i.check=function(){return!("undefined"==typeof WebSocket||!("__initialize"in WebSocket)||!swfobject)&&swfobject.getFlashPlayerVersion().major>=10},i.xdomainCheck=function(){return!0},void 0!==window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),void 0!==window)var swfobject=function(){var e,t,i,n,r,s,a="undefined",o="object",l="Shockwave Flash",c="application/x-shockwave-flash",d="SWFObjectExprInst",u="onreadystatechange",h=window,p=document,f=navigator,m=!1,v=[function(){m?function(){var e=p.getElementsByTagName("body")[0],t=V(o);t.setAttribute("type",c);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=a){var r=i.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),T.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,P()}()}else P()}():P()}],E=[],g=[],_=[],y=!1,b=!1,S=!0,T=function(){var e=typeof p.getElementById!=a&&typeof p.getElementsByTagName!=a&&typeof p.createElement!=a,t=f.userAgent.toLowerCase(),i=f.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),r=i?/mac/.test(i):/mac/.test(t),s=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),d=!1,u=[0,0,0],v=null;if(typeof f.plugins!=a&&typeof f.plugins[l]==o)!(v=f.plugins[l].description)||typeof f.mimeTypes!=a&&f.mimeTypes[c]&&!f.mimeTypes[c].enabledPlugin||(m=!0,d=!1,v=v.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(v.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(v.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(v)?parseInt(v.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var E=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");E&&(v=E.GetVariable("$version"))&&(d=!0,v=v.split(" ")[1].split(","),u=[parseInt(v[0],10),parseInt(v[1],10),parseInt(v[2],10)])}catch(g){}return{w3:e,pv:u,wk:s,ie:d,win:n,mac:r}}();T.w3&&((typeof p.readyState!=a&&"complete"==p.readyState||typeof p.readyState==a&&(p.getElementsByTagName("body")[0]||p.body))&&R(),y||(typeof p.addEventListener!=a&&p.addEventListener("DOMContentLoaded",R,!1),T.ie&&T.win&&(p.attachEvent(u,function(){"complete"==p.readyState&&(p.detachEvent(u,arguments.callee),R())}),h==top&&function(){if(!y){try{p.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}R()}}()),T.wk&&function(){y||(/loaded|complete/.test(p.readyState)?R():setTimeout(arguments.callee,0))}(),C(R)));function R(){if(!y){try{var e=p.getElementsByTagName("body")[0].appendChild(V("span"));e.parentNode.removeChild(e)}catch(n){return}y=!0;for(var t=v.length,i=0;i<t;i++)v[i]()}}function O(e){y?e():v[v.length]=e}function C(e){if(typeof h.addEventListener!=a)h.addEventListener("load",e,!1);else if(typeof p.addEventListener!=a)p.addEventListener("load",e,!1);else if(typeof h.attachEvent!=a)!function(e,t,i){e.attachEvent(t,i),_[_.length]=[e,t,i]}(h,"onload",e);else if("function"==typeof h.onload){var t=h.onload;h.onload=function(){t(),e()}}else h.onload=e}function P(){var e=E.length;if(e>0)for(var t=0;t<e;t++){var i=E[t].id,n=E[t].callbackFn,r={success:!1,id:i};if(T.pv[0]>0){var s=B(i);if(s)if(!U(E[t].swfVersion)||T.wk&&T.wk<312)if(E[t].expressInstall&&A()){var o={};o.data=E[t].expressInstall,o.width=s.getAttribute("width")||"0",o.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(o.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(o.align=s.getAttribute("align"));for(var l={},c=s.getElementsByTagName("param"),d=c.length,u=0;u<d;u++)"movie"!=c[u].getAttribute("name").toLowerCase()&&(l[c[u].getAttribute("name")]=c[u].getAttribute("value"));I(o,l,i,n)}else x(s),n&&n(r);else j(i,!0),n&&(r.success=!0,r.ref=w(i),n(r))}else if(j(i,!0),n){var h=w(i);h&&typeof h.SetVariable!=a&&(r.success=!0,r.ref=h),n(r)}}}function w(e){var t=null,i=B(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=a)t=i;else{var n=i.getElementsByTagName(o)[0];n&&(t=n)}return t}function A(){return!b&&U("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function I(r,s,o,l){b=!0,i=l||null,n={success:!1,id:o};var c=B(o);if(c){"OBJECT"==c.nodeName?(e=M(c),t=null):(e=c,t=o),r.id=d,(typeof r.width==a||!/%$/.test(r.width)&&parseInt(r.width,10)<310)&&(r.width="310"),(typeof r.height==a||!/%$/.test(r.height)&&parseInt(r.height,10)<137)&&(r.height="137"),p.title=p.title.slice(0,47)+" - Flash Player Installation";var u=T.ie&&T.win?"ActiveX":"PlugIn",f="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+u+"&MMdoctitle="+p.title;if(typeof s.flashvars!=a?s.flashvars+="&"+f:s.flashvars=f,T.ie&&T.win&&4!=c.readyState){var m=V("div");o+="SWFObjectNew",m.setAttribute("id",o),c.parentNode.insertBefore(m,c),c.style.display="none",function(){4==c.readyState?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()}D(r,s,o)}}function x(e){if(T.ie&&T.win&&4!=e.readyState){var t=V("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(M(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(M(e),e)}function M(e){var t=V("div");if(T.win&&T.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(o)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,s=0;s<r;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||t.appendChild(n[s].cloneNode(!0))}}return t}function D(e,t,i){var n,r=B(i);if(T.wk&&T.wk<312)return n;if(r)if(typeof e.id==a&&(e.id=i),T.ie&&T.win){var s="";for(var l in e)e[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?t.movie=e[l]:"styleclass"==l.toLowerCase()?s+=' class="'+e[l]+'"':"classid"!=l.toLowerCase()&&(s+=" "+l+'="'+e[l]+'"'));var d="";for(var u in t)t[u]!=Object.prototype[u]&&(d+='<param name="'+u+'" value="'+t[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+d+"</object>",g[g.length]=e.id,n=B(e.id)}else{var h=V(o);for(var p in h.setAttribute("type",c),e)e[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?h.setAttribute("class",e[p]):"classid"!=p.toLowerCase()&&h.setAttribute(p,e[p]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&N(h,f,t[f]);r.parentNode.replaceChild(h,r),n=h}return n}function N(e,t,i){var n=V("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function k(e){var t=B(e);t&&"OBJECT"==t.nodeName&&(T.ie&&T.win?(t.style.display="none",function(){4==t.readyState?L(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function L(e){var t=B(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function B(e){var t=null;try{t=p.getElementById(e)}catch(i){}return t}function V(e){return p.createElement(e)}function U(e){var t=T.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function F(e,t,i,n){if(!T.ie||!T.mac){var l=p.getElementsByTagName("head")[0];if(l){var c=i&&"string"==typeof i?i:"screen";if(n&&(r=null,s=null),!r||s!=c){var d=V("style");d.setAttribute("type","text/css"),d.setAttribute("media",c),r=l.appendChild(d),T.ie&&T.win&&typeof p.styleSheets!=a&&p.styleSheets.length>0&&(r=p.styleSheets[p.styleSheets.length-1]),s=c}T.ie&&T.win?r&&typeof r.addRule==o&&r.addRule(e,t):r&&typeof p.createTextNode!=a&&r.appendChild(p.createTextNode(e+" {"+t+"}"))}}}function j(e,t){if(S){var i=t?"visible":"hidden";y&&B(e)?B(e).style.visibility=i:F("#"+e,"visibility:"+i)}}function H(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=a?encodeURIComponent(e):e}T.ie&&T.win&&window.attachEvent("onunload",function(){for(var e=_.length,t=0;t<e;t++)_[t][0].detachEvent(_[t][1],_[t][2]);for(var i=g.length,n=0;n<i;n++)k(g[n]);for(var r in T)T[r]=null;for(var s in T=null,swfobject)swfobject[s]=null;swfobject=null});return{registerObject:function(e,t,i,n){if(T.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=i,r.callbackFn=n,E[E.length]=r,j(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(T.w3)return w(e)},embedSWF:function(e,t,i,n,r,s,l,c,d,u){var h={success:!1,id:t};T.w3&&!(T.wk&&T.wk<312)&&e&&t&&i&&n&&r?(j(t,!1),O(function(){i+="",n+="";var p={};if(d&&typeof d===o)for(var f in d)p[f]=d[f];p.data=e,p.width=i,p.height=n;var m={};if(c&&typeof c===o)for(var v in c)m[v]=c[v];if(l&&typeof l===o)for(var E in l)typeof m.flashvars!=a?m.flashvars+="&"+E+"="+l[E]:m.flashvars=E+"="+l[E];if(U(r)){var g=D(p,m,t);p.id==t&&j(t,!0),h.success=!0,h.ref=g}else{if(s&&A())return p.data=s,void I(p,m,t,u);j(t,!0)}u&&u(h)})):u&&u(h)},switchOffAutoHideShow:function(){S=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:U,createSWF:function(e,t,i){return T.w3?D(e,t,i):undefined},showExpressInstall:function(e,t,i,n){T.w3&&A()&&I(e,t,i,n)},removeSWF:function(e){T.w3&&k(e)},createCSS:function(e,t,i,n){T.w3&&F(e,t,i,n)},addDomLoadEvent:O,addLoadEvent:C,getQueryParamValue:function(e){var t=p.location.search||p.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return H(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return H(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(b){var r=B(d);r&&e&&(r.parentNode.replaceChild(e,r),t&&(j(t,!0),T.ie&&T.win&&(e.style.display="block")),i&&i(n)),b=!1}}}}();!function(){if(void 0!==window&&!window.WebSocket){var e=window.console;e&&e.log&&e.error||(e={log:function(){},error:function(){}}),swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,i,n,r){var s=this;s.__id=WebSocket.__nextId++,WebSocket.__instances[s.__id]=s,s.readyState=WebSocket.CONNECTING,s.bufferedAmount=0,s.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(s.__id,e,t,i||null,n||0,r||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0||(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t,i){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,i){if(e in this.__events)for(var n=this.__events[e],r=n.length-1;r>=0;--r)if(n[r]===t){n.splice(r,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],i=0;i<t.length;++i)t[i](e);var n=this["on"+e.type];n&&n(e)},WebSocket.prototype.__handleEvent=function(e){var t;if("readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol),"open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var i=decodeURIComponent(e.message);t=this.__createMessageEvent("message",i)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var i=document.createEvent("MessageEvent");return i.initMessageEvent("message",!1,!1,t,null,null,window,null),i}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var i=document.createElement("div");i.id="webSocketFlash",t.appendChild(i),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}else e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),i=0;i<t.length;++i)WebSocket.__instances[t[i].webSocketId].__handleEvent(t[i])}catch(n){e.error(n)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(e&&e.enabledPlugin&&e.enabledPlugin.filename)&&!!e.enabledPlugin.filename.match(/flashlite/i)},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):e.error("Flash Player >= 10.0.0 is required.")}}(),function(e,t,i){function n(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function r(){}e.XHR=n,t.util.inherit(n,t.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(e){for(var i=[],n=0,r=e.length;n<r;n++)i.push(t.parser.encodePacket(e[n]));this.send(t.parser.encodePayload(i))},n.prototype.send=function(e){return this.post(e),this},n.prototype.post=function(e){var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),i.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=r,t.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=r,t.posting=!1,200==this.status?t.socket.setBuffer(!1):t.onClose())},this.sendXHR.send(e)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(e){var i=t.util.request(this.socket.isXDomain()),n=t.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(e||"GET",this.prepareUrl()+n,!0),"POST"==e)try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch(r){}return i},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(e,i){try{if(t.util.request(i))return!0}catch(n){}return!1},n.xdomainCheck=function(){return n.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function i(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=i,t.util.inherit(i,t.Transport.XHR),i.prototype.name="htmlfile",i.prototype.get=function(){this.doc=new ActiveXObject("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var i=this,n=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+n,t.util.on(window,"unload",function(){i.destroy()})},i.prototype._=function(e,t){this.onData(e);try{var i=t.getElementsByTagName("script")[0];i.parentNode.removeChild(i)}catch(n){}},i.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},i.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},i.check=function(){if("ActiveXObject"in window)try{return new ActiveXObject("htmlfile")&&t.Transport.XHR.check()}catch(e){}return!1},i.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,i){function n(){t.Transport.XHR.apply(this,arguments)}function r(){}e["xhr-polling"]=n,t.util.inherit(n,t.Transport.XHR),t.util.merge(n,t.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.open=function(){return t.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){if(this.open){var e=this;this.xhr=this.request(),i.XDomainRequest&&this.xhr instanceof XDomainRequest?this.xhr.onload=this.xhr.onerror=function(){this.onload=r,e.onData(this.responseText),e.get()}:this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=r,200==this.status?(e.onData(this.responseText),e.get()):e.onClose())},this.xhr.send(null)}},n.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=r;try{this.xhr.abort()}catch(e){}this.xhr=null}},n.prototype.ready=function(e,i){var n=this;t.util.defer(function(){i.call(n)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,i){var n=i.document&&"MozAppearance"in i.document.documentElement.style;function r(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var i=this;t.j.push(function(e){i._(e)})}e["jsonp-polling"]=r,t.util.inherit(r,t.Transport["xhr-polling"]),r.prototype.name="jsonp-polling",r.prototype.post=function(e){var i=this,n=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var r,s=document.createElement("form"),a=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=o,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}function l(){c(),i.socket.setBuffer(!1)}function c(){i.iframe&&i.form.removeChild(i.iframe);try{r=document.createElement('<iframe name="'+i.iframeId+'">')}catch(e){(r=document.createElement("iframe")).name=i.iframeId}r.id=i.iframeId,i.form.appendChild(r),i.iframe=r}this.form.action=this.prepareUrl()+n,c(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(d){}this.iframe.attachEvent?r.onreadystatechange=function(){"complete"==i.iframe.readyState&&l()}:this.iframe.onload=l,this.socket.setBuffer(!0)},r.prototype.get=function(){var e=this,i=document.createElement("script"),r=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),i.async=!0,i.src=this.prepareUrl()+r,i.onerror=function(){e.onClose()};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s),this.script=i,n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},r.prototype.ready=function(e,i){var r=this;if(!n)return i.call(this);t.util.load(function(){i.call(r)})},r.check=function(){return"document"in i},r.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,r,s,a,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;i<s;i+=1)a[i]=str(i,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(r=str(n=rep[i],l))&&a.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&a.push(quote(n)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,n,r=e[t];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&((n=walk(r,i))!==undefined?r[i]=n:delete r[i]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var base64=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={},n=0;n<64;)i[t.charAt(n)]=n,n++;return{encode:function(e){for(var i,n=0,r=0,s=e+"\0\0",a=s.length-2,o=new Array((a+2)/3<<2);n<a;)i=(255&s.charCodeAt(n++))<<16|(255&s.charCodeAt(n++))<<8|255&s.charCodeAt(n++),o[r++]=t.charAt(i>>18&63),o[r++]=t.charAt(i>>12&63),o[r++]=t.charAt(i>>6&63),o[r++]=t.charAt(63&i);for(;n>a;)o[--r]="=",n--;return o.join("")},decode:function(e){for(var t,n=0,r=0,s=e.replace(/[^A-Za-z0-9\+\/]/g,"")+"AAA",a=s.length-3,o=new Array(3*(a+3>>2)),l=String.fromCharCode;n<a;)t=i[s.charAt(n++)]<<18|i[s.charAt(n++)]<<12|i[s.charAt(n++)]<<6|i[s.charAt(n++)],o[r++]=l(t>>16&255),o[r++]=l(t>>8&255),o[r++]=l(255&t);return o.length=r-n+a,o.join("")}}}();for(bpe=0,mask=0,radix=mask+1,digitsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_=!@#$%^&*()[]{}|;:,.<>/?`~ \\'\"+-",bpe=0;1<<bpe+1>1<<bpe;bpe++);function findPrimes(e){var t,i,n,r;for(i=new Array(e),t=0;t<e;t++)i[t]=0;for(i[0]=2,n=0;i[n]<e;){for(t=i[n]*i[n];t<e;t+=i[n])i[t]=1;for(i[++n]=i[n-1]+1;i[n]<e&&i[i[n]];i[n]++);}for(r=new Array(n),t=0;t<n;t++)r[t]=i[t];return r}function millerRabinInt(e,t){return mr_x1.length!=e.length&&(mr_x1=dup(e),mr_r=dup(e),mr_a=dup(e)),copyInt_(mr_a,t),millerRabin(e,mr_a)}function millerRabin(e,t){var i,n,r,s;for(mr_x1.length!=e.length&&(mr_x1=dup(e),mr_r=dup(e),mr_a=dup(e)),copy_(mr_a,t),copy_(mr_r,e),copy_(mr_x1,e),addInt_(mr_r,-1),addInt_(mr_x1,-1),r=0,i=0;i<mr_r.length;i++)for(n=1;n<mask;n<<=1)e[i]&n?(s=r<mr_r.length+bpe?r:0,i=mr_r.length,n=mask):r++;if(s&&rightShift_(mr_r,s),powMod_(mr_a,mr_r,e),!equalsInt(mr_a,1)&&!equals(mr_a,mr_x1)){for(n=1;n<=s-1&&!equals(mr_a,mr_x1);){if(squareMod_(mr_a,e),equalsInt(mr_a,1))return 0;n++}if(!equals(mr_a,mr_x1))return 0}return 1}function bitSize(e){var t,i,n;for(t=e.length-1;0==e[t]&&t>0;t--);for(i=0,n=e[t];n;n>>=1,i++);return i+=bpe*t}function expand(e,t){var i=int2bigInt(0,(e.length>t?e.length:t)*bpe,0);return copy_(i,e),i}function randTruePrime(e){var t=int2bigInt(0,e,0);return randTruePrime_(t,e),trim(t,1)}function randProbPrime(e){return randProbPrimeRounds(e,e>=600?2:e>=550?4:e>=500?5:e>=400?6:e>=350?7:e>=300?9:e>=250?12:e>=200?15:e>=150?18:e>=100?27:40)}function randProbPrimeRounds(e,t){var i,n,r;for(3e4,i=int2bigInt(0,e,0),0==primes.length&&(primes=findPrimes(3e4)),rpprb.length!=i.length&&(rpprb=dup(i));;){for(randBigInt_(i,e,0),i[0]|=1,r=0,n=0;n<primes.length&&primes[n]<=3e4;n++)if(0==modInt(i,primes[n])&&!equalsInt(i,primes[n])){r=1;break}for(n=0;n<t&&!r;n++){for(randBigInt_(rpprb,e,0);!greater(i,rpprb);)randBigInt_(rpprb,e,0);millerRabin(i,rpprb)||(r=1)}if(!r)return i}}function mod(e,t){var i=dup(e);return mod_(i,t),trim(i,1)}function addInt(e,t){var i=expand(e,e.length+1);return addInt_(i,t),trim(i,1)}function mult(e,t){var i=expand(e,e.length+t.length);return mult_(i,t),trim(i,1)}function powMod(e,t,i){var n=expand(e,i.length);return powMod_(n,trim(t,2),trim(i,2),0),trim(n,1)}function sub(e,t){var i=expand(e,e.length>t.length?e.length+1:t.length+1);return sub_(i,t),trim(i,1)}function add(e,t){var i=expand(e,e.length>t.length?e.length+1:t.length+1);return add_(i,t),trim(i,1)}function inverseMod(e,t){var i=expand(e,t.length);return inverseMod_(i,t)?trim(i,1):null}function multMod(e,t,i){var n=expand(e,i.length);return multMod_(n,t,i),trim(n,1)}function randTruePrime_(e,t){var i,n,r,s,a,o,l,c,d;if(0==primes.length&&(primes=findPrimes(3e4)),0==pows.length)for(pows=new Array(512),r=0;r<512;r++)pows[r]=Math.pow(2,r/511-1);if(.1,20,recLimit=20,s_i2.length!=e.length&&(s_i2=dup(e),s_R=dup(e),s_n1=dup(e),s_r2=dup(e),s_d=dup(e),s_x1=dup(e),s_x2=dup(e),s_b=dup(e),s_n=dup(e),s_i=dup(e),s_rm=dup(e),s_q=dup(e),s_a=dup(e),s_aa=dup(e)),t<=recLimit){for(i=(1<<(t+2>>1))-1,copyInt_(e,0),n=1;n;)for(n=0,e[0]=1|1<<t-1|Math.floor(Math.random()*(1<<t)),r=1;r<primes.length&&(primes[r]&i)==primes[r];r++)if(0==e[0]%primes[r]){n=1;break}carry_(e)}else{if(a=.1*t*t,t>40)for(s=1;t-t*s<=20;)s=pows[Math.floor(512*Math.random())];else s=.5;for(d=Math.floor(s*t)+1,randTruePrime_(s_q,d),copyInt_(s_i2,0),s_i2[Math.floor((t-2)/bpe)]|=1<<(t-2)%bpe,divide_(s_i2,s_q,s_i,s_rm),l=bitSize(s_i);;){for(;randBigInt_(s_R,l,0),!greater(s_i,s_R););for(addInt_(s_R,1),add_(s_R,s_i),copy_(s_n,s_q),mult_(s_n,s_R),multInt_(s_n,2),addInt_(s_n,1),copy_(s_r2,s_R),multInt_(s_r2,2),o=0,r=0;r<primes.length&&primes[r]<a;r++)if(0==modInt(s_n,primes[r])&&!equalsInt(s_n,primes[r])){o=1;break}if(o||millerRabinInt(s_n,2)||(o=1),!o){for(addInt_(s_n,-3),r=s_n.length-1;0==s_n[r]&&r>0;r--);for(c=0,w=s_n[r];w;w>>=1,c++);for(c+=bpe*r;randBigInt_(s_a,c,0),!greater(s_n,s_a););if(addInt_(s_n,3),addInt_(s_a,2),copy_(s_b,s_a),copy_(s_n1,s_n),addInt_(s_n1,-1),powMod_(s_b,s_n1,s_n),addInt_(s_b,-1),isZero(s_b)&&(copy_(s_b,s_a),powMod_(s_b,s_r2,s_n),addInt_(s_b,-1),copy_(s_aa,s_n),copy_(s_d,s_b),GCD_(s_d,s_n),equalsInt(s_d,1)))return void copy_(e,s_aa)}}}}function randBigInt(e,t){var i;return randBigInt_(i=int2bigInt(0,0,Math.floor((e-1)/bpe)+2),e,t),i}function randBigInt_(e,t,i){var n,r;for(n=0;n<e.length;n++)e[n]=0;for(r=Math.floor((t-1)/bpe)+1,n=0;n<r;n++)e[n]=Math.floor(Math.random()*(1<<bpe-1));e[r-1]&=(2<<(t-1)%bpe)-1,1==i&&(e[r-1]|=1<<(t-1)%bpe)}function GCD(e,t){var i;return GCD_(i=dup(e),dup(t)),i}function GCD_(e,i){var n,r,s,a,o,l,c,d,u;for(T.length!=e.length&&(T=dup(e)),u=1;u;){for(u=0,n=1;n<i.length;n++)if(i[n]){u=1;break}if(!u)break;for(n=e.length;!e[n]&&n>=0;n--);for(r=e[n],s=i[n],a=1,o=0,l=0,c=1;s+l&&s+c&&(d=Math.floor((r+a)/(s+l)),qp=Math.floor((r+o)/(s+c)),d==qp);)t=a-d*l,a=l,l=t,t=o-d*c,o=c,c=t,t=r-d*s,r=s,s=t;o?(copy_(T,e),linComb_(e,i,a,o),linComb_(i,T,c,l)):(mod_(e,i),copy_(T,e),copy_(e,i),copy_(i,T))}if(0!=i[0])for(t=modInt(e,i[0]),copyInt_(e,i[0]),i[0]=t;i[0];)e[0]%=i[0],t=e[0],e[0]=i[0],i[0]=t}function inverseMod_(e,t){var i=1+2*Math.max(e.length,t.length);if(!(1&e[0]||1&t[0]))return copyInt_(e,0),0;for(eg_u.length!=i&&(eg_u=new Array(i),eg_v=new Array(i),eg_A=new Array(i),eg_B=new Array(i),eg_C=new Array(i),eg_D=new Array(i)),copy_(eg_u,e),copy_(eg_v,t),copyInt_(eg_A,1),copyInt_(eg_B,0),copyInt_(eg_C,0),copyInt_(eg_D,1);;){for(;!(1&eg_u[0]);)halve_(eg_u),1&eg_A[0]||1&eg_B[0]?(add_(eg_A,t),halve_(eg_A),sub_(eg_B,e),halve_(eg_B)):(halve_(eg_A),halve_(eg_B));for(;!(1&eg_v[0]);)halve_(eg_v),1&eg_C[0]||1&eg_D[0]?(add_(eg_C,t),halve_(eg_C),sub_(eg_D,e),halve_(eg_D)):(halve_(eg_C),halve_(eg_D));if(greater(eg_v,eg_u)?(sub_(eg_v,eg_u),sub_(eg_C,eg_A),sub_(eg_D,eg_B)):(sub_(eg_u,eg_v),sub_(eg_A,eg_C),sub_(eg_B,eg_D)),equalsInt(eg_u,0))return negative(eg_C)&&add_(eg_C,t),copy_(e,eg_C),equalsInt(eg_v,1)?1:(copyInt_(e,0),0)}}function inverseModInt(e,t){for(var i=1,n=0;;){if(1==e)return i;if(0==e)return 0;if(n-=i*Math.floor(t/e),1==(t%=e))return n;if(0==t)return 0;i-=n*Math.floor(e/t),e%=t}}function inverseModInt_(e,t){return inverseModInt(e,t)}function eGCD_(e,t,i,n,r){var s=0,a=Math.max(e.length,t.length);for(eg_u.length!=a&&(eg_u=new Array(a),eg_A=new Array(a),eg_B=new Array(a),eg_C=new Array(a),eg_D=new Array(a));!(1&e[0]||1&t[0]);)halve_(e),halve_(t),s++;for(copy_(eg_u,e),copy_(i,t),copyInt_(eg_A,1),copyInt_(eg_B,0),copyInt_(eg_C,0),copyInt_(eg_D,1);;){for(;!(1&eg_u[0]);)halve_(eg_u),1&eg_A[0]||1&eg_B[0]?(add_(eg_A,t),halve_(eg_A),sub_(eg_B,e),halve_(eg_B)):(halve_(eg_A),halve_(eg_B));for(;!(1&i[0]);)halve_(i),1&eg_C[0]||1&eg_D[0]?(add_(eg_C,t),halve_(eg_C),sub_(eg_D,e),halve_(eg_D)):(halve_(eg_C),halve_(eg_D));if(greater(i,eg_u)?(sub_(i,eg_u),sub_(eg_C,eg_A),sub_(eg_D,eg_B)):(sub_(eg_u,i),sub_(eg_A,eg_C),sub_(eg_B,eg_D)),equalsInt(eg_u,0))return negative(eg_C)&&(add_(eg_C,t),sub_(eg_D,e)),multInt_(eg_D,-1),copy_(n,eg_C),copy_(r,eg_D),void leftShift_(i,s)}}function negative(e){return e[e.length-1]>>bpe-1&1}function greaterShift(e,t,i){var n,r=e.length,s=t.length;for(k=r+i<s?r+i:s,n=s-1-i;n<r&&n>=0;n++)if(e[n]>0)return 1;for(n=r-1+i;n<s;n++)if(t[n]>0)return 0;for(n=k-1;n>=i;n--){if(e[n-i]>t[n])return 1;if(e[n-i]<t[n])return 0}return 0}function greater(e,t){var i,n=e.length<t.length?e.length:t.length;for(i=e.length;i<t.length;i++)if(t[i])return 0;for(i=t.length;i<e.length;i++)if(e[i])return 1;for(i=n-1;i>=0;i--){if(e[i]>t[i])return 1;if(e[i]<t[i])return 0}return 0}function divide_(e,t,i,n){var r,s,a,o,l,c,d,u;for(copy_(n,e),s=t.length;0==t[s-1];s--);for(u=t[s-1],d=0;u;d++)u>>=1;for(leftShift_(t,d=bpe-d),leftShift_(n,d),r=n.length;0==n[r-1]&&r>s;r--);for(copyInt_(i,0);!greaterShift(t,n,r-s);)subShift_(n,t,r-s),i[r-s]++;for(a=r-1;a>=s;a--){for(n[a]==t[s-1]?i[a-s]=mask:i[a-s]=Math.floor((n[a]*radix+n[a-1])/t[s-1]);c=(l=(s>1?t[s-2]:0)*i[a-s])>>bpe,l&=mask,c=(o=c+i[a-s]*t[s-1])>>bpe,o&=mask,c==n[a]?o==n[a-1]?l>(a>1?n[a-2]:0):o>n[a-1]:c>n[a];)i[a-s]--;linCombShift_(n,t,-i[a-s],a-s),negative(n)&&(addShift_(n,t,a-s),i[a-s]--)}rightShift_(t,d),rightShift_(n,d)}function carry_(e){var t,i,n,r;for(i=e.length,n=0,t=0;t<i;t++)r=0,(n+=e[t])<0&&(n+=(r=-(n>>bpe))*radix),e[t]=n&mask,n=(n>>bpe)-r}function modInt(e,t){var i,n=0;for(i=e.length-1;i>=0;i--)n=(n*radix+e[i])%t;return n}function int2bigInt(e,t,i){var n;return n=i>(n=Math.ceil(t/bpe)+1)?i:n,buff=new Array(n),copyInt_(buff,e),buff}function str2bigInt(e,t,i){var n,r,s,a,o,l=e.length;if(-1==t){for(s=new Array(0);;){for(a=new Array(s.length+1),r=0;r<s.length;r++)a[r+1]=s[r];if(a[0]=parseInt(e,10),s=a,(n=e.indexOf(",",0))<1)break;if(0==(e=e.substring(n+1)).length)break}return s.length<i?(copy_(a=new Array(i),s),a):s}for(s=int2bigInt(0,t*l,0),r=0;r<l&&(n=digitsStr.indexOf(e.substring(r,r+1),0),t<=36&&n>=36&&(n-=26),!(n>=t||n<0));r++)multInt_(s,t),addInt_(s,n);for(l=s.length;l>0&&!s[l-1];l--);for(l=i>l+1?i:l+1,a=new Array(l),o=l<s.length?l:s.length,r=0;r<o;r++)a[r]=s[r];for(;r<l;r++)a[r]=0;return a}function equalsInt(e,t){var i;if(e[0]!=t)return 0;for(i=1;i<e.length;i++)if(e[i])return 0;return 1}function equals(e,t){var i,n=e.length<t.length?e.length:t.length;for(i=0;i<n;i++)if(e[i]!=t[i])return 0;if(e.length>t.length){for(;i<e.length;i++)if(e[i])return 0}else for(;i<t.length;i++)if(t[i])return 0;return 1}function isZero(e){var t;for(t=0;t<e.length;t++)if(e[t])return 0;return 1}function bigInt2str(e,t){var i,n,r="";if(s6.length!=e.length?s6=dup(e):copy_(s6,e),-1==t){for(i=e.length-1;i>0;i--)r+=e[i]+",";r+=e[0]}else for(;!isZero(s6);)n=divInt_(s6,t),r=digitsStr.substring(n,n+1)+r;return 0==r.length&&(r="0"),r}function dup(e){return buff=new Array(e.length),copy_(buff,e),buff}function copy_(e,t){var i,n=e.length<t.length?e.length:t.length;for(i=0;i<n;i++)e[i]=t[i];for(i=n;i<e.length;i++)e[i]=0}function copyInt_(e,t){var i,n;for(n=t,i=0;i<e.length;i++)e[i]=n&mask,n>>=bpe}function addInt_(e,t){var i,n,r,s;for(e[0]+=t,n=e.length,r=0,i=0;i<n;i++)if(s=0,(r+=e[i])<0&&(r+=(s=-(r>>bpe))*radix),e[i]=r&mask,!(r=(r>>bpe)-s))return}function rightShift_(e,t){var i,n=Math.floor(t/bpe);if(n){for(i=0;i<e.length-n;i++)e[i]=e[i+n];for(;i<e.length;i++)e[i]=0;t%=bpe}for(i=0;i<e.length-1;i++)e[i]=mask&(e[i+1]<<bpe-t|e[i]>>t);e[i]>>=t}function halve_(e){var t;for(t=0;t<e.length-1;t++)e[t]=mask&(e[t+1]<<bpe-1|e[t]>>1);e[t]=e[t]>>1|e[t]&radix>>1}function leftShift_(e,t){var i,n=Math.floor(t/bpe);if(n){for(i=e.length;i>=n;i--)e[i]=e[i-n];for(;i>=0;i--)e[i]=0;t%=bpe}if(t){for(i=e.length-1;i>0;i--)e[i]=mask&(e[i]<<t|e[i-1]>>bpe-t);e[i]=mask&e[i]<<t}}function multInt_(e,t){var i,n,r,s;if(t)for(n=e.length,r=0,i=0;i<n;i++)s=0,(r+=e[i]*t)<0&&(r+=(s=-(r>>bpe))*radix),e[i]=r&mask,r=(r>>bpe)-s}function divInt_(e,t){var i,n,r=0;for(i=e.length-1;i>=0;i--)n=r*radix+e[i],e[i]=Math.floor(n/t),r=n%t;return r}function linComb_(e,t,i,n){var r,s,a,o;for(a=e.length<t.length?e.length:t.length,o=e.length,s=0,r=0;r<a;r++)s+=i*e[r]+n*t[r],e[r]=s&mask,s>>=bpe;for(r=a;r<o;r++)s+=i*e[r],e[r]=s&mask,s>>=bpe}function linCombShift_(e,t,i,n){var r,s,a,o;for(a=e.length<n+t.length?e.length:n+t.length,o=e.length,s=0,r=n;r<a;r++)s+=e[r]+i*t[r-n],e[r]=s&mask,s>>=bpe;for(r=a;s&&r<o;r++)s+=e[r],e[r]=s&mask,s>>=bpe}function addShift_(e,t,i){var n,r,s,a;for(s=e.length<i+t.length?e.length:i+t.length,a=e.length,r=0,n=i;n<s;n++)r+=e[n]+t[n-i],e[n]=r&mask,r>>=bpe;for(n=s;r&&n<a;n++)r+=e[n],e[n]=r&mask,r>>=bpe}function subShift_(e,t,i){var n,r,s,a;for(s=e.length<i+t.length?e.length:i+t.length,a=e.length,r=0,n=i;n<s;n++)r+=e[n]-t[n-i],e[n]=r&mask,r>>=bpe;for(n=s;r&&n<a;n++)r+=e[n],e[n]=r&mask,r>>=bpe}function sub_(e,t){var i,n,r;for(r=e.length<t.length?e.length:t.length,n=0,i=0;i<r;i++)n+=e[i]-t[i],e[i]=n&mask,n>>=bpe;for(i=r;n&&i<e.length;i++)n+=e[i],e[i]=n&mask,n>>=bpe}function add_(e,t){var i,n,r;for(r=e.length<t.length?e.length:t.length,n=0,i=0;i<r;i++)n+=e[i]+t[i],e[i]=n&mask,n>>=bpe;for(i=r;n&&i<e.length;i++)n+=e[i],e[i]=n&mask,n>>=bpe}function mult_(e,t){var i;for(ss.length!=2*e.length&&(ss=new Array(2*e.length)),copyInt_(ss,0),i=0;i<t.length;i++)t[i]&&linCombShift_(ss,e,t[i],i);copy_(e,ss)}function mod_(e,t){s4.length!=e.length?s4=dup(e):copy_(s4,e),s5.length!=e.length&&(s5=dup(e)),divide_(s4,t,s5,e)}function multMod_(e,t,i){var n;for(s0.length!=2*e.length&&(s0=new Array(2*e.length)),copyInt_(s0,0),n=0;n<t.length;n++)t[n]&&linCombShift_(s0,e,t[n],n);mod_(s0,i),copy_(e,s0)}function squareMod_(e,t){var i,n,r,s,a;for(s=e.length;s>0&&!e[s-1];s--);for(a=s>t.length?2*s:2*t.length,s0.length!=a&&(s0=new Array(a)),copyInt_(s0,0),i=0;i<s;i++){for(r=s0[2*i]+e[i]*e[i],s0[2*i]=r&mask,r>>=bpe,n=i+1;n<s;n++)r=s0[i+n]+2*e[i]*e[n]+r,s0[i+n]=r&mask,r>>=bpe;s0[i+s]=r}mod_(s0,t),copy_(e,s0)}function trim(e,t){var i,n;for(i=e.length;i>0&&!e[i-1];i--);return copy_(n=new Array(i+t),e),n}function powMod_(e,t,i){var n,r,s,a;if(s7.length!=i.length&&(s7=dup(i)),0!=(1&i[0])){for(copyInt_(s7,0),s=i.length;s>0&&!i[s-1];s--);for(a=radix-inverseModInt(modInt(i,radix),radix),s7[s]=1,multMod_(e,s7,i),s3.length!=e.length?s3=dup(e):copy_(s3,e),n=t.length-1;n>0&!t[n];n--);if(0!=t[n]){for(r=1<<bpe-1;r&&!(t[n]&r);r>>=1);for(;;){if(!(r>>=1)){if(--n<0)return void mont_(e,one,i,a);r=1<<bpe-1}mont_(e,e,i,a),r&t[n]&&mont_(e,s3,i,a)}}else copyInt_(e,1)}else for(copy_(s7,e),copyInt_(e,1);!equalsInt(t,0);)1&t[0]&&multMod_(e,s7,i),divInt_(t,2),squareMod_(s7,i)}function mont_(e,t,i,n){var r,s,a,o,l,c,d=i.length,u=t.length;for(sa.length!=d&&(sa=new Array(d)),copyInt_(sa,0);d>0&&0==i[d-1];d--);for(;u>0&&0==t[u-1];u--);for(c=sa.length-1,r=0;r<d;r++){for(a=(l=sa[0]+e[r]*t[0])+(o=(l&mask)*n&mask)*i[0]>>bpe,l=e[r],s=1;s<u-4;)a+=sa[s]+o*i[s]+l*t[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s]+l*t[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s]+l*t[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s]+l*t[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s]+l*t[s],sa[s-1]=a&mask,a>>=bpe,s++;for(;s<u;)a+=sa[s]+o*i[s]+l*t[s],sa[s-1]=a&mask,a>>=bpe,s++;for(;s<d-4;)a+=sa[s]+o*i[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s],sa[s-1]=a&mask,a>>=bpe,s++,a+=sa[s]+o*i[s],sa[s-1]=a&mask,a>>=bpe,s++;for(;s<d;)a+=sa[s]+o*i[s],sa[s-1]=a&mask,a>>=bpe,s++;for(;s<c;)a+=sa[s],sa[s-1]=a&mask,a>>=bpe,s++;sa[s-1]=a&mask}greater(i,sa)||sub_(sa,i),copy_(e,sa)}bpe>>=1,mask=(1<<bpe)-1,radix=mask+1,one=int2bigInt(1,1,1),t=new Array(0),ss=t,s0=t,s1=t,s2=t,s3=t,s4=t,s5=t,s6=t,s7=t,T=t,sa=t,mr_x1=t,mr_r=t,mr_a=t,eg_v=t,eg_u=t,eg_A=t,eg_B=t,eg_C=t,eg_D=t,md_q1=t,md_q2=t,md_q3=t,md_r=t,md_r1=t,md_r2=t,md_tt=t,primes=t,pows=t,s_i=t,s_i2=t,s_R=t,s_rm=t,s_q=t,s_n1=t,s_a=t,s_r2=t,s_n=t,s_b=t,s_d=t,s_x1=t,s_x2=t,s_aa=t,rpprb=t;var blowfish=function(e){var t,i,n,r,s,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],l=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],c=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],d=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];function u(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function h(e,t){return(255&e.charCodeAt(t++))<<24|(255&e.charCodeAt(t++))<<16|(255&e.charCodeAt(t++))<<8|255&e.charCodeAt(t++)}function p(e,t){return u(h(e,0)^h(t,0))+u(h(e,4)^h(t,4))}function f(e){return(i[e>>24&255]+n[e>>16&255]^r[e>>8&255])+s[255&e]^0}function m(e){for(var i,n=0,r=h(e,0),s=h(e,4);n<16;)i=r^=t[n++],r=s^=f(r),s=i;return r^=t[n++],u(s^=t[n])+u(r)}function v(e){for(var i,n=17,r=h(e,0),s=h(e,4);n>1;)i=r^=t[n--],r=s^=f(r),s=i;return r^=t[n--],u(s^=t[n])+u(r)}function E(e){var u,p="\0\0\0\0\0\0\0\0";for(t=a.slice(),i=o.slice(),n=l.slice(),r=c.slice(),s=d.slice();e.length<72;)e+=e;for(u=0;u<18;)t[u]^=h(e,u<<2),u++;for(u=0;u<18;)p=m(p),t[u++]=h(p,0),t[u++]=h(p,4);for(u=0;u<256;)p=m(p),i[u++]=h(p,0),i[u++]=h(p,4);for(u=0;u<256;)p=m(p),n[u++]=h(p,0),n[u++]=h(p,4);for(u=0;u<256;)p=m(p),r[u++]=h(p,0),r[u++]=h(p,4);for(u=0;u<256;)p=m(p),s[u++]=h(p,0),s[u++]=h(p,4)}return{encrypt:function(e){var t,i,n,r=[],s=e.data||"",a=e.key||"\0",o=e.mode||"ecb",l=e.pchar||"";if(E(a),s=function(e){for(var t,i=0,n=e.length,r=String.fromCharCode,s=[];i<n;)(t=e.charCodeAt(i++))<128?s.push(r(t)):t<2048?s.push(r(t>>6&31|192,63&t|128)):t<65536?s.push(r(t>>12&15|224,t>>6&63|128,63&t|128)):t<2097152&&s.push(r(t>>18&7|240,t>>12&63|128,t>>6&63|128,63&t|128));return s.join("")}(s),s+=new Array((8-s.length%8)%8+1).join(l),"cbc"==o)for(n=e.iv||"\0\0\0\0\0\0\0\0",r.push(n),t=0;t<s.length;)i=m(p(s.substr(t,8),n)),r.push(i),n=i,t+=8;else for(t=0;t<s.length;)r.push(m(s.substr(t,8))),t+=8;return r.join("")},decrypt:function(e){var t,i,n,r=[],s=e.data||"",a=e.key||"\0",o=e.mode||"ecb",l=e.pchar||"";if(E(a),s+=new Array((8-s.length%8)%8+1).join("\0"),"cbc"==o)for(n=s.substr(0,8)||"\0\0\0\0\0\0\0\0",t=8;t<s.length;)i=s.substr(t,8),r.push(p(v(i),n)),n=i,t+=8;else for(t=0;t<s.length;)r.push(v(s.substr(t,8))),t+=8;return function(e){for(var t,i=0,n=e.length,r=String.fromCharCode,s=[];i<n;)0==(128&(t=e.charCodeAt(i++)))?s.push(r(255&t)):192==(224&t)?i<n&&s.push(r(t<<6&1984|63&e.charCodeAt(i++))):224==(240&t)?i+1<n&&s.push(r(t<<12&61440|e.charCodeAt(i++)<<6&4032|63&e.charCodeAt(i++))):240==(248&t)&&i+2<n&&s.push(r(t<<18&1835008|e.charCodeAt(i++)<<12&258048|e.charCodeAt(i++)<<6&4032|63&e.charCodeAt(i++)));return s.join("")}(s=r.join("").replace(new RegExp(l+"+$"),""))},mkIV:function(){return u(4294967296*Math.random())+u(4294967296*Math.random())}}}(),md5=function(e){var t=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],i=[3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745],n=""+new Array(64).join("\0");function r(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function s(e,t){return 255&e.charCodeAt(t++)|(255&e.charCodeAt(t++))<<8|(255&e.charCodeAt(t++))<<16|e.charCodeAt(t++)<<24}return{bin:function(e){var a,o,l,c,d,u,h,p,f,m=1732584193,v=4023233417,E=2562383102,g=271733878,_=new Array(16);for(e+=n.slice(0,64-(e.length+8)%64)+r(e.length<<3)+r(0),p=0;p<e.length;p+=64){for(f=0;f<16;f++)_[f]=s(e,p+(f<<2));for(a=m,o=v,l=E,c=g,f=0;f<64;f++)f<16?(d=o&l|~o&c,u=f):f<32?(d=c&o|~c&l,u=5*f+1&15):f<48?(d=o^l^c,u=3*f+5&15):(d=l^(o|~c),u=7*f&15),h=a+d+i[f]+_[u]|0,a=c,c=l,l=o,o=(h=h<<t[f]|h>>>32-t[f])+o|0;m=m+a|0,v=v+o|0,E=E+l|0,g=g+c|0}return r(m)+r(v)+r(E)+r(g)}}}();(function(){var e=void 0,t=this;function i(i,n){var r,s=i.split("."),a=t;!(s[0]in a)&&a.execScript&&a.execScript("var "+s[0]);for(;s.length&&(r=s.shift());)s.length||n===e?a=a[r]?a[r]:a[r]={}:a[r]=n}var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function r(e){var t,i,r,s,a,o,l,c,d,u,h=e.length,p=0,f=Number.POSITIVE_INFINITY;for(c=0;c<h;++c)e[c]>p&&(p=e[c]),e[c]<f&&(f=e[c]);for(t=1<<p,i=new(n?Uint32Array:Array)(t),r=1,s=0,a=2;r<=p;){for(c=0;c<h;++c)if(e[c]===r){for(o=0,l=s,d=0;d<r;++d)o=o<<1|1&l,l>>=1;for(u=r<<16|c,d=o;d<t;d+=a)i[d]=u;++s}++r,s<<=1,a<<=1}return[i,p,f]}function s(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=n?new Uint8Array(e):e,this.m=!1,this.i=o,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case a:this.b=32768,this.c=new(n?Uint8Array:Array)(32768+this.h+258);break;case o:this.b=0,this.c=new(n?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var a=0,o=1,l={t:a,s:o};s.prototype.k=function(){for(;!this.m;){var t=P(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var i=this.input,s=this.a,l=this.c,c=this.b,d=i.length,u=e,p=l.length,f=e;if(this.d=this.f=0,s+1>=d)throw Error("invalid uncompressed block header: LEN");if(u=i[s++]|i[s++]<<8,s+1>=d)throw Error("invalid uncompressed block header: NLEN");if(u===~(i[s++]|i[s++]<<8))throw Error("invalid uncompressed block header: length verify");if(s+u>i.length)throw Error("input buffer is broken");switch(this.i){case a:for(;c+u>l.length;){if(u-=f=p-c,n)l.set(i.subarray(s,s+f),c),c+=f,s+=f;else for(;f--;)l[c++]=i[s++];this.b=c,l=this.e(),c=this.b}break;case o:for(;c+u>l.length;)l=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(n)l.set(i.subarray(s,s+u),c),c+=u,s+=u;else for(;u--;)l[c++]=i[s++];this.a=s,this.b=c,this.c=l;break;case 1:this.j(R,C);break;case 2:var m,v,E,g,_=P(this,5)+257,y=P(this,5)+1,b=P(this,4)+4,S=new(n?Uint8Array:Array)(h.length),T=e,O=e,A=e,I=e,x=e;for(x=0;x<b;++x)S[h[x]]=P(this,3);if(!n)for(x=b,b=S.length;x<b;++x)S[h[x]]=0;for(m=r(S),T=new(n?Uint8Array:Array)(_+y),x=0,g=_+y;x<g;)switch(O=w(this,m)){case 16:for(I=3+P(this,2);I--;)T[x++]=A;break;case 17:for(I=3+P(this,3);I--;)T[x++]=0;A=0;break;case 18:for(I=11+P(this,7);I--;)T[x++]=0;A=0;break;default:A=T[x++]=O}v=r(n?T.subarray(0,_):T.slice(0,_)),E=r(n?T.subarray(_):T.slice(_)),this.j(v,E);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var c,d,u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=n?new Uint16Array(u):u,p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],f=n?new Uint16Array(p):p,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=n?new Uint8Array(m):m,E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],g=n?new Uint16Array(E):E,_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=n?new Uint8Array(_):_,b=new(n?Uint8Array:Array)(288);for(c=0,d=b.length;c<d;++c)b[c]=143>=c?8:255>=c?9:279>=c?7:8;var S,T,R=r(b),O=new(n?Uint8Array:Array)(30);for(S=0,T=O.length;S<T;++S)O[S]=5;var C=r(O);function P(e,t){for(var i,n=e.f,r=e.d,s=e.input,a=e.a,o=s.length;r<t;){if(a>=o)throw Error("input buffer is broken");n|=s[a++]<<r,r+=8}return i=n&(1<<t)-1,e.f=n>>>t,e.d=r-t,e.a=a,i}function w(e,t){for(var i,n,r=e.f,s=e.d,a=e.input,o=e.a,l=a.length,c=t[0],d=t[1];s<d&&!(o>=l);)r|=a[o++]<<s,s+=8;if((n=(i=c[r&(1<<d)-1])>>>16)>s)throw Error("invalid code length: "+n);return e.f=r>>n,e.d=s-n,e.a=o,65535&i}function A(e,t){var i,n;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),i=e[this.a++],n=e[this.a++],15&i){case I:this.method=I;break;default:throw Error("unsupported compression method")}if(0!=((i<<8)+n)%31)throw Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new s(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}s.prototype.j=function(e,t){var i=this.c,n=this.b;this.o=e;for(var r,s,a,o,l=i.length-258;256!==(r=w(this,e));)if(256>r)n>=l&&(this.b=n,i=this.e(),n=this.b),i[n++]=r;else for(o=f[s=r-257],0<v[s]&&(o+=P(this,v[s])),r=w(this,t),a=g[r],0<y[r]&&(a+=P(this,y[r])),n>=l&&(this.b=n,i=this.e(),n=this.b);o--;)i[n]=i[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},s.prototype.w=function(e,t){var i=this.c,n=this.b;this.o=e;for(var r,s,a,o,l=i.length;256!==(r=w(this,e));)if(256>r)n>=l&&(l=(i=this.e()).length),i[n++]=r;else for(o=f[s=r-257],0<v[s]&&(o+=P(this,v[s])),r=w(this,t),a=g[r],0<y[r]&&(a+=P(this,y[r])),n+o>l&&(l=(i=this.e()).length);o--;)i[n]=i[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},s.prototype.e=function(){var e,t,i=new(n?Uint8Array:Array)(this.b-32768),r=this.b-32768,s=this.c;if(n)i.set(s.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=s[e+32768];if(this.g.push(i),this.l+=i.length,n)s.set(s.subarray(r,r+32768));else for(e=0;32768>e;++e)s[e]=s[r+e];return this.b=32768,s},s.prototype.z=function(e){var t,i,r,s=this.input.length/this.a+1|0,a=this.input,o=this.c;return e&&("number"==typeof e.p&&(s=e.p),"number"==typeof e.u&&(s+=e.u)),2>s?i=(r=(a.length-this.a)/this.o[2]/2*258|0)<o.length?o.length+r:o.length<<1:i=o.length*s,n?(t=new Uint8Array(i)).set(o):t=o,this.c=t},s.prototype.n=function(){var e,t,i,r,s,a=0,o=this.c,l=this.g,c=new(n?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return n?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,i=l.length;t<i;++t)for(r=0,s=(e=l[t]).length;r<s;++r)c[a++]=e[r];for(t=32768,i=this.b;t<i;++t)c[a++]=o[t];return this.g=[],this.buffer=c},s.prototype.v=function(){var e,t=this.b;return n?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},A.prototype.k=function(){var e,t,i=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if("string"==typeof n){var r,s,a=n.split("");for(r=0,s=a.length;r<s;r++)a[r]=(255&a[r].charCodeAt(0))>>>0;n=a}for(var o,l=1,c=0,d=n.length,u=0;0<d;){d-=o=1024<d?1024:d;do{c+=l+=n[u++]}while(--o);l%=65521,c%=65521}if(t!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var I=8;i("Zlib.Inflate",A),i("Zlib.Inflate.prototype.decompress",A.prototype.k);var x,M,D,N,k={ADAPTIVE:l.s,BLOCK:l.t};if(Object.keys)x=Object.keys(k);else for(M in x=[],D=0,k)x[D++]=M;for(D=0,N=x.length;D<N;++D)i("Zlib.Inflate.BufferType."+(M=x[D]),k[M])}).call(this),window.epson||(window.epson={}),window.epson.ePOSDevice=ePOSDevice,window.epson.ePOSDeviceConfiguration=ePOSDeviceConfiguration}(window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,function(){"use strict";var e="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,t="undefined"==typeof window?{document:e,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,i=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function n(n,r){var s=[],a=0;if(n&&!r&&n instanceof i)return n;if(n)if("string"==typeof n){var o,l,c=n.trim();if(c.indexOf("<")>=0&&c.indexOf(">")>=0){var d="div";for(0===c.indexOf("<li")&&(d="ul"),0===c.indexOf("<tr")&&(d="tbody"),0!==c.indexOf("<td")&&0!==c.indexOf("<th")||(d="tr"),0===c.indexOf("<tbody")&&(d="table"),0===c.indexOf("<option")&&(d="select"),(l=e.createElement(d)).innerHTML=c,a=0;a<l.childNodes.length;a+=1)s.push(l.childNodes[a])}else for(o=r||"#"!==n[0]||n.match(/[ .<>:~]/)?(r||e).querySelectorAll(n.trim()):[e.getElementById(n.trim().split("#")[1])],a=0;a<o.length;a+=1)o[a]&&s.push(o[a])}else if(n.nodeType||n===t||n===e)s.push(n);else if(n.length>0&&n[0].nodeType)for(a=0;a<n.length;a+=1)s.push(n[a]);return new i(s)}function r(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}n.fn=i.prototype,n.Class=i,n.Dom7=i;var s={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===i.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var n=0;n<this.length;n+=1)(i=this[n]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];var r=i.getAttribute("data-"+e);return r||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var r=t[0],s=t[1],a=t[2],o=t[3];function l(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),n(t).is(s))a.apply(t,i);else for(var r=n(t).parents(),o=0;o<r.length;o+=1)n(r[o]).is(s)&&a.apply(r[o],i)}}function c(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"==typeof t[1]&&(r=(e=t)[0],a=e[1],o=e[2],s=void 0),o||(o=!1);for(var d,u=r.split(" "),h=0;h<this.length;h+=1){var p=this[h];if(s)for(d=0;d<u.length;d+=1){var f=u[d];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[f]||(p.dom7LiveListeners[f]=[]),p.dom7LiveListeners[f].push({listener:a,proxyListener:l}),p.addEventListener(f,l,o)}else for(d=0;d<u.length;d+=1){var m=u[d];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[m]||(p.dom7Listeners[m]=[]),p.dom7Listeners[m].push({listener:a,proxyListener:c}),p.addEventListener(m,c,o)}}return this},off:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=t[0],r=t[1],s=t[2],a=t[3];"function"==typeof t[1]&&(n=(e=t)[0],s=e[1],a=e[2],r=void 0),a||(a=!1);for(var o=n.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],d=0;d<this.length;d+=1){var u=this[d],h=void 0;if(!r&&u.dom7Listeners?h=u.dom7Listeners[c]:r&&u.dom7LiveListeners&&(h=u.dom7LiveListeners[c]),h&&h.length)for(var p=h.length-1;p>=0;p-=1){var f=h[p];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(u.removeEventListener(c,f.proxyListener,a),h.splice(p,1)):s||(u.removeEventListener(c,f.proxyListener,a),h.splice(p,1))}}return this},trigger:function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];for(var r=i[0].split(" "),s=i[1],a=0;a<r.length;a+=1)for(var o=r[a],l=0;l<this.length;l+=1){var c=this[l],d=void 0;try{d=new t.CustomEvent(o,{detail:s,bubbles:!0,cancelable:!0})}catch(u){(d=e.createEvent("Event")).initEvent(o,!0,!0),d.detail=s}c.dom7EventData=i.filter(function(e,t){return t>0}),c.dispatchEvent(d),c.dom7EventData=[],delete c.dom7EventData}return this},transitionEnd:function(e){var t,i=["webkitTransitionEnd","transitionend"],n=this;function r(s){if(s.target===this)for(e.call(this,s),t=0;t<i.length;t+=1)n.off(i[t],r)}if(e)for(t=0;t<i.length;t+=1)n.on(i[t],r);return this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var i=this[0],n=i.getBoundingClientRect(),r=e.body,s=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,o=i===t?t.scrollY:i.scrollTop,l=i===t?t.scrollX:i.scrollLeft;return{top:n.top+o-s,left:n.left+l-a}}return null},css:function(e,i){var n;if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return t.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=i;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(r){var s,a,o=this[0];if(!o||void 0===r)return!1;if("string"==typeof r){if(o.matches)return o.matches(r);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(r);if(o.msMatchesSelector)return o.msMatchesSelector(r);for(s=n(r),a=0;a<s.length;a+=1)if(s[a]===o)return!0;return!1}if(r===e)return o===e;if(r===t)return o===t;if(r.nodeType||r instanceof i){for(s=r.nodeType?[r]:r,a=0;a<s.length;a+=1)if(s[a]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,n=this.length;return new i(e>n-1?[]:e<0?(t=n+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var t,n=[],r=arguments.length;r--;)n[r]=arguments[r];for(var s=0;s<n.length;s+=1){t=n[s];for(var a=0;a<this.length;a+=1)if("string"==typeof t){var o=e.createElement("div");for(o.innerHTML=t;o.firstChild;)this[a].appendChild(o.firstChild)}else if(t instanceof i)for(var l=0;l<t.length;l+=1)this[a].appendChild(t[l]);else this[a].appendChild(t)}return this},prepend:function(t){var n,r;for(n=0;n<this.length;n+=1)if("string"==typeof t){var s=e.createElement("div");for(s.innerHTML=t,r=s.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(s.childNodes[r],this[n].childNodes[0])}else if(t instanceof i)for(r=0;r<t.length;r+=1)this[n].insertBefore(t[r],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&n(this[0].nextElementSibling).is(e)?new i([this[0].nextElementSibling]):new i([]):this[0].nextElementSibling?new i([this[0].nextElementSibling]):new i([]):new i([])},nextAll:function(e){var t=[],r=this[0];if(!r)return new i([]);for(;r.nextElementSibling;){var s=r.nextElementSibling;e?n(s).is(e)&&t.push(s):t.push(s),r=s}return new i(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&n(t.previousElementSibling).is(e)?new i([t.previousElementSibling]):new i([]):t.previousElementSibling?new i([t.previousElementSibling]):new i([])}return new i([])},prevAll:function(e){var t=[],r=this[0];if(!r)return new i([]);for(;r.previousElementSibling;){var s=r.previousElementSibling;e?n(s).is(e)&&t.push(s):t.push(s),r=s}return new i(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?n(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return n(r(t))},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var s=this[i].parentNode;s;)e?n(s).is(e)&&t.push(s):t.push(s),s=s.parentNode;return n(r(t))},closest:function(e){var t=this;return void 0===e?new i([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),s=0;s<r.length;s+=1)t.push(r[s]);return new i(t)},children:function(e){for(var t=[],s=0;s<this.length;s+=1)for(var a=this[s].childNodes,o=0;o<a.length;o+=1)e?1===a[o].nodeType&&n(a[o]).is(e)&&t.push(a[o]):1===a[o].nodeType&&t.push(a[o]);return new i(r(t))},filter:function(e){for(var t=[],n=this,r=0;r<n.length;r+=1)e.call(n[r],r,n[r])&&t.push(n[r]);return new i(t)},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,r,s=this;for(i=0;i<e.length;i+=1){var a=n(e[i]);for(r=0;r<a.length;r+=1)s[s.length]=a[r],s.length+=1}return s},styles:function(){return this[0]?t.getComputedStyle(this[0],null):{}}};Object.keys(s).forEach(function(e){n.fn[e]=n.fn[e]||s[e]});var a={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(i){}try{delete t[e]}catch(i){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,i){var n,r,s;void 0===i&&(i="x");var a=t.getComputedStyle(e,null);return t.WebKitCSSMatrix?((r=a.transform||a.webkitTransform).split(",").length>6&&(r=r.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),s=new t.WebKitCSSMatrix("none"===r?"":r)):n=(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(r=t.WebKitCSSMatrix?s.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===i&&(r=t.WebKitCSSMatrix?s.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0},parseUrlQuery:function(e){var i,n,r,s,a={},o=e||t.location.href;if("string"==typeof o&&o.length)for(s=(n=(o=o.indexOf("?")>-1?o.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,i=0;i<s;i+=1)r=n[i].replace(/#\S+/g,"").split("="),a[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r[1])||"";return a},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),n=1;n<e.length;n+=1){var r=e[n];if(null!=r)for(var s=Object.keys(Object(r)),o=0,l=s.length;o<l;o+=1){var c=s[o],d=Object.getOwnPropertyDescriptor(r,c);void 0!==d&&d.enumerable&&(a.isObject(i[c])&&a.isObject(r[c])?a.extend(i[c],r[c]):!a.isObject(i[c])&&a.isObject(r[c])?(i[c]={},a.extend(i[c],r[c])):i[c]=r[c])}}return i}},o={touch:t.Modernizr&&!0===t.Modernizr.touch||!!(t.navigator.maxTouchPoints>0||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,i)}catch(n){}return e}(),gestures:"ongesturestart"in t},l=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})},c={components:{configurable:!0}};l.prototype.on=function(e,t,i){var n=this;if("function"!=typeof t)return n;var r=i?"unshift":"push";return e.split(" ").forEach(function(e){n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)}),n},l.prototype.once=function(e,t,i){var n=this;if("function"!=typeof t)return n;function r(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];n.off(e,r),r.f7proxy&&delete r.f7proxy,t.apply(n,i)}return r.f7proxy=t,n.on(e,r,i)},l.prototype.off=function(e,t){var i=this;return i.eventsListeners?(e.split(" ").forEach(function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].length&&i.eventsListeners[e].forEach(function(n,r){(n===t||n.f7proxy&&n.f7proxy===t)&&i.eventsListeners[e].splice(r,1)})}),i):i},l.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r,s=this;if(!s.eventsListeners)return s;"string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],n=e.slice(1,e.length),r=s):(i=e[0].events,n=e[0].data,r=e[0].context||s);var a=Array.isArray(i)?i:i.split(" ");return a.forEach(function(e){if(s.eventsListeners&&s.eventsListeners[e]){var t=[];s.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(r,n)})}}),s},l.prototype.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var n=t.modules[i];n.params&&a.extend(e,n.params)})},l.prototype.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var n=t.modules[i],r=e[i]||{};n.instance&&Object.keys(n.instance).forEach(function(e){var i=n.instance[e];t[e]="function"==typeof i?i.bind(t):i}),n.on&&t.on&&Object.keys(n.on).forEach(function(e){t.on(e,n.on[e])}),n.create&&n.create.bind(t)(r)})},c.components.set=function(e){this.use&&this.use(e)},l.installModule=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=this;n.prototype.modules||(n.prototype.modules={});var r=e.name||Object.keys(n.prototype.modules).length+"_"+a.now();return n.prototype.modules[r]=e,e.proto&&Object.keys(e.proto).forEach(function(t){n.prototype[t]=e.proto[t]}),e.static&&Object.keys(e.static).forEach(function(t){n[t]=e.static[t]}),e.install&&e.install.apply(n,t),n},l.use=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=this;return Array.isArray(e)?(e.forEach(function(e){return n.installModule(e)}),n):n.installModule.apply(n,[e].concat(t))},Object.defineProperties(l,c);var d={updateSize:function(){var e,t,i=this,n=i.$el;e=void 0!==i.params.width?i.params.width:n[0].clientWidth,t=void 0!==i.params.height?i.params.height:n[0].clientHeight,0===e&&i.isHorizontal()||0===t&&i.isVertical()||(e=e-parseInt(n.css("padding-left"),10)-parseInt(n.css("padding-right"),10),t=t-parseInt(n.css("padding-top"),10)-parseInt(n.css("padding-bottom"),10),a.extend(i,{width:e,height:t,size:i.isHorizontal()?e:t}))},updateSlides:function(){var e=this,i=e.params,n=e.$wrapperEl,r=e.size,s=e.rtlTranslate,o=e.wrongRTL,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=n.children("."+e.params.slideClass),u=l?e.virtual.slides.length:d.length,h=[],p=[],f=[];function m(e){return!i.cssMode||e!==d.length-1}var v=i.slidesOffsetBefore;"function"==typeof v&&(v=i.slidesOffsetBefore.call(e));var E=i.slidesOffsetAfter;"function"==typeof E&&(E=i.slidesOffsetAfter.call(e));var g=e.snapGrid.length,_=e.snapGrid.length,y=i.spaceBetween,b=-v,S=0,T=0;if(void 0!==r){var R,O;"string"==typeof y&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*r),e.virtualSize=-y,s?d.css({marginLeft:"",marginTop:""}):d.css({marginRight:"",marginBottom:""}),i.slidesPerColumn>1&&(R=Math.floor(u/i.slidesPerColumn)===u/e.params.slidesPerColumn?u:Math.ceil(u/i.slidesPerColumn)*i.slidesPerColumn,"auto"!==i.slidesPerView&&"row"===i.slidesPerColumnFill&&(R=Math.max(R,i.slidesPerView*i.slidesPerColumn)));for(var C,P=i.slidesPerColumn,w=R/P,A=Math.floor(u/i.slidesPerColumn),I=0;I<u;I+=1){O=0;var x=d.eq(I);if(i.slidesPerColumn>1){var M=void 0,D=void 0,N=void 0;if("row"===i.slidesPerColumnFill&&i.slidesPerGroup>1){var k=Math.floor(I/(i.slidesPerGroup*i.slidesPerColumn)),L=I-i.slidesPerColumn*i.slidesPerGroup*k,B=0===k?i.slidesPerGroup:Math.min(Math.ceil((u-k*P*i.slidesPerGroup)/P),i.slidesPerGroup);M=(D=L-(N=Math.floor(L/B))*B+k*i.slidesPerGroup)+N*R/P,x.css({"-webkit-box-ordinal-group":M,"-moz-box-ordinal-group":M,"-ms-flex-order":M,"-webkit-order":M,order:M})}else"column"===i.slidesPerColumnFill?(N=I-(D=Math.floor(I/P))*P,(D>A||D===A&&N===P-1)&&(N+=1)>=P&&(N=0,D+=1)):D=I-(N=Math.floor(I/w))*w;x.css("margin-"+(e.isHorizontal()?"top":"left"),0!==N&&i.spaceBetween&&i.spaceBetween+"px")}if("none"!==x.css("display")){if("auto"===i.slidesPerView){var V=t.getComputedStyle(x[0],null),U=x[0].style.transform,F=x[0].style.webkitTransform;if(U&&(x[0].style.transform="none"),F&&(x[0].style.webkitTransform="none"),i.roundLengths)O=e.isHorizontal()?x.outerWidth(!0):x.outerHeight(!0);else if(e.isHorizontal()){var j=parseFloat(V.getPropertyValue("width")),H=parseFloat(V.getPropertyValue("padding-left")),$=parseFloat(V.getPropertyValue("padding-right")),z=parseFloat(V.getPropertyValue("margin-left")),q=parseFloat(V.getPropertyValue("margin-right")),Y=V.getPropertyValue("box-sizing");O=Y&&"border-box"===Y?j+z+q:j+H+$+z+q}else{var W=parseFloat(V.getPropertyValue("height")),X=parseFloat(V.getPropertyValue("padding-top")),G=parseFloat(V.getPropertyValue("padding-bottom")),K=parseFloat(V.getPropertyValue("margin-top")),J=parseFloat(V.getPropertyValue("margin-bottom")),Q=V.getPropertyValue("box-sizing");O=Q&&"border-box"===Q?W+K+J:W+X+G+K+J}U&&(x[0].style.transform=U),F&&(x[0].style.webkitTransform=F),i.roundLengths&&(O=Math.floor(O))}else O=(r-(i.slidesPerView-1)*y)/i.slidesPerView,i.roundLengths&&(O=Math.floor(O)),d[I]&&(e.isHorizontal()?d[I].style.width=O+"px":d[I].style.height=O+"px");d[I]&&(d[I].swiperSlideSize=O),f.push(O),i.centeredSlides?(b=b+O/2+S/2+y,0===S&&0!==I&&(b=b-r/2-y),0===I&&(b=b-r/2-y),Math.abs(b)<.001&&(b=0),i.roundLengths&&(b=Math.floor(b)),T%i.slidesPerGroup==0&&h.push(b),p.push(b)):(i.roundLengths&&(b=Math.floor(b)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup==0&&h.push(b),p.push(b),b=b+O+y),e.virtualSize+=O+y,S=O,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,r)+E,s&&o&&("slide"===i.effect||"coverflow"===i.effect)&&n.css({width:e.virtualSize+i.spaceBetween+"px"}),i.setWrapperSize&&(e.isHorizontal()?n.css({width:e.virtualSize+i.spaceBetween+"px"}):n.css({height:e.virtualSize+i.spaceBetween+"px"})),i.slidesPerColumn>1&&(e.virtualSize=(O+i.spaceBetween)*R,e.virtualSize=Math.ceil(e.virtualSize/i.slidesPerColumn)-i.spaceBetween,e.isHorizontal()?n.css({width:e.virtualSize+i.spaceBetween+"px"}):n.css({height:e.virtualSize+i.spaceBetween+"px"}),i.centeredSlides)){C=[];for(var Z=0;Z<h.length;Z+=1){var ee=h[Z];i.roundLengths&&(ee=Math.floor(ee)),h[Z]<e.virtualSize+h[0]&&C.push(ee)}h=C}if(!i.centeredSlides){C=[];for(var te=0;te<h.length;te+=1){var ie=h[te];i.roundLengths&&(ie=Math.floor(ie)),h[te]<=e.virtualSize-r&&C.push(ie)}h=C,Math.floor(e.virtualSize-r)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-r)}if(0===h.length&&(h=[0]),0!==i.spaceBetween&&(e.isHorizontal()?s?d.filter(m).css({marginLeft:y+"px"}):d.filter(m).css({marginRight:y+"px"}):d.filter(m).css({marginBottom:y+"px"})),i.centeredSlides&&i.centeredSlidesBounds){var ne=0;f.forEach(function(e){ne+=e+(i.spaceBetween?i.spaceBetween:0)});var re=(ne-=i.spaceBetween)-r;h=h.map(function(e){return e<0?-v:e>re?re+E:e})}if(i.centerInsufficientSlides){var se=0;if(f.forEach(function(e){se+=e+(i.spaceBetween?i.spaceBetween:0)}),(se-=i.spaceBetween)<r){var ae=(r-se)/2;h.forEach(function(e,t){h[t]=e-ae}),p.forEach(function(e,t){p[t]=e+ae})}}a.extend(e,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),u!==c&&e.emit("slidesLengthChange"),h.length!==g&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==_&&e.emit("slidesGridLengthChange"),(i.watchSlidesProgress||i.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=this,n=[],r=0;if("number"==typeof e?i.setTransition(e):!0===e&&i.setTransition(i.params.speed),"auto"!==i.params.slidesPerView&&i.params.slidesPerView>1)if(i.params.centeredSlides)i.visibleSlides.each(function(e,t){n.push(t)});else for(t=0;t<Math.ceil(i.params.slidesPerView);t+=1){var s=i.activeIndex+t;if(s>i.slides.length)break;n.push(i.slides.eq(s)[0])}else n.push(i.slides.eq(i.activeIndex)[0]);for(t=0;t<n.length;t+=1)if(void 0!==n[t]){var a=n[t].offsetHeight;r=a>r?a:r}r&&i.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,i=t.params,r=t.slides,s=t.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var a=-e;s&&(a=e),r.removeClass(i.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var o=0;o<r.length;o+=1){var l=r[o],c=(a+(i.centeredSlides?t.minTranslate():0)-l.swiperSlideOffset)/(l.swiperSlideSize+i.spaceBetween);if(i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight){var d=-(a-l.swiperSlideOffset),u=d+t.slidesSizesGrid[o];(d>=0&&d<t.size-1||u>1&&u<=t.size||d<=0&&u>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(o),r.eq(o).addClass(i.slideVisibleClass))}l.progress=s?-c:c}t.visibleSlides=n(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}var n=t.params,r=t.maxTranslate()-t.minTranslate(),s=t.progress,o=t.isBeginning,l=t.isEnd,c=o,d=l;0===r?(s=0,o=!0,l=!0):(o=(s=(e-t.minTranslate())/r)<=0,l=s>=1),a.extend(t,{progress:s,isBeginning:o,isEnd:l}),(n.watchSlidesProgress||n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!c&&t.emit("reachBeginning toEdge"),l&&!d&&t.emit("reachEnd toEdge"),(c&&!o||d&&!l)&&t.emit("fromEdge"),t.emit("progress",s)},updateSlidesClasses:function(){var e,t=this,i=t.slides,n=t.params,r=t.$wrapperEl,s=t.activeIndex,a=t.realIndex,o=t.virtual&&n.virtual.enabled;i.removeClass(n.slideActiveClass+" "+n.slideNextClass+" "+n.slidePrevClass+" "+n.slideDuplicateActiveClass+" "+n.slideDuplicateNextClass+" "+n.slideDuplicatePrevClass),(e=o?t.$wrapperEl.find("."+n.slideClass+'[data-swiper-slide-index="'+s+'"]'):i.eq(s)).addClass(n.slideActiveClass),n.loop&&(e.hasClass(n.slideDuplicateClass)?r.children("."+n.slideClass+":not(."+n.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(n.slideDuplicateActiveClass):r.children("."+n.slideClass+"."+n.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(n.slideDuplicateActiveClass));var l=e.nextAll("."+n.slideClass).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=i.eq(0)).addClass(n.slideNextClass);var c=e.prevAll("."+n.slideClass).eq(0).addClass(n.slidePrevClass);n.loop&&0===c.length&&(c=i.eq(-1)).addClass(n.slidePrevClass),n.loop&&(l.hasClass(n.slideDuplicateClass)?r.children("."+n.slideClass+":not(."+n.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicateNextClass):r.children("."+n.slideClass+"."+n.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicateNextClass),c.hasClass(n.slideDuplicateClass)?r.children("."+n.slideClass+":not(."+n.slideDuplicateClass+')[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicatePrevClass):r.children("."+n.slideClass+"."+n.slideDuplicateClass+'[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this,n=i.rtlTranslate?i.translate:-i.translate,r=i.slidesGrid,s=i.snapGrid,o=i.params,l=i.activeIndex,c=i.realIndex,d=i.snapIndex,u=e;if(void 0===u){for(var h=0;h<r.length;h+=1)void 0!==r[h+1]?n>=r[h]&&n<r[h+1]-(r[h+1]-r[h])/2?u=h:n>=r[h]&&n<r[h+1]&&(u=h+1):n>=r[h]&&(u=h);o.normalizeSlideIndex&&(u<0||void 0===u)&&(u=0)}if(s.indexOf(n)>=0)t=s.indexOf(n);else{var p=Math.min(o.slidesPerGroupSkip,u);t=p+Math.floor((u-p)/o.slidesPerGroup)}if(t>=s.length&&(t=s.length-1),u!==l){var f=parseInt(i.slides.eq(u).attr("data-swiper-slide-index")||u,10);a.extend(i,{snapIndex:t,realIndex:f,previousIndex:l,activeIndex:u}),i.emit("activeIndexChange"),i.emit("snapIndexChange"),c!==f&&i.emit("realIndexChange"),(i.initialized||i.params.runCallbacksOnInit)&&i.emit("slideChange")}else t!==d&&(i.snapIndex=t,i.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,i=t.params,r=n(e.target).closest("."+i.slideClass)[0],s=!1;if(r)for(var a=0;a<t.slides.length;a+=1)t.slides[a]===r&&(s=!0);if(!r||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(n(r).attr("data-swiper-slide-index"),10):t.clickedIndex=n(r).index(),i.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};var u={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,i=t.params,n=t.rtlTranslate,r=t.translate,s=t.$wrapperEl;if(i.virtualTranslate)return n?-r:r;if(i.cssMode)return r;var o=a.getTranslate(s[0],e);return n&&(o=-o),o||0},setTranslate:function(e,t){var i=this,n=i.rtlTranslate,r=i.params,s=i.$wrapperEl,a=i.wrapperEl,o=i.progress,l=0,c=0;i.isHorizontal()?l=n?-e:e:c=e,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),r.cssMode?a[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-l:-c:r.virtualTranslate||s.transform("translate3d("+l+"px, "+c+"px, 0px)"),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:c;var d=i.maxTranslate()-i.minTranslate();(0===d?0:(e-i.minTranslate())/d)!==o&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,n,r){var s;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===n&&(n=!0);var a=this,o=a.params,l=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var c,d=a.minTranslate(),u=a.maxTranslate();if(c=n&&e>d?d:n&&e<u?u:e,a.updateProgress(c),o.cssMode){var h=a.isHorizontal();return 0===t?l[h?"scrollLeft":"scrollTop"]=-c:l.scrollTo?l.scrollTo(((s={})[h?"left":"top"]=-c,s.behavior="smooth",s)):l[h?"scrollLeft":"scrollTop"]=-c,!0}return 0===t?(a.setTransition(0),a.setTranslate(c),i&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(c),i&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,i&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}};var h={setTransition:function(e,t){var i=this;i.params.cssMode||i.$wrapperEl.transition(e),i.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this,n=i.activeIndex,r=i.params,s=i.previousIndex;if(!r.cssMode){r.autoHeight&&i.updateAutoHeight();var a=t;if(a||(a=n>s?"next":n<s?"prev":"reset"),i.emit("transitionStart"),e&&n!==s){if("reset"===a)return void i.emit("slideResetTransitionStart");i.emit("slideChangeTransitionStart"),"next"===a?i.emit("slideNextTransitionStart"):i.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this,n=i.activeIndex,r=i.previousIndex,s=i.params;if(i.animating=!1,!s.cssMode){i.setTransition(0);var a=t;if(a||(a=n>r?"next":n<r?"prev":"reset"),i.emit("transitionEnd"),e&&n!==r){if("reset"===a)return void i.emit("slideResetTransitionEnd");i.emit("slideChangeTransitionEnd"),"next"===a?i.emit("slideNextTransitionEnd"):i.emit("slidePrevTransitionEnd")}}}};var p={slideTo:function(e,t,i,n){var r;void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var s=this,a=e;a<0&&(a=0);var o=s.params,l=s.snapGrid,c=s.slidesGrid,d=s.previousIndex,u=s.activeIndex,h=s.rtlTranslate,p=s.wrapperEl;if(s.animating&&o.preventInteractionOnTransition)return!1;var f=Math.min(s.params.slidesPerGroupSkip,a),m=f+Math.floor((a-f)/s.params.slidesPerGroup);m>=l.length&&(m=l.length-1),(u||o.initialSlide||0)===(d||0)&&i&&s.emit("beforeSlideChangeStart");var v,E=-l[m];if(s.updateProgress(E),o.normalizeSlideIndex)for(var g=0;g<c.length;g+=1)-Math.floor(100*E)>=Math.floor(100*c[g])&&(a=g);if(s.initialized&&a!==u){if(!s.allowSlideNext&&E<s.translate&&E<s.minTranslate())return!1;if(!s.allowSlidePrev&&E>s.translate&&E>s.maxTranslate()&&(u||0)!==a)return!1}if(v=a>u?"next":a<u?"prev":"reset",h&&-E===s.translate||!h&&E===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(E),"reset"!==v&&(s.transitionStart(i,v),s.transitionEnd(i,v)),!1;if(o.cssMode){var _=s.isHorizontal(),y=-E;return h&&(y=p.scrollWidth-p.offsetWidth-y),0===t?p[_?"scrollLeft":"scrollTop"]=y:p.scrollTo?p.scrollTo(((r={})[_?"left":"top"]=y,r.behavior="smooth",r)):p[_?"scrollLeft":"scrollTop"]=y,!0}return 0===t?(s.setTransition(0),s.setTranslate(E),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,n),s.transitionStart(i,v),s.transitionEnd(i,v)):(s.setTransition(t),s.setTranslate(E),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,n),s.transitionStart(i,v),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(i,v))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=this,s=e;return r.params.loop&&(s+=r.loopedSlides),r.slideTo(s,t,i,n)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,r=n.params,s=n.animating,a=n.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(s)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return n.slideTo(n.activeIndex+a,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,r=n.params,s=n.animating,a=n.snapGrid,o=n.slidesGrid,l=n.rtlTranslate;if(r.loop){if(s)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var d,u=c(l?n.translate:-n.translate),h=a.map(function(e){return c(e)}),p=(o.map(function(e){return c(e)}),a[h.indexOf(u)],a[h.indexOf(u)-1]);return void 0===p&&r.cssMode&&a.forEach(function(e){!p&&u>=e&&(p=e)}),void 0!==p&&(d=o.indexOf(p))<0&&(d=n.activeIndex-1),n.slideTo(d,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===n&&(n=.5);var r=this,s=r.activeIndex,a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){var c=r.snapGrid[o];l-c>(r.snapGrid[o+1]-c)*n&&(s+=r.params.slidesPerGroup)}else{var d=r.snapGrid[o-1];l-d<=(r.snapGrid[o]-d)*n&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,r=t.$wrapperEl,s="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,o=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(n(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?o<t.loopedSlides-s/2||o>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),o=r.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),a.nextTick(function(){t.slideTo(o)})):t.slideTo(o):o>t.slides.length-s?(t.loopFix(),o=r.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),a.nextTick(function(){t.slideTo(o)})):t.slideTo(o)}else t.slideTo(o)}};var f={loopCreate:function(){var t=this,i=t.params,r=t.$wrapperEl;r.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var s=r.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var a=i.slidesPerGroup-s.length%i.slidesPerGroup;if(a!==i.slidesPerGroup){for(var o=0;o<a;o+=1){var l=n(e.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);r.append(l)}s=r.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=s.length),t.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>s.length&&(t.loopedSlides=s.length);var c=[],d=[];s.each(function(e,i){var r=n(i);e<t.loopedSlides&&d.push(i),e<s.length&&e>=s.length-t.loopedSlides&&c.push(i),r.attr("data-swiper-slide-index",e)});for(var u=0;u<d.length;u+=1)r.append(n(d[u].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var h=c.length-1;h>=0;h-=1)r.prepend(n(c[h].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,i=e.activeIndex,n=e.slides,r=e.loopedSlides,s=e.allowSlidePrev,a=e.allowSlideNext,o=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var c=-o[i]-e.getTranslate();if(i<r)t=n.length-3*r+i,t+=r,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c);else if(i>=n.length-r){t=-n.length+i+r,t+=r,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c)}e.allowSlidePrev=s,e.allowSlideNext=a,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,i=e.params,n=e.slides;t.children("."+i.slideClass+"."+i.slideDuplicateClass+",."+i.slideClass+"."+i.slideBlankClass).remove(),n.removeAttr("data-swiper-slide-index")}};var m={setGrabCursor:function(e){var t=this;if(!(o.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var i=t.el;i.style.cursor="move",i.style.cursor=e?"-webkit-grabbing":"-webkit-grab",i.style.cursor=e?"-moz-grabbin":"-moz-grab",i.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;o.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}};var v,E,g,_,y,b,S,T,R,O,C,P,w,A,I,x={appendSlide:function(e){var t=this,i=t.$wrapperEl,n=t.params;if(n.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var r=0;r<e.length;r+=1)e[r]&&i.append(e[r]);else i.append(e);n.loop&&t.loopCreate(),n.observer&&o.observer||t.update()},prependSlide:function(e){var t=this,i=t.params,n=t.$wrapperEl,r=t.activeIndex;i.loop&&t.loopDestroy();var s=r+1;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)e[a]&&n.prepend(e[a]);s=r+e.length}else n.prepend(e);i.loop&&t.loopCreate(),i.observer&&o.observer||t.update(),t.slideTo(s,0,!1)},addSlide:function(e,t){var i=this,n=i.$wrapperEl,r=i.params,s=i.activeIndex;r.loop&&(s-=i.loopedSlides,i.loopDestroy(),i.slides=n.children("."+r.slideClass));var a=i.slides.length;if(e<=0)i.prependSlide(t);else if(e>=a)i.appendSlide(t);else{for(var l=s>e?s+1:s,c=[],d=a-1;d>=e;d-=1){var u=i.slides.eq(d);u.remove(),c.unshift(u)}if("object"==typeof t&&"length"in t){for(var h=0;h<t.length;h+=1)t[h]&&n.append(t[h]);l=s>e?s+t.length:s}else n.append(t);for(var p=0;p<c.length;p+=1)n.append(c[p]);r.loop&&i.loopCreate(),r.observer&&o.observer||i.update(),r.loop?i.slideTo(l+i.loopedSlides,0,!1):i.slideTo(l,0,!1)}},removeSlide:function(e){var t=this,i=t.params,n=t.$wrapperEl,r=t.activeIndex;i.loop&&(r-=t.loopedSlides,t.loopDestroy(),t.slides=n.children("."+i.slideClass));var s,a=r;if("object"==typeof e&&"length"in e){for(var l=0;l<e.length;l+=1)s=e[l],t.slides[s]&&t.slides.eq(s).remove(),s<a&&(a-=1);a=Math.max(a,0)}else s=e,t.slides[s]&&t.slides.eq(s).remove(),s<a&&(a-=1),a=Math.max(a,0);i.loop&&t.loopCreate(),i.observer&&o.observer||t.update(),i.loop?t.slideTo(a+t.loopedSlides,0,!1):t.slideTo(a,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},M=(v=t.navigator.platform,E=t.navigator.userAgent,g={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!t.cordova&&!t.phonegap),phonegap:!(!t.cordova&&!t.phonegap),electron:!1},_=t.screen.width,y=t.screen.height,b=E.match(/(Android);?[\s\/]+([\d.]+)?/),S=E.match(/(iPad).*OS\s([\d_]+)/),T=E.match(/(iPod)(.*OS\s([\d_]+))?/),R=!S&&E.match(/(iPhone\sOS|iOS)\s([\d_]+)/),O=E.indexOf("MSIE ")>=0||E.indexOf("Trident/")>=0,C=E.indexOf("Edge/")>=0,P=E.indexOf("Gecko/")>=0&&E.indexOf("Firefox/")>=0,w="Win32"===v,A=E.toLowerCase().indexOf("electron")>=0,I="MacIntel"===v,!S&&I&&o.touch&&(1024===_&&1366===y||834===_&&1194===y||834===_&&1112===y||768===_&&1024===y)&&(S=E.match(/(Version)\/([\d.]+)/),I=!1),g.ie=O,g.edge=C,g.firefox=P,b&&!w&&(g.os="android",g.osVersion=b[2],g.android=!0,g.androidChrome=E.toLowerCase().indexOf("chrome")>=0),(S||R||T)&&(g.os="ios",g.ios=!0),R&&!T&&(g.osVersion=R[2].replace(/_/g,"."),g.iphone=!0),S&&(g.osVersion=S[2].replace(/_/g,"."),g.ipad=!0),T&&(g.osVersion=T[3]?T[3].replace(/_/g,"."):null,g.ipod=!0),g.ios&&g.osVersion&&E.indexOf("Version/")>=0&&"10"===g.osVersion.split(".")[0]&&(g.osVersion=E.toLowerCase().split("version/")[1].split(" ")[0]),g.webView=!(!(R||S||T)||!E.match(/.*AppleWebKit(?!.*Safari)/i)&&!t.navigator.standalone)||t.matchMedia&&t.matchMedia("(display-mode: standalone)").matches,g.webview=g.webView,g.standalone=g.webView,g.desktop=!(g.ios||g.android)||A,g.desktop&&(g.electron=A,g.macos=I,g.windows=w,g.macos&&(g.os="macos"),g.windows&&(g.os="windows")),g.pixelRatio=t.devicePixelRatio||1,g);function D(i){var r=this,s=r.touchEventsData,o=r.params,l=r.touches;if(!r.animating||!o.preventInteractionOnTransition){var c=i;c.originalEvent&&(c=c.originalEvent);var d=n(c.target);if(("wrapper"!==o.touchEventsTarget||d.closest(r.wrapperEl).length)&&(s.isTouchEvent="touchstart"===c.type,(s.isTouchEvent||!("which"in c)||3!==c.which)&&!(!s.isTouchEvent&&"button"in c&&c.button>0||s.isTouched&&s.isMoved)))if(o.noSwiping&&d.closest(o.noSwipingSelector?o.noSwipingSelector:"."+o.noSwipingClass)[0])r.allowClick=!0;else if(!o.swipeHandler||d.closest(o.swipeHandler)[0]){l.currentX="touchstart"===c.type?c.targetTouches[0].pageX:c.pageX,l.currentY="touchstart"===c.type?c.targetTouches[0].pageY:c.pageY;var u=l.currentX,h=l.currentY,p=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,f=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(!p||!(u<=f||u>=t.screen.width-f)){if(a.extend(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=u,l.startY=h,s.touchStartTime=a.now(),r.allowClick=!0,r.updateSize(),r.swipeDirection=void 0,o.threshold>0&&(s.allowThresholdMove=!1),"touchstart"!==c.type){var m=!0;d.is(s.formElements)&&(m=!1),e.activeElement&&n(e.activeElement).is(s.formElements)&&e.activeElement!==d[0]&&e.activeElement.blur();var v=m&&r.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||v)&&c.preventDefault()}r.emit("touchStart",c)}}}}function N(t){var i=this,r=i.touchEventsData,s=i.params,o=i.touches,l=i.rtlTranslate,c=t;if(c.originalEvent&&(c=c.originalEvent),r.isTouched){if(!r.isTouchEvent||"mousemove"!==c.type){var d="touchmove"===c.type&&c.targetTouches&&(c.targetTouches[0]||c.changedTouches[0]),u="touchmove"===c.type?d.pageX:c.pageX,h="touchmove"===c.type?d.pageY:c.pageY;if(c.preventedByNestedSwiper)return o.startX=u,void(o.startY=h);if(!i.allowTouchMove)return i.allowClick=!1,void(r.isTouched&&(a.extend(o,{startX:u,startY:h,currentX:u,currentY:h}),r.touchStartTime=a.now()));if(r.isTouchEvent&&s.touchReleaseOnEdges&&!s.loop)if(i.isVertical()){if(h<o.startY&&i.translate<=i.maxTranslate()||h>o.startY&&i.translate>=i.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(u<o.startX&&i.translate<=i.maxTranslate()||u>o.startX&&i.translate>=i.minTranslate())return;if(r.isTouchEvent&&e.activeElement&&c.target===e.activeElement&&n(c.target).is(r.formElements))return r.isMoved=!0,void(i.allowClick=!1);if(r.allowTouchCallbacks&&i.emit("touchMove",c),!(c.targetTouches&&c.targetTouches.length>1)){o.currentX=u,o.currentY=h;var p=o.currentX-o.startX,f=o.currentY-o.startY;if(!(i.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(f,2))<i.params.threshold)){var m;if(void 0===r.isScrolling)i.isHorizontal()&&o.currentY===o.startY||i.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:p*p+f*f>=25&&(m=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,r.isScrolling=i.isHorizontal()?m>s.touchAngle:90-m>s.touchAngle);if(r.isScrolling&&i.emit("touchMoveOpposite",c),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){i.allowClick=!1,s.cssMode||c.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&c.stopPropagation(),r.isMoved||(s.loop&&i.loopFix(),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating&&i.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!s.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",c)),i.emit("sliderMove",c),r.isMoved=!0;var v=i.isHorizontal()?p:f;o.diff=v,v*=s.touchRatio,l&&(v=-v),i.swipeDirection=v>0?"prev":"next",r.currentTranslate=v+r.startTranslate;var E=!0,g=s.resistanceRatio;if(s.touchReleaseOnEdges&&(g=0),v>0&&r.currentTranslate>i.minTranslate()?(E=!1,s.resistance&&(r.currentTranslate=i.minTranslate()-1+Math.pow(-i.minTranslate()+r.startTranslate+v,g))):v<0&&r.currentTranslate<i.maxTranslate()&&(E=!1,s.resistance&&(r.currentTranslate=i.maxTranslate()+1-Math.pow(i.maxTranslate()-r.startTranslate-v,g))),E&&(c.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),s.threshold>0){if(!(Math.abs(v)>s.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=i.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}s.followFinger&&!s.cssMode&&((s.freeMode||s.watchSlidesProgress||s.watchSlidesVisibility)&&(i.updateActiveIndex(),i.updateSlidesClasses()),s.freeMode&&(0===r.velocities.length&&r.velocities.push({position:o[i.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:o[i.isHorizontal()?"currentX":"currentY"],time:a.now()})),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",c)}function k(e){var t=this,i=t.touchEventsData,n=t.params,r=t.touches,s=t.rtlTranslate,o=t.$wrapperEl,l=t.slidesGrid,c=t.snapGrid,d=e;if(d.originalEvent&&(d=d.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",d),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&n.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);n.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,h=a.now(),p=h-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap click",d),p<300&&h-i.lastClickTime<300&&t.emit("doubleTap doubleClick",d)),i.lastClickTime=a.now(),a.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===r.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,u=n.followFinger?s?t.translate:-t.translate:-i.currentTranslate,!n.cssMode)if(n.freeMode){if(u<-t.minTranslate())return void t.slideTo(t.activeIndex);if(u>-t.maxTranslate())return void(t.slides.length<c.length?t.slideTo(c.length-1):t.slideTo(t.slides.length-1));if(n.freeModeMomentum){if(i.velocities.length>1){var f=i.velocities.pop(),m=i.velocities.pop(),v=f.position-m.position,E=f.time-m.time;t.velocity=v/E,t.velocity/=2,Math.abs(t.velocity)<n.freeModeMinimumVelocity&&(t.velocity=0),(E>150||a.now()-f.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeModeMomentumVelocityRatio,i.velocities.length=0;var g=1e3*n.freeModeMomentumRatio,_=t.velocity*g,y=t.translate+_;s&&(y=-y);var b,S,T=!1,R=20*Math.abs(t.velocity)*n.freeModeMomentumBounceRatio;if(y<t.maxTranslate())n.freeModeMomentumBounce?(y+t.maxTranslate()<-R&&(y=t.maxTranslate()-R),b=t.maxTranslate(),T=!0,i.allowMomentumBounce=!0):y=t.maxTranslate(),n.loop&&n.centeredSlides&&(S=!0);else if(y>t.minTranslate())n.freeModeMomentumBounce?(y-t.minTranslate()>R&&(y=t.minTranslate()+R),b=t.minTranslate(),T=!0,i.allowMomentumBounce=!0):y=t.minTranslate(),n.loop&&n.centeredSlides&&(S=!0);else if(n.freeModeSticky){for(var O,C=0;C<c.length;C+=1)if(c[C]>-y){O=C;break}y=-(y=Math.abs(c[O]-y)<Math.abs(c[O-1]-y)||"next"===t.swipeDirection?c[O]:c[O-1])}if(S&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity){if(g=s?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),n.freeModeSticky){var P=Math.abs((s?-y:y)-t.translate),w=t.slidesSizesGrid[t.activeIndex];g=P<w?n.speed:P<2*w?1.5*n.speed:2.5*n.speed}}else if(n.freeModeSticky)return void t.slideToClosest();n.freeModeMomentumBounce&&T?(t.updateProgress(b),t.setTransition(g),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd(function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(n.speed),setTimeout(function(){t.setTranslate(b),o.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()})},0))})):t.velocity?(t.updateProgress(y),t.setTransition(g),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(y),t.updateActiveIndex(),t.updateSlidesClasses()}else if(n.freeModeSticky)return void t.slideToClosest();(!n.freeModeMomentum||p>=n.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var A=0,I=t.slidesSizesGrid[0],x=0;x<l.length;x+=x<n.slidesPerGroupSkip?1:n.slidesPerGroup){var M=x<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;void 0!==l[x+M]?u>=l[x]&&u<l[x+M]&&(A=x,I=l[x+M]-l[x]):u>=l[x]&&(A=x,I=l[l.length-1]-l[l.length-2])}var D=(u-l[A])/I,N=A<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(p>n.longSwipesMs){if(!n.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(D>=n.longSwipesRatio?t.slideTo(A+N):t.slideTo(A)),"prev"===t.swipeDirection&&(D>1-n.longSwipesRatio?t.slideTo(A+N):t.slideTo(A))}else{if(!n.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(d.target===t.navigation.nextEl||d.target===t.navigation.prevEl)?d.target===t.navigation.nextEl?t.slideTo(A+N):t.slideTo(A):("next"===t.swipeDirection&&t.slideTo(A+N),"prev"===t.swipeDirection&&t.slideTo(A))}}}function L(){var e=this,t=e.params,i=e.el;if(!i||0!==i.offsetWidth){t.breakpoints&&e.setBreakpoint();var n=e.allowSlideNext,r=e.allowSlidePrev,s=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=n,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}}function B(e){var t=this;t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function V(){var e=this,t=e.wrapperEl,i=e.rtlTranslate;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=i?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var n=e.maxTranslate()-e.minTranslate();(0===n?0:(e.translate-e.minTranslate())/n)!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}var U=!1;function F(){}var j={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},H={update:d,translate:u,transition:h,slide:p,loop:f,grabCursor:m,manipulation:x,events:{attachEvents:function(){var t=this,i=t.params,n=t.touchEvents,r=t.el,s=t.wrapperEl;t.onTouchStart=D.bind(t),t.onTouchMove=N.bind(t),t.onTouchEnd=k.bind(t),i.cssMode&&(t.onScroll=V.bind(t)),t.onClick=B.bind(t);var a=!!i.nested;if(!o.touch&&o.pointerEvents)r.addEventListener(n.start,t.onTouchStart,!1),e.addEventListener(n.move,t.onTouchMove,a),e.addEventListener(n.end,t.onTouchEnd,!1);else{if(o.touch){var l=!("touchstart"!==n.start||!o.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(n.start,t.onTouchStart,l),r.addEventListener(n.move,t.onTouchMove,o.passiveListener?{passive:!1,capture:a}:a),r.addEventListener(n.end,t.onTouchEnd,l),n.cancel&&r.addEventListener(n.cancel,t.onTouchEnd,l),U||(e.addEventListener("touchstart",F),U=!0)}(i.simulateTouch&&!M.ios&&!M.android||i.simulateTouch&&!o.touch&&M.ios)&&(r.addEventListener("mousedown",t.onTouchStart,!1),e.addEventListener("mousemove",t.onTouchMove,a),e.addEventListener("mouseup",t.onTouchEnd,!1))}(i.preventClicks||i.preventClicksPropagation)&&r.addEventListener("click",t.onClick,!0),i.cssMode&&s.addEventListener("scroll",t.onScroll),i.updateOnWindowResize?t.on(M.ios||M.android?"resize orientationchange observerUpdate":"resize observerUpdate",L,!0):t.on("observerUpdate",L,!0)},detachEvents:function(){var t=this,i=t.params,n=t.touchEvents,r=t.el,s=t.wrapperEl,a=!!i.nested;if(!o.touch&&o.pointerEvents)r.removeEventListener(n.start,t.onTouchStart,!1),e.removeEventListener(n.move,t.onTouchMove,a),e.removeEventListener(n.end,t.onTouchEnd,!1);else{if(o.touch){var l=!("onTouchStart"!==n.start||!o.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(n.start,t.onTouchStart,l),r.removeEventListener(n.move,t.onTouchMove,a),r.removeEventListener(n.end,t.onTouchEnd,l),n.cancel&&r.removeEventListener(n.cancel,t.onTouchEnd,l)}(i.simulateTouch&&!M.ios&&!M.android||i.simulateTouch&&!o.touch&&M.ios)&&(r.removeEventListener("mousedown",t.onTouchStart,!1),e.removeEventListener("mousemove",t.onTouchMove,a),e.removeEventListener("mouseup",t.onTouchEnd,!1))}(i.preventClicks||i.preventClicksPropagation)&&r.removeEventListener("click",t.onClick,!0),i.cssMode&&s.removeEventListener("scroll",t.onScroll),t.off(M.ios||M.android?"resize orientationchange observerUpdate":"resize observerUpdate",L)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,i=e.initialized,n=e.loopedSlides;void 0===n&&(n=0);var r=e.params,s=e.$el,o=r.breakpoints;if(o&&(!o||0!==Object.keys(o).length)){var l=e.getBreakpoint(o);if(l&&e.currentBreakpoint!==l){var c=l in o?o[l]:void 0;c&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(function(e){var t=c[e];void 0!==t&&(c[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")});var d=c||e.originalParams,u=r.slidesPerColumn>1,h=d.slidesPerColumn>1;u&&!h?s.removeClass(r.containerModifierClass+"multirow "+r.containerModifierClass+"multirow-column"):!u&&h&&(s.addClass(r.containerModifierClass+"multirow"),"column"===d.slidesPerColumnFill&&s.addClass(r.containerModifierClass+"multirow-column"));var p=d.direction&&d.direction!==r.direction,f=r.loop&&(d.slidesPerView!==r.slidesPerView||p);p&&i&&e.changeDirection(),a.extend(e.params,d),a.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=l,f&&i&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-n+e.loopedSlides,0,!1)),e.emit("breakpoint",d)}}},getBreakpoint:function(e){if(e){var i=!1,n=Object.keys(e).map(function(e){if("string"==typeof e&&0===e.indexOf("@")){var i=parseFloat(e.substr(1));return{value:t.innerHeight*i,point:e}}return{value:e,point:e}});n.sort(function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)});for(var r=0;r<n.length;r+=1){var s=n[r],a=s.point;s.value<=t.innerWidth&&(i=a)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.params,i=e.isLocked,n=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&n?e.isLocked=n<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,i!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),i&&i!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var e=this,t=e.classNames,i=e.params,n=e.rtl,r=e.$el,s=[];s.push("initialized"),s.push(i.direction),i.freeMode&&s.push("free-mode"),i.autoHeight&&s.push("autoheight"),n&&s.push("rtl"),i.slidesPerColumn>1&&(s.push("multirow"),"column"===i.slidesPerColumnFill&&s.push("multirow-column")),M.android&&s.push("android"),M.ios&&s.push("ios"),i.cssMode&&s.push("css-mode"),s.forEach(function(e){t.push(i.containerModifierClass+e)}),r.addClass(t.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,i,n,r,s,a){var o;function l(){a&&a()}e.complete&&s?l():i?((o=new t.Image).onload=l,o.onerror=l,r&&(o.sizes=r),n&&(o.srcset=n),i&&(o.src=i)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var n=e.imagesToLoad[i];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}}},$={},z=function(e){function t(){for(var i,r,s,l=[],c=arguments.length;c--;)l[c]=arguments[c];1===l.length&&l[0].constructor&&l[0].constructor===Object?s=l[0]:(r=(i=l)[0],s=i[1]),s||(s={}),s=a.extend({},s),r&&!s.el&&(s.el=r),e.call(this,s),Object.keys(H).forEach(function(e){Object.keys(H[e]).forEach(function(i){t.prototype[i]||(t.prototype[i]=H[e][i])})});var d=this;void 0===d.modules&&(d.modules={}),Object.keys(d.modules).forEach(function(e){var t=d.modules[e];if(t.params){var i=Object.keys(t.params)[0],n=t.params[i];if("object"!=typeof n||null===n)return;if(!(i in s)||!("enabled"in n))return;!0===s[i]&&(s[i]={enabled:!0}),"object"!=typeof s[i]||"enabled"in s[i]||(s[i].enabled=!0),s[i]||(s[i]={enabled:!1})}});var u=a.extend({},j);d.useModulesParams(u),d.params=a.extend({},u,$,s),d.originalParams=a.extend({},d.params),d.passedParams=a.extend({},s),d.$=n;var h=n(d.params.el);if(r=h[0]){if(h.length>1){var p=[];return h.each(function(e,i){var n=a.extend({},s,{el:i});p.push(new t(n))}),p}var f,m,v;return r.swiper=d,h.data("swiper",d),r&&r.shadowRoot&&r.shadowRoot.querySelector?(f=n(r.shadowRoot.querySelector("."+d.params.wrapperClass))).children=function(e){return h.children(e)}:f=h.children("."+d.params.wrapperClass),a.extend(d,{$el:h,el:r,$wrapperEl:f,wrapperEl:f[0],classNames:[],slides:n(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===d.params.direction},isVertical:function(){return"vertical"===d.params.direction},rtl:"rtl"===r.dir.toLowerCase()||"rtl"===h.css("direction"),rtlTranslate:"horizontal"===d.params.direction&&("rtl"===r.dir.toLowerCase()||"rtl"===h.css("direction")),wrongRTL:"-webkit-box"===f.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:d.params.allowSlideNext,allowSlidePrev:d.params.allowSlidePrev,touchEvents:(m=["touchstart","touchmove","touchend","touchcancel"],v=["mousedown","mousemove","mouseup"],o.pointerEvents&&(v=["pointerdown","pointermove","pointerup"]),d.touchEventsTouch={start:m[0],move:m[1],end:m[2],cancel:m[3]},d.touchEventsDesktop={start:v[0],move:v[1],end:v[2]},o.touch||!d.params.simulateTouch?d.touchEventsTouch:d.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:a.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:d.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),d.useModules(),d.params.init&&d.init(),d}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return t.prototype.slidesPerViewDynamic=function(){var e=this,t=e.params,i=e.slides,n=e.slidesGrid,r=e.size,s=e.activeIndex,a=1;if(t.centeredSlides){for(var o,l=i[s].swiperSlideSize,c=s+1;c<i.length;c+=1)i[c]&&!o&&(a+=1,(l+=i[c].swiperSlideSize)>r&&(o=!0));for(var d=s-1;d>=0;d-=1)i[d]&&!o&&(a+=1,(l+=i[d].swiperSlideSize)>r&&(o=!0))}else for(var u=s+1;u<i.length;u+=1)n[u]-n[s]<r&&(a+=1);return a},t.prototype.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(n(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||n(),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function n(){var t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},t.prototype.changeDirection=function(e,t){void 0===t&&(t=!0);var i=this,n=i.params.direction;return e||(e="horizontal"===n?"vertical":"horizontal"),e===n||"horizontal"!==e&&"vertical"!==e||(i.$el.removeClass(""+i.params.containerModifierClass+n).addClass(""+i.params.containerModifierClass+e),i.params.direction=e,i.slides.each(function(t,i){"vertical"===e?i.style.width="":i.style.height=""}),i.emit("changeDirection"),t&&i.update()),i},t.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},t.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,n=i.params,r=i.$el,s=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(function(e){i.off(e)}),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),a.deleteProps(i)),i.destroyed=!0),null},t.extendDefaults=function(e){a.extend($,e)},i.extendedDefaults.get=function(){return $},i.defaults.get=function(){return j},i.Class.get=function(){return e},i.$.get=function(){return n},Object.defineProperties(t,i),t}(l),q={name:"device",proto:{device:M},static:{device:M}},Y={name:"support",proto:{support:o},static:{support:o}},W={isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:function(){var e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)},X={name:"browser",proto:{browser:W},static:{browser:W}},G={name:"resize",create:function(){var e=this;a.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){t.addEventListener("resize",this.resize.resizeHandler),t.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){t.removeEventListener("resize",this.resize.resizeHandler),t.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},K={func:t.MutationObserver||t.WebkitMutationObserver,attach:function(e,i){void 0===i&&(i={});var n=this,r=new(0,K.func)(function(e){if(1!==e.length){var i=function(){n.emit("observerUpdate",e[0])};t.requestAnimationFrame?t.requestAnimationFrame(i):t.setTimeout(i,0)}else n.emit("observerUpdate",e[0])});r.observe(e,{attributes:void 0===i.attributes||i.attributes,childList:void 0===i.childList||i.childList,characterData:void 0===i.characterData||i.characterData}),n.observer.observers.push(r)},init:function(){var e=this;if(o.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),i=0;i<t.length;i+=1)e.observer.attach(t[i]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},J={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){var e=this;a.extend(e,{observer:{init:K.init.bind(e),attach:K.attach.bind(e),destroy:K.destroy.bind(e),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},Q={update:function(e){var t=this,i=t.params,n=i.slidesPerView,r=i.slidesPerGroup,s=i.centeredSlides,o=t.params.virtual,l=o.addSlidesBefore,c=o.addSlidesAfter,d=t.virtual,u=d.from,h=d.to,p=d.slides,f=d.slidesGrid,m=d.renderSlide,v=d.offset;t.updateActiveIndex();var E,g,_,y=t.activeIndex||0;E=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",s?(g=Math.floor(n/2)+r+l,_=Math.floor(n/2)+r+c):(g=n+(r-1)+l,_=r+c);var b=Math.max((y||0)-_,0),S=Math.min((y||0)+g,p.length-1),T=(t.slidesGrid[b]||0)-(t.slidesGrid[0]||0);function R(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(a.extend(t.virtual,{from:b,to:S,offset:T,slidesGrid:t.slidesGrid}),u===b&&h===S&&!e)return t.slidesGrid!==f&&T!==v&&t.slides.css(E,T+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:T,from:b,to:S,slides:function(){for(var e=[],t=b;t<=S;t+=1)e.push(p[t]);return e}()}),void R();var O=[],C=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var P=u;P<=h;P+=1)(P<b||P>S)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+P+'"]').remove();for(var w=0;w<p.length;w+=1)w>=b&&w<=S&&(void 0===h||e?C.push(w):(w>h&&C.push(w),w<u&&O.push(w)));C.forEach(function(e){t.$wrapperEl.append(m(p[e],e))}),O.sort(function(e,t){return t-e}).forEach(function(e){t.$wrapperEl.prepend(m(p[e],e))}),t.$wrapperEl.children(".swiper-slide").css(E,T+"px"),R()},renderSlide:function(e,t){var i=this,r=i.params.virtual;if(r.cache&&i.virtual.cache[t])return i.virtual.cache[t];var s=r.renderSlide?n(r.renderSlide.call(i,e,t)):n('<div class="'+i.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return s.attr("data-swiper-slide-index")||s.attr("data-swiper-slide-index",t),r.cache&&(i.virtual.cache[t]=s),s},appendSlide:function(e){var t=this;if("object"==typeof e&&"length"in e)for(var i=0;i<e.length;i+=1)e[i]&&t.virtual.slides.push(e[i]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide:function(e){var t=this,i=t.activeIndex,n=i+1,r=1;if(Array.isArray(e)){for(var s=0;s<e.length;s+=1)e[s]&&t.virtual.slides.unshift(e[s]);n=i+e.length,r=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var a=t.virtual.cache,o={};Object.keys(a).forEach(function(e){var t=a[e],i=t.attr("data-swiper-slide-index");i&&t.attr("data-swiper-slide-index",parseInt(i,10)+1),o[parseInt(e,10)+r]=t}),t.virtual.cache=o}t.virtual.update(!0),t.slideTo(n,0)},removeSlide:function(e){var t=this;if(null!=e){var i=t.activeIndex;if(Array.isArray(e))for(var n=e.length-1;n>=0;n-=1)t.virtual.slides.splice(e[n],1),t.params.virtual.cache&&delete t.virtual.cache[e[n]],e[n]<i&&(i-=1),i=Math.max(i,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<i&&(i-=1),i=Math.max(i,0);t.virtual.update(!0),t.slideTo(i,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},Z={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var e=this;a.extend(e,{virtual:{update:Q.update.bind(e),appendSlide:Q.appendSlide.bind(e),prependSlide:Q.prependSlide.bind(e),removeSlide:Q.removeSlide.bind(e),removeAllSlides:Q.removeAllSlides.bind(e),renderSlide:Q.renderSlide.bind(e),slides:e.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var e=this;if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};a.extend(e.params,t),a.extend(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},ee={handle:function(i){var n=this,r=n.rtlTranslate,s=i;s.originalEvent&&(s=s.originalEvent);var a=s.keyCode||s.charCode;if(!n.allowSlideNext&&(n.isHorizontal()&&39===a||n.isVertical()&&40===a||34===a))return!1;if(!n.allowSlidePrev&&(n.isHorizontal()&&37===a||n.isVertical()&&38===a||33===a))return!1;if(!(s.shiftKey||s.altKey||s.ctrlKey||s.metaKey||e.activeElement&&e.activeElement.nodeName&&("input"===e.activeElement.nodeName.toLowerCase()||"textarea"===e.activeElement.nodeName.toLowerCase()))){if(n.params.keyboard.onlyInViewport&&(33===a||34===a||37===a||39===a||38===a||40===a)){var o=!1;if(n.$el.parents("."+n.params.slideClass).length>0&&0===n.$el.parents("."+n.params.slideActiveClass).length)return;var l=t.innerWidth,c=t.innerHeight,d=n.$el.offset();r&&(d.left-=n.$el[0].scrollLeft);for(var u=[[d.left,d.top],[d.left+n.width,d.top],[d.left,d.top+n.height],[d.left+n.width,d.top+n.height]],h=0;h<u.length;h+=1){var p=u[h];p[0]>=0&&p[0]<=l&&p[1]>=0&&p[1]<=c&&(o=!0)}if(!o)return}n.isHorizontal()?(33!==a&&34!==a&&37!==a&&39!==a||(s.preventDefault?s.preventDefault():s.returnValue=!1),(34!==a&&39!==a||r)&&(33!==a&&37!==a||!r)||n.slideNext(),(33!==a&&37!==a||r)&&(34!==a&&39!==a||!r)||n.slidePrev()):(33!==a&&34!==a&&38!==a&&40!==a||(s.preventDefault?s.preventDefault():s.returnValue=!1),34!==a&&40!==a||n.slideNext(),33!==a&&38!==a||n.slidePrev()),n.emit("keyPress",a)}},enable:function(){var t=this;t.keyboard.enabled||(n(e).on("keydown",t.keyboard.handle),t.keyboard.enabled=!0)},disable:function(){var t=this;t.keyboard.enabled&&(n(e).off("keydown",t.keyboard.handle),t.keyboard.enabled=!1)}},te={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){var e=this;a.extend(e,{keyboard:{enabled:!1,enable:ee.enable.bind(e),disable:ee.disable.bind(e),handle:ee.handle.bind(e)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var ie={lastScrollTime:a.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return t.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t="onwheel",i=t in e;if(!i){var n=e.createElement("div");n.setAttribute(t,"return;"),i="function"==typeof n.onwheel}return!i&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(i=e.implementation.hasFeature("Events.wheel","3.0")),i}()?"wheel":"mousewheel"},normalize:function(e){var t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,r=10*i,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),e.shiftKey&&!n&&(n=r,r=0),(n||r)&&e.deltaMode&&(1===e.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,i=this,r=i.params.mousewheel;i.params.cssMode&&t.preventDefault();var s=i.$el;if("container"!==i.params.mousewheel.eventsTarged&&(s=n(i.params.mousewheel.eventsTarged)),!i.mouseEntered&&!s[0].contains(t.target)&&!r.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var o=0,l=i.rtlTranslate?-1:1,c=ie.normalize(t);if(r.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(c.pixelX)>Math.abs(c.pixelY)))return!0;o=c.pixelX*l}else{if(!(Math.abs(c.pixelY)>Math.abs(c.pixelX)))return!0;o=c.pixelY}else o=Math.abs(c.pixelX)>Math.abs(c.pixelY)?-c.pixelX*l:-c.pixelY;if(0===o)return!0;if(r.invert&&(o=-o),i.params.freeMode){var d={time:a.now(),delta:Math.abs(o),direction:Math.sign(o)},u=i.mousewheel.lastEventBeforeSnap,h=u&&d.time<u.time+500&&d.delta<=u.delta&&d.direction===u.direction;if(!h){i.mousewheel.lastEventBeforeSnap=void 0,i.params.loop&&i.loopFix();var p=i.getTranslate()+o*r.sensitivity,f=i.isBeginning,m=i.isEnd;if(p>=i.minTranslate()&&(p=i.minTranslate()),p<=i.maxTranslate()&&(p=i.maxTranslate()),i.setTransition(0),i.setTranslate(p),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!f&&i.isBeginning||!m&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky){clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=void 0;var v=i.mousewheel.recentWheelEvents;v.length>=15&&v.shift();var E=v.length?v[v.length-1]:void 0,g=v[0];if(v.push(d),E&&(d.delta>E.delta||d.direction!==E.direction))v.splice(0);else if(v.length>=15&&d.time-g.time<500&&g.delta-d.delta>=1&&d.delta<=6){var _=o>0?.8:.2;i.mousewheel.lastEventBeforeSnap=d,v.splice(0),i.mousewheel.timeout=a.nextTick(function(){i.slideToClosest(i.params.speed,!0,void 0,_)},0)}i.mousewheel.timeout||(i.mousewheel.timeout=a.nextTick(function(){i.mousewheel.lastEventBeforeSnap=d,v.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)},500))}if(h||i.emit("scroll",t),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),p===i.minTranslate()||p===i.maxTranslate())return!0}}else{var y={time:a.now(),delta:Math.abs(o),direction:Math.sign(o),raw:e},b=i.mousewheel.recentWheelEvents;b.length>=2&&b.shift();var S=b.length?b[b.length-1]:void 0;if(b.push(y),S?(y.direction!==S.direction||y.delta>S.delta)&&i.mousewheel.animateSlider(y):i.mousewheel.animateSlider(y),i.mousewheel.releaseScroll(y))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},animateSlider:function(e){var i=this;return e.delta>=6&&a.now()-i.mousewheel.lastScrollTime<60||(e.direction<0?i.isEnd&&!i.params.loop||i.animating||(i.slideNext(),i.emit("scroll",e.raw)):i.isBeginning&&!i.params.loop||i.animating||(i.slidePrev(),i.emit("scroll",e.raw)),i.mousewheel.lastScrollTime=(new t.Date).getTime(),!1)},releaseScroll:function(e){var t=this,i=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&i.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&i.releaseOnEdges)return!0;return!1},enable:function(){var e=this,t=ie.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;var i=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(i=n(e.params.mousewheel.eventsTarged)),i.on("mouseenter",e.mousewheel.handleMouseEnter),i.on("mouseleave",e.mousewheel.handleMouseLeave),i.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable:function(){var e=this,t=ie.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;var i=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(i=n(e.params.mousewheel.eventsTarged)),i.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}},ne={update:function(){var e=this,t=e.params.navigation;if(!e.params.loop){var i=e.navigation,n=i.$nextEl,r=i.$prevEl;r&&r.length>0&&(e.isBeginning?r.addClass(t.disabledClass):r.removeClass(t.disabledClass),r[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass)),n&&n.length>0&&(e.isEnd?n.addClass(t.disabledClass):n.removeClass(t.disabledClass),n[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,i=this,r=i.params.navigation;(r.nextEl||r.prevEl)&&(r.nextEl&&(e=n(r.nextEl),i.params.uniqueNavElements&&"string"==typeof r.nextEl&&e.length>1&&1===i.$el.find(r.nextEl).length&&(e=i.$el.find(r.nextEl))),r.prevEl&&(t=n(r.prevEl),i.params.uniqueNavElements&&"string"==typeof r.prevEl&&t.length>1&&1===i.$el.find(r.prevEl).length&&(t=i.$el.find(r.prevEl))),e&&e.length>0&&e.on("click",i.navigation.onNextClick),t&&t.length>0&&t.on("click",i.navigation.onPrevClick),a.extend(i.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this,t=e.navigation,i=t.$nextEl,n=t.$prevEl;i&&i.length&&(i.off("click",e.navigation.onNextClick),i.removeClass(e.params.navigation.disabledClass)),n&&n.length&&(n.off("click",e.navigation.onPrevClick),n.removeClass(e.params.navigation.disabledClass))}},re={update:function(){var e=this,t=e.rtl,i=e.params.pagination;if(i.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,s=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,a=e.pagination.$el,o=e.params.loop?Math.ceil((s-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>s-1-2*e.loopedSlides&&(r-=s-2*e.loopedSlides),r>o-1&&(r-=o),r<0&&"bullets"!==e.params.paginationType&&(r=o+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===i.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var l,c,d,u=e.pagination.bullets;if(i.dynamicBullets&&(e.pagination.bulletSize=u.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),a.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),i.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),l=r-e.pagination.dynamicBulletIndex,d=((c=l+(Math.min(u.length,i.dynamicMainBullets)-1))+l)/2),u.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev "+i.bulletActiveClass+"-main"),a.length>1)u.each(function(e,t){var s=n(t),a=s.index();a===r&&s.addClass(i.bulletActiveClass),i.dynamicBullets&&(a>=l&&a<=c&&s.addClass(i.bulletActiveClass+"-main"),a===l&&s.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),a===c&&s.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))});else{var h=u.eq(r),p=h.index();if(h.addClass(i.bulletActiveClass),i.dynamicBullets){for(var f=u.eq(l),m=u.eq(c),v=l;v<=c;v+=1)u.eq(v).addClass(i.bulletActiveClass+"-main");if(e.params.loop)if(p>=u.length-i.dynamicMainBullets){for(var E=i.dynamicMainBullets;E>=0;E-=1)u.eq(u.length-E).addClass(i.bulletActiveClass+"-main");u.eq(u.length-i.dynamicMainBullets-1).addClass(i.bulletActiveClass+"-prev")}else f.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),m.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next");else f.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),m.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}}if(i.dynamicBullets){var g=Math.min(u.length,i.dynamicMainBullets+4),_=(e.pagination.bulletSize*g-e.pagination.bulletSize)/2-d*e.pagination.bulletSize,y=t?"right":"left";u.css(e.isHorizontal()?y:"top",_+"px")}}if("fraction"===i.type&&(a.find("."+i.currentClass).text(i.formatFractionCurrent(r+1)),a.find("."+i.totalClass).text(i.formatFractionTotal(o))),"progressbar"===i.type){var b;b=i.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var S=(r+1)/o,T=1,R=1;"horizontal"===b?T=S:R=S,a.find("."+i.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+T+") scaleY("+R+")").transition(e.params.speed)}"custom"===i.type&&i.renderCustom?(a.html(i.renderCustom(e,r+1,o)),e.emit("paginationRender",e,a[0])):e.emit("paginationUpdate",e,a[0]),a[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el,r="";if("bullets"===t.type){for(var s=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,a=0;a<s;a+=1)t.renderBullet?r+=t.renderBullet.call(e,a,t.bulletClass):r+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";n.html(r),e.pagination.bullets=n.find("."+t.bulletClass)}"fraction"===t.type&&(r=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',n.html(r)),"progressbar"===t.type&&(r=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',n.html(r)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var i=n(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&1===e.$el.find(t.el).length&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass,function(t){t.preventDefault();var i=n(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)}),a.extend(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var i=e.pagination.$el;i.removeClass(t.hiddenClass),i.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&i.off("click","."+t.bulletClass)}}},se={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,i=e.rtlTranslate,n=e.progress,r=t.dragSize,s=t.trackSize,a=t.$dragEl,o=t.$el,l=e.params.scrollbar,c=r,d=(s-r)*n;i?(d=-d)>0?(c=r-d,d=0):-d+r>s&&(c=s+d):d<0?(c=r+d,d=0):d+r>s&&(c=s-d),e.isHorizontal()?(a.transform("translate3d("+d+"px, 0, 0)"),a[0].style.width=c+"px"):(a.transform("translate3d(0px, "+d+"px, 0)"),a[0].style.height=c+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),o[0].style.opacity=1,e.scrollbar.timeout=setTimeout(function(){o[0].style.opacity=0,o.transition(400)},1e3))}},setTransition:function(e){var t=this;t.params.scrollbar.el&&t.scrollbar.el&&t.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,i=t.$dragEl,n=t.$el;i[0].style.width="",i[0].style.height="";var r,s=e.isHorizontal()?n[0].offsetWidth:n[0].offsetHeight,o=e.size/e.virtualSize,l=o*(s/e.size);r="auto"===e.params.scrollbar.dragSize?s*o:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?i[0].style.width=r+"px":i[0].style.height=r+"px",n[0].style.display=o>=1?"none":"",e.params.scrollbar.hide&&(n[0].style.opacity=0),a.extend(t,{trackSize:s,divider:o,moveDivider:l,dragSize:r}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,i=this,n=i.scrollbar,r=i.rtlTranslate,s=n.$el,a=n.dragSize,o=n.trackSize,l=n.dragStartPos;t=(n.getPointerPosition(e)-s.offset()[i.isHorizontal()?"left":"top"]-(null!==l?l:a/2))/(o-a),t=Math.max(Math.min(t,1),0),r&&(t=1-t);var c=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*t;i.updateProgress(c),i.setTranslate(c),i.updateActiveIndex(),i.updateSlidesClasses()},onDragStart:function(e){var t=this,i=t.params.scrollbar,n=t.scrollbar,r=t.$wrapperEl,s=n.$el,a=n.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===a[0]||e.target===a?n.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),r.transition(100),a.transition(100),n.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),s.transition(0),i.hide&&s.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this,i=t.scrollbar,n=t.$wrapperEl,r=i.$el,s=i.$dragEl;t.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,i.setDragPosition(e),n.transition(0),r.transition(0),s.transition(0),t.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,i=t.params.scrollbar,n=t.scrollbar,r=t.$wrapperEl,s=n.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),r.transition("")),i.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=a.nextTick(function(){s.css("opacity",0),s.transition(400)},1e3)),t.emit("scrollbarDragEnd",e),i.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var t=this;if(t.params.scrollbar.el){var i=t.scrollbar,n=t.touchEventsTouch,r=t.touchEventsDesktop,s=t.params,a=i.$el[0],l=!(!o.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};o.touch?(a.addEventListener(n.start,t.scrollbar.onDragStart,l),a.addEventListener(n.move,t.scrollbar.onDragMove,l),a.addEventListener(n.end,t.scrollbar.onDragEnd,c)):(a.addEventListener(r.start,t.scrollbar.onDragStart,l),e.addEventListener(r.move,t.scrollbar.onDragMove,l),e.addEventListener(r.end,t.scrollbar.onDragEnd,c))}},disableDraggable:function(){var t=this;if(t.params.scrollbar.el){var i=t.scrollbar,n=t.touchEventsTouch,r=t.touchEventsDesktop,s=t.params,a=i.$el[0],l=!(!o.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};o.touch?(a.removeEventListener(n.start,t.scrollbar.onDragStart,l),a.removeEventListener(n.move,t.scrollbar.onDragMove,l),a.removeEventListener(n.end,t.scrollbar.onDragEnd,c)):(a.removeEventListener(r.start,t.scrollbar.onDragStart,l),e.removeEventListener(r.move,t.scrollbar.onDragMove,l),e.removeEventListener(r.end,t.scrollbar.onDragEnd,c))}},init:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,i=e.$el,r=e.params.scrollbar,s=n(r.el);e.params.uniqueNavElements&&"string"==typeof r.el&&s.length>1&&1===i.find(r.el).length&&(s=i.find(r.el));var o=s.find("."+e.params.scrollbar.dragClass);0===o.length&&(o=n('<div class="'+e.params.scrollbar.dragClass+'"></div>'),s.append(o)),a.extend(t,{$el:s,el:s[0],$dragEl:o,dragEl:o[0]}),r.draggable&&t.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},ae={setTransform:function(e,t){var i=this.rtl,r=n(e),s=i?-1:1,a=r.attr("data-swiper-parallax")||"0",o=r.attr("data-swiper-parallax-x"),l=r.attr("data-swiper-parallax-y"),c=r.attr("data-swiper-parallax-scale"),d=r.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=a,l="0"):(l=a,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*s+"%":o*t*s+"px",l=l.indexOf("%")>=0?parseInt(l,10)*t+"%":l*t+"px",null!=d){var u=d-(d-1)*(1-Math.abs(t));r[0].style.opacity=u}if(null==c)r.transform("translate3d("+o+", "+l+", 0px)");else{var h=c-(c-1)*(1-Math.abs(t));r.transform("translate3d("+o+", "+l+", 0px) scale("+h+")")}},setTranslate:function(){var e=this,t=e.$el,i=e.slides,r=e.progress,s=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function(t,i){e.parallax.setTransform(i,r)}),i.each(function(t,i){var a=i.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(a+=Math.ceil(t/2)-r*(s.length-1)),a=Math.min(Math.max(a,-1),1),n(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function(t,i){e.parallax.setTransform(i,a)})})},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function(t,i){var r=n(i),s=parseInt(r.attr("data-swiper-parallax-duration"),10)||e;0===e&&(s=0),r.transition(s)})}},oe={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,n=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-i,2))},onGestureStart:function(e){var t=this,i=t.params.zoom,r=t.zoom,s=r.gesture;if(r.fakeGestureTouched=!1,r.fakeGestureMoved=!1,!o.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;r.fakeGestureTouched=!0,s.scaleStart=oe.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=n(e.target).closest("."+t.params.slideClass),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),s.$imageWrapEl=s.$imageEl.parent("."+i.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl&&s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(!o.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,n.scaleMove=oe.getDistanceBetweenTouches(e)}n.$imageEl&&0!==n.$imageEl.length&&(o.gestures?i.scale=e.scale*i.currentScale:i.scale=n.scaleMove/n.scaleStart*i.currentScale,i.scale>n.maxRatio&&(i.scale=n.maxRatio-1+Math.pow(i.scale-n.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),n.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this,i=t.params.zoom,n=t.zoom,r=n.gesture;if(!o.gestures){if(!n.fakeGestureTouched||!n.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!M.android)return;n.fakeGestureTouched=!1,n.fakeGestureMoved=!1}r.$imageEl&&0!==r.$imageEl.length&&(n.scale=Math.max(Math.min(n.scale,r.maxRatio),i.minRatio),r.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale("+n.scale+")"),n.currentScale=n.scale,n.isScaling=!1,1===n.scale&&(r.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,n=t.image;i.$imageEl&&0!==i.$imageEl.length&&(n.isTouched||(M.android&&e.preventDefault(),n.isTouched=!0,n.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,i=t.zoom,n=i.gesture,r=i.image,s=i.velocity;if(n.$imageEl&&0!==n.$imageEl.length&&(t.allowClick=!1,r.isTouched&&n.$slideEl)){r.isMoved||(r.width=n.$imageEl[0].offsetWidth,r.height=n.$imageEl[0].offsetHeight,r.startX=a.getTranslate(n.$imageWrapEl[0],"x")||0,r.startY=a.getTranslate(n.$imageWrapEl[0],"y")||0,n.slideWidth=n.$slideEl[0].offsetWidth,n.slideHeight=n.$slideEl[0].offsetHeight,n.$imageWrapEl.transition(0),t.rtl&&(r.startX=-r.startX,r.startY=-r.startY));var o=r.width*i.scale,l=r.height*i.scale;if(!(o<n.slideWidth&&l<n.slideHeight)){if(r.minX=Math.min(n.slideWidth/2-o/2,0),r.maxX=-r.minX,r.minY=Math.min(n.slideHeight/2-l/2,0),r.maxY=-r.minY,r.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!r.isMoved&&!i.isScaling){if(t.isHorizontal()&&(Math.floor(r.minX)===Math.floor(r.startX)&&r.touchesCurrent.x<r.touchesStart.x||Math.floor(r.maxX)===Math.floor(r.startX)&&r.touchesCurrent.x>r.touchesStart.x))return void(r.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(r.minY)===Math.floor(r.startY)&&r.touchesCurrent.y<r.touchesStart.y||Math.floor(r.maxY)===Math.floor(r.startY)&&r.touchesCurrent.y>r.touchesStart.y))return void(r.isTouched=!1)}e.preventDefault(),e.stopPropagation(),r.isMoved=!0,r.currentX=r.touchesCurrent.x-r.touchesStart.x+r.startX,r.currentY=r.touchesCurrent.y-r.touchesStart.y+r.startY,r.currentX<r.minX&&(r.currentX=r.minX+1-Math.pow(r.minX-r.currentX+1,.8)),r.currentX>r.maxX&&(r.currentX=r.maxX-1+Math.pow(r.currentX-r.maxX+1,.8)),r.currentY<r.minY&&(r.currentY=r.minY+1-Math.pow(r.minY-r.currentY+1,.8)),r.currentY>r.maxY&&(r.currentY=r.maxY-1+Math.pow(r.currentY-r.maxY+1,.8)),s.prevPositionX||(s.prevPositionX=r.touchesCurrent.x),s.prevPositionY||(s.prevPositionY=r.touchesCurrent.y),s.prevTime||(s.prevTime=Date.now()),s.x=(r.touchesCurrent.x-s.prevPositionX)/(Date.now()-s.prevTime)/2,s.y=(r.touchesCurrent.y-s.prevPositionY)/(Date.now()-s.prevTime)/2,Math.abs(r.touchesCurrent.x-s.prevPositionX)<2&&(s.x=0),Math.abs(r.touchesCurrent.y-s.prevPositionY)<2&&(s.y=0),s.prevPositionX=r.touchesCurrent.x,s.prevPositionY=r.touchesCurrent.y,s.prevTime=Date.now(),n.$imageWrapEl.transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,n=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var r=300,s=300,a=n.x*r,o=i.currentX+a,l=n.y*s,c=i.currentY+l;0!==n.x&&(r=Math.abs((o-i.currentX)/n.x)),0!==n.y&&(s=Math.abs((c-i.currentY)/n.y));var d=Math.max(r,s);i.currentX=o,i.currentY=c;var u=i.width*e.scale,h=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-u/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-h/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(d).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this,t=e.zoom,i=t.gesture;i.$slideEl&&e.previousIndex!==e.activeIndex&&(i.$imageEl&&i.$imageEl.transform("translate3d(0,0,0) scale(1)"),i.$imageWrapEl&&i.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,i.$slideEl=void 0,i.$imageEl=void 0,i.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,n,r,s,a,o,l,c,d,u,h,p,f,m,v,E=this,g=E.zoom,_=E.params.zoom,y=g.gesture,b=g.image;(y.$slideEl||(E.params.virtual&&E.params.virtual.enabled&&E.virtual?y.$slideEl=E.$wrapperEl.children("."+E.params.slideActiveClass):y.$slideEl=E.slides.eq(E.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),y.$imageWrapEl=y.$imageEl.parent("."+_.containerClass)),y.$imageEl&&0!==y.$imageEl.length)&&(y.$slideEl.addClass(""+_.zoomedSlideClass),void 0===b.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,i="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=b.touchesStart.x,i=b.touchesStart.y),g.scale=y.$imageWrapEl.attr("data-swiper-zoom")||_.maxRatio,g.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||_.maxRatio,e?(m=y.$slideEl[0].offsetWidth,v=y.$slideEl[0].offsetHeight,n=y.$slideEl.offset().left+m/2-t,r=y.$slideEl.offset().top+v/2-i,o=y.$imageEl[0].offsetWidth,l=y.$imageEl[0].offsetHeight,c=o*g.scale,d=l*g.scale,p=-(u=Math.min(m/2-c/2,0)),f=-(h=Math.min(v/2-d/2,0)),(s=n*g.scale)<u&&(s=u),s>p&&(s=p),(a=r*g.scale)<h&&(a=h),a>f&&(a=f)):(s=0,a=0),y.$imageWrapEl.transition(300).transform("translate3d("+s+"px, "+a+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+g.scale+")"))},out:function(){var e=this,t=e.zoom,i=e.params.zoom,n=t.gesture;n.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?n.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):n.$slideEl=e.slides.eq(e.activeIndex),n.$imageEl=n.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),n.$imageWrapEl=n.$imageEl.parent("."+i.containerClass)),n.$imageEl&&0!==n.$imageEl.length&&(t.scale=1,t.currentScale=1,n.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),n.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),n.$slideEl.removeClass(""+i.zoomedSlideClass),n.$slideEl=void 0)},enable:function(){var e=this,t=e.zoom;if(!t.enabled){t.enabled=!0;var i=!("touchstart"!==e.touchEvents.start||!o.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},n=!o.passiveListener||{passive:!1,capture:!0},r="."+e.params.slideClass;o.gestures?(e.$wrapperEl.on("gesturestart",r,t.onGestureStart,i),e.$wrapperEl.on("gesturechange",r,t.onGestureChange,i),e.$wrapperEl.on("gestureend",r,t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,r,t.onGestureStart,i),e.$wrapperEl.on(e.touchEvents.move,r,t.onGestureChange,n),e.$wrapperEl.on(e.touchEvents.end,r,t.onGestureEnd,i),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,r,t.onGestureEnd,i)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,n)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){e.zoom.enabled=!1;var i=!("touchstart"!==e.touchEvents.start||!o.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},n=!o.passiveListener||{passive:!1,capture:!0},r="."+e.params.slideClass;o.gestures?(e.$wrapperEl.off("gesturestart",r,t.onGestureStart,i),e.$wrapperEl.off("gesturechange",r,t.onGestureChange,i),e.$wrapperEl.off("gestureend",r,t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,r,t.onGestureStart,i),e.$wrapperEl.off(e.touchEvents.move,r,t.onGestureChange,n),e.$wrapperEl.off(e.touchEvents.end,r,t.onGestureEnd,i),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,r,t.onGestureEnd,i)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,n)}}},le={loadInSlide:function(e,t){void 0===t&&(t=!0);var i=this,r=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var s=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),a=s.find("."+r.elementClass+":not(."+r.loadedClass+"):not(."+r.loadingClass+")");!s.hasClass(r.elementClass)||s.hasClass(r.loadedClass)||s.hasClass(r.loadingClass)||(a=a.add(s[0])),0!==a.length&&a.each(function(e,a){var o=n(a);o.addClass(r.loadingClass);var l=o.attr("data-background"),c=o.attr("data-src"),d=o.attr("data-srcset"),u=o.attr("data-sizes");i.loadImage(o[0],c||l,d,u,!1,function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(d&&(o.attr("srcset",d),o.removeAttr("data-srcset")),u&&(o.attr("sizes",u),o.removeAttr("data-sizes")),c&&(o.attr("src",c),o.removeAttr("data-src"))),o.addClass(r.loadedClass).removeClass(r.loadingClass),s.find("."+r.preloaderClass).remove(),i.params.loop&&t){var e=s.attr("data-swiper-slide-index");if(s.hasClass(i.params.slideDuplicateClass)){var n=i.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(n.index(),!1)}else{var a=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');i.lazy.loadInSlide(a.index(),!1)}}i.emit("lazyImageReady",s[0],o[0]),i.params.autoHeight&&i.updateAutoHeight()}}),i.emit("lazyImageLoad",s[0],o[0])})}},load:function(){var e=this,t=e.$wrapperEl,i=e.params,r=e.slides,s=e.activeIndex,a=e.virtual&&i.virtual.enabled,o=i.lazy,l=i.slidesPerView;function c(e){if(a){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(r[e])return!0;return!1}function d(e){return a?n(e).attr("data-swiper-slide-index"):n(e).index()}if("auto"===l&&(l=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each(function(t,i){var r=a?n(i).attr("data-swiper-slide-index"):n(i).index();e.lazy.loadInSlide(r)});else if(l>1)for(var u=s;u<s+l;u+=1)c(u)&&e.lazy.loadInSlide(u);else e.lazy.loadInSlide(s);if(o.loadPrevNext)if(l>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var h=o.loadPrevNextAmount,p=l,f=Math.min(s+p+Math.max(h,p),r.length),m=Math.max(s-Math.max(p,h),0),v=s+l;v<f;v+=1)c(v)&&e.lazy.loadInSlide(v);for(var E=m;E<s;E+=1)c(E)&&e.lazy.loadInSlide(E)}else{var g=t.children("."+i.slideNextClass);g.length>0&&e.lazy.loadInSlide(d(g));var _=t.children("."+i.slidePrevClass);_.length>0&&e.lazy.loadInSlide(d(_))}}},ce={LinearSpline:function(e,t){var i,n,r,s,a,o=function(e,t){for(n=-1,i=e.length;i-n>1;)e[r=i+n>>1]<=t?n=r:i=r;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(a=o(this.x,e),s=a-1,(e-this.x[s])*(this.y[a]-this.y[s])/(this.x[a]-this.x[s])+this.y[s]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new ce.LinearSpline(t.slidesGrid,e.slidesGrid):new ce.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,n,r=this,s=r.controller.control;function a(e){var t=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(e),n=-r.controller.spline.interpolate(-t)),n&&"container"!==r.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(r.maxTranslate()-r.minTranslate()),n=(t-r.minTranslate())*i+e.minTranslate()),r.params.controller.inverse&&(n=e.maxTranslate()-n),e.updateProgress(n),e.setTranslate(n,r),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(s))for(var o=0;o<s.length;o+=1)s[o]!==t&&s[o]instanceof z&&a(s[o]);else s instanceof z&&t!==s&&a(s)},setTransition:function(e,t){var i,n=this,r=n.controller.control;function s(t){t.setTransition(e,n),0!==e&&(t.transitionStart(),t.params.autoHeight&&a.nextTick(function(){t.updateAutoHeight()}),t.$wrapperEl.transitionEnd(function(){r&&(t.params.loop&&"slide"===n.params.controller.by&&t.loopFix(),t.transitionEnd())}))}if(Array.isArray(r))for(i=0;i<r.length;i+=1)r[i]!==t&&r[i]instanceof z&&s(r[i]);else r instanceof z&&t!==r&&s(r)}},de={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this,i=t.params.a11y;if(13===e.keyCode){var r=n(e.target);t.navigation&&t.navigation.$nextEl&&r.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(i.lastSlideMessage):t.a11y.notify(i.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&r.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(i.firstSlideMessage):t.a11y.notify(i.prevSlideMessage)),t.pagination&&r.is("."+t.params.pagination.bulletClass)&&r[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop&&e.navigation){var t=e.navigation,i=t.$nextEl,n=t.$prevEl;n&&n.length>0&&(e.isBeginning?e.a11y.disableEl(n):e.a11y.enableEl(n)),i&&i.length>0&&(e.isEnd?e.a11y.disableEl(i):e.a11y.enableEl(i))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each(function(i,r){var s=n(r);e.a11y.makeElFocusable(s),e.a11y.addElRole(s,"button"),e.a11y.addElLabel(s,t.paginationBulletMessage.replace(/\{\{index\}\}/,s.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,i,n=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(i=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,n.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),i&&(e.a11y.makeElFocusable(i),e.a11y.addElRole(i,"button"),e.a11y.addElLabel(i,n.prevSlideMessage),i.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,i=this;i.a11y.liveRegion&&i.a11y.liveRegion.length>0&&i.a11y.liveRegion.remove(),i.navigation&&i.navigation.$nextEl&&(e=i.navigation.$nextEl),i.navigation&&i.navigation.$prevEl&&(t=i.navigation.$prevEl),e&&e.off("keydown",i.a11y.onEnterKey),t&&t.off("keydown",i.a11y.onEnterKey),i.pagination&&i.params.pagination.clickable&&i.pagination.bullets&&i.pagination.bullets.length&&i.pagination.$el.off("keydown","."+i.params.pagination.bulletClass,i.a11y.onEnterKey)}},ue={init:function(){var e=this;if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var i=e.history;i.initialized=!0,i.paths=ue.getPathValues(),(i.paths.key||i.paths.value)&&(i.scrollToSlide(0,i.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var e=this;e.history.paths=ue.getPathValues(),e.history.scrollToSlide(e.params.speed,e.history.paths.value,!1)},getPathValues:function(){var e=t.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),i=e.length;return{key:e[i-2],value:e[i-1]}},setHistory:function(e,i){var n=this;if(n.history.initialized&&n.params.history.enabled){var r=n.slides.eq(i),s=ue.slugify(r.attr("data-history"));t.location.pathname.includes(e)||(s=e+"/"+s);var a=t.history.state;a&&a.value===s||(n.params.history.replaceState?t.history.replaceState({value:s},null,s):t.history.pushState({value:s},null,s))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){var n=this;if(t)for(var r=0,s=n.slides.length;r<s;r+=1){var a=n.slides.eq(r);if(ue.slugify(a.attr("data-history"))===t&&!a.hasClass(n.params.slideDuplicateClass)){var o=a.index();n.slideTo(o,e,i)}}else n.slideTo(0,e,i)}},he={onHashCange:function(){var t=this,i=e.location.hash.replace("#","");if(i!==t.slides.eq(t.activeIndex).attr("data-hash")){var n=t.$wrapperEl.children("."+t.params.slideClass+'[data-hash="'+i+'"]').index();if(void 0===n)return;t.slideTo(n)}},setHash:function(){var i=this;if(i.hashNavigation.initialized&&i.params.hashNavigation.enabled)if(i.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+i.slides.eq(i.activeIndex).attr("data-hash")||"");else{var n=i.slides.eq(i.activeIndex),r=n.attr("data-hash")||n.attr("data-history");e.location.hash=r||""}},init:function(){var i=this;if(!(!i.params.hashNavigation.enabled||i.params.history&&i.params.history.enabled)){i.hashNavigation.initialized=!0;var r=e.location.hash.replace("#","");if(r)for(var s=0,a=i.slides.length;s<a;s+=1){var o=i.slides.eq(s);if((o.attr("data-hash")||o.attr("data-history"))===r&&!o.hasClass(i.params.slideDuplicateClass)){var l=o.index();i.slideTo(l,0,i.params.runCallbacksOnInit,!0)}}i.params.hashNavigation.watchState&&n(t).on("hashchange",i.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&n(t).off("hashchange",this.hashNavigation.onHashCange)}},pe={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=a.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running&&e.autoplay.run()},i)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}},fe={setTranslate:function(){for(var e=this,t=e.slides,i=0;i<t.length;i+=1){var n=e.slides.eq(i),r=-n[0].swiperSlideOffset;e.params.virtualTranslate||(r-=e.translate);var s=0;e.isHorizontal()||(s=r,r=0);var a=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(n[0].progress),0):1+Math.min(Math.max(n[0].progress,-1),0);n.css({opacity:a}).transform("translate3d("+r+"px, "+s+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,n=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.transitionEnd(function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)n.trigger(e[i])}})}}},me={setTranslate:function(){var e,t=this,i=t.$el,r=t.$wrapperEl,s=t.slides,a=t.width,o=t.height,l=t.rtlTranslate,c=t.size,d=t.params.cubeEffect,u=t.isHorizontal(),h=t.virtual&&t.params.virtual.enabled,p=0;d.shadow&&(u?(0===(e=r.find(".swiper-cube-shadow")).length&&(e=n('<div class="swiper-cube-shadow"></div>'),r.append(e)),e.css({height:a+"px"})):0===(e=i.find(".swiper-cube-shadow")).length&&(e=n('<div class="swiper-cube-shadow"></div>'),i.append(e)));for(var f=0;f<s.length;f+=1){var m=s.eq(f),v=f;h&&(v=parseInt(m.attr("data-swiper-slide-index"),10));var E=90*v,g=Math.floor(E/360);l&&(E=-E,g=Math.floor(-E/360));var _=Math.max(Math.min(m[0].progress,1),-1),y=0,b=0,S=0;v%4==0?(y=4*-g*c,S=0):(v-1)%4==0?(y=0,S=4*-g*c):(v-2)%4==0?(y=c+4*g*c,S=c):(v-3)%4==0&&(y=-c,S=3*c+4*c*g),l&&(y=-y),u||(b=y,y=0);var T="rotateX("+(u?0:-E)+"deg) rotateY("+(u?E:0)+"deg) translate3d("+y+"px, "+b+"px, "+S+"px)";if(_<=1&&_>-1&&(p=90*v+90*_,l&&(p=90*-v-90*_)),m.transform(T),d.slideShadows){var R=u?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),O=u?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===R.length&&(R=n('<div class="swiper-slide-shadow-'+(u?"left":"top")+'"></div>'),m.append(R)),0===O.length&&(O=n('<div class="swiper-slide-shadow-'+(u?"right":"bottom")+'"></div>'),m.append(O)),R.length&&(R[0].style.opacity=Math.max(-_,0)),O.length&&(O[0].style.opacity=Math.max(_,0))}}if(r.css({"-webkit-transform-origin":"50% 50% -"+c/2+"px","-moz-transform-origin":"50% 50% -"+c/2+"px","-ms-transform-origin":"50% 50% -"+c/2+"px","transform-origin":"50% 50% -"+c/2+"px"}),d.shadow)if(u)e.transform("translate3d(0px, "+(a/2+d.shadowOffset)+"px, "+-a/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var C=Math.abs(p)-90*Math.floor(Math.abs(p)/90),P=1.5-(Math.sin(2*C*Math.PI/360)/2+Math.cos(2*C*Math.PI/360)/2),w=d.shadowScale,A=d.shadowScale/P,I=d.shadowOffset;e.transform("scale3d("+w+", 1, "+A+") translate3d(0px, "+(o/2+I)+"px, "+-o/2/A+"px) rotateX(-90deg)")}var x=W.isSafari||W.isUiWebView?-c/2:0;r.transform("translate3d(0px,0,"+x+"px) rotateX("+(t.isHorizontal()?0:p)+"deg) rotateY("+(t.isHorizontal()?-p:0)+"deg)")},setTransition:function(e){var t=this,i=t.$el;t.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.cubeEffect.shadow&&!t.isHorizontal()&&i.find(".swiper-cube-shadow").transition(e)}},ve={setTranslate:function(){for(var e=this,t=e.slides,i=e.rtlTranslate,r=0;r<t.length;r+=1){var s=t.eq(r),a=s[0].progress;e.params.flipEffect.limitRotation&&(a=Math.max(Math.min(s[0].progress,1),-1));var o=-180*a,l=0,c=-s[0].swiperSlideOffset,d=0;if(e.isHorizontal()?i&&(o=-o):(d=c,c=0,l=-o,o=0),s[0].style.zIndex=-Math.abs(Math.round(a))+t.length,e.params.flipEffect.slideShadows){var u=e.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),h=e.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===u.length&&(u=n('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),s.append(u)),0===h.length&&(h=n('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),s.append(h)),u.length&&(u[0].style.opacity=Math.max(-a,0)),h.length&&(h[0].style.opacity=Math.max(a,0))}s.transform("translate3d("+c+"px, "+d+"px, 0px) rotateX("+l+"deg) rotateY("+o+"deg)")}},setTransition:function(e){var t=this,i=t.slides,n=t.activeIndex,r=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var s=!1;i.eq(n).transitionEnd(function(){if(!s&&t&&!t.destroyed){s=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)r.trigger(e[i])}})}}},Ee={setTranslate:function(){for(var e=this,t=e.width,i=e.height,r=e.slides,s=e.$wrapperEl,a=e.slidesSizesGrid,l=e.params.coverflowEffect,c=e.isHorizontal(),d=e.translate,u=c?t/2-d:i/2-d,h=c?l.rotate:-l.rotate,p=l.depth,f=0,m=r.length;f<m;f+=1){var v=r.eq(f),E=a[f],g=(u-v[0].swiperSlideOffset-E/2)/E*l.modifier,_=c?h*g:0,y=c?0:h*g,b=-p*Math.abs(g),S=l.stretch;"string"==typeof S&&-1!==S.indexOf("%")&&(S=parseFloat(l.stretch)/100*E);var T=c?0:S*g,R=c?S*g:0;Math.abs(R)<.001&&(R=0),Math.abs(T)<.001&&(T=0),Math.abs(b)<.001&&(b=0),Math.abs(_)<.001&&(_=0),Math.abs(y)<.001&&(y=0);var O="translate3d("+R+"px,"+T+"px,"+b+"px)  rotateX("+y+"deg) rotateY("+_+"deg)";if(v.transform(O),v[0].style.zIndex=1-Math.abs(Math.round(g)),l.slideShadows){var C=c?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),P=c?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===C.length&&(C=n('<div class="swiper-slide-shadow-'+(c?"left":"top")+'"></div>'),v.append(C)),0===P.length&&(P=n('<div class="swiper-slide-shadow-'+(c?"right":"bottom")+'"></div>'),v.append(P)),C.length&&(C[0].style.opacity=g>0?g:0),P.length&&(P[0].style.opacity=-g>0?-g:0)}}(o.pointerEvents||o.prefixedPointerEvents)&&(s[0].style.perspectiveOrigin=u+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},ge={init:function(){var e=this,t=e.params.thumbs,i=e.constructor;t.swiper instanceof i?(e.thumbs.swiper=t.swiper,a.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),a.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):a.isObject(t.swiper)&&(e.thumbs.swiper=new i(a.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var i=t.clickedIndex,r=t.clickedSlide;if(!(r&&n(r).hasClass(e.params.thumbs.slideThumbActiveClass)||null==i)){var s;if(s=t.params.loop?parseInt(n(t.clickedSlide).attr("data-swiper-slide-index"),10):i,e.params.loop){var a=e.activeIndex;e.slides.eq(a).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,a=e.activeIndex);var o=e.slides.eq(a).prevAll('[data-swiper-slide-index="'+s+'"]').eq(0).index(),l=e.slides.eq(a).nextAll('[data-swiper-slide-index="'+s+'"]').eq(0).index();s=void 0===o?l:void 0===l?o:l-a<a-o?l:o}e.slideTo(s)}}},update:function(e){var t=this,i=t.thumbs.swiper;if(i){var n="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView,r=t.params.thumbs.autoScrollOffset,s=r&&!i.params.loop;if(t.realIndex!==i.realIndex||s){var a,o,l=i.activeIndex;if(i.params.loop){i.slides.eq(l).hasClass(i.params.slideDuplicateClass)&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,l=i.activeIndex);var c=i.slides.eq(l).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),d=i.slides.eq(l).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();a=void 0===c?d:void 0===d?c:d-l==l-c?l:d-l<l-c?d:c,o=t.activeIndex>t.previousIndex?"next":"prev"}else o=(a=t.realIndex)>t.previousIndex?"next":"prev";s&&(a+="next"===o?r:-1*r),i.visibleSlidesIndexes&&i.visibleSlidesIndexes.indexOf(a)<0&&(i.params.centeredSlides?a=a>l?a-Math.floor(n/2)+1:a+Math.floor(n/2)-1:a>l&&(a=a-n+1),i.slideTo(a,e?0:void 0))}var u=1,h=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(u=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),i.slides.removeClass(h),i.params.loop||i.params.virtual&&i.params.virtual.enabled)for(var p=0;p<u;p+=1)i.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+p)+'"]').addClass(h);else for(var f=0;f<u;f+=1)i.slides.eq(t.realIndex+f).addClass(h)}}},_e=[q,Y,X,G,J,Z,te,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var e=this;a.extend(e,{mousewheel:{enabled:!1,enable:ie.enable.bind(e),disable:ie.disable.bind(e),handle:ie.handle.bind(e),handleMouseEnter:ie.handleMouseEnter.bind(e),handleMouseLeave:ie.handleMouseLeave.bind(e),animateSlider:ie.animateSlider.bind(e),releaseScroll:ie.releaseScroll.bind(e),lastScrollTime:a.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init:function(){var e=this;!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(){var e=this;e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var e=this;a.extend(e,{navigation:{init:ne.init.bind(e),update:ne.update.bind(e),destroy:ne.destroy.bind(e),onNextClick:ne.onNextClick.bind(e),onPrevClick:ne.onPrevClick.bind(e)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,i=this,r=i.navigation,s=r.$nextEl,a=r.$prevEl;!i.params.navigation.hideOnClick||n(e.target).is(a)||n(e.target).is(s)||(s?t=s.hasClass(i.params.navigation.hiddenClass):a&&(t=a.hasClass(i.params.navigation.hiddenClass)),!0===t?i.emit("navigationShow",i):i.emit("navigationHide",i),s&&s.toggleClass(i.params.navigation.hiddenClass),a&&a.toggleClass(i.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;a.extend(e,{pagination:{init:re.init.bind(e),render:re.render.bind(e),update:re.update.bind(e),destroy:re.destroy.bind(e),dynamicBulletIndex:0}})},on:{init:function(){var e=this;e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(){var e=this;(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){var e=this;e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(){var e=this;e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){var t=this;t.params.pagination.el&&t.params.pagination.hideOnClick&&t.pagination.$el.length>0&&!n(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow",t):t.emit("paginationHide",t),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;a.extend(e,{scrollbar:{init:se.init.bind(e),destroy:se.destroy.bind(e),updateSize:se.updateSize.bind(e),setTranslate:se.setTranslate.bind(e),setTransition:se.setTransition.bind(e),enableDraggable:se.enableDraggable.bind(e),disableDraggable:se.disableDraggable.bind(e),setDragPosition:se.setDragPosition.bind(e),getPointerPosition:se.getPointerPosition.bind(e),onDragStart:se.onDragStart.bind(e),onDragMove:se.onDragMove.bind(e),onDragEnd:se.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){var e=this;e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){var e=this;a.extend(e,{parallax:{setTransform:ae.setTransform.bind(e),setTranslate:ae.setTranslate.bind(e),setTransition:ae.setTransition.bind(e)}})},on:{beforeInit:function(){var e=this;e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(i){t[i]=oe[i].bind(e)}),a.extend(e,{zoom:t});var i=1;Object.defineProperty(e.zoom,"scale",{get:function(){return i},set:function(t){if(i!==t){var n=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,r=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",t,n,r)}i=t}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){var t=this;t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&t.zoom.toggle(e)},transitionEnd:function(){var e=this;e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(){var e=this;e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){var e=this;a.extend(e,{lazy:{initialImageLoaded:!1,load:le.load.bind(e),loadInSlide:le.loadInSlide.bind(e)}})},on:{beforeInit:function(){var e=this;e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(){var e=this;e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&e.lazy.load()},scroll:function(){var e=this;e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var e=this;e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(){var e=this;e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(){var e=this;e.params.lazy.enabled&&e.params.cssMode&&e.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var e=this;a.extend(e,{controller:{control:e.params.controller.control,getInterpolateFunction:ce.getInterpolateFunction.bind(e),setTranslate:ce.setTranslate.bind(e),setTransition:ce.setTransition.bind(e)}})},on:{update:function(){var e=this;e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(){var e=this;e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(){var e=this;e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;a.extend(e,{a11y:{liveRegion:n('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(de).forEach(function(t){e.a11y[t]=de[t].bind(e)})},on:{init:function(){var e=this;e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var e=this;a.extend(e,{history:{init:ue.init.bind(e),setHistory:ue.setHistory.bind(e),setHistoryPopState:ue.setHistoryPopState.bind(e),scrollToSlide:ue.scrollToSlide.bind(e),destroy:ue.destroy.bind(e)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){var e=this;e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(){var e=this;e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var e=this;a.extend(e,{hashNavigation:{initialized:!1,init:he.init.bind(e),destroy:he.destroy.bind(e),setHash:he.setHash.bind(e),onHashCange:he.onHashCange.bind(e)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()},slideChange:function(){var e=this;e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var e=this;a.extend(e,{autoplay:{running:!1,paused:!1,run:pe.run.bind(e),start:pe.start.bind(e),stop:pe.stop.bind(e),pause:pe.pause.bind(e),onVisibilityChange:function(){"hidden"===document.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===document.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(t){e&&!e.destroyed&&e.$wrapperEl&&t.target===this&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}}})},on:{init:function(){var e=this;e.params.autoplay.enabled&&(e.autoplay.start(),document.addEventListener("visibilitychange",e.autoplay.onVisibilityChange))},beforeTransitionStart:function(e,t){var i=this;i.autoplay.running&&(t||!i.params.autoplay.disableOnInteraction?i.autoplay.pause(e):i.autoplay.stop())},sliderFirstMove:function(){var e=this;e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(){var e=this;e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(){var e=this;e.autoplay.running&&e.autoplay.stop(),document.removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){var e=this;a.extend(e,{fadeEffect:{setTranslate:fe.setTranslate.bind(e),setTransition:fe.setTransition.bind(e)}})},on:{beforeInit:function(){var e=this;if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};a.extend(e.params,t),a.extend(e.originalParams,t)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){var e=this;a.extend(e,{cubeEffect:{setTranslate:me.setTranslate.bind(e),setTransition:me.setTransition.bind(e)}})},on:{beforeInit:function(){var e=this;if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};a.extend(e.params,t),a.extend(e.originalParams,t)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){var e=this;a.extend(e,{flipEffect:{setTranslate:ve.setTranslate.bind(e),setTransition:ve.setTransition.bind(e)}})},on:{beforeInit:function(){var e=this;if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};a.extend(e.params,t),a.extend(e.originalParams,t)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){var e=this;a.extend(e,{coverflowEffect:{setTranslate:Ee.setTranslate.bind(e),setTransition:Ee.setTransition.bind(e)}})},on:{beforeInit:function(){var e=this;"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){var e=this;a.extend(e,{thumbs:{swiper:null,init:ge.init.bind(e),update:ge.update.bind(e),onThumbClick:ge.onThumbClick.bind(e)}})},on:{beforeInit:function(){var e=this,t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===z.use&&(z.use=z.Class.use,z.installModule=z.Class.installModule),z.use(_e),z}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ejs=e()}}(function(){return function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return r(i||e)},d,d.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";var n=e("fs"),r=e("path"),s=e("./utils"),a=!1,o=e("../package.json").version,l="locals",c=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],d=c.concat("cache"),u=/^\uFEFF/;function h(e,t){var r,s,a=t.views,o=/^[A-Za-z]+:\\|^\//.exec(e);if(o&&o.length)r=i.resolveInclude(e.replace(/^\/*/,""),t.root||"/",!0);else if(t.filename&&(s=i.resolveInclude(e,t.filename),n.existsSync(s)&&(r=s)),r||Array.isArray(a)&&a.some(function(t){return s=i.resolveInclude(e,t,!0),n.existsSync(s)})&&(r=s),!r)throw new Error('Could not find the include file "'+t.escapeFunction(e)+'"');return r}function p(e,t){var n,r=e.filename,s=arguments.length>1;if(e.cache){if(!r)throw new Error("cache option requires a filename");if(n=i.cache.get(r))return n;s||(t=m(r).toString().replace(u,""))}else if(!s){if(!r)throw new Error("Internal EJS error: no file name or template provided");t=m(r).toString().replace(u,"")}return n=i.compile(t,e),e.cache&&i.cache.set(r,n),n}function f(e,t,n){var r;if(!n){if("function"==typeof i.promiseImpl)return new i.promiseImpl(function(i,n){try{i(r=p(e)(t))}catch(s){n(s)}});throw new Error("Please provide a callback function")}try{r=p(e)(t)}catch(s){return n(s)}n(null,r)}function m(e){return i.fileLoader(e)}function v(e,t,i,n,r){var s=t.split("\n"),a=Math.max(n-3,0),o=Math.min(s.length,n+3),l=r(i),c=s.slice(a,o).map(function(e,t){var i=t+a+1;return(i==n?" >> ":"    ")+i+"| "+e}).join("\n");throw e.path=l,e.message=(l||"ejs")+":"+n+"\n"+c+"\n\n"+e.message,e}function E(e){return e.replace(/;(\s*$)/,"$1")}function g(e,t){t=t||{};var n={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],n.client=t.client||!1,n.escapeFunction=t.escape||t.escapeFunction||s.escapeXML,n.compileDebug=!1!==t.compileDebug,n.debug=!!t.debug,n.filename=t.filename,n.openDelimiter=t.openDelimiter||i.openDelimiter||"<",n.closeDelimiter=t.closeDelimiter||i.closeDelimiter||">",n.delimiter=t.delimiter||i.delimiter||"%",n.strict=t.strict||!1,n.context=t.context,n.cache=t.cache||!1,n.rmWhitespace=t.rmWhitespace,n.root=t.root,n.outputFunctionName=t.outputFunctionName,n.localsName=t.localsName||i.localsName||l,n.views=t.views,n.async=t.async,n.strict?n._with=!1:n._with=void 0===t._with||t._with,this.opts=n,this.regex=this.createRegex()}i.cache=s.cache,i.fileLoader=n.readFileSync,i.localsName=l,i.promiseImpl=new Function("return this;")().Promise,i.resolveInclude=function(e,t,i){var n=r.dirname,s=r.extname,a=(0,r.resolve)(i?t:n(t),e);return s(e)||(a+=".ejs"),a},i.compile=function(e,t){return t&&t.scope&&(a||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),a=!0),t.context||(t.context=t.scope),delete t.scope),new g(e,t).compile()},i.render=function(e,t,i){var n=t||{},r=i||{};return 2==arguments.length&&s.shallowCopyFromList(r,n,c),p(r,e)(n)},i.renderFile=function(){var e,t,i,n=Array.prototype.slice.call(arguments),r=n.shift(),a={filename:r};return"function"==typeof arguments[arguments.length-1]&&(e=n.pop()),n.length?(t=n.shift(),n.length?s.shallowCopy(a,n.pop()):(t.settings&&(t.settings.views&&(a.views=t.settings.views),t.settings["view cache"]&&(a.cache=!0),(i=t.settings["view options"])&&s.shallowCopy(a,i)),s.shallowCopyFromList(a,t,d)),a.filename=r):t={},f(a,t,e)},i.Template=g,i.clearCache=function(){i.cache.reset()},g.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},g.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",t=s.escapeRegExpChars(this.opts.delimiter),i=s.escapeRegExpChars(this.opts.openDelimiter),n=s.escapeRegExpChars(this.opts.closeDelimiter);return e=e.replace(/%/g,t).replace(/</g,i).replace(/>/g,n),new RegExp(e)},compile:function(){var e,t,i,n=this.opts,r="",a="",o=n.escapeFunction;this.source||(this.generateSource(),r+="  var __output = [], __append = __output.push.bind(__output);\n",n.outputFunctionName&&(r+="  var "+n.outputFunctionName+" = __append;\n"),!1!==n._with&&(r+="  with ("+n.localsName+" || {}) {\n",a+="  }\n"),a+='  return __output.join("");\n',this.source=r+this.source+a),e=n.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(n.filename?JSON.stringify(n.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,n.client&&(e="escapeFn = escapeFn || "+o.toString()+";\n"+e,n.compileDebug&&(e="rethrow = rethrow || "+v.toString()+";\n"+e)),n.strict&&(e='"use strict";\n'+e),n.debug&&console.log(e);try{if(n.async)try{i=new Function("return (async function(){}).constructor;")()}catch(c){throw c instanceof SyntaxError?new Error("This environment does not support async/await"):c}else i=Function;t=new i(n.localsName+", escapeFn, include, rethrow",e)}catch(c){throw c instanceof SyntaxError&&(n.filename&&(c.message+=" in "+n.filename),c.message+=" while compiling ejs\n\n",c.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",c.message+="https://github.com/RyanZim/EJS-Lint",c.async||(c.message+="\n",c.message+="Or, if you meant to create an async function, pass async: true as an option.")),c}if(n.client)return t.dependencies=this.dependencies,t;var l=function(e){return t.apply(n.context,[e||{},o,function(t,i){var r=s.shallowCopy({},e);return i&&(r=s.shallowCopy(r,i)),function(e,t){var i=s.shallowCopy({},t);return i.filename=h(e,i),p(i)}(t,n)(r)},v])};return l.dependencies=this.dependencies,l},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var e=this,t=this.parseTemplateText(),n=this.opts.delimiter,r=this.opts.openDelimiter,a=this.opts.closeDelimiter;t&&t.length&&t.forEach(function(o,l){var c,d,p,f,v,E;if(0===o.indexOf(r+n)&&0!==o.indexOf(r+n+n)&&(d=t[l+2])!=n+a&&d!="-"+n+a&&d!="_"+n+a)throw new Error('Could not find matching close tag for "'+o+'".');if((p=o.match(/^\s*include\s+(\S+)/))&&(c=t[l-1])&&(c==r+n||c==r+n+"-"||c==r+n+"_"))return f=s.shallowCopy({},e.opts),v=function(e,t){var i,n,r=s.shallowCopy({},t);n=m(i=h(e,r)).toString().replace(u,""),r.filename=i;var a=new g(n,r);return a.generateSource(),{source:a.source,filename:i,template:n}}(p[1],f),E=e.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(v.template)+"\n      , __filename = "+JSON.stringify(v.filename)+";\n      try {\n"+v.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+v.source+"    ; }).call(this)\n",e.source+=E,void e.dependencies.push(i.resolveInclude(p[1],f.filename));e.scanLine(o)})},parseTemplateText:function(){for(var e,t=this.templateText,i=this.regex,n=i.exec(t),r=[];n;)0!==(e=n.index)&&(r.push(t.substring(0,e)),t=t.slice(e)),r.push(n[0]),t=t.slice(n[0].length),n=i.exec(t);return t&&r.push(t),r},_addOutput:function(e){if(this.truncate&&(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!e)return e;e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+e+'")\n'},scanLine:function(e){var t,i=this.opts.delimiter,n=this.opts.openDelimiter,r=this.opts.closeDelimiter;switch(t=e.split("\n").length-1,e){case n+i:case n+i+"_":this.mode=g.modes.EVAL;break;case n+i+"=":this.mode=g.modes.ESCAPED;break;case n+i+"-":this.mode=g.modes.RAW;break;case n+i+"#":this.mode=g.modes.COMMENT;break;case n+i+i:this.mode=g.modes.LITERAL,this.source+='    ; __append("'+e.replace(n+i+i,n+i)+'")\n';break;case i+i+r:this.mode=g.modes.LITERAL,this.source+='    ; __append("'+e.replace(i+i+r,i+r)+'")\n';break;case i+r:case"-"+i+r:case"_"+i+r:this.mode==g.modes.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case g.modes.EVAL:case g.modes.ESCAPED:case g.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case g.modes.EVAL:this.source+="    ; "+e+"\n";break;case g.modes.ESCAPED:this.source+="    ; __append(escapeFn("+E(e)+"))\n";break;case g.modes.RAW:this.source+="    ; __append("+E(e)+")\n";break;case g.modes.COMMENT:break;case g.modes.LITERAL:this._addOutput(e)}}else this._addOutput(e)}this.opts.compileDebug&&t&&(this.currentLine+=t,this.source+="    ; __line = "+this.currentLine+"\n")}},i.escapeXML=s.escapeXML,i.__express=i.renderFile,e.extensions&&(e.extensions[".ejs"]=function(e,t){var n=t||e.filename,r={filename:n,client:!0},s=m(n).toString(),a=i.compile(s,r);e._compile("module.exports = "+a.toString()+";",n)}),i.VERSION=o,i.name="ejs","undefined"!=typeof window&&(window.ejs=i)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(e,t,i){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;i.escapeRegExpChars=function(e){return e?String(e).replace(n,"\\$&"):""};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},s=/[&<>'"]/g;function a(e){return r[e]||e}i.escapeXML=function(e){return null==e?"":String(e).replace(s,a)},i.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},i.shallowCopy=function(e,t){for(var i in t=t||{})e[i]=t[i];return e},i.shallowCopyFromList=function(e,t,i){for(var n=0;n<i.length;n++){var r=i[n];void 0!==t[r]&&(e[r]=t[r])}return e},i.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},remove:function(e){delete this._data[e]},reset:function(){this._data={}}}},{}],3:[function(e,t,i){},{}],4:[function(e,t,i){(function(e){function t(e,t){for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return n.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}i.resolve=function(){for(var i="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var a=r>=0?arguments[r]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,n="/"===a.charAt(0))}return(n?"/":"")+(i=t(s(i.split("/"),function(e){return!!e}),!n).join("/"))||"."},i.normalize=function(e){var n=i.isAbsolute(e),r="/"===a(e,-1);return(e=t(s(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&r&&(e+="/"),(n?"/":"")+e},i.isAbsolute=function(e){return"/"===e.charAt(0)},i.join=function(){var e=Array.prototype.slice.call(arguments,0);return i.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},i.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=i.resolve(e).substr(1),t=i.resolve(t).substr(1);for(var r=n(e.split("/")),s=n(t.split("/")),a=Math.min(r.length,s.length),o=a,l=0;l<a;l++)if(r[l]!==s[l]){o=l;break}var c=[];for(l=o;l<r.length;l++)c.push("..");return(c=c.concat(s.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(e){var t=r(e),i=t[0],n=t[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(e,t){var i=r(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},i.extname=function(e){return r(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,e("_process"))},{_process:5}],5:[function(e,t,i){var n,r,s=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,d=[],u=!1,h=-1;function p(){u&&c&&(u=!1,c.length?d=c.concat(d):h=-1,d.length&&f())}function f(){if(!u){var e=l(p);u=!0;for(var t=d.length;t;){for(c=d,d=[];++h<t;)c&&c[h].run();h=-1,t=d.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new m(e,t)),1!==d.length||u||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],6:[function(e,t,i){t.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.6.1",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.1.1",eslint:"^4.14.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.16",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^5.0.5","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"jake test",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)});